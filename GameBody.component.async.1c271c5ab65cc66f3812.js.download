"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[5676],{29850:(e,t,a)=>{a.d(t,{Z:()=>i});var r,s,n=a(87363);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o.apply(this,arguments)}const i=e=>n.createElement("svg",o({fill:"none",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=n.createElement("rect",{width:"100%",height:"100%",rx:4})),s||(s=n.createElement("path",{fill:"currentColor",d:"M5.456 7.846 3.95 9.353l4.02 4.02 1.507-1.507L14.5 6.84l-1.507-1.507-5.025 5.025z"})))},30182:(e,t,a)=>{a.d(t,{N:()=>r});var r=function(){return"undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement}},99815:(e,t,a)=>{a.d(t,{H:()=>o});var r=a(87363),s=a.n(r),n=a(86976);const o=(0,n.Z)({resolved:{},chunkName:()=>"HorizontalAccentThumbGameInfo.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(5123).then(a.bind(a,57112)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 57112}},{resolveComponent:e=>e.HorizontalAccentThumbGameInfo})},82521:(e,t,a)=>{a.d(t,{P:()=>o});var r=a(87363),s=a.n(r),n=a(86976);const o=(0,n.Z)({resolved:{},chunkName:()=>"VerticalAccentThumbGameInfo.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(8414).then(a.bind(a,36465)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 36465}},{resolveComponent:e=>e.VerticalAccentThumbGameInfo})},73832:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(87363),s=a.n(r),n=a(86976);const o=(0,n.Z)({resolved:{},chunkName:()=>"AuthDialog.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>Promise.all([a.e(1036),a.e(8946)]).then(a.bind(a,31387)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 31387}},{ssr:!1}),i=o},89193:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(87363),s=a.n(r),n=a(86976);const o=(0,n.Z)({resolved:{},chunkName:()=>"DebugPanel.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>Promise.all([a.e(6122),a.e(7821),a.e(7671)]).then(a.bind(a,22112)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 22112}},{ssr:!1}),i=o},86551:(e,t,a)=>{a.d(t,{i:()=>o});var r=a(87363),s=a.n(r),n=a(86976);const o=(0,n.Z)({resolved:{},chunkName:()=>"ExpandingThumb.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(9154).then(a.bind(a,89574)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 89574}},{resolveComponent:e=>e.ExpandingThumb})},83919:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(87363),s=a.n(r),n=a(86976);const o=(0,n.Z)({resolved:{},chunkName:()=>"Gallery.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>Promise.all([a.e(6122),a.e(9427)]).then(a.bind(a,74339)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 74339}},{ssr:!1}),i=o},39010:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(87363),s=a.n(r),n=a(86976);const o=(0,n.Z)({resolved:{},chunkName:()=>"PassportRegistrationChecker.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(6952).then(a.bind(a,94642)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 94642}},{ssr:!1}),i=o},60136:(e,t,a)=>{a.d(t,{D:()=>o});var r=a(87363),s=a.n(r),n=a(86976);const o=(0,n.Z)({resolved:{},chunkName:()=>"ShortcutDrawer.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>Promise.all([a.e(6122),a.e(5543)]).then(a.bind(a,85146)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 85146}},{resolveComponent:e=>e.ShortcutDrawer})},48225:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(87363),s=a.n(r),n=a(86976);const o=(0,n.Z)({resolved:{},chunkName:()=>"BalanceRefilled.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(4521).then(a.bind(a,13634)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 13634}},{ssr:!1}),i=o},92999:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(87363),s=a.n(r),n=a(86976);const o=(0,n.Z)({resolved:{},chunkName:()=>"Feedback.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>Promise.all([a.e(6122),a.e(7110)]).then(a.bind(a,14643)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 14643}},{ssr:!1}),i=o},43692:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(87363),s=a.n(r),n=a(86976);const o=(0,n.Z)({resolved:{},chunkName:()=>"ShowMore.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(3670).then(a.bind(a,68274)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 68274}},{}),i=o},59389:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(87363),s=a.n(r),n=a(86976);const o=(0,n.Z)({resolved:{},chunkName:()=>"MergeConflictsDialog.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(3925).then(a.bind(a,85274)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 85274}},{}),i=o},11775:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(87363),s=a.n(r),n=a(86976);const o=(0,n.Z)({resolved:{},chunkName:()=>"PlayGameHeaderMenu.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>Promise.all([a.e(7821),a.e(4932)]).then(a.bind(a,60788)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 60788}},{}),i=o},69833:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(87363),s=a.n(r),n=a(86976);const o=(0,n.Z)({resolved:{},chunkName:()=>"PlayPurchaseDialog.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>Promise.all([a.e(6122),a.e(7821),a.e(1036),a.e(8726)]).then(a.bind(a,24903)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 24903}},{ssr:!1}),i=o},43633:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(87363),s=a.n(r),n=a(86976);const o=(0,n.Z)({resolved:{},chunkName:()=>"PlaySimilarGamesManager.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(9359).then(a.bind(a,79837)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 79837}},{}),i=o},87005:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(87363),s=a.n(r),n=a(86976);const o=(0,n.Z)({resolved:{},chunkName:()=>"InGameProfilePopup.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(888).then(a.bind(a,99659)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 99659}},{}),i=o},125:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(87363),s=a.n(r),n=a(86976);const o=(0,n.Z)({resolved:{},chunkName:()=>"QuestManager.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(3111).then(a.bind(a,12892)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 12892}},{ssr:!1}),i=o},58097:(e,t,a)=>{a.d(t,{c:()=>o});var r=a(87363),s=a.n(r),n=a(86976);const o=(0,n.Z)({resolved:{},chunkName:()=>"UserContainer.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>Promise.all([a.e(6122),a.e(7821),a.e(1891)]).then(a.bind(a,44122)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 44122}},{resolveComponent:e=>e.UserContainer})},33196:(e,t,a)=>{a.d(t,{Z:()=>l});var r=a(87363),s=a.n(r),n=a(86976),o=a(1481);const i=(0,n.Z)({resolved:{},chunkName:()=>"Promo.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>Promise.all([a.e(1036),a.e(3660)]).then(a.bind(a,30422)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 30422}},{ssr:!1,error:o.Z}),l=i},13048:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(87363),s=a.n(r),n=a(86976);const o=(0,n.Z)({resolved:{},chunkName:()=>"ScopesDialog.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(7925).then(a.bind(a,62230)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 62230}},{}),i=o},33381:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(87363),s=a.n(r),n=a(86976);const o=(0,n.Z)({resolved:{},chunkName:()=>"ShortcutPopup.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(6587).then(a.bind(a,71742)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 71742}},{}),i=o},41103:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(87363),s=a.n(r),n=a(86976);const o=(0,n.Z)({resolved:{},chunkName:()=>"ShortcutManager.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(18).then(a.bind(a,38330)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 38330}},{ssr:!1}),i=o},89775:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(87363),s=a.n(r),n=a(86976);const o=(0,n.Z)({resolved:{},chunkName:()=>"UserActivityPopup.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>a.e(987).then(a.bind(a,11059)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 11059}},{}),i=o},81839:(e,t,a)=>{a.d(t,{Z:()=>l});var r=a(87363),s=a.n(r),n=a(86976),o=a(77976);const i=(0,n.Z)({resolved:{},chunkName:()=>"GameInfo.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>Promise.all([a.e(6122),a.e(7821),a.e(9280),a.e(805)]).then(a.bind(a,39466)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 39466}},{error:o.Z}),l=i},17780:(e,t,a)=>{a.d(t,{E:()=>s});var r=a(95765);const s=({baseUrl:e,path:t,lang:a,languages:s,tld:n="ru"})=>{let o="";void 0!==a&&(o=(({lang:e,languages:t,tld:a})=>"com"===a&&"en"!==e&&t.includes(e))({languages:s,lang:a,tld:n})?`${a}/`:"");let i=`${`${e}${o?`/${o.replace(/\/*$/,"")}`:""}`}${t}`;return o&&(i=(0,r.D)(i)),i}},91668:(e,t,a)=>{a.d(t,{D:()=>s});var r=a(87363);function s(e){const t=(0,r.useRef)();return(0,r.useEffect)((()=>{t.current=e}),[e]),t.current}},33509:(e,t,a)=>{a.d(t,{X:()=>w});var r=a(87363),s=a.n(r),n=a(72853),o=a(29850),i=a(9579),l=a(40006);const d={"sz-18":"checkbox-critical-module__sz-18--bkrJI","align-top":"checkbox-critical-module__align-top--LZGTh","align-center":"checkbox-critical-module__align-center--P6SxJ","align-bottom":"checkbox-critical-module__align-bottom--YTlvt",checkbox:"checkbox-critical-module__checkbox--QSq4A",checked:"checkbox-critical-module__checked--iGuDb",disabled:"checkbox-critical-module__disabled--BAmph",part:"checkbox-critical-module__part--XjCPu",control:"checkbox-critical-module__control--gdlIp",tick:"checkbox-critical-module__tick--Csl14",wrapper:"checkbox-critical-module__wrapper--XCy8g"};let c;var h=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=(e,t,a)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const y={...(c=a(56213))&&c.default||{}},b=(0,r.forwardRef)(((e,t)=>{const a=e,{align:c="center",className:h="",size:b,checked:w=!1,disabled:k=!1,onChange:E,onKeyDown:S,onKeyUp:A,label:I}=a,P=((e,t)=>{var a={};for(var r in e)v.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&m)for(var r of m(e))t.indexOf(r)<0&&g.call(e,r)&&(a[r]=e[r]);return a})(a,["align","className","size","checked","disabled","onChange","onKeyDown","onKeyUp","label"]),T=`input-${(0,r.useId)()}`,C=(0,r.useCallback)((e=>{!k&&(null==E||E(e))}),[k,E]),R=(0,l.c)({variant:"checkbox-label"});return s().createElement("div",{className:(0,i.y)(d.checkbox,k&&d.disabled,w&&d.checked,d[`align-${c}`],d[`sz-${b}`])},I&&s().createElement("label",{className:(0,i.y)(d.part,y.label,R),htmlFor:T},I),s().createElement("div",{className:(0,i.y)(d.wrapper,d.part)},s().createElement("div",{className:(0,i.y)(d.tick)},w&&s().createElement(n.Z,{size:18},s().createElement(o.Z,null))),s().createElement("input",(D=((e,t)=>{for(var a in t||(t={}))v.call(t,a)&&f(e,a,t[a]);if(m)for(var a of m(t))g.call(t,a)&&f(e,a,t[a]);return e})({type:"checkbox"},P),O={autoComplete:"off",checked:w,className:(0,i.y)(h,d.control),disabled:k,id:T,ref:t,onChange:C},u(D,p(O))))));var D,O}));b.displayName="Checkbox";const w=(0,r.memo)(b)},17627:(e,t,a)=>{a.d(t,{I:()=>F});var r,s,n=a(87363),o=a.n(n),i=a(40006),l=a(72853);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},d.apply(this,arguments)}const c=e=>n.createElement("svg",d({fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=n.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M19 12.708H5a1 1 0 1 1 0-2h14z",clipRule:"evenodd"})),s||(s=n.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 4.707a1 1 0 0 1 1.414 0l7 7-7 7A1 1 0 0 1 12 17.293l5.586-5.586L12 6.121a1 1 0 0 1 0-1.414",clipRule:"evenodd"})));var h;function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},u.apply(this,arguments)}const p=e=>n.createElement("svg",u({fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),h||(h=n.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10m0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16m4.66-11.749a1 1 0 0 0-1.41.094l-4.517 5.158-1.996-2.178a1 1 0 0 0-1.474 1.35l2.373 2.59a1.5 1.5 0 0 0 2.119.094l.06-.058.055-.06 4.884-5.579a1 1 0 0 0-.093-1.41Z",clipRule:"evenodd"})));var m,v;function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},g.apply(this,arguments)}const f=e=>n.createElement("svg",g({fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),m||(m=n.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10m0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16",clipRule:"evenodd"})),v||(v=n.createElement("path",{fill:"currentColor",d:"M12.755 6.962a.3.3 0 0 1 .3.31l-.217 6.302a.3.3 0 0 1-.3.29h-.946a.3.3 0 0 1-.3-.29l-.204-6.302a.3.3 0 0 1 .3-.31zm-.683 10.136a1.3 1.3 0 0 1-.504-.098 1.4 1.4 0 0 1-.42-.266 1.5 1.5 0 0 1-.266-.406 1.2 1.2 0 0 1-.098-.476q0-.252.098-.476t.266-.392q.181-.168.42-.266a1.31 1.31 0 0 1 1.4.266 1.16 1.16 0 0 1 .378.868q0 .252-.098.476-.098.225-.28.406-.168.167-.406.266a1.2 1.2 0 0 1-.49.098"})));var y=a(9579),b=a(42146);const w="inputControl-module__wrapper--cNlBR",k="inputControl-module__control--IynuW";var E=Object.defineProperty,S=Object.defineProperties,A=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,C=(e,t,a)=>t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,R=(e,t)=>{for(var a in t||(t={}))P.call(t,a)&&C(e,a,t[a]);if(I)for(var a of I(t))T.call(t,a)&&C(e,a,t[a]);return e};const D=(0,n.forwardRef)(((e,t)=>{const a=e,{value:r,className:s,placeholder:l="",type:d="text",addonLeft:c,addonRight:h,onMouseEnter:u,onMouseLeave:p,controlClassName:m,disableAutoFocus:v}=a,g=((e,t)=>{var a={};for(var r in e)P.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&I)for(var r of I(e))t.indexOf(r)<0&&T.call(e,r)&&(a[r]=e[r]);return a})(a,["value","className","placeholder","type","addonLeft","addonRight","onMouseEnter","onMouseLeave","controlClassName","disableAutoFocus"]),f={onMouseEnter:u,onMouseLeave:p},E=(0,n.useRef)(null),C=(0,i.c)({variant:"input-text"});return o().createElement("div",(D=R({className:(0,y.y)(w,s)},f),S(D,A({onClick:()=>{var e;v||null==(e=E.current)||e.focus()}}))),c,o().createElement("input",R({className:(0,y.y)(k,C,m),placeholder:l,ref:(0,b.Z)(t,E),type:d,value:r},g)),h);var D}));D.displayName="InputControl";const O=(0,n.memo)(D),L={"sz-40":"input-module__sz-40--jtTNA",wrapper:"input-module__wrapper--cirWf",disabled:"input-module__disabled--uVnao",correct:"input-module__correct--tTJ9n",error:"input-module__error--AFY3I",warning:"input-module__warning--SyWsj",active:"input-module__active--FhfYX",control:"input-module__control--Nyslo",icon:"input-module__icon--sulmr",errorMessage:"input-module__errorMessage--k3COU"};var _=Object.defineProperty,x=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,M=(e,t,a)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const $=(0,n.forwardRef)(((e,t)=>{const a=e,{errorMessage:r,errorMessageClassName:s,value:d,size:h,state:u,hasIcon:m,className:v,onIconClick:g,disabled:b}=a,w=((e,t)=>{var a={};for(var r in e)N.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&x)for(var r of x(e))t.indexOf(r)<0&&B.call(e,r)&&(a[r]=e[r]);return a})(a,["errorMessage","errorMessageClassName","value","size","state","hasIcon","className","onIconClick","disabled"]),k=(0,n.useMemo)((()=>m?"correct"===u?o().createElement(l.Z,{className:(0,y.y)(L.icon),size:24,onClick:g},o().createElement(p,null)):"error"===u||"warning"===u?o().createElement(l.Z,{className:(0,y.y)(L.icon),size:24,onClick:g},o().createElement(f,null)):o().createElement(l.Z,{className:(0,y.y)(L.icon),size:24,onClick:g},o().createElement(c,null)):null),[m,g,u]);return o().createElement(o().Fragment,null,o().createElement(O,((e,t)=>{for(var a in t||(t={}))N.call(t,a)&&M(e,a,t[a]);if(x)for(var a of x(t))B.call(t,a)&&M(e,a,t[a]);return e})({addonRight:k,className:(0,y.y)(v,L.wrapper,"correct"===u&&L.correct,"error"===u&&L.error,"warning"===u&&L.warning,m&&d.length>1&&L.active,b&&L.disabled,L[`sz-${h}`]),controlClassName:(0,y.y)(L.control),disabled:b,ref:t,size:h,value:d},w)),r&&o().createElement(i.Z,{className:(0,y.y)(L.errorMessage,s),variant:"link-xs-r"},r))}));$.displayName="Input";const F=(0,n.memo)($)},44700:(e,t,a)=>{a.d(t,{r:()=>y});var r=a(87363),s=a.n(r),n=a(53644),o=a(9579);const i={none:"link-module__none--bPBk5",primary:"link-module__primary--XDhIp",secondary:"link-module__secondary--DNb4Q",accent:"link-module__accent--NP_dz",inverse:"link-module__inverse--qRwAX"};var l=Object.defineProperty,d=Object.defineProperties,c=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,a)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,v=(e,t)=>{for(var a in t||(t={}))u.call(t,a)&&m(e,a,t[a]);if(h)for(var a of h(t))p.call(t,a)&&m(e,a,t[a]);return e},g=(e,t)=>d(e,c(t));const f=(0,r.forwardRef)(((e,t)=>{let a=e,{href:l,children:d,onClick:c,className:m,view:f="none",to:y}=a,b=((e,t)=>{var a={};for(var r in e)u.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&h)for(var r of h(e))t.indexOf(r)<0&&p.call(e,r)&&(a[r]=e[r]);return a})(a,["href","children","onClick","className","view","to"]);const w=void 0===y&&void 0===l,k=(0,r.useCallback)((e=>{w&&e.preventDefault(),null==c||c(e)}),[c,w]);let E=e.rel;"_blank"===e.target&&void 0!==E&&-1===E.indexOf("noopener")&&(E=`${E} noopener`);const S=(({view:e="none"})=>(0,o.y)(i.none,i[e]))({view:f});return void 0!==y?s().createElement(n.rU,g(v({},b),{className:(0,o.y)(S,m),ref:t,rel:E,to:y,onClick:k}),d):void 0!==l?s().createElement("a",g(v({},b),{className:(0,o.y)(S,m),href:l,ref:t,rel:E,onClick:k}),d):s().createElement("span",{className:(0,o.y)(S,m),onClick:k},d)}));f.displayName="Link";const y=(0,r.memo)(f)},38699:(e,t,a)=>{a.d(t,{A:()=>s,u5:()=>r});a(80813);const r=["az","co.il","com","com.am","com.ge","com.tr","ee","fr","lt","lv","md","tj","tm"],s=["by","com","com.tr","ru"]},54533:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Hs});var r=a(85383),s=a(94199),n=a(84819),o=a(63904),i=a.n(o),l=a(87363),d=a.n(l),c=a(91294),h=a(53726),u=a(10719),p=a(31320),m=a(28250),v=a(97808),g=a(43876),f=a(37705),y=a(40656),b=a(93298);const w=class{};w.achvPropsNamesMapping={slug:"id",status:"type",target:"cost",title:"name"},w.achvPropsValuesMapping={target:({goal:e})=>e},w.achvStatusMapping={allGlobal:"all_global",allLocal:"all_local",completed:"completed",inProgress:"in_progress",expired:"expired"},w.mapAcvToAchvEntity=e=>Object.entries(e).reduce(((e,[t,a])=>{const r=w.achvPropsValuesMapping[t];let s=a;return r&&(s=r(a)),e[w.achvPropsNamesMapping[t]||t]=s,e}),{}),w.mapAchvStatus=e=>w.achvStatusMapping[e];let k=w;var E=Object.defineProperty,S=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,P=(e,t,a)=>t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,T=(e,t)=>{for(var a in t||(t={}))A.call(t,a)&&P(e,a,t[a]);if(S)for(var a of S(t))I.call(t,a)&&P(e,a,t[a]);return e},C=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const R=class{};R.setProgressErrMsg="Achievements | setProgress: cannot set achievement progress",R.getProgressErrMsg="Achievements | getProgress: cannot get achievement progress",R.getListErrMsg="Achievements | getList: cannot load achievements list",R.incorrectActionTypeErrMsg="Incorrect action type",R.logPrefix="Achievements | Parent frame",R.logColor={background:"#355c7d",text:"#ffffff"},R.debugLog=(0,b.M$)(R.logPrefix,b.XG.Dev,R.logColor),R.path="/achievements",R.timeout=5*y.WT*(0,p.n)(),R.lang=m.I.RU,R.isInitialized=!1,R.init=e=>{R.lang=e,R.isInitialized||(v.Z.onExternalMessage(u.y0,R.onMessage),R.isInitialized=!0)},R.onMessage=({data:{type:e,action:t,data:a}},r)=>{const s=e=>r({data:{success:!0,result:e}}),n=e=>r({data:{success:!1,error:e}});switch(R.debugLog(`received ${u.y0} messages event: `,e,t,a),t){case"setProgress":R.setProgress(a).then(s).catch((()=>n(R.setProgressErrMsg)));break;case"getProgress":R.getList(null,null==a?void 0:a.id).then((e=>{if(!e.length)return Promise.reject();s(e[0].progress)})).catch((()=>n(R.getProgressErrMsg)));break;case"getList":R.getList((null==a?void 0:a.status)||null).then(s).catch((()=>n(R.getListErrMsg)));break;default:R.log(new Error(`${R.incorrectActionTypeErrMsg}: ${t}`))}},R.setProgress=(...e)=>C(R,[...e],(function*(e={}){const{id:t,progress:a}=e;return t&&void 0!==a?R.fetch([],{method:"PATCH",body:JSON.stringify({slug:t,progress:{score:a}}),headers:new Headers({"content-type":"application/json"})}).then((({data:e})=>k.mapAcvToAchvEntity(e))):Promise.reject()})),R.getList=(e,t="")=>C(R,null,(function*(){if(Boolean(e&&e.length)===Boolean(t))return Promise.reject();const a=[["lang",R.lang]];return e&&e.length&&a.push(["status",k.mapAchvStatus(e[0])]),t&&a.push(["slug",t]),R.fetch(a).then((({data:e})=>e.map((e=>k.mapAcvToAchvEntity(e)))))})),R.fetch=(...e)=>C(R,[...e],(function*(e=[],t={}){const a=new URLSearchParams(e).toString();return(0,g.rQ)({apiPath:`${R.path}${a?"?"+a:""}`,options:T(T({},{credentials:"include",method:"GET"}),t),timeout:R.timeout}).catch((e=>{throw R.log(e),e}))})),R.log=({name:e="Error",message:t="Unknown achievements error"},a="")=>{const r=`${e}: ${t}`;R.debugLog(r),(0,f.H)({block:R.logPrefix,message:r,source:R.logPrefix,sourceMethod:a})};let D=R;const O=(0,l.memo)((({lang:e})=>((0,l.useEffect)((()=>D.init(e)),[e]),d().createElement(d().Fragment,null))));var L=a(93827),_=a(21918),x=a(23678),N=a(45331),B=a(38096),M=a(59303),$=a(19146);const F=a(73832).Z;var H=a(33119),W=a(68279),G=a(21466),Z=a(32062),j=a(42126),U=a(58432),q=a(36880),z=a(76488),V=a(23617),K=a(34967),Y=a(77901),X=a(41811),J=a(49659),Q=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const ee=(0,b.M$)("auth-dialog-manager",b.XG.Dev);class te extends l.Component{constructor(e){var t;super(e),this.state={requestId:"",visible:!1},this.checkLogin=()=>{const e=(0,q.e)(this.authCookieName);this.login&&e&&this.login!==e&&(ee("AuthDialogManager: change_account"),(0,K.U4)({},{backgroundAuthChange:"change_account"})),this.login=e},this.onInternalMessage=(e,t)=>{const{action:a,data:r}=e.data;if(this.isDisabled)return t({error:new Error("auth disabled")});"open"!==a&&"open-auth-window"!==a||(this.close(),this.setState({requestId:r.requestId},(()=>{this.createAuthPromise(e,t)})))},this.onAuthChanged=e=>{const{action:t,data:a}=e.data;["changed","auth-dialog-success"].includes(t)&&a.hasAuth!==this.props.hasAuth&&this.props.getUserPassport()},this.onDialogApply=()=>{this.sendParams("ok");const e=this._openAuthWindow();e?this.resolvePromise(e):this.rejectPromise(new W.Z({code:"AUTH_WINDOW_REJECTED",message:"Can not open auth window."})),this.close()},this.onDialogClose=()=>{this.sendParams("cancel"),this.close()};const a=(null==(t=(0,B.getDomainConfig)().auth)?void 0:t.provider)===M.Xi.XSOLLA;this.authCookieName=a?"xsolla_login":"yandex_login",this.login=(0,q.e)(this.authCookieName)}componentDidMount(){v.Z.onInternalMessage("auth-dialog",this.onInternalMessage),v.Z.onInternalMessage("auth",this.onAuthChanged,{withHistory:!0}),document.addEventListener("visibilitychange",this.checkLogin)}componentWillUnmount(){v.Z.offInternalMessage("auth-dialog",this.onInternalMessage),v.Z.offInternalMessage("auth",this.onAuthChanged),document.removeEventListener("visibilitychange",this.checkLogin)}componentDidUpdate(e){e.hasAuth!==this.props.hasAuth&&(this.login=(0,q.e)(this.authCookieName),this.props.hasAuth?this.props.fetchPlatformSubscriptions():this.props.clearPlatformSubscriptions())}createAuthPromise(e,t){const{action:a,data:r}=e.data;let s;switch(a){case"open-auth-window":s=this.openAuthWindow(!1,r.origin);break;case"open":s=this.open();break;default:return}s.then((e=>t({data:{authWindow:e}}))).catch((e=>{ee(`${a} auth dialog error`,e),t({error:e})}))}sendParams(e){(0,K.U4)({},{borrowParams:{sdk:{auth:{dialog:e,appId:this.context.playPageData.gameInfo.appId}}}})}open(){return Q(this,null,(function*(){if(this.props.hasAuth)return;if(!this.props.inCurrentTab){const e=yield this._tryOpenAuthWindowOnStart();if(e)return Promise.resolve(e)}const e=this.setPromise();return this.showDialog(),e.promise}))}openAuthWindow(e=!1,t){return Q(this,null,(function*(){if(e)return Promise.resolve(this._openAuthWindow(t)||void 0);const{data:a}=yield v.Z.post({type:"auth",action:"has-auth"}),{hasAuth:r}=a;return!r&&this._openAuthWindow(t)||void 0}))}_tryOpenAuthWindowOnStart(){return function(){const{userAgent:e}=window.navigator;return!/^((?!chrome|android).)*safari/i.test(e)&&!/\sFirefox\//.test(e)&&!!/\sChrome\//.test(e)}()&&this.openAuthWindow()||Promise.resolve(void 0)}showDialog(){this.setState({visible:!0})}setPromise(){if(this.openPromise)return this.openPromise;let e=()=>{},t=()=>{};const a={promise:new Promise(((a,r)=>{e=a,t=r})),resolve:e,reject:t};return this.openPromise=a,a}resolvePromise(e){this.openPromise&&(this.openPromise.resolve(e),this.openPromise=null)}rejectPromise(e){this.openPromise&&(this.openPromise.reject(e),this.openPromise=null)}close(){this.setState({requestId:"",visible:!1}),this.rejectPromise(new W.Z({code:"AUTH_DIALOG_CANCEL",message:"User canceled auth dialog."}))}_openAuthWindow(e="games_sdk_auth"){const t=(0,Y.zd)(),a=(0,U.KT)(),r=X.XL.includes(a),s=this.props.inCurrentTab||t||r||this.context.isTranssion,{provider:n}=(0,B.getDomainConfig)().auth||{};let o="";s?(o=(0,J.e)().href,r&&(o=(0,j.Z)({url:o,params:{clid:a}}))):o=(0,G.EP)(`${location.origin}${this.context.baseUrl}/sdk/static/auth-retpath.html?req-id=${encodeURIComponent(this.state.requestId)}&origin=${encodeURIComponent(window.origin)}&version=${encodeURIComponent(this.context.version)}`);const i=(0,V.x)()?z.tu:"";let l=`https://${(0,z.GH)()}/auth${i}?from=game&origin=${encodeURIComponent(e)}&retpath=${encodeURIComponent(o)}`;const{requestId:d}=this.state;if(this.props.isOauth){if(!d)return void(0,f.H)({},new Error("No requestId for OAuthURL"));l=Z.Z.getOauthUrl(d)}else if(n===M.Xi.XSOLLA){if(!d)return void(0,f.H)({},new Error("No requestId for XSollaUrl"));l=Z.Z.getXsollaAuthUrl(d)}if(!s)return window.open(l,"_blank");window.location.href=l}get isDisabled(){const e=(0,U.KT)();return X.TZ.includes(e)}render(){return this.state.visible?d().createElement(F,{onApply:this.onDialogApply,onClose:this.onDialogClose}):null}}te.contextType=N.Z;const ae=(0,h.$j)((function(e){return{isOauth:e.userData.isOauth,hasAuth:Boolean(e.userData.login)}}),(function(e){return(0,$.DE)({getUserPassport:H.Ps,fetchPlatformSubscriptions:H.VR,clearPlatformSubscriptions:H.cp},e)}))(te);var re=a(68797),se=a(24029),ne=a(88372),oe=a(26108),ie=a(92999),le=a(11324),de=a(79409),ce=a(35090);class he extends N.P{constructor(){super(...arguments),this.state={dialogIsRequested:!1,dialogWasRequested:!1,isCanShow:!1,reason:"UNKNOWN",wasTriggered:!1},this.onInternalMessage=e=>{var t,a;if("request-review"===e.data.action){this.setState({dialogIsRequested:!0});const{gameInfo:e}=this.context.playPageData,r=null==(a=null==(t=this.context.playPageData)?void 0:t.gameData)?void 0:a.media;this.props.dispatch((0,H.N3)({appID:parseInt(e.appId,10),gameID:e.appId,pictureUrl:r?(0,le.Jn)(r,{size:X.xY.YOUR_GAMES}):"",game:e,gameName:e.title}))}},this.onExternalMessage=(e,t)=>{switch(e.data.action){case"request-review":this.setPromise(),this.openPopupDialog().then((e=>{this.setState({dialogIsRequested:!1},(()=>{t({data:e})}))})).catch((e=>{t({data:{feedbackSent:!1,reason:e}})}));break;case"can-review":this.releasePromise(),this.canShowPopup().then((({hasAuth:e,rated:a,isCanShow:r,reason:s})=>{r?this.setState({isCanShow:r},(()=>{t({data:{value:r}})})):this.state.wasTriggered&&s?t({data:{reason:s,value:r}}):a?this.setState({reason:"GAME_RATED",wasTriggered:!0},(()=>{t({data:{reason:"GAME_RATED",value:!1}})})):e?this.setState({isCanShow:!0,wasTriggered:!0},(()=>{t({data:{value:!0}})})):this.setState({reason:"NO_AUTH",wasTriggered:!0},(()=>{t({data:{reason:"NO_AUTH",value:!1}})}))})).catch((()=>{this.setState({reason:"UNKNOWN",wasTriggered:!0},(()=>{t({data:{reason:"UNKNOWN",value:this.state.isCanShow}})}))}))}}}componentDidMount(){var e;const{gameInfo:t}=this.context.playPageData,a=null==(e=this.context.playPageData.gameData)?void 0:e.media;this.props.dispatch((0,H.N3)({appID:parseInt(t.appId,10),gameID:t.appId,pictureUrl:a?(0,le.Jn)(a,{size:X.xY.YOUR_GAMES}):"",game:t,gameName:t.title})),v.Z.onExternalMessage("feedback",this.onExternalMessage),v.Z.onInternalMessage("feedback",this.onInternalMessage)}componentWillUnmount(){v.Z.offExternalMessage("feedback",this.onExternalMessage),v.Z.offInternalMessage("feedback",this.onInternalMessage),this.props.dispatch((0,H.N3)({appID:null,gameID:null,rating:0,text:""}))}componentDidUpdate(e){if(this.promiseWrapper&&e.appID&&!this.props.appID&&["ready","success","error"].includes(e.state)){const{result:t,state:a}=e;"success"===a?this.promiseWrapper.resolve(t):this.promiseWrapper.reject(new Error("Unknown")),this.promiseWrapper=void 0}}releasePromise(){this.promiseWrapper&&(this.promiseWrapper.reject(new Error("Reject")),this.promiseWrapper=void 0)}setPromise(){this.releasePromise(),this.promiseWrapper=new oe.Z}canShowPopup(){return new Promise(((e,t)=>{if((0,V.x)())return e({isCanShow:!1,reason:"REQUESTED_FROM_TV"});const{feedbackSettings:a}=(0,B.getDomainConfig)();if(!(0,de.w)(this.context.tld,null==a?void 0:a.allowedTlds))return e({isCanShow:!1,reason:"UNKNOWN"});v.Z.post({type:"auth",action:"has-auth"}).then((({data:a})=>{const{hasAuth:r}=a;if(r&&z.XK&&"NO_AUTH"===this.state.reason)return void e({isCanShow:!0});if(this.state.wasTriggered&&this.state.isCanShow)return void e({isCanShow:this.state.isCanShow});if(this.state.wasTriggered&&!this.state.dialogIsRequested&&!this.state.dialogWasRequested)return void e({isCanShow:this.state.isCanShow,reason:this.state.reason});if(!r&&z.XK)return void e({isCanShow:!1,reason:"NO_AUTH"});if(this.state.dialogIsRequested)return void e({isCanShow:!1,reason:"REVIEW_ALREADY_REQUESTED"});if(this.state.dialogWasRequested)return void e({isCanShow:!1,reason:"REVIEW_WAS_REQUESTED"});const{appId:s}=this.context.playPageData.gameInfo;this.props.dispatch((0,H.bq)(parseInt(s,10))).then(e).catch(t)}))}))}openPopupDialog(){var e;return this.state.wasTriggered&&this.state.isCanShow&&!this.state.dialogIsRequested&&!this.state.dialogWasRequested||(0,ce._G)()?(this.setState({dialogIsRequested:!0,dialogWasRequested:!0,isCanShow:!1}),(null==(e=this.promiseWrapper)?void 0:e.promise)||Promise.reject(new Error("Unexpected error"))):Promise.reject(new Error("Unexpected usage (use canReview before requestReview)"))}render(){return this.state.dialogIsRequested?d().createElement(ie.Z,null):null}}const ue=(0,h.$j)((function(e){return{appID:e.feedback.appID,rating:e.feedback.rating,result:e.feedback.result,state:e.feedback.state}}))(he);var pe=a(75007),me=a(1589),ve=a(61560),ge=a(37341);const fe=(0,l.memo)((()=>{const{gameplaySwitch:e}=(0,ge.jT)(),t=(0,l.useCallback)((({data:t})=>e(t.action)),[e]);return(0,l.useEffect)((()=>(v.Z.onExternalMessage(u.Tn,t,{withHistory:!1}),()=>v.Z.offExternalMessage(u.Tn,t))),[t]),d().createElement(d().Fragment,null)}));var ye=a(25873),be=a(17431);const we=()=>{const[e,t]=(0,l.useState)(""),a=(0,l.useCallback)((e=>{"show"===e.data.action&&t(e.data.data.message)}),[]);return(0,l.useEffect)((()=>(v.Z.onInternalMessage("message-box",a),()=>{v.Z.offInternalMessage("message-box",a)})),[a]),e?d().createElement(be.Z,{autohide:!0},e):null},ke=a(86743).Z;const Ee=a(39010).Z;var Se=a(45112);const Ae="payments-popup";var Ie=a(71784),Pe=a(83388),Te=a(40893),Ce=a(40184),Re=a(11744);var De=a(80412);const Oe=(0,b.M$)("Payments",b.XG.Payments),Le="inapp-payment-desktop-iframe";var _e=a(73694),xe=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));var Ne=a(37643),Be=a(82346);const Me=()=>{const[e,t]=(0,l.useState)(!1),a=(0,l.useCallback)(((e,a,r)=>{return s=void 0,n=null,o=function*(){if(!a)throw new Error("No purchase config");if(!e)throw new Error("No current product");t(!0);const s=yield(0,Be.qj)({developer_payload:a.developerPayload,id:e,mock:!1,signed:null==r?void 0:r.signed});t(!1),Oe("buy response",s);const{data:n,signature:o}=(0,Ne.c)(s,f.H);return Oe("data",n),Oe("signature",o),{data:n,signature:o}},new Promise(((e,t)=>{var a=e=>{try{i(o.next(e))}catch(e){t(e)}},r=e=>{try{i(o.throw(e))}catch(e){t(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,r);i((o=o.apply(s,n)).next())}));var s,n,o}),[]);return(0,l.useMemo)((()=>({buyGameProduct:a,isLoading:e})),[a,e])};var $e=a(96821),Fe=a(5825);const He=()=>{const e=(0,Fe.C)((e=>e));return(0,$e.Z)((()=>e))};var We=a(46986);const Ge=()=>{const e=He(),[t,a]=(0,l.useState)(null),[r,s]=(0,l.useState)(0),n=(0,Fe.T)(),{lang:o}=(0,Ce.b)(),[i,d]=(0,l.useState)(!1),c=(0,l.useCallback)((t=>{return r=void 0,i=null,l=function*(){try{Oe("Load product pack"),d(!0);const{data:r}=yield e.fetchCurrencyProducts({amount:t,lang:o}),i=r[0].extraInfo.currency;return a(r[0]),s((e=>{const t=e/X.Uo;return Math.ceil(100*t)/100})(r[0].extraInfo.price[i])),n((0,We.NW)(i||"RUB")),r[0]}catch(e){Oe("Error loading product pack",e)}finally{d(!1)}},new Promise(((e,t)=>{var a=e=>{try{n(l.next(e))}catch(e){t(e)}},s=e=>{try{n(l.throw(e))}catch(e){t(e)}},n=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,s);n((l=l.apply(r,i)).next())}));var r,i,l}),[e,n,o]);return(0,l.useMemo)((()=>{var e;return{getProductCurrency:c,productCurrencyPack:t,currencyPrice:r,isLoadingProductCurrency:i,realAmount:null!=(e=null==t?void 0:t.extraInfo.amount.real)?e:0}}),[c,t,i,r])};var Ze=a(89144),je=a(71522),Ue=Object.defineProperty,qe=Object.defineProperties,ze=Object.getOwnPropertyDescriptors,Ve=Object.getOwnPropertySymbols,Ke=Object.prototype.hasOwnProperty,Ye=Object.prototype.propertyIsEnumerable,Xe=(e,t,a)=>t in e?Ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const Je=()=>{const e=He(),[t,a]=(0,l.useState)(!1),[r,s]=(0,l.useState)(null),n=(0,l.useCallback)((t=>{return r=void 0,n=null,o=function*(){a(!0);try{const{product:a}=yield e.getGameProductById(((e,t)=>qe(e,ze(t)))(((e,t)=>{for(var a in t||(t={}))Ke.call(t,a)&&Xe(e,a,t[a]);if(Ve)for(var a of Ve(t))Ye.call(t,a)&&Xe(e,a,t[a]);return e})({},t),{draft:(0,je.m)()}));return Oe("Fetched product",a),s((()=>{const e=new Ze.Z(a);return Oe("is shown with productData:",e),e})),{product:a}}catch(e){throw e}finally{a(!1)}},new Promise(((e,t)=>{var a=e=>{try{i(o.next(e))}catch(e){t(e)}},s=e=>{try{i(o.throw(e))}catch(e){t(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,s);i((o=o.apply(r,n)).next())}));var r,n,o}),[e]);return(0,l.useMemo)((()=>({loadProduct:n,isLoading:t,product:r})),[n,t,r])};var Qe=a(15201),et=a(14943);const tt={productSection:"ProductBlock-module__productSection--x5xvW",productInfo:"ProductBlock-module__productInfo--dahen",spinnerWrapper:"ProductBlock-module__spinnerWrapper--SgSib",productImage:"ProductBlock-module__productImage--iJRWE",purchase:"ProductBlock-module__purchase--i3UG9",collapsed:"ProductBlock-module__collapsed--B3Mj3",hiddenOnCollapsed:"ProductBlock-module__hiddenOnCollapsed--zwI4I",section:"ProductBlock-module__section--K9tv_",toggle:"ProductBlock-module__toggle--M49lG",stub:"ProductBlock-module__stub--Bzlv6","stub-pulsate":"ProductBlock-module__stub-pulsate--FQbQ7",loadingPurchase:"ProductBlock-module__loadingPurchase--OgO4n"};var at=a(85467);const rt=e=>{const[t,a]=(0,l.useState)(e),r=(0,l.useRef)(),s=(0,l.useRef)(!0),n=(0,l.useCallback)(((e,t)=>{r.current=t,a(e)}),[]);return(0,l.useEffect)((()=>{var e;s.current?s.current=!1:null==(e=r.current)||e.call(r,t)}),[t]),[t,n]};var st=a(94671),nt=a(3347);const ot={collapsed:{icon:"arrow-down"},expanded:{icon:"arrow-pointer"}};const it=({product:e,purchase:t,onCollapseInfo:a})=>{const r=(0,at.T)(),{lang:s}=(0,Ce.b)(),[n,o]=rt(!0),{icon:i}=ot[n?"collapsed":"expanded"];return e&&t?(Oe("ProductBlock product",e),Oe("ProductBlock purchase",t),d().createElement("div",{"data-testid":"Payments-ProductBlock"},d().createElement("section",{className:(0,st.E)(tt.productSection,tt.section)},d().createElement(et.Z,{className:tt.productImage,src:e.image}),d().createElement("div",{className:tt.productInfo},d().createElement("h5",{title:e.title},e.title),d().createElement("p",{title:e.description},e.description))),d().createElement("section",{className:(0,st.E)(tt.section,tt.purchase,n?tt.collapsed:""),onClick:()=>o(!n,(e=>"boolean"==typeof e&&(null==a?void 0:a(e))))},(({getText:e,purchase:t})=>"balance"!==(null==t?void 0:t.type)?null:d().createElement("div",{className:tt.balanceType},d().createElement("h5",null,t.balanceDebited," ",e("payments.currency",{number:t.balanceDebited}).toLowerCase()),d().createElement("p",null,e("payments.currency-will-be-debited-from-balance")),d().createElement("p",{className:tt.hiddenOnCollapsed},e("payments.currency-will-remain",{params:{currency:e("payments.currency",{number:t.balanceRemain}).toLowerCase(),number:t.balanceRemain}}))))({getText:r,purchase:t}),(({getText:e,lang:t,purchase:a})=>"refill"!==(null==a?void 0:a.type)?null:d().createElement("div",{className:tt.refillType},d().createElement("h5",null,(0,nt.T)(a.amount,a.currency,t)),d().createElement("p",null,e("payments.total-to-be-paid")),d().createElement("p",{className:tt.hiddenOnCollapsed},e("payments.currency-not-enough-on-balance",{params:{currency:e("payments.currency",{number:a.balanceNotEnough}).toLowerCase(),number:a.balanceNotEnough}}))))({getText:r,lang:s,purchase:t}),d().createElement(Qe.Z,{className:tt.toggle,size:"xs",type:i})))):d().createElement("div",{className:tt.stub,"data-testid":"Payments-ProductBlock"},d().createElement("section",{className:(0,st.E)(tt.section,tt.productSection)},d().createElement("div",{className:tt.productImage}," "),d().createElement("div",{className:tt.productInfo},d().createElement("h5",null," "),d().createElement("p",null," "))),d().createElement("section",{className:(0,st.E)(tt.section,tt.purchase)},d().createElement("div",{className:tt.loadingPurchase})))};var lt=a(58904),dt=a(17627),ct=a(21234);const ht="PaymentConfirmForm-module__emailLabel--mMY1A",ut="PaymentConfirmForm-module__editButtonWrapper--xbhND",pt="PaymentConfirmForm-module__confirmButtonWrapper--SivgC",mt=e=>X.CU.test(e),vt=({amount:e,currency:t,initialEmail:a,onConfirmClick:r,isFormDisabled:s})=>{const n=(0,at.T)(),o=(0,l.useRef)(null),i=(0,Fe.C)((e=>Boolean(e.userData.login))),c=(0,Fe.C)((e=>e.ui.isFullscreenActive)),[h,u]=(0,l.useState)(null!=a?a:""),[p,m]=(0,l.useState)(void 0),[v,g]=rt(!1),[f,y]=(0,l.useState)(),b=(0,l.useMemo)((()=>!i&&e>0),[i,e]);(0,l.useEffect)((()=>{h.length?mt(h)?m("correct"):m("warning"):m(void 0)}),[h]),(0,l.useEffect)((()=>{a&&u(a)}),[a]);const w=(0,l.useCallback)((e=>{c&&mt(h)&&g(!0),y(void 0)}),[c,g,h]),k=(0,l.useCallback)((e=>u(e.target.value)),[]),E=(0,l.useCallback)((()=>{var e;!b||h.length&&"warning"!==p?((0,ct.i)(),y(void 0),null==(e=o.current)||e.blur(),r(h)):y(n("payments.invalid-email-warning"))}),[h,n,p,b,r]),S=(0,l.useCallback)((e=>{e.preventDefault(),E()}),[E]),A=(0,l.useCallback)((()=>{g(!1,(()=>{var e;return null==(e=o.current)?void 0:e.focus()}))}),[g]),I=(0,l.useMemo)((()=>s?n("in-app-payments.payment.method"):0===e?n("payments.buy"):n("payments.pay",{params:{price:(0,nt.T)(e,t)}})),[s,n,e,t]);return d().createElement("div",{"data-testid":"PaymentConfirmForm"},d().createElement("form",{onSubmit:S},b&&d().createElement(d().Fragment,null,c&&v&&d().createElement("div",{className:ut},d().createElement(lt.z,{size:24,type:"button",view:"empty",onClick:A},n("payments.edit"))),d().createElement(dt.I,{"data-testid":"payment-form-email-input",disabled:v||s,errorMessage:f,errorMessageClassName:ht,hasIcon:Boolean(p),maxLength:X.bV,placeholder:n("payments.email-input-placeholder"),ref:o,size:40,state:p,value:h,onBlur:w,onChange:k})),d().createElement("div",{className:b?pt:""},d().createElement(lt.z,{"data-testid":"payment-form-pay-button",disabled:s,size:40,view:"primary",width:"max"},I))))},gt="PaymentFailedState-module__container--iT2u3",ft="PaymentFailedState-module__title--i6Igg",yt="PaymentFailedState-module__description--CAe52";var bt=(e=>(e.COMMON="common",e))(bt||{});const wt=({onActionClick:e,reason:t})=>{const a=(0,at.T)(),{title:r,description:s}=function(e,t){return{title:e("payments.purchase-failed-title"),description:e("payments.purchase-failed-description")}}(a);return d().createElement("div",{className:gt,"data-testid":"PaymentFailedState"},d().createElement(Qe.Z,{type:"failed"}),d().createElement("span",{className:ft},r),d().createElement("span",{className:yt},s),d().createElement(lt.z,{size:40,view:"primary",width:"max",onClick:e},a("payments.try-again")))},kt="PaymentSuccessState-module__container--aZQzo",Et="PaymentSuccessState-module__title--pbbjs",St="PaymentSuccessState-module__infoContainer--txIBj",At="PaymentSuccessState-module__description--ljNHv",It="PaymentSuccessState-module__button--rzAYv",Pt=e=>{if(!e)return"";const t=e.toLowerCase();return`${t.slice(0,10)}\n${t.slice(10)}\n`},Tt=({email:e,recoveryCode:t,onActionClick:a})=>{const r=(0,at.T)(),s=(0,Fe.C)((e=>e.userData.login)),n=e?r("payments.purchase-complete-description",{params:{email:e,recoveryCode:Pt(t)}}):r("payments.purchase-complete-description-without-email",{params:{recoveryCode:Pt(t)}});return d().createElement("div",{className:kt,"data-testid":"PaymentsSuccessState"},d().createElement(Qe.Z,{type:"done"}),d().createElement("div",{className:St},d().createElement("span",{className:Et},r("payments.purchase-complete-title")),!s&&d().createElement("span",{className:At},n)),d().createElement(lt.z,{className:It,size:40,type:"submit",view:"primary",width:"max",onClick:a},r("payments.return-to-game")))};var Ct=a(11815),Rt=a(48136),Dt=a(13377),Ot=a(10592),Lt=a(61533),_t=a(68153),xt=a(29067),Nt=a(36172);const Bt="PurchaseContainer-module__purchase-container--XOy6B",Mt="PurchaseContainer-module__dark-container--w7jjv",$t="PurchaseContainer-module__visible-container--t9635",Ft="PurchaseContainer-module__iframe-wrapper--FblTs";var Ht=Object.defineProperty,Wt=Object.defineProperties,Gt=Object.getOwnPropertyDescriptors,Zt=Object.getOwnPropertySymbols,jt=Object.prototype.hasOwnProperty,Ut=Object.prototype.propertyIsEnumerable,qt=(e,t,a)=>t in e?Ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const zt=(0,l.memo)((({purchaseInfo:e,visible:t,onPaymentReject:a,onPaymentCancel:r,onPaymentResolve:s,onLockEmail:n})=>{const{playPageData:o}=(0,Ce.b)(),i=(0,Fe.C)(Nt.Up),[c,h]=(0,l.useState)(!1),u=(0,l.useCallback)(((e,t)=>{a(t)}),[a]),p=(0,l.useCallback)((()=>{h(!0)}),[]),m=((0,l.useCallback)((()=>{c||r()}),[r,c]),e.paymentService===Ot.ob.TRUST?_t.Z:xt.Z);return(0,Lt.createPortal)(d().createElement("div",{className:(0,st.E)(Bt,i?Mt:"",t?$t:"")},!1,d().createElement("div",{className:Ft},d().createElement(m,((e,t)=>Wt(e,Gt(t)))(((e,t)=>{for(var a in t||(t={}))jt.call(t,a)&&qt(e,a,t[a]);if(Zt)for(var a of Zt(t))Ut.call(t,a)&&qt(e,a,t[a]);return e})({},e),{dialogType:Pe.Z.PURCHASE,fullScreen:!0,isInvisible:!1,shouldWaitIframeButtonClick:!1,onCreateIFrame:n,onReject:u,onResolve:s,onStarted:p})))),document.getElementById(Le))}));const Vt=(0,l.memo)((({paymentsConfig:e,purchaseConfig:t,onPurchaseFailed:a,onConfirmSuccessPurchase:r,onPurchaseSuccess:s,onIframeVisibilityChange:n})=>{const{lang:o,playPageData:{gameInfo:i},abt:{flags:c},tld:h}=(0,Ce.b)(),u=(0,Fe.T)(),p=(0,ge.ff)(),{value:m=0,fetching:g}=(0,Fe.C)((e=>e.user.balance)),y=(0,Fe.C)((e=>e.user.payCurrency)),{loadProduct:b,product:w,isLoading:k}=Je(),{buyGameProduct:E,isLoading:S}=Me(),{getProductCurrency:A,realAmount:I,productCurrencyPack:P,currencyPrice:T,isLoadingProductCurrency:C}=Ge(),[R,D]=(0,l.useState)(null),[O,L]=(0,l.useState)(""),[_,x]=(0,l.useState)(!1),[N,M]=(0,l.useState)(null),$=(0,l.useMemo)((()=>function({amount:e,balance:t,currency:a,currentProduct:r}){if(!a||!r)return null;const s=Number(r.priceValue);return t&&t>=s?{balanceDebited:s,balanceRemain:t-s,type:"balance"}:{amount:e,balanceDebited:s,balanceNotEnough:s-(null!=t?t:0),currency:a,type:"refill"}}({amount:T,balance:m,currency:y,currentProduct:w})),[y,m,T,w]),F=(0,l.useMemo)(Re.Z,[]),H=(0,l.useMemo)((()=>k||g||S||C),[k,g,S,C]),W=(0,l.useMemo)((()=>(0,Rt.V)(c,h,y,(0,B.getDomainConfig)().payments.xsollaEnabled)?Ot.ob.XSOLLA:Ot.ob.TRUST),[c,h,y]),G=(0,l.useRef)(new Ie.Z({appId:i.appId,productStatData:{id:t.id},basicSupportPaymentRequest:F,supportPaymentRequest:!1,dialogType:Pe.Z.PURCHASE})),Z=(0,l.useCallback)((e=>{!_&&!S&&w&&T&&M({amount:I,balanceDiff:I,email:O||e||void 0,payCurrency:y,paymentService:W,price:T,reason:Ot.YC.PURCHASE,value:I})}),[O,y,T,w,_,S,I,W]);(0,l.useEffect)((()=>{null==n||n(_)}),[_,n]),(0,l.useEffect)((()=>{Z()}),[Z]),(0,Se.qR)((()=>(p.gamePause("play_purchase_dialog"),Oe("Load products"),b({appId:String(i.appId),id:t.id,lang:(null==e?void 0:e.lang)||o}).catch((e=>{G.current.error(e,{errorPlace:"purchase",preventDestroy:!0})})),()=>{k&&G.current.error(new Error("InApp payment popup was closed."),{errorPlace:"purchase-show"})}))),(0,l.useEffect)((()=>{if(!w||g||P)return;m-Number(w.priceValue)>=0||A(Number(w.priceValue)-m).then((()=>{G.current.log("show",{basicSupportPaymentRequest:F})}))}),[w,m,g,A,F,P]);const j=(0,l.useCallback)(((e,t)=>{null==s||s(e),D({success:!0,recoveryCode:t,data:e})}),[s,D]),U=(0,l.useCallback)((()=>{R&&(p.gameResume(),R.data&&r(R.data))}),[r,R,p]),q=(0,l.useCallback)((()=>{M(null),x(!1)}),[]),z=(0,l.useCallback)((e=>{"RETRY_WITH"!==e.code&&(G.current.error(e,{errorPlace:"purchase",preventDestroy:!0}),a(e),D({success:!1,data:null})),M(null),x(!1)}),[a,D]),V=(0,l.useCallback)((()=>{return a=void 0,r=null,s=function*(){if(w){M(null),x(!1);try{const{data:a,signature:r}=yield E(w.id,t,e);if("success"===a.status){u((0,We.uV)({forceFetch:!0}));const e=yield xe(void 0,null,(function*(){return v.Z.post({type:"auth",action:"has-auth"}).then((({data:e})=>e.hasAuth))}));if(e)j({data:a,signature:r});else{const e=yield(0,Be.WM)();j({data:a,signature:r},e)}}else"failure"===a.status?z(new Ct.Z({code:"PAYMENT_FAILURE",message:"Failure payment status."})):z(new Ct.Z({code:"PAYMENT_FAILURE",message:"Unknown error"}))}catch(e){(0,f.H)({block:Dt.W.PAYMENT},e),z(new Ct.Z({code:"PAYMENT_FAILURE",message:"Unknown error"}))}}},new Promise(((e,t)=>{var n=e=>{try{i(s.next(e))}catch(e){t(e)}},o=e=>{try{i(s.throw(e))}catch(e){t(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);i((s=s.apply(a,r)).next())}));var a,r,s}),[w,E,t,e,u,j,z]),K=(0,l.useCallback)((e=>{G.current.log(e?"productInfoCollapsed":"productInfoExpanded")}),[]),Y=(0,l.useCallback)((e=>{Oe("onPaymentConfirm"),L(e),T?(G.current.log("showPaymentIframe",{purchase:N}),x(!0),Z(e)):V()}),[Z,V,T,N]),X=(0,l.useCallback)((()=>{D(null),G.current.log("retry",{basicSupportPaymentRequest:F})}),[D,F]);return(null==R?void 0:R.success)?d().createElement(Tt,{email:O,recoveryCode:R.recoveryCode,onActionClick:U}):R&&!R.success?d().createElement(wt,{reason:bt.COMMON,onActionClick:X}):d().createElement(d().Fragment,null,H?d().createElement("div",{className:tt.spinnerWrapper},d().createElement(_e.y,{position:"center",size:38,spinning:!0,view:"default"})):d().createElement(d().Fragment,null,w&&d().createElement(it,{product:{description:w.description,title:w.title,image:w.imageURI},purchase:$,onCollapseInfo:K}),d().createElement(vt,{amount:T,currency:y,initialEmail:O,isFormDisabled:_,onConfirmClick:Y})),(null==N?void 0:N.price)?d().createElement(zt,{purchaseInfo:N,visible:_,onLockEmail:L,onPaymentCancel:q,onPaymentReject:z,onPaymentResolve:V}):null)}));var Kt=a(61451);const Yt="PaymentsFooter-module__payments-footer--aVZaB",Xt="PaymentsFooter-module__copyright--waMJr",Jt="PaymentsFooter-module__support-link--tFh1o",Qt=()=>{const e=(0,at.T)();return d().createElement("div",{className:Yt},d().createElement(Kt.Z,{ContainerTag:"span",className:Xt,isShortDescription:!0}),d().createElement("span",null,d().createElement("a",{className:Jt,href:e("common.support.link"),rel:"noopener",target:"_blank"},e("in-app-payments.support-link.text"))))},ea="PaymentsHeader-module__payments-header--NjXGA",ta="PaymentsHeader-module__logo-with-button--gUEYe",aa="PaymentsHeader-module__yans-amount--ge_eY",ra=()=>{const e=(0,at.T)(),{hostname:t}=(0,B.getDomainConfig)(),{cdnUrl:a}=(0,Ce.b)(),r=(0,Fe.C)((e=>e.theme.color)),s=(0,Fe.C)((e=>{var t;return null!=(t=e.user.balance.value)?t:0})),n=e("common.service.name"),o=`${a}/games-static/static-data/images/payments/${t}/${r}/logo.svg`,i=e("in-app-payments.yans-amount",{params:{balance:s,currency:e("payments.currency",{number:s}).toLowerCase()}});return d().createElement("div",{className:ea},d().createElement("div",{className:ta},d().createElement("img",{alt:n,crossOrigin:"anonymous",src:o,title:n})),d().createElement("div",{className:aa,"data-testid":"payment-form-yans-amount"},d().createElement("span",null,i)))},sa=({children:e})=>d().createElement(d().Fragment,null,d().createElement(ra,null),e,d().createElement(Qt,null)),na="PaymentsModal-module__modal--zcmkd",oa="PaymentsModal-module__modalIframeVisible--Syoxe",ia="PaymentsModal-module__modalInner--iqxHU",la="PaymentsModal-module__modalInnerLeft--bdlqr",da="PaymentsModal-module__modalInnerRight--A1BfO";var ca=a(58e3);const ha=({onClose:e,onPaymentFailed:t,onPaymentSuccess:a,paymentsConfig:r,purchaseConfig:s})=>{const[n,o]=(0,l.useState)(null),[i,c]=(0,l.useState)(!1),h=(0,l.useCallback)((e=>{t({error:(0,ca.E)(e)})}),[t]),u=(0,l.useCallback)((()=>{if(n)return a(n),void e();t({error:new Ct.Z({code:"PAYMENT_USER_CANCELED",message:"User canceled the order."})}),null==e||e()}),[t,a,e,n]),p=(0,l.useCallback)((e=>{c(e)}),[]),m=(0,l.useCallback)((e=>{a(e)}),[a]),v=(0,l.useCallback)((e=>{o(e)}),[]);return d().createElement(De.Z,{centeredVertically:!1,cls:(0,st.E)(na,"inAppForm",i?oa:""),isAdaptive:!0,testId:"inAppForm",onClose:u},d().createElement("div",{className:ia},d().createElement("div",{className:la},d().createElement(sa,null,d().createElement(Vt,{paymentsConfig:r,purchaseConfig:s,onConfirmSuccessPurchase:m,onIframeVisibilityChange:p,onPurchaseFailed:h,onPurchaseSuccess:v}))),d().createElement("div",{className:da,id:Le})))},ua=(0,l.memo)((({paymentsConfig:e,purchaseConfig:t,onClose:a,onOpen:r,onPaymentFailed:s,onPaymentSuccess:n})=>{const o=(0,Fe.T)();return(0,Se.qR)((()=>{o((0,We.Zc)({forceFetch:!0})),null==r||r()})),d().createElement(ha,{paymentsConfig:e,purchaseConfig:t,onClose:a,onPaymentFailed:s,onPaymentSuccess:n})})),pa=()=>{const{registerPopup:e,isShown:t,hidePopup:a}=(0,l.useContext)(Te.O);(0,Se.qR)((()=>{e({name:Ae,weight:50,showCondition:()=>!1})}));const{sendCallback:r,purchaseConfig:s,paymentsConfig:n,metrikaLogger:o}=(()=>{const{showPopup:e}=(0,l.useContext)(Te.O),{playPageData:{gameInfo:t}}=(0,Ce.b)(),a=(0,l.useRef)(),r=(0,l.useRef)(null),[s,n]=(0,l.useState)(null),[o,i]=(0,l.useState)(null),d=(0,l.useCallback)(((s,o)=>{const{action:l,data:d}=s.data;"purchase-start"===l&&(e({name:Ae,weight:50,showCondition:()=>!0}),n(d.purchaseConfig),i(d.paymentConfig),i(d.paymentsConfig),a.current=o,r.current=new Ie.Z({appId:t.appId,productStatData:{id:d.purchaseConfig.id},basicSupportPaymentRequest:(0,Re.Z)(),supportPaymentRequest:!1,dialogType:Pe.Z.PURCHASE}))}),[e,t.appId]);return(0,l.useEffect)((()=>(v.Z.onExternalMessage("payments",d),()=>v.Z.offExternalMessage("payments",d))),[d]),{sendCallback:a.current,purchaseConfig:s,paymentsConfig:o,metrikaLogger:r.current}})(),i=(0,l.useCallback)((e=>{null==o||o.log("success",{basicSupportPaymentRequest:(0,Re.Z)(),supportPaymentRequest:!1,purchaseToken:e.data.token,preventDestroy:!0}),null==o||o.reachGoals(),null==r||r({data:e}),a(Ae)}),[r,a,o]),c=(0,l.useCallback)((e=>{null==o||o.error(e.error,{errorPlace:"purchase",continuePaymentProcess:!0}),null==r||r(e)}),[r,o]),h=(0,l.useCallback)((()=>a(Ae)),[a]),u=(0,l.useCallback)((()=>{null==o||o.log("open")}),[o]);return t(Ae)&&s?d().createElement(ua,{paymentsConfig:n,purchaseConfig:s,onClose:h,onOpen:u,onPaymentFailed:c,onPaymentSuccess:i}):null};var ma=a(58613),va=a(46211);const ga=(0,b.M$)("PlatformSubscriptions",b.XG.Dev);class fa extends l.PureComponent{componentDidMount(){ga("componentDidMount"),this.removeExpiredSubscriptions();Boolean(this.props.userData.login)&&Math.abs(Date.now()-this.props.subscriptions.time)>y.dV&&this.props.fetchPlatformSubscriptions()}componentWillUnmount(){this.removeExpiredSubscriptionsTimeout&&window.clearTimeout(this.removeExpiredSubscriptionsTimeout)}componentDidUpdate(e){const t=e.subscriptions,a=this.props.subscriptions;JSON.stringify(t)!==JSON.stringify(a)&&ga("Subscriptions was updated",this.props.subscriptions)}removeExpiredSubscriptions(){ga("removeExpiredSubscriptions");const{subscriptions:e,time:t,ver:a}=this.props.subscriptions;if("object"!=typeof e||"number"!=typeof t||a!==ma.iY||Math.abs(Date.now()-t)>y.s2)this.props.setPlatformSubscriptions(ma.$F.platformSubscriptions);else{let r=!1;Object.keys(e).forEach((t=>{const a=e[t],s=a.time?a.time+a.duration:a.expired;(function(e){return"object"==typeof e&&"number"==typeof e.duration&&"number"==typeof e.expired})(a)&&Date.now()<s||(ga(`remove "${t}" subscription`),delete e[t],r=!0)})),r&&this.props.setPlatformSubscriptions({subscriptions:e,time:t,ver:a})}this.removeExpiredSubscriptionsTimeout=window.setTimeout((()=>this.removeExpiredSubscriptions()),y.dV)}render(){return null}}const ya=(0,h.$j)((function(e){const{value:t,error:a}=(0,va.c)(e);return{subscriptions:t,error:a,userData:e.userData}}),(function(e){return(0,$.DE)({fetchPlatformSubscriptions:H.VR,setPlatformSubscriptions:H.Cg},e)}))(fa);var ba=a(96981),wa=a(40532),ka=a(31635);const Ea=a(36037).Z;var Sa=a(96349),Aa=a(65044),Ia=a(17780),Pa=a(10576),Ta=a(27522),Ca=a(96763),Ra=a(5718),Da=a(35543),Oa=a(18455),La=a(3462);const _a=i().with("play-guard-dialog"),xa=({onAuthButtonClick:e})=>{var t;const a=(0,at.T)(),{playPageData:{gameSettings:r}}=(0,Ce.b)(),s=(0,h.v9)((e=>Boolean(e.userData.login))),{disableLogin:n}=(0,B.getDomainConfig)().auth||{};if(n)return null;return!s&&Boolean(null==(t=r.features)?void 0:t.user_data_required)?d().createElement("div",{className:_a("authorize")},d().createElement("div",{className:_a("authorize-description")},a("guard.player.auth.description")),d().createElement(lt.z,{"data-guard-auth":"true","data-testid":"PlayGuardAuthorize-Button",size:32,type:"submit",view:"secondary",onClick:e},a("common.login"))):null},Na=i().with("play-guard-dialog"),Ba=()=>{const e=(0,at.T)(),{playPageData:{gameInfo:t}}=(0,Ce.b)(),a=t.categoryNames.map((t=>e(`category.${t}.disclaimer`,{withNoErrors:!0}))).filter(Boolean).join("\n");return(0,n.v_)({on:"user_permissions_from_flags"})||!a?null:d().createElement("div",{className:Na("disclaimer")},a)};var Ma=a(33509),$a=a(41318);const Fa=i().with("play-guard-dialog"),Ha=({onPermissionChange:e,permissionChecked:t,withPurchasesPermissions:a})=>{var r;const{playPageData:{gameSettings:s}}=(0,Ce.b)(),n=(0,at.T)(),o=(0,h.v9)((e=>Boolean(e.userData.login)));if(!(a||o&&Boolean(null==(r=s.features)?void 0:r.user_data_required)))return null;const i=(0,$a.f)(o,a,n);return d().createElement("div",{className:Fa("permission")},d().createElement("div",{className:Fa("permission-description")},i),d().createElement(Ma.X,{checked:t,className:Fa("permission-checkbox"),size:18,onChange:e}))};var Wa=a(74795),Ga=a(15771);const Za=()=>d().createElement(Qe.Z,{type:"play"}),ja=({className:e,onClick:t})=>{const a=(0,at.T)()("common.play.notable");return d().createElement(Wa.Z,{className:e,"data-guard-accept":"play_button",iconLeft:Za,size:"l",type:"submit",view:"play",onClick:t},a)},Ua=({children:e,className:t,onClick:a})=>{var r,s;const n=(0,l.useContext)(N.Z),{componentsSettings:o}=(0,B.getDomainConfig)(),i=(null==(r=o.buttons)?void 0:r.playGuardApplySize)||"l",c=(null==(s=o.buttons)?void 0:s.playGuardApplyView)||"action";return(0,Ga.Nt)(n.abt.flags)?d().createElement(ja,{className:t,onClick:a}):d().createElement(Wa.Z,{className:t,"data-guard-accept":"play_button",size:i,type:"submit",view:c,onClick:a},e)};var qa=a(4230),za=a(92901),Va=a(28705),Ka=a(98343),Ya=a(73285);function Xa(e){const t=function(e){let t=1;for(let a=1e3;a>1;a/=10)if(e>=a){t=a;break}return t}(e);return Math.floor(e/t)*t}function Ja(e){const t=Xa(e);let a="";try{a=new Intl.NumberFormat("ru-RU").format(t)}catch(e){a=function(e){let t=`${e}`,a="0";for(;t.length>0;){const e=t.slice(-3);t=t.slice(0,-3),a=a?`${e} ${a}`:e}return a}(t)}return t>10&&(a+="+"),a}var Qa=a(82027),er=a(68108),tr=a(68199),ar=(a(53722),a(69838)),rr=a(57681),sr=a(29008),nr=Object.defineProperty,or=Object.defineProperties,ir=Object.getOwnPropertyDescriptors,lr=Object.getOwnPropertySymbols,dr=Object.prototype.hasOwnProperty,cr=Object.prototype.propertyIsEnumerable,hr=(e,t,a)=>t in e?nr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,ur=(e,t)=>{for(var a in t||(t={}))dr.call(t,a)&&hr(e,a,t[a]);if(lr)for(var a of lr(t))cr.call(t,a)&&hr(e,a,t[a]);return e},pr=(e,t)=>or(e,ir(t));a(75801);const mr=i().with("play-guard-dialog");mr("header-cancel-link"),mr("permission-checkbox"),mr("apply-button");class vr extends N.P{constructor(){super(...arguments),this.hasMounted=!1,this.aboutGameConversionDataEvents={isClicked:!1,isRendered:!1},this.state={permissionChecked:!0,isSimilarGamesEnables:this.isSimilarGamesEnabled()},this.handleEarlyEvents=()=>{var e;null==(e=window.earlyEvents)||e.messages.forEach((e=>{const{type:t,action:a,data:r}=e;if("guard"===t)switch(a){case"auth":this.auth();break;case"close":this.cancel();break;case"accept":this.setState({permissionChecked:r.permissionChecked},(()=>{this.apply(r.actionSource)}))}}))},this.handleFocusOutEvent=e=>{requestAnimationFrame((()=>{if(document.activeElement===(0,za.n)()){window.focus();const t=e.target;t&&"focus"in t&&"function"==typeof t.focus&&t.focus()}}))},this.onAuthButtonClick=()=>{this.auth()},this.onApplyButtonClick=()=>{this.apply(M.EO.PlayButton)},this.onExternalClick=e=>{const t=this.state.permissionChecked?Pa.aR.ALLOW:Pa.aR.FORBID;this.props.handleEvent(new CustomEvent("apply",{detail:{actionSource:M.EO.Background,permission:this.isPermissionsVisible()?t:void 0}}))},this.onContentClick=e=>{e.stopPropagation()},this.onOpenInfoClick=e=>{e.stopPropagation(),this.logOnceAboutGameConversionDataEventsIsClicked(),this.props.handleEvent(new CustomEvent("info")),v.Z.post({type:"promo-bar",action:"hide"})},this.apply=e=>{const t=this.state.permissionChecked?Pa.aR.ALLOW:Pa.aR.FORBID;this.props.handleEvent(new CustomEvent("apply",{detail:{actionSource:e,permission:this.isPermissionsVisible()?t:void 0}}))},this.auth=()=>{this.props.handleEvent(new CustomEvent("auth"))},this.cancel=()=>{this.props.handleEvent(new CustomEvent("cancel"))},this.onPermissionChange=e=>{this.setState(pr(ur({},this.state),{permissionChecked:e.target.checked}))}}componentDidMount(){this.hasMounted=!0,window.focus(),window.addEventListener("focusout",this.handleFocusOutEvent),this.setState(pr(ur({},this.state),{isSimilarGamesEnables:this.isSimilarGamesEnabled()})),this.handleEarlyEvents()}componentWillUnmount(){window.removeEventListener("focusout",this.handleFocusOutEvent)}isSimilarGamesEnabled(){const{abt:{flags:e},playPageData:t,isDistGame:a}=this.context,{location:r}=this.props;return(0,qa._Z)({appId:t.gameInfo.appId,hasMounted:this.hasMounted,isDistGame:a,locationHash:r.hash,locationSearch:r.search,showExceptNavigationFromPlayedGames:(0,Ga.tQ)(e),showOnRedirectFromCatalog:(0,Ga.Fe)(e)})}isAdvStickyBannerEnabled(){const{settings:e}=this.context.playPageData.gameData||{},{adv:t}=(0,Va.Lf)(e);return this.context.playPageData.isAdvStickyBannerEnabled&&Boolean(t)}get texts(){const{getText:e}=this.props,{gamesLogoUrlText:t,gamesLogoUrlYandexName:a,verticalName:r}=this.props.vertical;return{aboutGameText:e(`guard.about-game.vertical-${r}`),commonPlayButtonText:e(`common.play.vertical-${r}`),gamesLogoUrlText:t===ar.CF.WEBAPPS_CATEGORY_SERVICE_NAME?e("common.service.app_name"):e("common.service.short_name"),gamesLogoUrlYandexName:a,legalText:e(`guard.legal.text.vertical-${r}`),serviceLogoIconType:`logo-${r}`}}get gameData(){var e,t;const{getText:a}=this.props,{gameInfo:r,gameSettings:s,gameData:n}=this.context.playPageData,o=r.hasWebAppsCategory?"guard.users.count.text":"guard.players.count.text",i=r.playersCount?a(o,{number:Xa(r.playersCount)}):void 0,l=r.hasWebAppsCategory?a("game.rating.users.new"):a("game.rating.new"),d=(0,tr.R)(this.context.isSlowCountry)?this.context.cdnUrl:void 0;return{ageRating:null==(e=s.features)?void 0:e.age_rating,hasWebAppsCategory:r.hasWebAppsCategory,icon:(0,le.kM)(r.iconUrl,d),playersCount:r.playersCount?Ja(r.playersCount):void 0,playersCountText:i,gameQualityScore:r.gameQualityScore,publisher:(0,Ya.T)(r.publisher.name),rating:r.rating,ratingText:l,title:(0,Ya.T)(r.title),userDataRequired:Boolean(null==(t=s.features)?void 0:t.user_data_required),categories:r.categoryNames,categoriesIDs:(null==n?void 0:n.categoryIDs)||[]}}renderCancelButton(){const{oneTabPWA:e}=this.context;return d().createElement("a",{className:`${mr("header-cancel-link")} games-link`,"data-guard-close":"true",target:(0,Qa.AO)({oneTabPWA:e}),onClick:this.cancel},this.props.getText("common.cancel"))}renderHeader(){const{baseUrl:e,referrer:t,tld:a,isPWA:r,oneTabPWA:s}=this.context,{getText:n,vertical:{verticalCategory:o,verticalName:i}}=this.props,l=o?(0,rr.QG)(this.context,{name:o}):"/",c=(0,ce.Px)({search:"?utm_source=game_guard_logo",params:{[X.cB]:r?"1":"",[X.Vw]:(0,er.sD)(t)?t:""}}),h=(0,Ia.E)({baseUrl:e,path:`${l}${c?`${c}`:""}`,lang:this.context.pathLang,languages:(0,B.getDomainConfig)().languages,tld:a});return d().createElement("div",{className:mr("header")},d().createElement("span",{className:mr("header-logo")},d().createElement(Oa.Kk,{className:mr("header-logo-link"),href:h,tabIndex:-1,target:(0,Qa.AO)({oneTabPWA:s}),title:n(`common.service.name.vertical-${i}`)},d().createElement(La.Z,{type:ar.q7.GUARD}))),this.renderCancelButton())}renderRating(){return d().createElement("div",{className:mr("description-players")},this.gameData.gameQualityScore&&d().createElement(Ra.Z,{value:this.gameData.gameQualityScore}),d().createElement(Da.Z,{hasWebAppsCategory:this.gameData.hasWebAppsCategory,rating:this.gameData.rating,useNewText:!0}))}renderDescription(){const{isSlowCountry:e}=this.context,{ageRating:t}=this.gameData;return d().createElement("div",{className:mr("description")},d().createElement(et.Z,{alt:this.gameData.title,className:mr("description-icon",{low:e}),crossOrigin:"anonymous",size:38,src:this.gameData.icon}),d().createElement("div",{className:mr("description-details")},d().createElement("div",{className:mr("description-details-header")},d().createElement("div",{className:mr("description-title-wrapper")},d().createElement("h1",{className:mr("description-title"),itemScope:!0,itemType:"http://schema.org/WebPage"},this.gameData.title),t&&d().createElement(Ta.Wd,{className:mr("description-ageRating"),"data-testid":"PlayGuard-AgeTag",variant:sr.Ft[t]},t)),d().createElement("div",{className:mr("description-publisher")},this.gameData.publisher),d().createElement(Ca.Z,{categoriesNames:this.gameData.categories,categoryIDs:this.gameData.categoriesIDs,mix:mr("categories")}))))}isPermissionsVisible(){return this.props.withPurchasesPermissions||this.props.hasAuth&&this.gameData.userDataRequired}logOnceAboutGameConversionDataEventsIsRendered(){this.aboutGameConversionDataEvents.isRendered||(this.aboutGameConversionDataEvents.isRendered=!0,window.clickdaemonLog(Ka.zx.CONVERSION,{item:"game_page_guard_learn_more_render",app_id:this.context.playPageData.gameInfo.appId}))}logOnceAboutGameConversionDataEventsIsClicked(){this.aboutGameConversionDataEvents.isClicked||(this.aboutGameConversionDataEvents.isClicked=!0,window.clickdaemonLog(Ka.zx.CONVERSION,{item:"game_page_guard_learn_more_click",app_id:this.context.playPageData.gameInfo.appId}))}renderApply(){return d().createElement("div",{className:mr("apply"),title:this.texts.commonPlayButtonText},d().createElement(Ua,{className:mr("apply-button"),onClick:this.onApplyButtonClick},this.texts.commonPlayButtonText))}renderLegal(){if((0,n.v_)({on:"user_permissions_from_flags"}))return null;const{baseHost:e}=this.context,{getText:t}=this.props;return d().createElement("div",{className:mr("legal")},this.texts.legalText," ",d().createElement("a",{className:"games-link",href:t("guard.license.link.href"),target:"_blank"},t("guard.license.link.text")))}renderOpenInfo(){return"undefined"!=typeof window&&this.logOnceAboutGameConversionDataEventsIsRendered(),d().createElement("div",{className:`${mr("open-info")} games-link`,onClick:this.onOpenInfoClick},d().createElement(Qe.Z,{type:"info"}),this.texts.aboutGameText)}renderGuardPermission(){return(0,n.v_)({on:"user_permissions_from_flags"})?null:d().createElement(Ha,{permissionChecked:this.state.permissionChecked,withPurchasesPermissions:this.props.withPurchasesPermissions,onPermissionChange:this.onPermissionChange})}render(){const e=this.state.isSimilarGamesEnables&&!this.props.isFullscreenActive;return d().createElement("div",{className:mr({"with-blur":!0,"with-adv":this.isAdvStickyBannerEnabled(),"with-similar":e,hidden:this.props.hidden}),onClick:this.onExternalClick},d().createElement("div",{className:mr("content"),onClick:this.onContentClick},this.renderHeader(),this.renderDescription(),this.renderRating(),this.renderGuardPermission(),d().createElement(xa,{onAuthButtonClick:this.onAuthButtonClick}),this.renderApply(),this.renderLegal(),d().createElement(Ba,null)),this.renderOpenInfo())}}const gr=(0,r.E)((0,h.$j)((function(e){return{darkTheme:(0,Nt.Up)(e),getText:e.getText,hasAuth:Boolean(e.userData.login),isFullscreenActive:e.ui.isFullscreenActive,isSimilarGamesLoading:e.similarGamesLoading,lang:e.lang,vertical:e.vertical}}))(vr));function fr(){return d().createElement(Aa.u.Consumer,null,(e=>e.isNeedToShow?d().createElement(gr,{handleEvent:e.handleEvent,hidden:e.isHidden,withPurchasesPermissions:e.withPurchasesPermissions}):null))}var yr=a(97975),br=a(43633),wr=a(87005),kr=a(125),Er=a(73673);const Sr=()=>d().createElement("div",{"data-fuse-privacy-tool":!0});const Ar=a(13048).Z;var Ir=a(35864),Pr=Object.defineProperty,Tr=Object.defineProperties,Cr=Object.getOwnPropertyDescriptors,Rr=Object.getOwnPropertySymbols,Dr=Object.prototype.hasOwnProperty,Or=Object.prototype.propertyIsEnumerable,Lr=(e,t,a)=>t in e?Pr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,_r=(e,t)=>{for(var a in t||(t={}))Dr.call(t,a)&&Lr(e,a,t[a]);if(Rr)for(var a of Rr(t))Or.call(t,a)&&Lr(e,a,t[a]);return e},xr=(e,t)=>Tr(e,Cr(t)),Nr=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const Br=(0,b.M$)("Scopes",b.XG.Popup),Mr={method:"POST",credentials:"include",referrerPolicy:"no-referrer-when-downgrade",headers:{Accept:"application/json","Content-Type":"application/json"}};class $r extends N.P{constructor(e,t){super(e,t),this.onInternalMessage=(e,t)=>{const{action:a,data:r}=e.data;"apply-guard"===a&&this.handleApplyGuard(r,t)},this.onExternalMessage=(e,t)=>{"open-scopes-dialog"===e.data.action&&v.Z.post({type:"guard",action:"get-show-state"}).then((({data:e})=>{const{result:a}=e;a||this.show().then((e=>{t({data:{result:e}})})).catch((()=>{t({data:{result:null}})}))}))},this.handleEvent=e=>{switch(e.type){case"apply":this.sendParams("apply"),this.apply();break;case"cancel":this.sendParams("cancel"),this.cancel();break;case"close":this.sendParams("close"),this.close();break;default:(0,f.H)({prefix:"[Scopes]",sourceMethod:"handleEvent"},new Error(`Unknown event type ${e.type}`))}},this.scopePermissionInProfile=(0,n.v_)({on:"user_permissions_from_flags"}),this.state={show:!1}}componentDidMount(){Br("componentDidMount"),v.Z.onInternalMessage("scopes",this.onInternalMessage),v.Z.onExternalMessage("scopes",this.onExternalMessage)}componentWillUnmount(){Br("componentWillUnmount"),v.Z.offInternalMessage("scopes",this.onInternalMessage),v.Z.offExternalMessage("scopes",this.onExternalMessage)}handleApplyGuard(e,t){!e.isGuardEnabled&&this.props.hasAuth?e.permission&&this.postDataPermissions({permissions:e.permission,withPurchasesPermissions:e.withPurchasesPermissions}).then((e=>t({data:{result:e}}))).catch((()=>t({data:{result:null}}))):this.postData({permissions:e.permission,guardConfirm:!0,withPurchasesPermissions:e.withPurchasesPermissions}).then((e=>t({data:{result:e}}))).catch((()=>t({data:{result:null}})))}show(){const e=this.context.abt.flags;if(this.showPromiseWrapper)return this.showPromiseWrapper.promise;this.setState({show:!0}),this.sendParams("show");const t=this.createShowPromiseWrapper();return((0,V.x)()&&(0,Ga.r7)(e)||function(){const e=(0,U.KT)();return X.XL.includes(e)}())&&this.handleEvent(new CustomEvent("cancel")),t}createShowPromiseWrapper(){return this.showPromiseWrapper=new oe.Z,this.showPromiseWrapper.promise}postData(e){return Nr(this,arguments,(function*({guardConfirm:e,permissions:t,withPurchasesPermissions:a}){const r={};if(t&&[Pa.aR.ALLOW,Pa.aR.FORBID].includes(t)&&(this.scopePermissionInProfile||(r.avatar=t,r.publicName=t),a&&(r.purchasesInfo=t)),void 0!==e&&(r.guard=e),0===Object.keys(r).length)return Promise.reject(new Error("Wrong param value for private-info"));const s=(0,Ir.H)("/player/private-info/"),n=xr(_r({},Mr),{body:JSON.stringify(r)});return yield(0,g.rQ)({apiPath:s,options:n})}))}postDataPermissions(e){return Nr(this,arguments,(function*({permissions:e,withPurchasesPermissions:t}){if(this.scopePermissionInProfile)return;const a={},r=(0,Ir.H)("/player/scope-permissions/");[Pa.aR.ALLOW,Pa.aR.FORBID].includes(e)&&(a.avatar=e,a.publicName=e,t&&(a.purchasesInfo=e));const s=xr(_r({},Mr),{body:JSON.stringify(a)});return yield(0,g.rQ)({apiPath:r,options:s})}))}apply(){this.postDataPermissions({permissions:Pa.aR.ALLOW}).then((e=>{this.showPromiseWrapper&&(this.showPromiseWrapper.resolve(e),this.showPromiseWrapper=null),this.close()})).catch((e=>{(0,f.H)({prefix:"[Scopes]",sourceMethod:"apply"},e),this.close()}))}cancel(){this.postDataPermissions({permissions:Pa.aR.FORBID}).then((e=>{this.showPromiseWrapper&&(this.showPromiseWrapper.resolve(e),this.showPromiseWrapper=null),this.close()})).catch((e=>{(0,f.H)({prefix:"[Scopes]",sourceMethod:"cancel"},e),this.close()}))}close(){this.setState({show:!1}),this.showPromiseWrapper&&(this.showPromiseWrapper.reject(),this.showPromiseWrapper=null)}sendParams(e){(0,K.U4)({},{borrowParams:{scopes:{player:{dialog:e}}}})}render(){return this.state.show?d().createElement(Ar,{handleEvent:this.handleEvent}):null}}const Fr=(0,h.$j)((e=>({hasAuth:Boolean(e.userData.login)})))($r);var Hr=a(34972),Wr=Object.defineProperty,Gr=Object.getOwnPropertySymbols,Zr=Object.prototype.hasOwnProperty,jr=Object.prototype.propertyIsEnumerable,Ur=(e,t,a)=>t in e?Wr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const qr=i().with("screen-manager-rotate-banner"),zr=()=>{v.Z.post({type:"screen-manager",action:"request-fullscreen"})},Vr=e=>{const t=(0,at.T)()("rotate.banner.button.text.short"),a=s.default.isLockable,r=(0,l.useCallback)((e=>{window.blur(),setTimeout((()=>{null==e||e.focus(),window.focus(),window.dispatchEvent(new Event("focus"))}),1)}),[]);return d().createElement(Hr.Z,((e,t)=>{for(var a in t||(t={}))Zr.call(t,a)&&Ur(e,a,t[a]);if(Gr)for(var a of Gr(t))jr.call(t,a)&&Ur(e,a,t[a]);return e})({},e),a&&d().createElement("button",{className:qr("force-rotate-button"),ref:r,onClick:zr},t))};var Kr=a(33381),Yr=a(55968),Xr=a(80024),Jr=a(16527),Qr=a(70602),es=a(48810),ts=a(30448),as=a(39449),rs=a(89592);const ss="yandexGames_shortcut_installation_dates";const ns=(0,b.M$)("ShortcutManagerCommonApi",b.XG.Popup);function os(e,t){(0,K.U4)({},{shortcutApi:{action:e,params:t}})}class is{constructor(e,t,a){this.context=t,this.beforeInstallEventCallbacks=[],this.isPlayToEarn=!1,this.isYandex=!1,this.wasBeforeInstallPrompt=()=>Boolean(this.shouldCallBeforeInstallEventCallbackImmediataly),this.showBeforeInstallprompt=!1,this.appId=e,this.dispatch=a,window.addEventListener("beforeinstallprompt",(e=>{e.preventDefault(),this.shortcutEventPrompt=e,this.callBeforeInstallEventCallbacks()})),this.isPlayToEarn=(0,Ga.XP)(t.abt.flags),this.isYandex=(0,Y.RY)()}addListenerOnSuccessInit(e){this.shouldCallBeforeInstallEventCallbackImmediataly?e():this.beforeInstallEventCallbacks.push(e)}safeCallBeforeInstallEventCallbacks(){this.beforeInstallEventCallbacks.forEach((e=>e())),this.shouldCallBeforeInstallEventCallbackImmediataly=!0}callBeforeInstallEventCallbacks(){this.shouldCallBeforeInstallEventCallbackImmediataly||this.safeCallBeforeInstallEventCallbacks(),this.waitShowPromptAsync&&(this.waitShowPromptAsync=!1,this.showPromptByUserGesture("beforeinstallprompt")),os("beforeinstallprompt",{show:this.showBeforeInstallprompt})}addListenerOnExpiration(e){this.expirationCallback=e}getSupportStatus(){return Boolean(this.shortcutEventPrompt)}showPromptByUserGesture(e){const t=(0,ts.c)((()=>(t(),this.showPrompt(e,Xr.v.PAGE_OPEN))))}showPromptAsync(e){return t=this,a=null,r=function*(){const{source:t}=e;if(os("showPromptStart",e),this.shortcutEventPrompt)return ns(`ShortcutManagerCommonApi showPromptAsync: showPrompt exists and is called, source: ${e.source}`),t===Xr.v.PAGE_OPEN?this.showPromptByUserGesture("userGesture"):this.showPrompt("showPrompt",t);this.waitShowPromptAsync=!0;const a=`ShortcutManagerCommonApi showPromptAsync: showPrompt doesn't exist and is called, source: ${e.source}`;if(ns(a),t===Xr.v.GAME_API)throw new Error(a);console.info(a)},new Promise(((e,s)=>{var n=e=>{try{i(r.next(e))}catch(e){s(e)}},o=e=>{try{i(r.throw(e))}catch(e){s(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);i((r=r.apply(t,a)).next())}));var t,a,r}readInstallationDates(){const{value:e,wasError:t}=(0,es.dq)(ss);if(!t)try{const t=JSON.parse(e||"{}");if(t&&"object"==typeof t)return t}catch(e){(0,f.H)({block:Dt.W.SHORTCUTS_POPUP_MANAGER,prefix:"Error in readInstallationDates",source:"sdk"},e)}}shouldInstallAgain(){if(!this.appId)return!1;const e=this.readInstallationDates();if(!e)return!1;const t=new Date(e[this.appId]).getTime();return!!isNaN(t)||Math.abs(Date.now()-t)>=as.E$}setInstallationDate(){if(!this.appId)return;const e=this.readInstallationDates()||{};e[this.appId]=(new Date).toISOString(),(0,es.Ur)(ss,JSON.stringify(e))}showPrompt(e,t){var a,r,s,n;if(ns("showPrompt"),this.shortcutEventPrompt){if("showPrompt"===e||this.shouldInstallAgain())return os("showPrompt",{showPromptReason:e}),(0,K.NF)({},rs.Ji.SHORTCUT_PROMPT_SHOW,{showPromptSource:e}),Qr.Fj.show((0,Qr.oU)({context:this.context,popupType:"system",source:(0,Qr.N7)(t)})),null==(a=this.shortcutEventPrompt)||a.prompt().catch((e=>{os("showPromptError",{err:e.message}),console.warn("ShortcutManagerCommonApi error: ",e)})),null==(r=this.shortcutEventPrompt)||r.userChoice.then((a=>(Qr.Fj.click((0,Qr.oU)({context:this.context,popupType:"system",source:(0,Qr.N7)(t),result:"accepted"===a.outcome?"accepted":"rejected"})),"accepted"===a.outcome?((0,K.NF)({},rs.Ji.SHORTCUT_USER_CHOICE_ACCEPTED,{showPromptSource:e}),this.isPlayToEarn&&this.isYandex&&this.dispatch((0,Jr.$B)(Yr.cb.CREATE_LINK_IN_CATALOGUE))):(this.dispatch((0,H.yf)(!0)),(0,K.NF)({},rs.Ji.SHORTCUT_USER_CHOICE_DISMISSED,{showPromptSource:e})),this.shortcutEventPrompt=void 0,a))),null==(s=this.expirationCallback)||s.call(this),this.setInstallationDate(),null==(n=this.shortcutEventPrompt)?void 0:n.userChoice;os("showPromptError",{err:`You can call showPrompt on reason ${e} only once a day`})}}}var ls=a(15987);var ds=a(62847),cs=a(32595),hs=a(4915),us=a(31085);const ps=(0,b.M$)("ShortcutPopupManager",b.XG.Popup),ms=y.WT;class vs extends l.PureComponent{constructor(e){super(e),this.onExternalMessage=(e,t)=>{return a=this,r=null,s=function*(){const{appId:a}=this.context.playPageData.gameInfo,{action:r}=e.data;switch(r){case"can-show-prompt":{const e=this.canShowApiPrompt(a);ps(`onExternalMessage: action: "${r}", canShow: ${e}`),t({data:{canShow:e}}),this.setState({canShowCalled:!0});break}case"show-prompt":{const e=this.canShowApiPrompt(a);if(ps(`onExternalMessage: action: "${r}", canShow: ${e}`),e){const e=this.installationChecker.catalogPromptHasShown(a)?"game":"catalog";(0,K.NF)({},rs.Ji.SHORTCUT_API_SHOW,{shortcutApi:{appId:a,manifestType:e}}),window.setTimeout((()=>{this.showApiPrompt({source:Xr.v.GAME_API},a).then((e=>{t({data:{outcome:null==e?void 0:e.outcome}})}))}),ms)}else this.state.canShowCalled?t({data:{canShow:e,reason:"cannot show prompt"}}):t({data:{canShow:e,reason:"use canShowPrompt before showPrompt"}});break}}},new Promise(((e,t)=>{var n=e=>{try{i(s.next(e))}catch(e){t(e)}},o=e=>{try{i(s.throw(e))}catch(e){t(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);i((s=s.apply(a,r)).next())}));var a,r,s},this.onInternalMessage=e=>{var t,a,r;const{action:s,data:n}=e.data;switch(s){case"show-api-prompt":ps('onInternalMessage "show-api-prompt"'),this.showApiPrompt({source:n.source});break;case"show-shortcut-popup":ps('onInternalMessage "show-shortcut-popup"'),this.showShortcutPopup();break;case"show-standalone-api-prompt":ps('onInternalMessage "show-standalone-api-prompt"'),null==(r=null==(a=null==(t=window.yandex)?void 0:t.app)?void 0:a.installShortcut)||r.call(a);break;case"activate":{ps('onInternalMessage "activate"');const e=new Event("beforeinstallprompt");e.userChoice=this.createExternalShortcutPromise("user-choice"),e.prompt=()=>this.createExternalShortcutPromise("prompt"),window.dispatchEvent(e);break}}},this.createExternalShortcutPromise=e=>new Promise(((t,a)=>{const r=`${e}-resolve`,s=`${e}-reject`,n=e=>{const{action:o}=e.data;o!==r&&o!==s||(v.Z.offInternalMessage("shortcut-manager",n),o===r?t(e.data.result):o===s&&a(e.data.result))};v.Z.onInternalMessage("shortcut-manager",n,{withHistory:!0}),"prompt"===e&&v.Z.post({type:"shortcut-manager",action:"prompt"})})),this.handleCloseShortcutPopup=()=>{const e=(t="game",window.YandexGamesSDK&&"function"==typeof window.YandexGamesSDK.getStack?window.YandexGamesSDK.getStack(t):document.body).querySelector("iframe");var t;e&&(0,ds.Z)(e),this.setState({forcefullyShowShortcutPopup:!1})},this.state={canShowCalled:!1,forcefullyShowShortcutPopup:!1}}componentDidMount(){const{appId:e}=this.context.playPageData.gameInfo;this.shortcutManagerApi=new is(e,this.context,this.props.dispatch),this.installationChecker=new hs.Z,this.initMessaging()}initMessaging(){v.Z.onExternalMessage("shortcut-manager",this.onExternalMessage),v.Z.onInternalMessage("shortcut-manager",this.onInternalMessage,{withHistory:!0}),v.Z.post({type:"shortcut-manager",action:"request"})}canShowApiPrompt(e){var t;if((0,n.v_)({on:"disable_pwa_promo"}))return!1;const a=(0,cs.N)(this.context.uatraits);return this.installationChecker.checkShowCapability(us.Wp.GameApi,{waitingPeriod:y.dV,maxShowCount:3,isMiniInfobarEnabled:a},e)&&(null==(t=this.shortcutManagerApi)?void 0:t.getSupportStatus())}showApiPrompt(e,t){const{source:a}=e;if(t&&!this.canShowApiPrompt(t))return Promise.resolve(void 0);const r=new Promise((e=>this.addListenerOnSuccessInit((()=>e(!0))))).then((()=>(a===Xr.v.GAME_API&&this.installationChecker.updateShowData(us.Wp.GameApi,t),this.shortcutManagerApi.showPromptAsync(e))));return r.then((e=>{void 0!==e&&(this.props.dispatch((0,H.FJ)(void 0)),a===Xr.v.GAME_API&&t&&("accepted"===e.outcome?(this.installationChecker.updateInstallationData(us.Wp.GameApi,t),this.installationChecker.setLastPromptAccepted(!0,t)):(this.props.dispatch((0,H.yf)(!0)),this.installationChecker.setLastPromptAccepted(!1,t))))})).catch((()=>{})),r}wasBeforeInstallPrompt(){return this.shortcutManagerApi.wasBeforeInstallPrompt()}addListenerOnSuccessInit(e){this.shortcutManagerApi.addListenerOnSuccessInit(e)}addListenerOnExpiration(e){this.shortcutManagerApi.addListenerOnExpiration(e)}showShortcutPopup(){this.setState({forcefullyShowShortcutPopup:!0})}render(){return this.state.forcefullyShowShortcutPopup||this.props.shouldShowShortcutPopup?d().createElement(Kr.Z,{trigger:this.state.forcefullyShowShortcutPopup?ls.w.MENU:ls.w.TIMER,type:this.props.type,onClose:this.handleCloseShortcutPopup}):null}}vs.contextType=N.Z;const gs=(0,h.$j)((function(e){return{shouldShowShortcutPopup:e.shouldShowShortcutPopup}}))(vs);var fs=a(60136),ys=a(41103),bs=a(29810),ws=a(68316);const ks=()=>{const e=(0,Fe.C)((({ui:e})=>e.isGuardOpened)),{gamePause:t,gameResume:a}=(0,ge.ff)({reason:"visibility_change"});return(0,l.useEffect)((()=>{if(e)return;const r=()=>{document.hidden?t():a()};return document.addEventListener("visibilitychange",r),()=>document.removeEventListener("visibilitychange",r)}),[t,a,e]),d().createElement(d().Fragment,null)};var Es=a(53603),Ss=a(65751),As=a(81517),Is=(e=>(e.FULL="full",e.HIDDEN="hidden",e.MOVING="moving",e.SMALL="small",e))(Is||{});i().with("app-drawer");var Ps=a(32054),Ts=a(26213);var Cs=a(65562);const Rs=a(81839).Z,Ds=(0,b.M$)("gamePage",b.XG.Dev);a(523);const Os=["document-events","guard"];class Ls extends N.P{constructor(){super(...arguments),this.pageStartRef=d().createRef(),this.withInfo=-1!==this.props.location.search.indexOf("info=true"),this.needToShowLeaderboard=(()=>{const{search:e,hash:t}=this.props.location;return`${e}#${t}`.includes("leaderboard")})(),this.shouldRenderContent=Boolean(this.context.isSearchCrawler),this.state={showInfo:this.getInitGuardState(),showGuard:this.getInitGuardState(),drawerStatus:this.shouldRenderContent?Is.FULL:Is.SMALL,hiddenControls:this.getInitHiddenControls(),hiddenImages:!0,hiddenLazyElements:!0,hiddenVideo:!0,permission:!0,playerError:!1,scrollTop:0,scrollToLeaderboard:!1},this.handleClose=()=>{const{hiddenControls:e,showInfo:t}=this.state;!this.withInfo||e?(e?t&&!(0,Qa.PK)()&&"#info"===location.hash&&history.back():v.Z.post({type:"guard",action:"show"}),this.setState({hiddenVideo:!0,scrollToLeaderboard:!1,showInfo:!1})):this.handleBack()},this.handleBackgroundClick=()=>{this.handleApply(M.EO.Background)},this.handleCloseButton=()=>{this.handleApply(M.EO.CloseButton)},this.handleDrawerClose=()=>{this.handleApply(M.EO.DrawerSwipe)},this.handleAuth=()=>{v.Z.post({type:"auth",action:"auth-dialog-open",data:{initializer:"app-page"}}),(0,K.U4)({},{action:"auth"})},this.handleBack=()=>{const{hiddenControls:e,showInfo:t}=this.state,{baseUrlWithLangPath:a,hidePaymentsAndCurrency:r,isGamesLiteApp:s,isPWA:n,oneTabPWA:o,pfid:i,referrer:l,uatraits:d}=this.context;if(t&&(e||o))return o||this.setState({showInfo:!1}),history.back(),void(0,K.U4)({},{action:"close-info"});(0,K.U4)({},{action:"back-to-catalog"}),document.documentElement.classList.remove("with-player"),this.exitFullscreen();const c=(0,Cs.g)(d)&&o;if(!window.opener||s||c){const e=Ss.parse((0,J.e)().search.slice(1));l&&(0,er.sD)(l)&&(e[X.Vw]=l),s&&(e.utm_source="close_button"),r&&(e[X.o1]="1"),n&&(e[X.cB]="1"),i&&(e[X.om]=i);const t=Ss.stringify(e),{href:d,origin:c}=(0,J.e)();let h=`${c}${a}${t.length?`/?${t}`:""}`;h=(0,Oa.ky)(h,{currentLocation:d}),window.open(h,o?"_parent":"_self")}else window.close()},this.handlePlayButton=()=>{this.handleApply(M.EO.PlayButton)},this.handleUpdateScrollTop=e=>{this.setState({scrollTop:e})},this.handlePermissionsChange=e=>{this.setState({permission:e})},this.feedbackRef=e=>{this.feedbackTitleElement=e},this.gameInstructionRef=e=>{this.gameInstructionElement=e},this.handleBackButton=e=>{const{hiddenControls:t}=this.state;!e.state&&t&&this.hideInfo()},this.handleEarlyEvents=()=>{var e;null==(e=window.earlyEvents)||e.messages.forEach((e=>{const{type:t,action:a,data:r}=e;if("guard"===t)switch(a){case"auth":this.handleAuth();break;case"close":this.handleBack();break;case"accept":this.setState({permission:r.permissionChecked},(()=>{this.handleApply(r.actionSource)}))}})),document.documentElement.classList.remove("without-guard")},this.changeDrawerStatus=e=>{this.setState({drawerStatus:e}),e===Is.FULL&&(this.setState({hiddenLazyElements:!1,hiddenVideo:!1}),v.Z.post({type:"promo-bar",action:"remove"}))},this.handleVisibilityChange=()=>{"visible"===document.visibilityState&&this.requestFullscreen()},this.requestFullscreen=()=>{var e;const{game:t}=this.props,a=(0,U.KT)();X.XL.includes(a)||s.default.requestFullscreenAndLockOrientation(null==(e=t.features)?void 0:e.orientation)},this.onAllMessages=e=>{const{type:t,action:a,data:r}=e.data,{platform:s}=this.context,{isIOS:n}=(0,sr.AK)(s),{hiddenControls:o}=this.state;switch(t){case"document-events":switch(a){case"redirect":window.location.href=r.href;break;case"back":this.handleBack();break;case"show-info":case"show-review":case"show-instruction":case"show-leaderboard":this.setState({hiddenImages:!1,showInfo:!0}),this.setRenderTriggered(),this.sendNotificationToSelfWindow(),!(0,Qa.PK)()&&o&&window.parent.history.pushState("info","","#info"),requestAnimationFrame((()=>{this.changeDrawerStatus(Is.FULL),setTimeout((()=>{var e,t,r;switch(a){case"show-review":this.scrollAfterLeaderboardFetching("review");break;case"show-instruction":null==(e=this.gameInstructionElement)||e.scrollIntoView({behavior:"smooth"});break;case"show-leaderboard":this.scrollAfterLeaderboardFetching("leaderboard");break;case"show-info":null==(r=null==(t=this.pageStartRef.current)?void 0:t.parentElement)||r.scrollTo({behavior:"smooth",top:0})}n&&setTimeout((()=>{window.scrollTo(0,0)}),500)}),200)})),(0,K.U4)({},{action:a})}break;case"guard":switch(a){case"cancel":this.handleBack();break;case"info":this.setState({showInfo:!0,hiddenControls:!1,hiddenImages:!1,hiddenLazyElements:!1,hiddenVideo:!1}),this.setRenderTriggered(),this.sendNotificationToSelfWindow();break;case"apply":this.setState({hiddenControls:!0});break;case"init":this.setState({hiddenControls:!1})}}},this.setRenderTriggered=()=>{this.shouldRenderContent=!0}}handleApply(e){const{showInfo:t,hiddenControls:a,permission:r,playerError:s}=this.state;s||(this.props.isMiddleLayerInGame&&e===M.EO.Background?this.hideInfo():(a||v.Z.post({type:"guard",action:"apply",data:{permission:r?Pa.aR.ALLOW:Pa.aR.FORBID,actionSource:e}}),this.hideInfo(),this.setState({showGuard:!1}),t&&a&&((0,Qa.PK)()||"#info"===location.hash&&history.back(),(0,K.U4)({},{action:"hide-info"})),requestAnimationFrame((()=>{window.scrollTo(0,0),this.passFocusToFrame()}))))}passFocusToFrame(){v.Z.hasChild()&&v.Z.postToChild((0,As.$m)())}componentDidMount(){v.Z.onAllMessages(Os,this.onAllMessages,{withHistory:!0}),this.handleEarlyEvents(),this.context.isAdvSplashScreenEnabled||this.initInfoWindow()}componentDidUpdate(e,t){t.showInfo===this.state.showInfo||this.state.showInfo||v.Z.post({type:"document-events",action:"hide-info"})}componentWillUnmount(){this.exitFullscreen(),v.Z.offAllMessages(Os,this.onAllMessages),document.removeEventListener("visibilitychange",this.handleVisibilityChange),window.removeEventListener("popstate",this.handleBackButton)}exitFullscreen(){}sendNotificationToSelfWindow(){v.Z.post({action:"open",type:"app-info"})}hideInfo(){this.changeDrawerStatus(Is.HIDDEN),setTimeout((()=>{this.setState({showInfo:!1,hiddenControls:!0,scrollToLeaderboard:!1,hiddenVideo:!0})}),200)}isGuardEnabled(){const{abt:{flags:e},platform:t,playPageData:{gameData:a},referrerClid:r,userRegionData:s}=this.context;return!(({flags:e,isConfirmedGuard:t,platform:a,referrerClid:r,search:s})=>{if(t||r===X.x2||(0,Ga.bM)(e))return!0;if(Ss.parse("?"===s.charAt(0)?s.slice(1):s)[Ts.U])return!0;const n=(0,sr.AK)(a);return!!(n.isStandalone&&n.isAndroidStandalone&&(0,Ga.Iv)(e))})({flags:e,isConfirmedGuard:(0,Ps.pr)({gameData:a,userRegionData:s}),platform:t,referrerClid:r,search:this.props.location.search})}getInitHiddenControls(){return!this.isGuardEnabled()||this.props.isMiddleLayerInGame}getInitGuardState(){return!(this.props.isMiddleLayerInGame&&!this.shouldRenderContent)&&(!!(this.shouldRenderContent||this.withInfo||this.props.location.search.includes("leaderboard"))||(this.context.isAdvSplashScreenEnabled,!1))}initInfoWindow(){var e,t;const a=this.isGuardEnabled();this.shouldRenderContent&&(requestAnimationFrame((()=>{this.changeDrawerStatus(Is.FULL)})),this.setState({hiddenImages:!1,showInfo:!0,showGuard:!0,hiddenControls:!a})),this.withInfo||this.needToShowLeaderboard?(this.setState({hiddenControls:!1,hiddenImages:!1,showGuard:!0,showInfo:!0}),this.shouldRenderContent||requestAnimationFrame((()=>{this.changeDrawerStatus(this.withInfo?Is.FULL:Is.SMALL)}))):this.shouldRenderContent||(this.changeDrawerStatus(Is.HIDDEN),this.setState({showInfo:!1,showGuard:!1,hiddenControls:!a})),this.props.isMiddleLayerInGame&&!this.shouldRenderContent&&this.setState({showInfo:!1,hiddenControls:!0}),window.addEventListener("popstate",this.handleBackButton,!1),v.Z.post({type:"guard",action:"load",data:{startTime:null==(t=null==(e=window.performance)?void 0:e.timing)?void 0:t.navigationStart}})}scrollAfterLeaderboardFetching(e){const{leaderboardsLoaded:t}=this.props;t?requestAnimationFrame((()=>{var t;switch(e){case"leaderboard":this.setState({scrollToLeaderboard:!0});break;case"review":null==(t=this.feedbackTitleElement)||t.scrollIntoView({behavior:"smooth"})}})):setTimeout((()=>{this.scrollAfterLeaderboardFetching(e)}),100)}render(){return Ds("game-page render"),this.shouldRenderContent?(Ds("game-page render desktop"),d().createElement(Rs,{game:this.props.game,handlers:{handleBack:this.handleBack,handleClose:this.handleClose,handlePermissionsChange:this.handlePermissionsChange,handlePlayButton:this.handlePlayButton,handleAuth:this.handleAuth,handleBackgroundClick:this.handleBackgroundClick},refs:{pageStartRef:this.pageStartRef,feedbackRef:this.feedbackRef,gameInstructionRef:this.gameInstructionRef},state:this.state})):null}}const _s=(0,r.E)((0,h.$j)((function(e){var t,a,r;return{leaderboardsLoaded:(null==(t=e.leaderboards)?void 0:t.main.loaded)&&(null==(a=e.leaderboards)?void 0:a.friends.loaded),isMiddleLayerInGame:Boolean(null==(r=e.middleLayerInGameData)?void 0:r.show)}}))(Ls));var xs=a(90380),Ns=Object.defineProperty,Bs=(e,t,a)=>(((e,t,a)=>{t in e?Ns(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a})(e,"symbol"!=typeof t?t+"":t,a),a);const Ms=(0,b.M$)("AppPageBody",b.XG.Dev),$s=i().with("game");class Fs extends N.P{constructor(e,t){var a,r;super(e),Bs(this,"stackRef"),Bs(this,"limitedFsCheckerRef"),Bs(this,"limitedFsVpCheckerRef"),Bs(this,"isIOSLimitedFsAvailable"),Bs(this,"isFixedIOSLimitedFs"),Bs(this,"isIOSLimitedFsDisableOnScale"),Bs(this,"limitedFsUpdateIntervalId"),Bs(this,"state",{hasMounted:!1,isLimitedFullscreenActive:!1,showDragOverlay:!1,isShortcutVisible:!1,drawerVisible:!1}),Bs(this,"onDrawerVisibleChange",(e=>{this.setState({drawerVisible:e})})),Bs(this,"initLimitedIOSFs",(()=>{window.addEventListener("touchmove",this.handleTouchMove,{passive:!1});const{isLandscape:e}=s.default;e&&(this.limitedFsUpdateIntervalId=window.setInterval((()=>{this.updateLimitedFsState()}),300)),s.default.addChangeListener(this.handleOrientationChange)})),Bs(this,"handleOrientationChange",(()=>{var e;const{isPortrait:t}=s.default;t?(clearInterval(this.limitedFsUpdateIntervalId),this.state.isLimitedFullscreenActive&&(null==(e=window.clickdaemonLog)||e.call(window,Ka.zx.SWIPE_TO_FULLSCREEN,{item:"rotationInFullscreen"})),this.setState({isLimitedFullscreenActive:!1,showDragOverlay:!1})):this.limitedFsUpdateIntervalId=window.setInterval((()=>{this.updateLimitedFsState()}),300)})),Bs(this,"handleTouchMove",(e=>{this.state.isLimitedFullscreenActive&&e.preventDefault()})),Bs(this,"showShortcutIfNeeded",(()=>{var e;const{appData:t}=this.props,a=null==(e=t.location)?void 0:e.entryQuery["redir-data"];if(a){const{card:e}=JSON.parse(a)||{};"your_games"===e&&this.setState({isShortcutVisible:!0})}})),Bs(this,"shortcutClose",(()=>{this.setState({isShortcutVisible:!1})})),this.stackRef=d().createRef(),this.limitedFsCheckerRef=d().createRef(),this.limitedFsVpCheckerRef=d().createRef();const{abt:{flags:n}}=t;this.isIOSLimitedFsAvailable=Boolean(t.isSafari)&&(0,Ga.Xv)(n)&&"portrait"!==(null==(r=null==(a=t.playPageData.gameData)?void 0:a.features)?void 0:r.orientation),this.isFixedIOSLimitedFs=this.isIOSLimitedFsAvailable&&(0,Ga.r6)(n),this.isIOSLimitedFsDisableOnScale=(0,Ga.PH)(n)}componentDidMount(){this.setState({hasMounted:!0}),this.isIOSLimitedFsAvailable&&this.initLimitedIOSFs()}updateLimitedFsState(){var e;if(this.isIOSLimitedFsDisableOnScale&&(null==(e=this.limitedFsCheckerRef.current)?void 0:e.clientHeight)!==window.screen.availWidth)return void this.setState({isLimitedFullscreenActive:!1,showDragOverlay:!1});const{isLandscape:t}=s.default;if(t){const e=this.isLimitedFsReady();this.setState({isLimitedFullscreenActive:e,showDragOverlay:!e})}}componentDidUpdate(e,t){var a,r,s;!t.showDragOverlay&&this.state.showDragOverlay&&(null==(a=window.clickdaemonLog)||a.call(window,Ka.zx.SWIPE_TO_FULLSCREEN,{item:"renderOverlay"}),v.Z.post({type:"document-events",action:"show-swipe-to-fullscreen-overlay"})),t.showDragOverlay&&!this.state.showDragOverlay&&(null==(r=window.clickdaemonLog)||r.call(window,Ka.zx.SWIPE_TO_FULLSCREEN,{item:"closeOverlay"}),v.Z.post({type:"document-events",action:"hide-swipe-to-fullscreen-overlay"})),!t.isLimitedFullscreenActive&&this.state.isLimitedFullscreenActive&&(null==(s=window.clickdaemonLog)||s.call(window,Ka.zx.SWIPE_TO_FULLSCREEN,{item:"enterFullscreen"}))}componentWillUnmount(){this.isIOSLimitedFsAvailable&&(s.default.removeChangeListener(this.handleOrientationChange),window.removeEventListener("touchmove",this.handleTouchMove),clearInterval(this.limitedFsUpdateIntervalId))}renderProfilePopup(){const{showProfilePopup:e}=this.props;return e?d().createElement(wr.Z,null):null}isLimitedFsReady(){return!(!this.stackRef.current||!this.limitedFsCheckerRef.current)&&this.stackRef.current.clientHeight>=this.limitedFsCheckerRef.current.clientHeight}render(){Ms("render");const{appData:e,isAccountCompletionAvailable:t,middleLayerInGameShow:a,shouldShowAndroidShortcutDrawer:r}=this.props,{abt:{flags:s},hidePaymentsAndCurrency:o,isAdvSplashScreenEnabled:i,isGamesApp:l,isStickyEnabled:h,playPageData:u,isMiddleLayerInGameExp:p}=this.context,{hasMounted:m}=this.state,{gameData:v,gameSettings:{features:g}}=u,f=null==g?void 0:g.orientation,{isSearchCrawler:y,lang:b,hasHeader:w}=e,k=(0,Ga.Rk)(s);k&&!this.state.isShortcutVisible&&this.showShortcutIfNeeded();let E="stack";if("undefined"!=typeof window){const e=document.querySelector(".stack"),t=`${E}_type_ios-limited-fs`;this.isIOSLimitedFsAvailable&&e&&!e.classList.contains(t)&&e.classList.add(t),E=(null==e?void 0:e.className)||E}const S=m&&(0,Ga.RM)(s,xs.Z.userActivityPopup),A=u.isGameLoaderEnabled&&!a,I=i?d().createElement(me.Z,null):d().createElement(ve.Z,null),P=a&&!1,T="portrait"!==f&&!this.state.drawerVisible&&(!!this.isFixedIOSLimitedFs||this.state.showDragOverlay);return d().createElement(Es.I,null,T&&d().createElement("div",{className:$s("fs-spacer")}),!l&&d().createElement(ne.Z,{type:"game"}),d().createElement(n.hW,{off:"ssr_platform_subscriptions",onComponent:d().createElement(ya,null)}),d().createElement(bs.Z,null),d().createElement(Er.q,null),d().createElement(n.hW,{on:"adv_interstitial.publift.enabled",onComponent:d().createElement(Sr,null)}),d().createElement(O,{lang:b}),d().createElement(x.Z,null),d().createElement(fe,null),d().createElement(ks,null),d().createElement(Ea,{isFixedIOSLimitedFs:this.isFixedIOSLimitedFs,isIOSLimitedFsAvailable:this.isIOSLimitedFsAvailable,isLimitedFullscreenActive:this.state.isLimitedFullscreenActive,isVisible:w&&!P,onMenuVisibleChange:this.onDrawerVisibleChange}),d().createElement("div",{className:E,ref:this.stackRef},h&&d().createElement(L.Z,{hideAdvCloseButton:o,wrapperRef:this.stackRef}),d().createElement(re.Z,{page:"app"}),d().createElement(ka.Z,{showDragOverlay:this.state.showDragOverlay}),d().createElement(Vr,null),!a&&d().createElement(br.Z,{isBlackFadeout:!0}),d().createElement(ae,null),d().createElement(n.hW,{offComponent:d().createElement(ba.Z,null),on:"adv_ingame_new",onComponent:d().createElement(_.Z,null)}),d().createElement("div",{className:"rotate-banner"}),d().createElement(Sa.Z,null,!p&&d().createElement(fr,null),a&&d().createElement(ke,null)),!1,A&&I,d().createElement("div",{className:"shortcut"},m&&d().createElement(gs,{type:"game"})),(0,n.v_)({on:"payments_improvements.inapp"})?d().createElement(pa,null):null,d().createElement(yr.Z,{onDialogChange:this.onDrawerVisibleChange}),d().createElement(Fr,null),d().createElement(ue,null),d().createElement(ye.Z,null),d().createElement(we,null),(0,Ga.XP)(s)&&d().createElement(kr.Z,null),(0,Ga.XP)(s)&&this.renderProfilePopup(),Boolean((0,Ga.xO)(s))&&d().createElement(ys.Z,null)),(null==v?void 0:v.appID)?d().createElement(_s,{game:v}):null,S&&d().createElement(ws.Z,null),d().createElement(wa.Z,null),m&&d().createElement(se.H,null),d().createElement("div",{className:"gdpr-overlay"}),m&&!y&&t&&d().createElement(Ee,null),k&&r&&v&&d().createElement(fs.D,{game:v,isVisible:this.state.isShortcutVisible,onClose:this.shortcutClose}),this.isIOSLimitedFsAvailable&&d().createElement(d().Fragment,null,d().createElement(c.ql,null,d().createElement("html",{"data-limited-fs-available":"yes"})),d().createElement("div",{className:"limited-fs-checker",ref:this.limitedFsCheckerRef})),(0,Ga.Hp)()&&d().createElement(pe.Z,{placement:"app"}))}}Bs(Fs,"contextType",N.Z);const Hs=(0,r.E)((0,h.$j)((function(e){var t,a;return{isAccountCompletionAvailable:e.userData.isAccountCompletionAvailable,middleLayerInGameShow:null==(t=e.middleLayerInGameData)?void 0:t.show,showProfilePopup:null==(a=e.playToEarn)?void 0:a.uiState.showProfilePopup,shouldShowAndroidShortcutDrawer:e.shouldShowAndroidShortcutDrawer}}))(Fs))},79098:(e,t,a)=>{a.d(t,{Lx:()=>r});const r="/21857590943,22960671442/playhop.com/fallback"},23678:(e,t,a)=>{a.d(t,{Z:()=>l});var r=a(45112),s=a(40184),n=a(33119),o=a(5825),i=a(61224);const l=()=>{const e=(0,o.T)(),{abt:{flags:t},referrerClid:a}=(0,s.b)(),l=(0,o.C)((e=>e.advDisabledByPartnersKit));return(0,r.qR)((()=>{if(!l)return;const r=Date.now(),s=window.setInterval((()=>{const o=(0,i.kH)({flags:t,referrerClid:a,userAgent:window.navigator.userAgent});(void 0!==o||(0,i.$g)(r))&&(window.clearInterval(s),e((0,n.K0)(Boolean(o))))}),100);return()=>{window.clearInterval(s)}})),null}},68797:(e,t,a)=>{a.d(t,{Z:()=>C});var r=a(38096),s=a(87363),n=a.n(s);const o="child-src 'self' blob: mc.yandex.ru; connect-src 'self' localhost.msup.yandex.ru mc.yandex.ru amc.yandex.ru an.yandex.ru jstracer.yandex.ru verify.yandex.ru *.verify.yandex.ru csp.yandex.net strm.yandex.ru strm.yandex.net *.strm.yandex.net favicon.yandex.net avatars.mds.yandex.net yandexmetrica.com www.google-analytics.com www.googletagmanager.com games-sdk.yandex.az games-sdk.yandex.by games-sdk.yandex.co.il games-sdk.yandex.com games-sdk.yandex.com.am games-sdk.yandex.com.ge games-sdk.yandex.com.tr games-sdk.yandex.ee games-sdk.yandex.fr games-sdk.yandex.kg games-sdk.yandex.kz games-sdk.yandex.lt games-sdk.yandex.lv games-sdk.yandex.md games-sdk.yandex.ru games-sdk.yandex.tj games-sdk.yandex.tm games-sdk.yandex.ua games-sdk.yandex.uz; default-src 'self'; font-src 'self' yastatic.net yastat.net an.yandex.ru fonts.gstatic.com; frame-src 'self' localhost yastatic.net; img-src 'self' data: blob: mc.yandex.ru amc.yandex.ru an.yandex.ru verify.yandex.ru *.verify.yandex.ru favicon.yandex.net avatars.mds.yandex.net games.games-test.yandex.ru games-sdk.yandex.az games-sdk.yandex.by games-sdk.yandex.co.il games-sdk.yandex.com games-sdk.yandex.com.am games-sdk.yandex.com.ge games-sdk.yandex.com.tr games-sdk.yandex.ee games-sdk.yandex.fr games-sdk.yandex.kg games-sdk.yandex.kz games-sdk.yandex.lt games-sdk.yandex.lv games-sdk.yandex.md games-sdk.yandex.ru games-sdk.yandex.tj games-sdk.yandex.tm games-sdk.yandex.ua games-sdk.yandex.uz; media-src 'self' data: blob: strm.yandex.ru *.strm.yandex.net; script-src 'self' 'unsafe-eval' 'unsafe-inline' blob: yandex.ru *.yandex.ru yastatic.net; style-src 'self' 'unsafe-eval' 'unsafe-inline' fonts.googleapis.com; report-uri https://csp.yandex.net/csp?from=games-game&project=games&yandex_login=&yandexuid=;";var i=a(42126),l=a(36880),d=a(97777),c=Object.defineProperty,h=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,a)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,v=(e,t)=>{for(var a in t||(t={}))u.call(t,a)&&m(e,a,t[a]);if(h)for(var a of h(t))p.call(t,a)&&m(e,a,t[a]);return e};class g{constructor(e){this.REPORT_URL=`https://csp.yandex.net/csp?from=${encodeURIComponent(e)}-game-html&project=${encodeURIComponent(e)}`}getReportURL(e){return(0,i.Z)({url:this.REPORT_URL,params:v({yandexuid:(0,l.e)("yandexuid")||""},e)})}report(e,t){const a=this.getReportURL(t);return(0,d.Z)(a,e,{credentials:"omit"})}}var f=a(40184),y=a(97808),b=a(71522),w=a(37705);function k(){const e="production";switch(e){case"production":case"prestable":case"testing":return e;default:return"development"}}var E=a(76958);function S(e){return e===E.n.desktop?"desktop":"touch"}var A=a(47484),I=a(15771),P=a(49659);function T(e){try{const{data:t}=e.data;if(function({blockedURI:e,originalPolicy:t}){return!!/^https?:\/\/log\.strm\.yandex\.ru/.test(e)||t===o}(t))return null;const{blockedURI:a,columnNumber:r,disposition:s,documentURI:n,effectiveDirective:i,lineNumber:l,originalPolicy:d,referrer:c,sample:h,sourceFile:u,statusCode:p,violatedDirective:m}=t;return JSON.stringify({"csp-report":{"document-uri":n,referrer:c,"violated-directive":m,"effective-directive":i,"original-policy":d,disposition:s,"blocked-uri":a,"line-number":l,"column-number":r,"source-file":u,"status-code":p,"script-sample":h}})}catch(e){(0,w.H)({message:"[CSP] Failed to create violation report"},e)}return null}const C=n().memo((e=>{const{page:t}=e,{deviceType:a,playPageData:n,abt:o,version:i}=(0,f.b)(),l=(0,s.useMemo)((()=>{const e={environment:k(),page:t,platform:S(a),version:String(i)};if("app"===t&&n){const t=String(n.gameInfo.appId);t&&(e.appId=t)}return e}),[a,t,n,i]),d=(0,s.useMemo)((()=>new g((0,r.getDomainConfig)().analytics.rumProject||"games")),[]),c=(0,s.useCallback)(((e,t)=>{if("violation"===e.data.action){const a=T(e);((0,I.jP)(o.flags)?A.EE:A.Bu)((()=>{a?d.report(a,l).then((e=>t({data:e}))):t({data:null})}))}}),[d,l,o]);return(0,s.useEffect)((()=>{const e=new URLSearchParams((0,P.e)().search);if(Boolean(e.get("debug-mode"))||(0,b.m)()||Math.random()<.05)return y.Z.onExternalMessage("csp",c),function(){y.Z.offExternalMessage("csp",c)}}),[c]),null}))},24029:(e,t,a)=>{a.d(t,{H:()=>i});var r=a(87363),s=a.n(r),n=a(89193),o=a(85375);const i=()=>(0,o.mv)()?s().createElement(n.Z,null):null},85375:(e,t,a)=>{a.d(t,{A:()=>l,Sy:()=>n,hw:()=>i,mv:()=>d,q:()=>o});var r=a(45254),s=a(93298);const n=()=>r.v.HasFlag(s.AV,s.aR.AdvertisementPanel),o=()=>r.v.HasFlag(s.AV,s.aR.LogPanel),i=()=>r.v.HasFlag(s.AV,s.aR.GameDeveloperPanel),l=()=>r.v.HasFlag(s.AV,s.aR.RecordPanel),d=()=>i()||o()||n()||l()},75007:(e,t,a)=>{a.d(t,{Z:()=>l});var r=a(87363),s=a(45112),n=a(93013),o=a(40656),i=a(74878);a(57647);const l=(0,r.memo)((()=>{const e=(0,n.D)((()=>(0,i.W_)()),o.WT);return(0,s.qR)((()=>(e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("unload",i.W_),()=>{window.removeEventListener("resize",e),window.removeEventListener("unload",i.W_)}))),null}))},35543:(e,t,a)=>{a.d(t,{Z:()=>p});var r=a(63904),s=a.n(r),n=a(87363),o=a.n(n),i=a(15201),l=a(85467),d=a(5825),c=a(36172),h=a(94671);const u=s().with("game-rating-description"),p=o().memo((({mix:e="",useNewText:t,hasWebAppsCategory:a,rating:r,withoutText:s,dataTestId:n})=>{const p=(0,l.T)();let m=p("game.rating").toLowerCase();const v=(0,d.C)(c.Up);return t&&(m=p(a?"game.rating.users.new":"game.rating.new")),0===r?null:o().createElement("div",{className:(0,h.E)(u(),e),"data-testid":n&&`${n}-GameRatingDescription`,title:p("game.rating")},o().createElement("div",{className:u("star-wrapper")},o().createElement(i.Z,{className:u("rating-star",{dark:v}),type:"rating-star"}),o().createElement("span",{className:u("rating")},function(e){if(e<=0)return"0";try{return new Intl.NumberFormat("ru-RU",{minimumFractionDigits:1,maximumFractionDigits:1}).format(e)}catch(e){}return String(e.toPrecision(2)).replace(".",",")}(r))),!s&&o().createElement("div",{className:u("text",{new:t})},m))}))},25873:(e,t,a)=>{a.d(t,{Z:()=>m});var r=a(87363),s=a.n(r),n=a(59389),o=a(40184),i=a(85467),l=a(78308),d=a(97808),c=a(34967),h=a(37705),u=a(90295),p=a(89592);const m=()=>{const[e,t]=(0,r.useState)(void 0),a=(0,i.T)(),m=(0,o.b)();(0,r.useEffect)((()=>{function e(){var e,r,s;(null==(r=null==(e=window.YandexGamesSDK)?void 0:e.conflicts)?void 0:r.data.conflictInfo)&&(d.Z.offAllMessages("merge-conflicts",a),t(null==(s=window.YandexGamesSDK)?void 0:s.conflicts))}function a(t,a){"processing"===t.data.action&&e()}return d.Z.onAllMessages("merge-conflicts",a),e(),()=>{d.Z.offAllMessages("merge-conflicts",a)}}),[]);const v=null==e?void 0:e.data;return v?s().createElement(n.Z,{conflicts:v,onResolve:r=>{(0,c.NF)({},p.Ji.MERGE_CONFLICTS_RESOLVE),t(void 0);new l.Z(window.YandexGamesSDK.apiData).setResolveConflict({appID:m.playPageData.gameInfo.appId,authPriority:"account"===r,iGames:"account"===r?void 0:r}).then((()=>{null==e||e.callback(!0),d.Z.post({type:"message-box",action:"show",data:{message:a("merge-conflicts.success")}})})).catch((t=>{(0,h.H)({message:`SDK Api request error from ${u.Wv}`,type:"fetch"},t),null==e||e.callback(!1),d.Z.post({type:"message-box",action:"show",data:{message:a("merge-conflicts.error"),type:"error"}}),console.warn("Data not applied")}))}}):null}},86743:(e,t,a)=>{a.d(t,{Z:()=>Oe});var r=a(87363),s=a.n(r),n=a(45331),o=a(8037),i=a(96665),l=a(58904),d=a(15201),c=a(85467),h=a(94671);const u="MiddleLayerBack-critical-module__container--Cn0o1",p=()=>s().createElement(d.Z,{modifiers:{middleLayerBack:!0},type:"arrow-short-back"});function m({className:e,onBack:t}){const a=(0,c.T)();return s().createElement(l.z,{className:(0,h.E)(u,e),"data-testid":"middle-layer-back",iconLeft:p,size:40,view:"empty",onClick:t},a("common.back"))}var v=a(84819),g=a(27522),f=a(68712),y=a(60405),b=a(15227),w=a(5718),k=a(35543),E=a(40184);const S=[];var A=a(73285);function I(){const{playPageData:e}=(0,E.b)();return(0,A.T)(e.gameInfo.title)}var P=a(65044),T=a(37557),C=a(41811),R=a(29008),D=a(59303);function O(){var e;const{withPurchasesPermissions:t,isNeedToShow:a}=(0,r.useContext)(P.u),{playPageData:s}=(0,r.useContext)(n.Z),{gameSettings:o}=s,i=(0,T.C)((e=>Boolean(e.userData.login))),l=Boolean(null==(e=o.features)?void 0:e.user_data_required);return a&&(t||i&&l)}var L=a(72122),_=a(5825),x=a(34812);function N(e,t){return(0,x.PH)(`redir/${e}`,((...a)=>({payload:{event:e,params:t(...a)}})))}const B=N("middle_layer_in_game_gallery_item_active",((e,t)=>({app_id:e,elemIndex:t}))),M=N("middle_layer_in_game_gallery_item_click",((e,t)=>({app_id:e,elemIndex:t}))),$=(N("middle_layer_in_game_gallery_scroll",(e=>({app_id:e}))),N("middle_layer_in_game_category_click",((e,t)=>({app_id:e,category:t})))),F=(N("middle_layer_in_game_logo_click",(e=>({app_id:e}))),N("middle_layer_in_game_play",((e,t)=>({app_id:e,target:t}))));var H=a(37860),W=a(72167),G=a(97808);function Z(e){const{handleEvent:t}=(0,r.useContext)(P.u),a=(0,_.T)(),s=(0,_.C)(W.Ec),n=(0,_.C)(W.Gg),o=O();return(0,r.useCallback)((()=>{const r=o?n?"allow":"forbid":"not_set";t(new CustomEvent("apply",{detail:{actionSource:D.EO.PlayButton,permission:r}})),a((0,L.eI)(!1)),G.Z.post({type:"middle-layer",action:"close"}),s&&H.H.dispatch(F(s,e))}),[n,o,t,a,s,e])}const j={container:"MiddleLayerInfo-critical-module__container--SLA_6",icon:"MiddleLayerInfo-critical-module__icon--UV9lF",description:"MiddleLayerInfo-critical-module__description--hz1Gq",titleAndAbout:"MiddleLayerInfo-critical-module__titleAndAbout--L03_R",title:"MiddleLayerInfo-critical-module__title--a6AEJ",about:"MiddleLayerInfo-critical-module__about--hwcEP",aboutIcon:"MiddleLayerInfo-critical-module__aboutIcon--XA3Lk",ratings:"MiddleLayerInfo-critical-module__ratings--QfUsq",categoriesAndDeveloper:"MiddleLayerInfo-critical-module__categoriesAndDeveloper--CExvL",categories:"MiddleLayerInfo-critical-module__categories--ejQas",developer:"MiddleLayerInfo-critical-module__developer--D9qY4",divider:"MiddleLayerInfo-critical-module__divider--heZOo",playAndLegal:"MiddleLayerInfo-critical-module__playAndLegal--UTfFN",apply:"MiddleLayerInfo-critical-module__apply--ZTEka",legal:"MiddleLayerInfo-critical-module__legal--m1xd4"},U="·",q={};function z({className:e,onCategoryClick:t}){const a=function(){const{playPageData:e}=(0,E.b)(),{gameData:t}=e;return null==t?void 0:t.media}(),r=I(),n=Z("icon");return s().createElement("div",{className:(0,h.E)(j.container,e),"data-testid":"middle-layer-info"},s().createElement(b.Z,{alt:r,dataGuardAccept:!0,media:null!=a?a:q,mix:j.icon,size:C.xY.S,onClick:n}),s().createElement("div",{className:j.description},s().createElement(V,null),s().createElement(K,null),s().createElement(Y,{onCategoryClick:t}),s().createElement(X,null)))}function V(){const e=I(),t=(0,c.T)(),a=Z("title"),{handleEvent:n}=(0,r.useContext)(P.u),o=(0,r.useCallback)((()=>{n(new CustomEvent("info"))}),[n]),i=(0,r.useMemo)((()=>s().createElement(Q,null)),[]);return s().createElement("div",{className:j.titleAndAbout},s().createElement("h1",{className:j.title,"data-guard-accept":!0,itemScope:!0,itemType:"http://schema.org/WebPage",onClick:a},e),s().createElement(l.z,{className:j.about,iconLeft:i,size:32,view:"empty",onClick:o},t("game.description.title")))}function K(){var e;const{playPageData:t}=(0,E.b)(),{gameSettings:a}=t,r=function(){const{playPageData:e}=(0,E.b)(),{gameInfo:t}=e;return t.gameQualityScore}(),n=function(){const{playPageData:e}=(0,E.b)(),{gameInfo:t}=e;return t.rating}(),o=null==(e=a.features)?void 0:e.age_rating;return r||n?s().createElement("div",{className:j.ratings},r&&s().createElement(w.Z,{value:r}),s().createElement(k.Z,{hasWebAppsCategory:!1,rating:n}),o&&s().createElement(g.Wd,{variant:R.Ft[o]},o)):null}function Y({onCategoryClick:e}){const{playPageData:t}=(0,E.b)(),{gameInfo:a}=t,n=function(){const{playPageData:e,categoryDataMappedByID:t}=(0,E.b)(),{gameData:a}=e,s=null==a?void 0:a.categoryIDs;return(0,r.useMemo)((()=>s?s.map((e=>t[e])).filter(Boolean):S),[s,t])}(),o=function(){var e;const{playPageData:t}=(0,E.b)();return null==(e=t.gameData)?void 0:e.developer}(),i=!a.gameQualityScore&&!a.rating,l=function(){var e;const{playPageData:t}=(0,E.b)(),{gameSettings:a}=t;return null==(e=a.features)?void 0:e.age_rating}();if(n.length||o)return s().createElement("div",{className:j.categoriesAndDeveloper},n.length&&s().createElement("div",{className:j.categories},n.map((t=>s().createElement(f.Z,{key:t.name,name:t.name,title:t.title,type:y.q.CLEAR,withIcon:!0,withLink:!0,onClick:e})))),o&&s().createElement(s().Fragment,null,s().createElement("div",{className:j.divider},U),s().createElement("div",{className:j.developer},o.name)),i&&l&&s().createElement(s().Fragment,null,s().createElement("div",{className:j.divider},U),s().createElement(g.Wd,{variant:R.Ft[l]},l)))}function X(){const{verticalName:e}=(0,T.C)((e=>e.vertical)),t=(0,c.T)(),a=Z("play_button");return s().createElement("div",{className:j.playAndLegal},s().createElement(l.z,{className:j.apply,"data-guard-accept":!0,size:40,view:"primary",onClick:a},t(`common.play.vertical-${e}`)),s().createElement(J,null))}function J(){const{verticalName:e}=(0,T.C)((e=>e.vertical)),{baseHost:t}=(0,E.b)(),a=(0,c.T)();return(0,v.v_)({on:"user_permissions_from_flags"})?null:s().createElement("div",{className:j.legal},a(`guard.legal.text.vertical-${e}`)," ",s().createElement("a",{className:"games-link",href:a("guard.license.link.href"),target:"_blank"},a("guard.license.link.text")))}function Q(){return s().createElement("svg",{height:"16",width:"16"},s().createElement("g",{fill:"currentColor"},s().createElement("path",{d:"M7 8a1 1 0 0 1 2 0v3a1 1 0 1 1-2 0V8ZM8 4a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"}),s().createElement("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16Zm0-2A6 6 0 1 0 8 2a6 6 0 0 0 0 12Z",fillRule:"evenodd"})))}var ee=a(33509),te=a(53726);const ae={root:"MiddleLayerPermissions-critical-module__root--UDgqt",withBorder:"MiddleLayerPermissions-critical-module__withBorder--vA_4t",left:"MiddleLayerPermissions-critical-module__left--kCdsa",right:"MiddleLayerPermissions-critical-module__right--Rf3Xk",permissionText:"MiddleLayerPermissions-critical-module__permissionText--U6ddG"};var re=a(32054),se=a(41318);const ne=e=>{const{categoryNames:t,className:a}=e,o=(0,_.T)(),i=(0,r.useContext)(n.Z),l=(0,c.T)(),{playPageData:d,userRegionData:u}=i,{gameData:p}=d,m=t||(null==p?void 0:p.categoriesNames)||[],g=(0,re.CU)({gameData:p,userRegionData:u}),f=(0,te.v9)((e=>Boolean(e.userData.login))),y=m.map((e=>l(`category.${e}.disclaimer`,{withNoErrors:!0}))).filter(Boolean).join("\n"),b=(0,se.f)(f,g,l),w=O(),k=w||Boolean(y),E=(0,_.C)(W.Gg),S=(0,r.useCallback)((()=>{o((0,L.zD)())}),[o]);return(0,v.v_)({on:"user_permissions_from_flags"})?null:k?s().createElement("div",{className:(0,h.E)(ae.root,y?ae.withBorder:null,a)},w&&s().createElement("div",{className:ae.left},s().createElement(ee.X,{checked:E,className:ae.checkbox,size:18,onChange:S}),s().createElement("div",{className:ae.permissionText},b)),y&&s().createElement("div",{className:ae.right},y)):null};var oe=a(39589);const ie="MiddleLayerSimilarGames-critical-module__wrapper--KDSi1",le="MiddleLayerSimilarGames-critical-module__gridContainer--frj1s",de="MiddleLayerSimilarGames-critical-module__gridItem--U51qj",ce="MiddleLayerSimilarGames-critical-module__title--fyqiF";function he(e,t){return(e-e%t)/t}function ue(e,t){return e%t}var pe=a(82027),me=Object.defineProperty,ve=Object.defineProperties,ge=Object.getOwnPropertyDescriptors,fe=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,we=(e,t,a)=>t in e?me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,ke=(e,t)=>{for(var a in t||(t={}))ye.call(t,a)&&we(e,a,t[a]);if(fe)for(var a of fe(t))be.call(t,a)&&we(e,a,t[a]);return e};const Ee=()=>{const e=(0,c.T)(),t=(0,_.C)(W.Ec),a=(0,_.C)((e=>{var a;return t?null==(a=e.similarGames)?void 0:a[t]:void 0}));return(null==a?void 0:a.length)?s().createElement("div",{className:ie},s().createElement("h3",{className:ce},e("similar.middle-layer-game-page.title")),s().createElement("div",{className:le},a.map(((e,t)=>{return s().createElement(oe.Z,{column:ue(t,4),game:(a=ke({},e),r={column:ue(t,4),guard:!1,row:he(t,4)},ve(a,ge(r))),hasInfo:!1,isCaption:!0,key:e.appID,line:4,listType:C.co.SIMILAR,mix:de,row:he(t,4),scrollMode:pe.NH.VERTICAL,size:C.xY.ADAPTIVE_RECOMMENDED_NEW,wrapperName:C.NK.GAME_PAGE});var a,r})))):null};var Se=a(83919);const Ae="MiddleLayerInGame-critical-module__container--tzav3",Ie="MiddleLayerInGame-critical-module__withSimilar--ud1zP",Pe="MiddleLayerInGame-critical-module__back--Qzqo9",Te="MiddleLayerInGame-critical-module__content--P6BuC",Ce="MiddleLayerInGame-critical-module__gallery--oo1jj",Re="MiddleLayerInGame-critical-module__galleryComponent--hQp8t",De="MiddleLayerInGame-critical-module__footer--NSyLM";const Oe=()=>{const e=(0,_.C)(W.IE),t=Z("gallery"),a=Z("early"),l=Z("game_info"),d=function(){const{handleEvent:e}=(0,r.useContext)(P.u);return(0,r.useCallback)((()=>{e(new CustomEvent("cancel"))}),[e])}();!function({onPlay:e}){(0,r.useEffect)((()=>{var t;null==(t=window.earlyEvents)||t.messages.forEach((t=>{const{type:a,action:r}=t;"guard"===a&&"accept"===r&&e()}))}),[e])}({onPlay:a}),function({onPlay:e}){(0,r.useEffect)((()=>{function t(t){"apply"===t.data.action&&e()}return G.Z.onInternalMessage("guard",t,{withHistory:!0}),()=>{G.Z.offInternalMessage("guard",t)}}),[e])}({onPlay:l});const{onGalleryItemActive:c,onGalleryItemClick:u,onCategoryClick:p}=function(){var e;const{playPageData:t}=(0,r.useContext)(n.Z),a=null==(e=t.gameData)?void 0:e.appID,s=(0,r.useCallback)((e=>{a&&H.H.dispatch(B(a,e))}),[a]),o=(0,r.useCallback)((e=>{a&&H.H.dispatch(M(a,e))}),[a]),i=(0,r.useCallback)((e=>{a&&H.H.dispatch($(a,e))}),[a]);return{onGalleryItemActive:s,onGalleryItemClick:o,onCategoryClick:i}}();return s().createElement("article",{className:(0,h.E)(Ae,i.P,e&&Ie)},s().createElement(m,{className:Pe,onBack:d}),s().createElement("div",{className:Te},s().createElement(z,{onCategoryClick:p}),s().createElement("section",{className:Ce},s().createElement(Se.Z,{className:Re,onItemActive:c,onItemClick:u,onPreviewClick:t})),s().createElement(ne,null),e&&s().createElement(s().Fragment,null,s().createElement(Ee,null),s().createElement("section",{className:De},s().createElement(o.Z,{withPartners:!1})))))}},73673:(e,t,a)=>{a.d(t,{q:()=>o});var r=a(87363),s=a(40893);const n=[],o=()=>{const e=(0,r.useContext)(s.O),t=(0,r.useRef)(!1);return(0,r.useEffect)((()=>{e&&!t.current&&(t.current=!0,n.forEach((t=>{e.registerPopup(t)})))})),null}},34972:(e,t,a)=>{a.d(t,{Z:()=>g});var r=a(87363),s=a.n(r),n=a(40184),o=a(37557),i=a(63904),l=a.n(i),d=a(45331),c=a(85467),h=a(59303),u=a(15771);const p=({className:e=""})=>{const{abt:t,themeColor:a}=(0,r.useContext)(d.Z),n=a===h.aN.DARK,o=(0,u.$o)(t.flags);return n&&o?s().createElement("svg",{className:e,fill:"none",height:"163",viewBox:"0 0 153 163",width:"153",xmlns:"http://www.w3.org/2000/svg"},s().createElement("path",{clipRule:"evenodd",d:"m135.778 4h-41.5558c-7.3024 0-13.2222 6.0674-13.2222 13.552v93.896c0 7.485 5.9198 13.552 13.2222 13.552h41.5558c7.302 0 13.222-6.067 13.222-13.552v-93.896c0-7.4846-5.92-13.552-13.222-13.552zm-5.178 4h-1.635c.023.16331.035.33025.035.50001 0 1.93299-1.567 3.49999-3.5 3.49999h-21c-1.933 0-3.5-1.567-3.5-3.49999 0-.16976.012-.3367.035-.50001h-1.635c-5.0405 0-7.5607 0-9.4859.98094-1.6935.86286-3.0703 2.23966-3.9332 3.93316-.9809 1.9252-.9809 4.4454-.9809 9.4859v84.2c0 5.04 0 7.561.9809 9.486.8629 1.693 2.2397 3.07 3.9332 3.933 1.9252.981 4.4454.981 9.4859.981h31.2c5.04 0 7.561 0 9.486-.981 1.693-.863 3.07-2.24 3.933-3.933.981-1.925.981-4.446.981-9.486v-84.2c0-5.0405 0-7.5607-.981-9.4859-.863-1.6935-2.24-3.0703-3.933-3.93316-1.925-.98094-4.446-.98094-9.486-.98094z",fill:"#fff",fillRule:"evenodd",opacity:".2"}),s().createElement("rect",{fill:"#454545",height:"68",rx:"14",width:"121",x:"4",y:"91"}),s().createElement("path",{clipRule:"evenodd",d:"m4 145.778v-41.556c0-7.3022 6.0674-13.222 13.552-13.222h93.896c7.485 0 13.552 5.9198 13.552 13.222v41.556c0 7.302-6.067 13.222-13.552 13.222h-93.896c-7.4846 0-13.552-5.92-13.552-13.222zm4-5.178v-1.635c.1633.023.33024.035.50001.035 1.93299 0 3.49999-1.567 3.49999-3.5v-21c0-1.933-1.567-3.5-3.49999-3.5-.16977 0-.33671.012-.50001.035v-1.635c0-5.04 0-7.561.98094-9.4859.86286-1.6935 2.23966-3.0703 3.93316-3.9332 1.9252-.9809 4.4454-.9809 9.4859-.9809h84.2c5.04 0 7.561 0 9.486.9809 1.693.8629 3.07 2.2397 3.933 3.9332.981 1.9249.981 4.4459.981 9.4859v31.2c0 5.04 0 7.561-.981 9.486-.863 1.693-2.24 3.07-3.933 3.933-1.925.981-4.446.981-9.486.981h-84.2c-5.0405 0-7.5607 0-9.4859-.981-1.6935-.863-3.0703-2.24-3.93316-3.933-.98094-1.925-.98094-4.446-.98094-9.486z",fill:"#fff",fillRule:"evenodd"}),s().createElement("path",{d:"m35.9999 69.6001c3.3485 3.3485 5.2259 5.2259 8.5745 8.5744",stroke:"#5641ff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"6"}),s().createElement("path",{d:"m52.8525 70.0005-8.1524 8.1526",stroke:"#5641ff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"6"}),s().createElement("path",{d:"m41.7002 76c0 1.6569 1.3431 3 3 3 1.6568 0 3-1.3431 3-3zm27-22c1.6568 0 3-1.3431 3-3s-1.3432-3-3-3zm-21 22v-13h-6v13zm9-22h12v-6h-12zm-9 9c0-4.9706 4.0294-9 9-9v-6c-8.2843 0-15 6.7157-15 15z",fill:"#5641ff"})):s().createElement("svg",{className:e,fill:"none",height:"163",viewBox:"0 0 153 163",width:"153",xmlns:"http://www.w3.org/2000/svg"},s().createElement("g",{opacity:"0.5"},s().createElement("rect",{fill:"#CFCFDC",height:"125",rx:"14",stroke:"white",strokeWidth:"4",transform:"matrix(-1 0 0 1 153 4)",width:"72",x:"2",y:"-2"}),s().createElement("path",{clipRule:"evenodd",d:"M128.965 8H130.6C135.64 8 138.161 8 140.086 8.98094C141.779 9.8438 143.156 11.2206 144.019 12.9141C145 14.8393 145 17.3595 145 22.4V106.6C145 111.64 145 114.161 144.019 116.086C143.156 117.779 141.779 119.156 140.086 120.019C138.161 121 135.64 121 130.6 121H99.4C94.3595 121 91.8393 121 89.9141 120.019C88.2206 119.156 86.8438 117.779 85.9809 116.086C85 114.161 85 111.64 85 106.6L85 22.4C85 17.3595 85 14.8393 85.9809 12.9141C86.8438 11.2206 88.2206 9.8438 89.9141 8.98094C91.8393 8 94.3595 8 99.4 8H101.035C101.012 8.16331 101 8.33025 101 8.50001C101 10.433 102.567 12 104.5 12L125.5 12C127.433 12 129 10.433 129 8.50001C129 8.33025 128.988 8.16331 128.965 8Z",fill:"#F4F4F6",fillRule:"evenodd"})),s().createElement("rect",{fill:"#90919D",height:"125",rx:"14",stroke:"white",strokeWidth:"4",transform:"rotate(-90 2 161)",width:"72",x:"2",y:"161"}),s().createElement("path",{clipRule:"evenodd",d:"M7.99999 138.965V140.6C7.99999 145.64 7.99999 148.161 8.98093 150.086C9.84379 151.779 11.2206 153.156 12.9141 154.019C14.8393 155 17.3595 155 22.4 155H106.6C111.64 155 114.161 155 116.086 154.019C117.779 153.156 119.156 151.779 120.019 150.086C121 148.161 121 145.64 121 140.6V109.4C121 104.36 121 101.839 120.019 99.9141C119.156 98.2206 117.779 96.8438 116.086 95.9809C114.161 95 111.64 95 106.6 95H22.4C17.3595 95 14.8393 95 12.9141 95.9809C11.2206 96.8438 9.84379 98.2206 8.98093 99.9141C7.99999 101.839 7.99999 104.36 7.99999 109.4V111.035C8.16329 111.012 8.33023 111 8.5 111C10.433 111 12 112.567 12 114.5L12 135.5C12 137.433 10.433 139 8.5 139C8.33023 139 8.16329 138.988 7.99999 138.965Z",fill:"#F4F4F6",fillRule:"evenodd"}),s().createElement("path",{d:"M35.9999 69.6001C39.3484 72.9486 41.2258 74.826 44.5744 78.1745",stroke:"#5641FF",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"6"}),s().createElement("path",{d:"M52.8525 70.0004L44.7001 78.153",stroke:"#5641FF",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"6"}),s().createElement("path",{d:"M41.7002 76C41.7002 77.6569 43.0433 79 44.7002 79C46.357 79 47.7002 77.6569 47.7002 76H41.7002ZM68.7002 54C70.357 54 71.7002 52.6569 71.7002 51C71.7002 49.3431 70.357 48 68.7002 48V54ZM47.7002 76V63H41.7002V76H47.7002ZM56.7002 54H68.7002V48H56.7002V54ZM47.7002 63C47.7002 58.0294 51.7296 54 56.7002 54V48C48.4159 48 41.7002 54.7157 41.7002 63H47.7002Z",fill:"#5641FF"}))},m=l().with("screen-manager-rotate-banner"),v=({orientation:e,children:t})=>{const a=(0,c.T)(),n=(0,r.useMemo)((()=>a("rotate.banner.description",{params:{orientation:a("landscape"===e?"rotate.banner.description.orientation.landscape":"rotate.banner.description.orientation.portrait")}}).split("\\n").flatMap(((e,t)=>t?[s().createElement("br",{key:t}),e]:e))),[e,a]),{abt:o,themeColor:i}=(0,r.useContext)(d.Z),l=i===h.aN.DARK,v=(0,u.$o)(o.flags),g=l&&v?h.aN.DARK:h.aN.LIGHT;return s().createElement("div",{className:`${m({orientation:e,theme:g})} with-play-game-header-fix`},s().createElement(p,{className:m("image")}),s().createElement("div",{className:m("title")},a("rotate.banner.action.text")),s().createElement("div",{className:m("description")},n),t)},g=({children:e})=>{const t=(0,o.C)((e=>e.ui.screenOrientationBannerVisible)),{playPageData:a}=(0,n.b)(),{orientation:r}=a.gameSettings.features||{},i=(e=>{if("landscape"===e||"portrait"===e)return e})(r);return t&&i?s().createElement(v,{orientation:i},e):null}},13582:(e,t,a)=>{a.d(t,{Z:()=>k});var r=a(63904),s=a.n(r),n=a(87363),o=a.n(n),i=a(53726),l=a(45331),d=a(61715),c=a(33119),h=a(52157),u=a(37860),p=a(94671),m=a(11324),v=(a(83950),a(45583)),g=a(41811),f=a(15771),y=a(29008);const b=s().with("video-preview");class w extends o().Component{constructor(){super(...arguments),this.state={isHover:this.props.hover},this.hoverTimer=null,this.videoCtrl=null,this.videoRef=null,this.setVideoRef=e=>{this.videoRef=e},this.handleIntersectionUpdate=e=>{const{dispatch:t,id:a}=this.props;!this.getPlaying()&&e&&t((0,c.NA)(a)),e||t((0,c.gh)(a))},this.restorePlayForIOS=()=>{setTimeout((()=>{var e,t;null==(t=null==(e=this.videoRef)?void 0:e.querySelector("video"))||t.play()}),1e3)},this.onVideoElementPlayCapture=()=>{var e;u.H.dispatch((0,h.UE)({appId:null==(e=this.props.game)?void 0:e.appID}))}}getOriginalVideoPreviewUrl(){return this.props.previewUrl||""}getVideoPreviewUrl(){var e;const t=this.props.previewUrl;if(!t)return"";const{abt:{flags:a}}=this.context;return(0,f.$u)(a)?null==(e=this.props.previewUrl)?void 0:e.replace(/[0-9]+\.mp4$/,"360.mp4"):t}getPlaying(){const{id:e,videosPlaying:t}=this.props;return t.slice(0,3).includes(e)}handleHover(){this.loadVideo()}handleLeave(){this.hoverTimer&&clearTimeout(this.hoverTimer),this.videoCtrl&&!this.getPlaying()&&(this.videoCtrl.abort(),this.videoCtrl=null)}loadVideo(){const{isIOS:e}=(0,y.AK)(this.context.platform);if(e)return;if(this.videoCtrl||!this.videoRef)return;const t=this.videoRef.querySelector("video");if(!t)return;const a=this.getVideoPreviewUrl();if(!a)return;const r=this.getOriginalVideoPreviewUrl(),s=a!==r?{fallbackUrl:r}:void 0;this.videoCtrl=(0,v.l)(t,a,(()=>{var e,a;return null==(a=(e=this.props).onStartVideoPlay)||a.call(e),t.play()}),s)}startVideoPlay(){}componentDidMount(){var e,t;this.props.canPlayVideo&&(this.startVideoPlay(),null==(t=(e=this.props).onStartVideoPlay)||t.call(e)),this.state.isHover&&this.loadVideo()}componentDidUpdate(e){!e.canPlayVideo&&this.props.canPlayVideo&&this.startVideoPlay(),this.props.hover&&!this.state.isHover&&(this.hoverTimer=setTimeout((()=>{this.setState({isHover:!0},this.handleHover)}),300)),!this.props.hover&&this.state.isHover&&this.setState({isHover:!1}),this.getPlaying()&&this.loadVideo(),this.props.hover||this.handleLeave()}componentWillUnmount(){if(this.hoverTimer&&clearTimeout(this.hoverTimer),this.videoCtrl&&this.videoCtrl.abort(),this.intersectionObserver){const{id:e,dispatch:t}=this.props;return this.getPlaying()&&t((0,c.gh)(e)),void this.intersectionObserver.unobserve(this.videoRef)}const{isIOS:e}=(0,y.AK)(this.context.platform);e&&window.removeEventListener("focus",this.restorePlayForIOS)}getVideoHtml(){const{game:e,mix:t,skipPoster:a,videoFit:r="cover"}=this.props,{isIOS:s}=(0,y.AK)(this.context.platform),n=a?"":(null==e?void 0:e.media.cover["prefix-url"])+m.wC.cover[g.xY.L],o=(0,p.E)(b("video",{fit:r}),t);return s?`<video autoplay class="${o}" loop muted pip="false" playsinline src="${this.getOriginalVideoPreviewUrl()}" poster="${n}"></video>`:`<video preload="false" class="${o}" loop muted pip="false" playsinline poster="${n}"></video>`}renderVideoPreview(){return this.state.isHover||this.getPlaying()?o().createElement("div",{dangerouslySetInnerHTML:{__html:this.getVideoHtml()},onPlayCapture:this.onVideoElementPlayCapture}):null}render(){const{children:e,disableGameOpeningOnClick:t,game:a,listType:r,mix:s,redirParams:n,isErrorPage:i}=this.props;return a&&r?o().createElement(d.y,{disableGameOpeningOnClick:t,game:a,isErrorPage:i,listType:r,mixElem:(0,p.E)(b(),s),redirParams:n,onRef:this.setVideoRef},e,this.renderVideoPreview()):o().createElement("div",{className:(0,p.E)(b(),s),ref:this.setVideoRef},e,this.renderVideoPreview())}}w.contextType=l.Z;const k=(0,i.$j)((function(e){return{canPlayVideo:e.canPlayVideo,videosPlaying:e.videosPlaying}}))(w)},93827:(e,t,a)=>{a.d(t,{Z:()=>qr});var r=a(87363),s=a.n(r),n=a(65751),o=a(98816),i=a(85383),l=a(94199),d=a(90366),c=a(61533),h=a(53726),u=a(91668),p=a(45112),m=a(63904),v=a.n(m),g=a(93298);const f="google-adv-sticky-banner-",y=(v().with("google-sticky-adv-banner"),(0,g.M$)("AdsenseStickyBanner",g.XG.Adv));var b=a(73694),w=a(5e4),k=a(28705),E=a(49095);const S=v().with("google-sticky-adv-banner"),A=k.P5.COLUMN,I=({advLogger:e,block:t,blockType:a,hidden:n,location:i=E.rq.RIGHT,withSpinner:l,width:d,provider:c,refreshCounter:h,onAdvShowed:u,onClose:p})=>{const m=f+a,v=(0,r.useRef)(void 0),g=(0,r.useMemo)((()=>null==e?void 0:e.copy({advBlockId:t.slotId})),[e,t.slotId]),[I,P]=(0,r.useState)(l),{maxHeight:T,minHeight:C}=(0,r.useMemo)((()=>a===o.kq.DESKTOP?{minHeight:600}:{maxHeight:250}),[a]),R=(0,r.useMemo)((()=>{const e={maxWidth:d,width:d};return C&&(e.minHeight=C),(0,k.oi)(e)}),[C,d]);(0,r.useEffect)((()=>()=>{v.current&&c&&c.destroySlot(v.current)}),[c]);const D=(0,r.useCallback)((()=>{return e=void 0,a=null,r=function*(){if(c&&g)try{v.current&&(yield c.destroySlot(v.current)),y(`Create slot for ${m}`),g.demand({advBlockId:t.slotId,depth:0,provider:w.e.Adsense}),v.current=yield c.createSlot({adFormat:T?"fluid":"auto",blockId:t.slotId,clientId:t.clientId,divId:m,height:C||250,maxHeight:T,width:d}),g.request();const{isEmpty:e,slot:a}=yield c.preloadSlot({slot:v.current});if(e)return g.responseEmpty(),y(`#${m} empty.`),void p(k.JK.Desktop);g.response(),yield c.showSlot(a),g.show(),P(!1),u(),y(`Creative showed for ${m}`)}catch(e){y(`Failed to refresh ${m}`,e),p(k.JK.Desktop)}},new Promise(((t,s)=>{var n=e=>{try{i(r.next(e))}catch(e){s(e)}},o=e=>{try{i(r.throw(e))}catch(e){s(e)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(n,o);i((r=r.apply(e,a)).next())}));var e,a,r}),[g,t,m,C,T,c,d,u,p]);return(0,r.useEffect)((()=>{!c||!g||h<0||D()}),[c,g,D,h]),s().createElement("div",{className:S({desktop:!0,[`desktop_${i}`]:!0,direction:A,hidden:n,"with-disable-ad-button":!0}),id:m,key:m,style:R},I&&s().createElement(b.y,{className:S("spinner"),key:`${m}-spinner`,position:"center",size:28,spinning:!0,view:"default"}))};var P=a(58904),T=a(85467),C=a(5825),R=a(36172),D=a(34967),O=a(909),L=a(45331);const _=v().with("disable-ad-button"),x=()=>{const e=(0,T.T)(),t=(0,r.useRef)(null),a=(0,r.useRef)(null),n=(0,r.useContext)(L.Z),o=(0,h.v9)((e=>e.middleLayerInGameData)),i=(0,C.C)(R.Up),l=(0,r.useCallback)((()=>{(0,O.Z)(),(0,D.U4)({},{borrowParams:{adv:{sticky:{disableAdButtonClick:{size:"long"}}}}})}),[]),d=(0,r.useMemo)((()=>e("no-ads.disable.text")),[e]);return s().createElement("div",{className:_({}),ref:t},s().createElement(P.z,{className:_("button",{"middle-layer-light":n.isMiddleLayerInGameExp&&(null==o?void 0:o.show)&&!i}),"data-testid":"DisableAd-Button",ref:a,size:24,view:"primary",onClick:l},d))};var N=a(10739),B=a(97808),M=a(65087),$=Object.defineProperty,F=Object.defineProperties,H=Object.getOwnPropertyDescriptors,W=Object.getOwnPropertySymbols,G=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,j=(e,t,a)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,U=(e,t)=>{for(var a in t||(t={}))G.call(t,a)&&j(e,a,t[a]);if(W)for(var a of W(t))Z.call(t,a)&&j(e,a,t[a]);return e},q=(e,t)=>F(e,H(t));const z=v().with("google-sticky-adv-banner"),V=({advHidden:e,advLogger:t,blocks:a,canShowDesktopAdv:n,desktopAdvWidth:i,hideAdvCloseButton:l,innerHeight:d,provider:h,refreshCounter:u,stickyBannerLocation:{desktop:p},onAdvShowed:m,onClose:v,wrapperRef:g})=>{const[f,y]=(0,r.useState)(!(0,N.Ij)()),b=d>=700;(0,r.useEffect)((()=>{const e=e=>{y("enabled"===e.data.action)};return B.Z.onInternalMessage("header",e),()=>{B.Z.offInternalMessage("header",e)}}),[]);const w=(0,r.useMemo)((()=>(0,M.C)()),[]),k=(0,r.useMemo)((()=>({marginTop:f&&!l?-w:0,paddingTop:l?0:w,width:i})),[w,i,f,l]),E=(0,r.useMemo)((()=>({marginTop:f?-w:0,width:i})),[w,i,f]),S={advLogger:t,hidden:e||!n,location:p,provider:h,refreshCounter:u,width:i,onAdvShowed:m,onClose:v};return s().createElement("div",{className:z("desktop-wrapper",{hidden:e||!n,"with-disable-ad-button":!0}),style:k},!l&&(null==g?void 0:g.current)&&(0,c.createPortal)(s().createElement("div",{className:z("desktop-disable-ad-button-wrapper"),style:E},s().createElement(x,null)),g.current),d>=500&&s().createElement(I,q(U({},S),{block:a.desktop.main,blockType:o.kq.DESKTOP,withSpinner:!0})),b&&s().createElement(I,q(U({},S),{block:a.desktop.small,blockType:o.kq.DESKTOP_ADDITIONAL,withSpinner:!1})))};Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;k.P5.ROW;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var K=a(26667),Y=a(43506),X=a(62011),J=a(35742),Q=a(99213),ee=a(58432),te=a(93013),ae=a(51290),re=a(97553),se=a(37705),ne=a(13377),oe=Object.defineProperty,ie=Object.defineProperties,le=Object.getOwnPropertyDescriptors,de=Object.getOwnPropertySymbols,ce=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable,ue=(e,t,a)=>t in e?oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,pe=(e,t)=>{for(var a in t||(t={}))ce.call(t,a)&&ue(e,a,t[a]);if(de)for(var a of de(t))he.call(t,a)&&ue(e,a,t[a]);return e},me=(e,t)=>ie(e,le(t));const ve=(0,X.Z)((({advHidden:e,appId:t,blocks:a,canShowDesktopAdv:n,canShowLandscapeAdv:i,canShowPortraitAdv:l,desktopAdvWidth:d,mobileAdvLandscapeHeight:c,mobileAdvSideLandscapeWidth:h,mobileAdvPortraitHeight:m,onClose:v,onAdvShowed:g,hideAdvCloseButton:f,stickyBannerLocation:b,intervalBetweenRefreshAd:E,isLandscapeSide:S,wrapperRef:A,isAdvSplashScreenEnabled:I})=>{const P=(0,C.C)((e=>e.advGameCanBeLoaded)),[T,R]=(0,r.useState)(),[D,O]=(0,r.useState)("object"==typeof window?window.innerHeight:0),L=(0,r.useRef)(null),_=(0,u.D)(e),[x,N]=(0,r.useState)(-1),B=(0,r.useRef)(x),M=(0,r.useRef)(!1),$=(0,r.useRef)(!1),F=(0,r.useMemo)((()=>{const e=(0,ee.KT)();return K.RQ.includes(e)?(0,K.WF)():a}),[a]);(0,r.useEffect)((()=>{B.current=x}),[x]),(0,r.useEffect)((()=>{const e=(0,te.D)((()=>{O(window.innerHeight)}),200);return window.addEventListener("resize",e,!0),()=>{window.removeEventListener("resize",e,!0)}}),[]);const H=(0,r.useCallback)((()=>{return e=void 0,t=null,a=function*(){try{R(yield(0,Y.l)(J.oO.AdsenseResponsive)),y("Adsense script loaded.")}catch(e){(0,se.H)({block:ne.W.GOOGLE_ADS,prefix:"AdvStickyBanner error [adsense]:",message:"script failed to load"}),v(),g()}},new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));var e,t,a}),[v,g]);(0,r.useEffect)((()=>{P&&!T&&H()}),[P,T,H]);const W=(0,r.useCallback)((()=>{L.current=new ae.U({app_id:t,tag:o.$H.STICKY});const a=-1===B.current;!!I&&(M.current&&a)||L.current.tryOpen({provider:w.e.Adsense,reason:a?re.p_.ONSPOT:re.p_.REFRESH}),M.current=!0,$.current=!1,I&&e||N((e=>e+1))}),[e,t,I]),G=(0,r.useCallback)((()=>{$.current=!0,g()}),[g]),Z=(0,r.useCallback)((e=>{if($.current)return;let t;switch(e){case k.JK.Landscape:t={onlyLandscape:!0};break;case k.JK.Portrait:t={onlyPortrait:!0}}v(t)}),[v]);if((0,Q.b)(W,Boolean(T)),(0,r.useEffect)((()=>{M.current&&_&&!e&&W()}),[e,_,W]),(0,r.useEffect)((()=>{}),[T,e,b,W]),(0,p.Yz)(W,!T||e?null:E),!F)return;const j={advHidden:e,advLogger:L.current,blocks:F,provider:T,refreshCounter:x,stickyBannerLocation:b,onAdvShowed:G,onClose:Z};return s().createElement(V,me(pe({},j),{canShowDesktopAdv:n,desktopAdvWidth:d,hideAdvCloseButton:f,innerHeight:D,wrapperRef:A}))}),L.Z,{blocks:e=>{var t;return null==(t=e.allAdvBlocks.adsense)?void 0:t.sticky},isAdvSplashScreenEnabled:e=>e.isAdvSplashScreenEnabled}),ge="google-adv-sticky-banner-",fe=(v().with("google-sticky-adv-banner"),(0,g.M$)("PubliftStickyBanner",g.XG.Adv));var ye=Object.defineProperty,be=Object.getOwnPropertySymbols,we=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable,Ee=(e,t,a)=>t in e?ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const Se=v().with("google-sticky-adv-banner"),Ae=k.P5.COLUMN,Ie=({advLogger:e,block:t,blockType:a,hidden:n,location:i=E.rq.RIGHT,withSpinner:l,width:d,provider:c,refreshCounter:h,onAdvShowed:u,onClose:p})=>{const m=ge+a+h,v=(0,r.useRef)(void 0),g=(0,r.useMemo)((()=>null==e?void 0:e.copy({advBlockId:t.blockId,zoneId:t.zoneId})),[e,t.blockId,t.zoneId]),[f,y]=(0,r.useState)(l),{minHeight:S}=(0,r.useMemo)((()=>a===o.kq.DESKTOP?{minHeight:600}:{maxHeight:250}),[a]),A=(0,r.useMemo)((()=>{const e={maxWidth:d,width:d};return S&&(e.minHeight=S),(0,k.oi)(e)}),[S,d]);(0,r.useEffect)((()=>()=>{v.current&&c&&c.destroySlot(v.current)}),[c]);const I=(0,r.useCallback)((()=>{return e=void 0,a=null,r=function*(){if(c&&g)try{v.current&&(yield c.destroySlot(v.current)),fe(`Create slot for ${m}`),g.demand({advBlockId:t.blockId,depth:0,provider:w.e.PubliftZone}),v.current=yield c.createSlot({blockId:t.blockId,zoneId:t.zoneId,divId:m}),g.request();const{isEmpty:e,slot:a}=yield c.preloadSlot({slot:v.current});if(e)return g.responseEmpty(),fe(`#${m} empty.`),void p(k.JK.Desktop);g.response(),yield c.showSlot(a),g.show(),y(!1),u(),fe(`Creative showed for ${m}`)}catch(e){fe(`Failed to refresh ${m}`,e),p(k.JK.Desktop)}},new Promise(((t,s)=>{var n=e=>{try{i(r.next(e))}catch(e){s(e)}},o=e=>{try{i(r.throw(e))}catch(e){s(e)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(n,o);i((r=r.apply(e,a)).next())}));var e,a,r}),[g,t,m,c,u,p]);(0,r.useEffect)((()=>{!c||!g||h<0||I()}),[c,g,I,h]);const P=t.zoneId&&(null==c?void 0:c.loaded)?{"data-fuse":t.zoneId}:null;return s().createElement("div",((e,t)=>{for(var a in t||(t={}))we.call(t,a)&&Ee(e,a,t[a]);if(be)for(var a of be(t))ke.call(t,a)&&Ee(e,a,t[a]);return e})({className:Se({desktop:!0,[`desktop_${i}`]:!0,direction:Ae,hidden:n,"with-disable-ad-button":!0,publift:!0}),id:m,key:m,style:A},P),f&&s().createElement(b.y,{className:Se("spinner"),key:`${m}-spinner`,position:"center",size:28,spinning:!0,view:"default"}))};var Pe=Object.defineProperty,Te=Object.defineProperties,Ce=Object.getOwnPropertyDescriptors,Re=Object.getOwnPropertySymbols,De=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable,Le=(e,t,a)=>t in e?Pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,_e=(e,t)=>{for(var a in t||(t={}))De.call(t,a)&&Le(e,a,t[a]);if(Re)for(var a of Re(t))Oe.call(t,a)&&Le(e,a,t[a]);return e},xe=(e,t)=>Te(e,Ce(t));const Ne=v().with("google-sticky-adv-banner"),Be=({advHidden:e,advLogger:t,blocks:a,canShowDesktopAdv:n,desktopAdvWidth:i,hideAdvCloseButton:l,innerHeight:d,provider:h,refreshCounter:u,stickyBannerLocation:{desktop:p},onAdvShowed:m,onClose:v,wrapperRef:g})=>{const[f,y]=(0,r.useState)(!(0,N.Ij)()),b=d>=700;(0,r.useEffect)((()=>{const e=e=>{y("enabled"===e.data.action)};return B.Z.onInternalMessage("header",e),()=>{B.Z.offInternalMessage("header",e)}}),[]);const w=(0,r.useMemo)((()=>(0,M.C)()),[]),k=(0,r.useMemo)((()=>({marginTop:f&&!l?-w:0,paddingTop:l?0:w,width:i})),[w,i,f,l]),E=(0,r.useMemo)((()=>({marginTop:f?-w:0,width:i})),[w,i,f]),S={advLogger:t,hidden:e||!n,location:p,provider:h,refreshCounter:u,width:i,onAdvShowed:m,onClose:v};return s().createElement("div",{className:Ne("desktop-wrapper",{hidden:e||!n,"with-disable-ad-button":!0}),style:k},!l&&(null==g?void 0:g.current)&&(0,c.createPortal)(s().createElement("div",{className:Ne("desktop-disable-ad-button-wrapper"),style:E},s().createElement(x,null)),g.current),d>=500&&s().createElement(Ie,xe(_e({},S),{block:a.desktop.main,blockType:o.kq.DESKTOP,withSpinner:!0})),b&&s().createElement(Ie,xe(_e({},S),{block:a.desktop.small,blockType:o.kq.DESKTOP_ADDITIONAL,withSpinner:!1})))};Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;k.P5.ROW;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var Me=Object.defineProperty,$e=Object.defineProperties,Fe=Object.getOwnPropertyDescriptors,He=Object.getOwnPropertySymbols,We=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable,Ze=(e,t,a)=>t in e?Me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,je=(e,t)=>{for(var a in t||(t={}))We.call(t,a)&&Ze(e,a,t[a]);if(He)for(var a of He(t))Ge.call(t,a)&&Ze(e,a,t[a]);return e},Ue=(e,t)=>$e(e,Fe(t));const qe=(0,X.Z)((({advHidden:e,appId:t,blocks:a,canShowDesktopAdv:n,canShowLandscapeAdv:i,canShowPortraitAdv:l,desktopAdvWidth:d,mobileAdvLandscapeHeight:c,mobileAdvSideLandscapeWidth:h,mobileAdvPortraitHeight:m,onClose:v,onAdvShowed:g,hideAdvCloseButton:f,stickyBannerLocation:y,intervalBetweenRefreshAd:b,isLandscapeSide:E,wrapperRef:S,isAdvSplashScreenEnabled:A})=>{const I=(0,C.C)((e=>e.advGameCanBeLoaded)),[P,T]=(0,r.useState)(),[R,D]=(0,r.useState)("object"==typeof window?window.innerHeight:0),O=(0,r.useRef)(null),L=(0,u.D)(e),[_,x]=(0,r.useState)(-1),N=(0,r.useRef)(_),B=(0,r.useRef)(!1),M=(0,r.useRef)(!1);(0,r.useEffect)((()=>{N.current=_}),[_]),(0,r.useEffect)((()=>{const e=(0,te.D)((()=>{D(window.innerHeight)}),200);return window.addEventListener("resize",e,!0),()=>{window.removeEventListener("resize",e,!0)}}),[]);const $=(0,r.useCallback)((()=>{return e=void 0,t=null,a=function*(){try{T(yield(0,Y.l)(J.oO.PubliftZone)),fe("Publift script loaded.")}catch(e){(0,se.H)({block:ne.W.GOOGLE_ADS,prefix:"AdvStickyBanner error [publift]:",message:"script failed to load"}),v(),g()}},new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));var e,t,a}),[v,g]);(0,r.useEffect)((()=>{I&&!P&&$()}),[I,P,$]);const F=(0,r.useCallback)((()=>{O.current=new ae.U({app_id:t,tag:o.$H.STICKY});const a=-1===N.current;!!A&&(B.current&&a)||O.current.tryOpen({provider:w.e.PubliftZone,reason:a?re.p_.ONSPOT:re.p_.REFRESH}),B.current=!0,M.current=!1,A&&e||x((e=>e+1))}),[e,t,A]),H=(0,r.useCallback)((()=>{M.current=!0,g()}),[g]),W=(0,r.useCallback)((e=>{if(M.current)return;let t;switch(e){case k.JK.Landscape:t={onlyLandscape:!0};break;case k.JK.Portrait:t={onlyPortrait:!0}}v(t)}),[v]);if((0,Q.b)(F,Boolean(P)),(0,r.useEffect)((()=>{B.current&&L&&!e&&F()}),[e,L,F]),(0,r.useEffect)((()=>{}),[P,e,y,F]),(0,p.Yz)(F,!P||e?null:b),!a)return;const G={advHidden:e,advLogger:O.current,blocks:a,provider:P,refreshCounter:_,stickyBannerLocation:y,onAdvShowed:H,onClose:W};return s().createElement(Be,Ue(je({},G),{canShowDesktopAdv:n,desktopAdvWidth:d,hideAdvCloseButton:f,innerHeight:R,wrapperRef:S}))}),L.Z,{blocks:e=>{var t;return null==(t=e.allAdvBlocks.publift)?void 0:t.sticky},isAdvSplashScreenEnabled:e=>e.isAdvSplashScreenEnabled}),ze={container:"StickyAdvContainer-critical-module__container--AeFEa",containerHidden:"StickyAdvContainer-critical-module__containerHidden--VBb0S",containerWhiteBg:"StickyAdvContainer-critical-module__containerWhiteBg--UKGhL",headerEnabled:"StickyAdvContainer-critical-module__headerEnabled--Rcyam",locationRight:"StickyAdvContainer-critical-module__locationRight--VoIlR",locationBottom:"StickyAdvContainer-critical-module__locationBottom--oThSu",banner:"StickyAdvContainer-critical-module__banner--mOURl",placementVertical:"StickyAdvContainer-critical-module__placementVertical--w5Bsm"},Ve=({advLogger:e,onResponsePost:t,onFailed:a,refreshCounter:s})=>{const n=(0,r.useMemo)((()=>({})),[e]),o=(0,r.useCallback)((t=>{let a=n[t];return a||(a=e.copy({blockType:t}),n[t]=a),a}),[e,n]),i=(0,r.useCallback)(((e,t,{payloadBlockType:a})=>{t?o(a).waterfall({advBlockId:(0,J.Qq)(e)?e.blockId:"",provider:e.provider,depth:0,reason:re.p_.WATERFALL}):(o(a).tryOpen({provider:e.provider,reason:s>0?re.p_.REFRESH:re.p_.ONSPOT}),o(a).demand({advBlockId:(0,J.Qq)(e)?e.blockId:"unknown"}))}),[o,s]),l=(0,r.useCallback)(((e,{payloadBlockType:t})=>{o(t).request()}),[o]),d=(0,r.useCallback)((({isEmpty:e},a)=>{const{payloadBlockType:r}=a;e?o(r).responseEmpty():o(r).response(),null==t||t({isEmpty:e},a)}),[o,t]),c=(0,r.useCallback)(((e,{payloadBlockType:t})=>{o(t).show()}),[o]);return{onError:(0,r.useCallback)((({error:e},{payloadBlockType:t})=>{e instanceof N.lu&&e.params.isEmpty||o(t).error(e.message)}),[o]),onRequest:l,onResponse:d,onShow:c,onSkip:(0,r.useCallback)((({reason:e},{payloadBlockType:t})=>{o(t).skip(e)}),[o]),onWaterfallNext:i,onWaterfallFailed:(0,r.useCallback)(((e,{payloadBlockType:t,payloadPlacement:r})=>{null==a||a(r,t),(0,K._y)(`StickyAdv | ${t} | WaterfallFailed`,e)}),[a])}};var Ke=a(57745);const Ye=()=>(0,Ke.HX)().stickyAdv;var Xe=a(55231),Je=a(25562),Qe=a(94671),et=a(31136),tt=a(15771),at=Object.defineProperty,rt=Object.getOwnPropertySymbols,st=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable,ot=(e,t,a)=>t in e?at(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const it=[J.oO.GoogleBlock],lt=(0,r.forwardRef)((({blockType:e,flags:t,location:a,maxHeight:n,withSpinner:i=!1,provider:l,stickyLocation:d,waterfallItem:c,onError:h,onRequest:u,onResponse:p,onShow:m,onSkip:v,onFailed:g},f)=>{const y="sticky_banner_"+e+"_"+s().useId(),w=(0,r.useRef)(null),k=(0,r.useRef)(null),[E,S]=(0,r.useState)(!1),[A,I]=(0,r.useState)(i),P=(0,r.useMemo)((()=>(0,tt.ff)(t)),[t]);return(0,r.useEffect)((()=>{let r=null;var s,n,i;return s=void 0,n=null,i=function*(){var s,n,i,f,b,E,A,T,C,R;if(c&&(0,J.Qq)(c)&&l&&w.current&&k.current)try{if((0,Ke.hP)(c)&&e===o.kq.DESKTOP_BOTTOM&&!(0,Je.TG)({canReturnEmptyArray:!0,maxAdvHeight:null!=(n=null==(s=w.current.parentElement)?void 0:s.clientHeight)?n:window.innerHeight,maxAdvWidth:null!=(f=null==(i=w.current.parentElement)?void 0:i.clientWidth)?f:window.innerWidth,sizes:c.sizes}).length)return void(null==v||v({reason:o.Jm.WATERFALL_ITEM_CONSTRAINTS,slot:r}));if((0,Ke.y)(c)&&e===o.kq.DESKTOP_ADDITIONAL&&(null!=(b=k.current.clientHeight)?b:0)<50)return void(null==v||v({reason:o.Jm.NOT_ENOUGH_CONTAINER_SIZE,slot:r}));(0,K._y)("Sticky | Actualy create slot",y,c,k,w.current.clientHeight,w.current.clientWidth),S(!1);const h=((e,t)=>{for(var a in t||(t={}))st.call(t,a)&&ot(e,a,t[a]);if(rt)for(var a of rt(t))nt.call(t,a)&&ot(e,a,t[a]);return e})({blockId:c.blockId,divId:y,location:a,withPageNumber:!1},(0,Ke.hP)(c)?{size:(0,Je.TG)({sizes:c.sizes,maxAdvWidth:null!=(A=null==(E=w.current.parentElement)?void 0:E.clientWidth)?A:window.innerWidth,maxAdvHeight:null!=(C=null==(T=w.current.parentElement)?void 0:T.clientHeight)?C:window.innerHeight}),usePrevious:!0,testId:`sticky-banner_${e}_${d}_${l.providerLoaderName}`}:{size:[]});r=yield l.createSlot(h);let g=0,D=!0;const O=it.includes(l.providerName)?P:0;do{null==u||u({slot:r});const e=yield l.preloadSlot({slot:r,flags:t}),{isEmpty:a}=e;if(null==p||p({slot:r,isEmpty:a},{payloadProductType:"productType"in e?null!=(R=e.productType)?R:"none":"unknown"}),!1===a){D=!1;break}if(!O)break;yield(0,et.D)(Xe.TE),g+=1}while(D&&g<=O);if(D)throw new N.lu("Slot is empty",{isEmpty:!0});I((()=>!1)),S(!0),yield l.showSlot(r),null==m||m({slot:r})}catch(e){null==h||h({error:e,slot:r}),null==g||g({error:e})}},new Promise(((e,t)=>{var a=e=>{try{o(i.next(e))}catch(e){t(e)}},r=e=>{try{o(i.throw(e))}catch(e){t(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,r);o((i=i.apply(s,n)).next())})),()=>{(0,K._y)("Sticky | Renderer clear",y),r&&l&&l.destroySlot(r)}}),[e,y,t,P,h,u,p,m,v,g,a,l,d,c]),s().createElement("div",{className:(0,Qe.E)(ze.banner),"data-testid":"sticky-banner-"+e,ref:k,style:{maxHeight:!E&&n?n+"px":void 0}},A&&s().createElement(b.y,{position:"center",size:28,spinning:!0,view:"default"}),s().createElement("div",{id:y,ref:w}))})),dt=(0,X.Z)(lt,L.Z,{flags:e=>e.abt.flags,location:e=>e.location});var ct=a(13547),ht=Object.defineProperty,ut=Object.getOwnPropertySymbols,pt=Object.prototype.hasOwnProperty,mt=Object.prototype.propertyIsEnumerable,vt=(e,t,a)=>t in e?ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const gt=(0,r.memo)((0,X.Z)((({advLogger:e,flags:t,isVisible:a,onFailed:n,refreshCounter:i})=>{const d=Ye(),c=(0,r.useMemo)((()=>(0,tt.oh)(t)?k.Aw:k.zc),[t]),h=(0,r.useMemo)((()=>{var e,t;return i<0?[]:l.default.type.includes(k.JK.Portrait)?[...null!=(t=null==(e=null==d?void 0:d.blocks.desktop_bottom)?void 0:e.waterfall)?t:[]]:[]}),[d,i]),u=Ve({advLogger:e,onFailed:n,refreshCounter:i}),p=a&&((0,k.yh)(t)||(0,k.nT)(t));return s().createElement("div",{className:(0,Qe.E)(ze.container,ze.locationBottom,p?"":ze.containerHidden),style:{height:c}},s().createElement(ct.Z,((e,t)=>{for(var a in t||(t={}))pt.call(t,a)&&vt(e,a,t[a]);if(ut)for(var a of ut(t))mt.call(t,a)&&vt(e,a,t[a]);return e})({alwaysRender:!0,payloadBlockType:o.kq.DESKTOP_BOTTOM,payloadPlacement:k.JK.Desktop,waterfallList:h},u),s().createElement(dt,{blockType:o.kq.DESKTOP_BOTTOM,stickyLocation:E.Xn.BOTTOM,withSpinner:!0})))}),L.Z,{flags:e=>e.abt.flags}));var ft=a(29747);function yt(e,t){return e.some((e=>e.provider===t))}var bt=a(67471),wt=a(90380),kt=Object.defineProperty,Et=Object.getOwnPropertySymbols,St=Object.prototype.hasOwnProperty,At=Object.prototype.propertyIsEnumerable,It=(e,t,a)=>t in e?kt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Pt=(e,t)=>{for(var a in t||(t={}))St.call(t,a)&&It(e,a,t[a]);if(Et)for(var a of Et(t))At.call(t,a)&&It(e,a,t[a]);return e};const Tt=(0,r.memo)((0,X.Z)((({advLogger:e,flags:t,isVisible:a,refreshCounter:n,showDisableAdButton:i,onFailed:l})=>{var d;const c=Ye(),[u,p]=(0,r.useState)(!(0,N.Ij)()),[m,v]=(0,r.useState)("object"==typeof window?window.innerHeight:0),[g,f]=(0,r.useState)(!1),y=(0,r.useRef)(-1),b=(0,r.useMemo)((()=>{var e,t,a,r;return n<0||!c?{[o.kq.DESKTOP]:[],[o.kq.DESKTOP_ADDITIONAL]:[]}:{[o.kq.DESKTOP]:[...null!=(t=null==(e=c.blocks[o.kq.DESKTOP])?void 0:e.waterfall)?t:[]],[o.kq.DESKTOP_ADDITIONAL]:[...null!=(r=null==(a=c.blocks[o.kq.DESKTOP_ADDITIONAL])?void 0:a.waterfall)?r:[]]}}),[n,c]),w=(0,r.useContext)(L.Z),S=(0,h.v9)((e=>e.middleLayerInGameData)),A=(0,C.C)(R.Up);(0,r.useEffect)((()=>(f(!1),()=>{clearTimeout(y.current)})),[b]);const I=(0,r.useCallback)(((e,{payloadProductType:t})=>{(0,K._y)(`Sticky | Received ${t} pcode banner.`),k.U_.includes(t)||(y.current=window.setTimeout((()=>f(!0)),50))}),[]),P=(0,r.useMemo)((()=>{let e=300;if(!yt(b.desktop,J.oO.GoogleBlock)){const{innerWidth:t}=(0,bt.bY)();e=Math.max(t*(k.PV/100),240),e=Math.min(e,300),yt(b.desktop,J.oO.AdsenseResponsive)&&(e=Math.max(e,ft.K))}const a=(0,tt.$9)(t,wt.Z.advStickyBannerDesktopWidth);return a&&(e=a),e}),[t,b.desktop]);(0,r.useEffect)((()=>{const e=e=>{p("enabled"===e.data.action)},t=(0,te.D)((()=>{v(window.innerHeight)}),200);return B.Z.onInternalMessage("header",e),window.addEventListener("resize",t,!0),()=>{B.Z.offInternalMessage("header",e),window.removeEventListener("resize",t,!0)}}),[]);const T=Ve({advLogger:e,refreshCounter:n,onResponsePost:I,onFailed:l}),D=!yt(b[o.kq.DESKTOP_ADDITIONAL],J.oO.GoogleBlock)||m>=700;return s().createElement("div",{className:(0,Qe.E)(ze.container,ze.locationRight,a?"":ze.containerHidden,u&&i?ze.headerEnabled:"",w.isMiddleLayerInGameExp&&(null==S?void 0:S.show)&&!A?ze.containerWhiteBg:""),style:{width:P}},i&&s().createElement(x,null),m>=500&&(null==c?void 0:c.blocks[o.kq.DESKTOP])&&s().createElement(ct.Z,Pt({alwaysRender:!0,payloadBlockType:o.kq.DESKTOP,payloadPlacement:k.JK.Desktop,waterfallList:b[o.kq.DESKTOP]},T),s().createElement(dt,{blockType:o.kq.DESKTOP,maxHeight:(null==(d=b[o.kq.DESKTOP][0])?void 0:d.provider)!==J.oO.YandexBlock?600:void 0,stickyLocation:E.Xn.RIGHT,withSpinner:!0})),D&&g&&(null==c?void 0:c.blocks[o.kq.DESKTOP_ADDITIONAL])&&s().createElement(ct.Z,Pt({alwaysRender:!0,payloadBlockType:o.kq.DESKTOP_ADDITIONAL,payloadPlacement:k.JK.Desktop,waterfallList:b[o.kq.DESKTOP_ADDITIONAL]},T),s().createElement(dt,{blockType:o.kq.DESKTOP_ADDITIONAL,stickyLocation:E.Xn.RIGHT})))}),L.Z,{flags:e=>e.abt.flags,showDisableAdButton:e=>!e.hidePaymentsAndCurrency}));var Ct=Object.defineProperty,Rt=Object.getOwnPropertySymbols,Dt=Object.prototype.hasOwnProperty,Ot=Object.prototype.propertyIsEnumerable,Lt=(e,t,a)=>t in e?Ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const _t=(0,r.memo)((0,X.Z)((({advLogger:e,refreshCounter:t,flags:a,isVisible:n,onFailed:i})=>{const d=Ye(),c=(0,r.useMemo)((()=>{var e,a;return t<0?[]:l.default.type.includes(k.JK.Landscape)?[...null!=(a=null==(e=null==d?void 0:d.blocks.landscape_side)?void 0:e.waterfall)?a:[]]:[]}),[d,t]),h=(0,r.useMemo)((()=>{const e=(0,tt.$9)(a,wt.Z.advStickyBannerLandscapeWidth);return e||k.HZ}),[a]),u=Ve({advLogger:e,refreshCounter:t,onFailed:i});return s().createElement("div",{className:(0,Qe.E)(ze.container,ze.placementSide,ze.locationRight,n?"":ze.containerHidden),style:{width:h}},s().createElement(ct.Z,((e,t)=>{for(var a in t||(t={}))Dt.call(t,a)&&Lt(e,a,t[a]);if(Rt)for(var a of Rt(t))Ot.call(t,a)&&Lt(e,a,t[a]);return e})({alwaysRender:!0,payloadBlockType:o.kq.LANDSCAPE_SIDE,payloadPlacement:k.JK.Landscape,waterfallList:c},u),s().createElement(dt,{blockType:o.kq.LANDSCAPE_SIDE,stickyLocation:E.Xn.RIGHT,withSpinner:!0})))}),L.Z,{flags:e=>e.abt.flags}));var xt=Object.defineProperty,Nt=Object.getOwnPropertySymbols,Bt=Object.prototype.hasOwnProperty,Mt=Object.prototype.propertyIsEnumerable,$t=(e,t,a)=>t in e?xt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Ft=(e,t)=>{for(var a in t||(t={}))Bt.call(t,a)&&$t(e,a,t[a]);if(Nt)for(var a of Nt(t))Mt.call(t,a)&&$t(e,a,t[a]);return e};const Ht={landscape:[],landscape_additional:[],landscape_tablet_additional:[]},Wt=(0,r.memo)((0,X.Z)((({advLogger:e,refreshCounter:t,flags:a,isVisible:n,onFailed:i})=>{const d=Ye(),[c,h]=(0,r.useState)(!0),[u,p]=(0,r.useState)(!1),m=(0,r.useRef)(-1),v="undefined"!=typeof window&&Math.max(window.innerWidth,window.innerHeight)>=k.kO,g=(0,r.useMemo)((()=>{var e,a,r,s,n,o;return t<0||!d?Ht:l.default.type.includes(k.JK.Landscape)?{landscape:[...null!=(a=null==(e=d.blocks.landscape)?void 0:e.waterfall)?a:[]],landscape_additional:[...null!=(s=null==(r=d.blocks.landscape_additional)?void 0:r.waterfall)?s:[]],landscape_tablet_additional:[...null!=(o=null==(n=d.blocks.landscape_tablet_additional)?void 0:n.waterfall)?o:[]]}:Ht}),[t,d]),f=(0,r.useMemo)((()=>(0,M.C)()),[]),y=(0,r.useMemo)((()=>{const e=(0,tt.$9)(a,wt.Z.advStickyBannerLandscapeHeight);return e||k.qi}),[a]),w=(0,r.useCallback)(((e,{payloadProductType:t})=>{if(h(!1),(0,K._y)(`Sticky | Received ${t} pcode banner.`),t){if(k.iv.includes(t))return;m.current=window.setTimeout((()=>p(!0)),k.fE)}}),[]);(0,r.useEffect)((()=>()=>{clearTimeout(m.current)}),[]);const S=Ve({advLogger:e,refreshCounter:t,onResponsePost:w,onFailed:i}),A=null==d?void 0:d.placements.mobileLandscape.includes(E.Xn.UPPER);return s().createElement("div",{className:(0,Qe.E)(ze.container,ze.placementVertical,(null==d?void 0:d.placements.mobileLandscape.includes(E.Xn.UPPER))?ze.locationUpper:ze.locationBottom,n?"":ze.containerHidden),style:{height:y,left:-f,minWidth:`calc(100% + ${f}px)`}},c&&s().createElement(b.y,{key:"landscape-spinner",position:"center",size:28,spinning:!0,view:"default"}),s().createElement(ct.Z,Ft({alwaysRender:!0,payloadBlockType:o.kq.LANDSCAPE,payloadPlacement:k.JK.Landscape,waterfallList:g[o.kq.LANDSCAPE]},S),s().createElement(dt,{blockType:o.kq.LANDSCAPE,stickyLocation:A?E.Xn.UPPER:E.Xn.BOTTOM,withSpinner:!0})),(null==d?void 0:d.blocks.landscape_additional)&&u&&s().createElement(s().Fragment,null,v&&s().createElement(ct.Z,Ft({alwaysRender:!0,payloadBlockType:o.kq.LANDSCAPE_TABLET_ADDITIONAL,payloadPlacement:k.JK.Landscape,waterfallList:g[o.kq.LANDSCAPE_TABLET_ADDITIONAL]},S),s().createElement(dt,{blockType:o.kq.LANDSCAPE_TABLET_ADDITIONAL,stickyLocation:A?E.Xn.UPPER:E.Xn.BOTTOM,withSpinner:!0})),s().createElement(ct.Z,Ft({alwaysRender:!0,payloadBlockType:o.kq.LANDSCAPE_ADDITIONAL,payloadPlacement:k.JK.Landscape,waterfallList:g[o.kq.LANDSCAPE_ADDITIONAL]},S),s().createElement(dt,{blockType:o.kq.LANDSCAPE_ADDITIONAL,stickyLocation:A?E.Xn.UPPER:E.Xn.BOTTOM,withSpinner:!0}))))}),L.Z,{flags:e=>e.abt.flags}));var Gt=a(22355),Zt=Object.defineProperty,jt=Object.getOwnPropertySymbols,Ut=Object.prototype.hasOwnProperty,qt=Object.prototype.propertyIsEnumerable,zt=(e,t,a)=>t in e?Zt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const Vt=(0,r.memo)((0,X.Z)((({advLogger:e,refreshCounter:t,flags:a,isVisible:n,onFailed:i})=>{const d=Ye(),c=(0,C.C)(Gt.y),h=(0,r.useMemo)((()=>{var e;const t=(0,tt.$9)(a,wt.Z.advStickyBannerPortraitHeight);if(t)return t;const{innerWidth:r,innerHeight:s}=(0,bt.bY)(),n=null!=(e=(0,tt.$9)(a,wt.Z.advStickyBannerMinHeightForHigherAd))?e:k.Gh,o=c?Math.max(window.screen.height,window.screen.width):Math.max(s,r);let i=k.qi;return o>=n&&(i=k.RH),i}),[a,c]),u=h===k.RH?o.kq.PORTRAIT_HIGH:o.kq.PORTRAIT,p=(0,r.useMemo)((()=>{var e,a;return t<0?[]:l.default.type.includes(k.JK.Portrait)?[...null!=(a=null==(e=null==d?void 0:d.blocks[u])?void 0:e.waterfall)?a:[]]:[]}),[u,d,t]),m=Ve({advLogger:e,refreshCounter:t,onFailed:i}),v=null==d?void 0:d.placements.mobilePortrait.includes(E.Xn.UPPER);return s().createElement("div",{className:(0,Qe.E)(ze.container,ze.placementPortrait,v?ze.locationUpper:ze.locationBottom,n?"":ze.containerHidden),style:{height:h}},(null==d?void 0:d.blocks[u])&&s().createElement(ct.Z,((e,t)=>{for(var a in t||(t={}))Ut.call(t,a)&&zt(e,a,t[a]);if(jt)for(var a of jt(t))qt.call(t,a)&&zt(e,a,t[a]);return e})({alwaysRender:!0,payloadBlockType:u,payloadPlacement:k.JK.Portrait,waterfallList:p},m),s().createElement(dt,{blockType:u,stickyLocation:v?E.Xn.UPPER:E.Xn.BOTTOM,withSpinner:!0})))}),L.Z,{flags:e=>e.abt.flags}));var Kt=Object.defineProperty,Yt=Object.defineProperties,Xt=Object.getOwnPropertyDescriptors,Jt=Object.getOwnPropertySymbols,Qt=Object.prototype.hasOwnProperty,ea=Object.prototype.propertyIsEnumerable,ta=(e,t,a)=>t in e?Kt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,aa=(e,t)=>{for(var a in t||(t={}))Qt.call(t,a)&&ta(e,a,t[a]);if(Jt)for(var a of Jt(t))ea.call(t,a)&&ta(e,a,t[a]);return e},ra=(e,t)=>Yt(e,Xt(t));const sa=(0,r.memo)((0,X.Z)((({advHidden:e,appId:t,canShowDesktopAdv:a,canShowLandscapeAdv:n,canShowPortraitAdv:i,flags:d,onClose:c,onAdvShowed:h})=>{const m=Ye(),[v,g]=(0,r.useState)(-1),f=(0,u.D)(e),y=(0,r.useRef)(v),b=(0,r.useRef)(!1),w=(0,r.useRef)(!1),E=(0,r.useMemo)((()=>(0,tt.RM)(d,wt.Z.advHideEmptySticky)),[d]),S=(0,r.useMemo)((()=>new ae.U({app_id:t,tag:o.$H.STICKY,refresh_count:v})),[t,v]);(0,r.useEffect)((()=>{y.current=v}),[v]);const A=(0,r.useCallback)((()=>{g((e=>e+1)),b.current=!0}),[]),I=(0,r.useCallback)((()=>{w.current=!0,h()}),[h]),P=(0,r.useCallback)(((e,t)=>{if(w.current||!1===E)return;if(t===o.kq.DESKTOP_ADDITIONAL)return;let a;switch(e){case k.JK.Landscape:a={onlyLandscape:!0};break;case k.JK.Portrait:a={onlyPortrait:!0}}S.close(),c(a)}),[S,c,E]);if((0,Q.b)(A,!e),(0,r.useEffect)((()=>{b.current&&f&&!e&&A()}),[e,f,A]),(0,r.useEffect)((()=>{if(e)return;const t=()=>{l.default.isPortrait&&!(null==m?void 0:m.placements.mobilePortrait)||l.default.isLandscape&&!(null==m?void 0:m.placements.mobileLandscape)||A()};return l.default.addChangeListener(t),()=>{l.default.removeChangeListener(t)}}),[e,m,A]),(0,p.Yz)(A,!e&&(null==m?void 0:m.refreshInterval)||null),!m)return null;const T={advHidden:e,advLogger:S,refreshCounter:v,onAdvShowed:I,onFailed:P};return s().createElement(s().Fragment,null,m.blocks.desktop&&s().createElement(Tt,ra(aa({},T),{isVisible:!e&&a})),m.blocks.desktop_bottom&&s().createElement(gt,ra(aa({},T),{isVisible:!e&&a})),m.blocks.portrait&&s().createElement(Vt,ra(aa({},T),{isVisible:!e&&i})),m.blocks.landscape&&s().createElement(Wt,ra(aa({},T),{isVisible:!e&&n})),m.blocks.landscape_side&&s().createElement(_t,ra(aa({},T),{isVisible:!e&&n})))}),L.Z,{appId:e=>e.playPageData.gameInfo.appId,flags:e=>e.abt.flags}));var na=a(14408),oa=a(38096),ia=a(26108),la=a(71487),da=a(36529),ca=a(21698),ha=a(85623),ua=a(58098),pa=a(59886),ma=a(78569),va=a(42873),ga=a(89592);const fa=(0,g.M$)("AdvStickyBanner",g.XG.Adv),ya=({flags:e,stickyBlocks:t})=>{let a=(0,oa.getDomainConfig)().adv.bidsServiceName;const r=(0,tt.Ed)(e)?"dsail":"default",s={desktop:t.desktop,landscape:t.landscape,portrait:t.portrait,portrait_high:t.portrait_high};let n=ba(a,r,s.desktop);return n=function(e,t){const a=(0,tt.QR)(t,wt.Z.prebidDisabledBids);(0,ga.GI)(a)&&e.forEach((e=>{e.bids=e.bids.filter((({bidder:e})=>!a.includes(e)))}));return e}(n,e),fa("getPrebidStickyAdUnits result",n),n};const ba=(e,t,a)=>[{code:a.main.blockId,mediaTypes:{banner:{sizes:a.main.sizes}},bids:va.U[e][t].sticky.desktop.sidebar_main},{code:a.small.blockId,mediaTypes:{banner:{sizes:a.small.sizes}},bids:va.U[e][t].sticky.desktop.sidebar_small}];var wa=a(40656),ka=a(49659),Ea=Object.defineProperty,Sa=Object.getOwnPropertySymbols,Aa=Object.prototype.hasOwnProperty,Ia=Object.prototype.propertyIsEnumerable,Pa=(e,t,a)=>t in e?Ea(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Ta=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const Ca=v().with("google-sticky-adv-banner"),Ra=(0,g.M$)("GoogleStickyAdvBanner",g.XG.Adv),Da="AdvStickyBanner error [google]:",Oa="google-adv-sticky-banner-",La=500,_a=700,xa=2*wa.WT,Na=!0;function Ba(e,t){(0,D.U4)({},{borrowParams:{adv:{sticky:{[e]:t}}}})}class Ma extends L.P{constructor(){super(...arguments),this.isAdditionalTabletLandscapeBlockEnabled="undefined"!=typeof window&&!1,this.allStickyGoogleAdvBlocks=this.context.allAdvBlocks.google.sticky,this.usePrebid=(0,tt.AZ)(this.context.abt.flags),this.useMultipleAuction=(0,tt.Ml)(this.context.abt.flags),this.prebidAdUnits=ya({stickyBlocks:this.allStickyGoogleAdvBlocks,flags:this.context.abt.flags}),this.waitForAuction=null,this.retries=(0,tt.ff)(this.context.abt.flags),this.hasBeenShownAtLeastOnce=!1,this.slots={desktop:{},landscape:{},portrait:{}},this.timeToLoadAdv=(0,k.Qt)(this.context.abt.flags),this.headerHeight=(0,M.C)(),this.landscapeStyles=((e,t)=>{for(var a in t||(t={}))Aa.call(t,a)&&Pa(e,a,t[a]);if(Sa)for(var a of Sa(t))Ia.call(t,a)&&Pa(e,a,t[a]);return e})({},this.props.isLandscapeSide?{width:this.props.mobileAdvSideLandscapeWidth}:{height:`${this.props.mobileAdvLandscapeHeight}px`,left:-this.headerHeight,minWidth:`calc(100% + ${this.headerHeight}px)`}),this.state={isHeaderEnabled:!(0,N.Ij)(),showLandscapeSpinner:!0,showSpinner:!0,windowInnerHeight:"object"==typeof window?window.innerHeight:0},this.isFirstTryOpen=!0,this.onShow=e=>{const{slot:t}=e,{stickyPlacement:a,clickDaemon:r}=t;a&&(null==r||r.show())},this.onSlotRenderEnded=e=>{const{slot:t}=e,{clickDaemon:a,stickyPlacement:r,stickyBlockType:s,stickyLocation:n}=t;if(!r||!s)return;Ra.spoiler(t.getAdUnitPath())("onSlotRenderEnded",s,`isEmpty = ${e.isEmpty}`);const o=this.slots[r][s];if(clearTimeout(o.loadTimer),this.resetRefreshTimer(),e.isEmpty)return null==a||a.responseEmpty(),void this.onNoContent(t);null==a||a.response(),o.retries&&(o.retries=0),this.hasBeenShownAtLeastOnce=!0,(0,ca.o)(t,`sticky-banner_${r}_${n}_${w.e.Google}`)},this.resetRefreshTimer=()=>{Ra("Reset refresh timer",Date.now()),this.refreshTimer||Ba("startRefreshTimer",!0),clearTimeout(this.refreshTimer),this.refreshTimer=setTimeout((()=>{Ra.spoiler("refresh timer executed"),Ba("refreshTimerEnded",!0),clearTimeout(this.refreshTimer),this.refreshTimer=void 0,this.displaySlotsBatched(!0)}),this.props.intervalBetweenRefreshAd)},this.onSlotLoaded=({slot:e})=>{const{stickyPlacement:t,stickyBlockType:a}=e;if(!t||!a)return;Ra.spoiler(e.getAdUnitPath())("onSlotLoaded",a);const r=this.slots[t][a];switch(r.loaded=!0,clearTimeout(r.loadTimer),t){case k.JK.Desktop:this.setState({showSpinner:!1});break;case k.JK.Landscape:this.setState({showLandscapeSpinner:!1});break;case k.JK.Portrait:this.setState({showSpinner:!1})}},this.onSlotRequested=({slot:e})=>{const{stickyPlacement:t,stickyBlockType:a,clickDaemon:r}=e;if(!t||!a)return;Ra.spoiler(e.getAdUnitPath())("onSlotRequested",a);const s=this.slots[t][a];clearTimeout(s.loadTimer),s.loadTimer=setTimeout((()=>{s.loaded||((0,se.H)({block:ne.W.GOOGLE_ADS,prefix:Da,message:`${t} timeout error`}),null==r||r.error(`${t} timeout error`),this.resetRefreshTimer(),!1!==(0,tt.RM)(this.context.abt.flags,wt.Z.advHideEmptySticky)&&this.onClose(e))}),this.timeToLoadAdv)},this.onSlotResponseReceived=({slot:e})=>{const{stickyPlacement:t,stickyBlockType:a}=e;t&&a&&(Ra.spoiler(e.getAdUnitPath())("onSlotResponseReceived",a),clearTimeout(this.slots[t][a].loadTimer))},this.prebidStartAuction=(0,la.P)((()=>Ta(this,null,(function*(){null===this.waitForAuction&&(Ra("[prebid_sticky] startAuction"),this.waitForAuction=new ia.Z,yield(0,ua.BA)((e=>{e.requestBids({adUnits:this.prebidAdUnits,bidsBackHandler:this.prebidAuctionHandler,timeout:pa.ZV})})),this.prebidAuctionTimeout=setTimeout((()=>{Ra("[prebid_sticky] No auction handled, call empty function."),this.prebidAuctionHandler()}),k.kr))}))),pa.kw),this.prebidAuctionHandler=(e,t)=>Ta(this,null,(function*(){clearTimeout(this.prebidAuctionTimeout),Ra("[prebid_sticky] prebidAuctionHandler",e),t&&(0,se.H)({block:ne.W.ADV},new Error("[prebid_sticky] Auction finished with bidders timed out."));const a=(0,k.Dr)(this.prebidAdUnits);(0,ma.H)({advTag:o.$H.STICKY,adUnitCodes:a,bids:e}),yield(0,ua.BA)((e=>{var t;e.setTargetingForGPTAsync(a),null==(t=this.waitForAuction)||t.resolve()}))})),this.onWindowResize=(0,te.D)((()=>{this.setState({windowInnerHeight:window.innerHeight})}),200),this.changeOrientationListener=()=>{if(this.props.advHidden)return;let e;if(l.default.isPortrait)e=k.JK.Portrait;else{if(!l.default.isLandscape)return;e=k.JK.Landscape}for(const{slot:t}of Object.values(this.slots[e])){if(!t)return;if(t.stickyBlockType===o.kq.LANDSCAPE_TABLET_ADDITIONAL&&!this.isAdditionalTabletLandscapeBlockEnabled)return;this.tryShowAdv(t)}}}get slotsArray(){return Object.values(this.slots).map(Object.values).reduce(((e,t)=>e.concat(t)))}componentDidMount(){var e,t;this.setAdvBlocks(),this.setState({windowInnerHeight:window.innerHeight}),Ra("blockIds = ",this.blockIds),window.addEventListener("resize",this.onWindowResize,!0);const{desktop:a}=this.props.stickyBannerLocation;a&&(this.desktopAdvMinHeight="number"==typeof(null==(t=null==(e=this.allStickyGoogleAdvBlocks.desktop.main.sizes)?void 0:e[0])?void 0:t[1])?this.allStickyGoogleAdvBlocks.desktop.main.sizes[0][1]:600),this.props.advGameCanBeLoaded&&this.loadScripts(),B.Z.onInternalMessage("header",(e=>{this.setState({isHeaderEnabled:"enabled"===e.data.action})}))}componentWillUnmount(){window.removeEventListener("resize",this.onWindowResize,!0),l.default.removeChangeListener(this.changeOrientationListener),clearTimeout(this.refreshTimer);const{googletag:e}=window;e&&(this.removeSlotsEventListeners(),this.slotsArray.forEach((t=>{clearTimeout(t.loadTimer),t.slot&&e.destroySlots([t.slot])})))}setAdvBlocks(){this.blockIds=this.allStickyGoogleAdvBlocks,this.props.useHighPortraitBlockIds&&this.allStickyGoogleAdvBlocks.portrait_high&&(this.blockIds.portrait=this.allStickyGoogleAdvBlocks.portrait_high)}addSlotsEventListeners(){var e;const t=null==(e=googletag.pubads)?void 0:e.call(googletag);t&&"function"==typeof t.addEventListener&&(t.addEventListener("slotRequested",this.onSlotRequested),t.addEventListener("slotResponseReceived",this.onSlotResponseReceived),t.addEventListener("slotOnload",this.onSlotLoaded),t.addEventListener("slotRenderEnded",this.onSlotRenderEnded),t.addEventListener("impressionViewable",this.onShow))}removeSlotsEventListeners(){var e;const t=null==(e=googletag.pubads)?void 0:e.call(googletag);t&&"function"==typeof t.removeEventListener&&(t.removeEventListener("slotRequested",this.onSlotRequested),t.removeEventListener("slotResponseReceived",this.onSlotResponseReceived),t.removeEventListener("slotOnload",this.onSlotLoaded),t.removeEventListener("slotRenderEnded",this.onSlotRenderEnded),t.removeEventListener("impressionViewable",this.onShow))}componentDidUpdate(e,t){var a,r;const{advGameCanBeLoaded:s,stickyBannerLocation:{desktop:n,mobilePortrait:i,mobileLandscape:l}}=this.props;if(e.advGameCanBeLoaded||!s||this.isScriptsLoaded||this.loadScripts(),n&&!e.isPageBlured&&this.props.isPageBlured)Object.values(this.slots.desktop).forEach((e=>{e.slot&&this.hideAdvSlot(e.slot)}));else if(n&&e.isPageBlured&&!this.props.isPageBlured)Object.values(this.slots.desktop).forEach((e=>{e.slot&&this.tryShowAdv(e.slot)}));else if(this.isScriptsLoaded&&n&&t.windowInnerHeight!==this.state.windowInnerHeight&&((null==(a=this.slots.desktop.desktop)?void 0:a.slot)&&t.windowInnerHeight<La&&this.state.windowInnerHeight>=La&&this.tryShowAdv(this.slots.desktop.desktop.slot),(null==(r=this.slots.desktop.desktop_additional)?void 0:r.slot)&&t.windowInnerHeight<_a&&this.state.windowInnerHeight>=_a&&this.tryShowAdv(this.slots.desktop.desktop_additional.slot)),this.isScriptsLoaded&&e.advHidden&&!this.props.advHidden||!e.canShowPortraitAdv&&this.props.canShowPortraitAdv||!e.canShowLandscapeAdv&&this.props.canShowLandscapeAdv){if(n&&Object.values(this.slots.desktop).forEach((e=>{e.slot&&this.tryShowAdv(e.slot)})),i){const e=this.slots.portrait.portrait;(null==e?void 0:e.slot)&&!e.loaded&&this.tryShowAdv(e.slot)}l&&Object.values(this.slots.landscape).forEach((e=>{e.slot&&(e.slot.stickyBlockType!==o.kq.LANDSCAPE_TABLET_ADDITIONAL||this.isAdditionalTabletLandscapeBlockEnabled)&&this.tryShowAdv(e.slot)}))}}onClose(e){const{stickyPlacement:t,stickyBlockType:a}=null!=e?e:{};switch(t&&a&&(this.slots[t][a].loaded=!1),this.clickDaemon.close(),t){case"desktop":return void this.props.onClose();case"portrait":return void this.props.onClose({onlyPortrait:!0});case"landscape":return void this.props.onClose({onlyLandscape:!0});default:this.props.onClose()}}onNoContent(e){var t;const{stickyPlacement:a,stickyBlockType:r}=e;if(!a||!r)return;const s=this.slots[a][r],n=null!=(t=s.retries)?t:0;if(n<this.retries)return Ra.spoiler(e.getAdUnitPath())(`${n+1} of ${this.retries} retry to refresh slot ${r}`),s.retries=n+1,clearTimeout(s.loadTimer),void setTimeout((()=>{this.tryShowAdv(e)}),xa);s.retries&&(s.retries=0),!1===(0,tt.RM)(this.context.abt.flags,wt.Z.advHideEmptySticky)||this.hasBeenShownAtLeastOnce||(Ra.spoiler(e.getAdUnitPath())(`Hide slot ${r} due no content`),this.onClose(e))}initGPT(){return Ta(this,null,(function*(){Ra("initGPT"),yield(0,ha.Vg)();try{const{googletag:e}=window;this.addSlotsEventListeners(),this.defineSlots(),e.enableServices(),l.default.addChangeListener(this.changeOrientationListener)}catch(e){(0,se.H)({message:"Trouble with getting google key values"},e)}}))}defineSlots(){const{stickyBannerLocation:{desktop:e,mobileLandscape:t,mobilePortrait:a},mobileAdvPortraitHeight:r,mobileAdvLandscapeHeight:s}=this.props;if(e){if(this.defineGPTSlot(this.blockIds.desktop.main.blockId,this.blockIds.desktop.main.sizes,k.JK.Desktop,o.kq.DESKTOP,E.Xn.RIGHT),this.defineGPTSlot(this.blockIds.desktop.small.blockId,this.blockIds.desktop.small.sizes,k.JK.Desktop,o.kq.DESKTOP_ADDITIONAL,E.Xn.RIGHT),this.blockIds.desktop.bottomBig&&(0,tt.rl)(this.context.abt.flags)){const{innerWidth:e,innerHeight:t}=(0,bt.bY)(),a=this.blockIds.desktop.bottomBig.find((a=>(0,Je.TG)({canReturnEmptyArray:!0,sizes:a.sizes,maxAdvHeight:t,maxAdvWidth:e}).length>0));a&&this.defineGPTSlot(a.blockId,a.sizes,k.JK.Desktop,o.kq.DESKTOP_BOTTOM_BIG,E.Xn.BOTTOM)}if(this.blockIds.desktop.bottomSmall&&(0,tt.oh)(this.context.abt.flags)){const{innerWidth:e,innerHeight:t}=(0,bt.bY)(),a=this.blockIds.desktop.bottomSmall.find((a=>(0,Je.TG)({canReturnEmptyArray:!0,sizes:a.sizes,maxAdvHeight:t,maxAdvWidth:e}).length>0));a&&this.defineGPTSlot(a.blockId,a.sizes,k.JK.Desktop,o.kq.DESKTOP_BOTTOM_SMALL,E.Xn.BOTTOM)}}else if(a&&this.defineGPTSlot(this.blockIds.portrait,[[320,r]],k.JK.Portrait,o.kq.PORTRAIT,E.Xn.BOTTOM),t)switch(t){case E.Xn.BOTTOM:case E.Xn.UPPER:this.defineGPTSlot(this.blockIds.landscape,[[320,s]],k.JK.Landscape,o.kq.LANDSCAPE,t),this.defineGPTSlot(this.blockIds.landscape,[[320,s]],k.JK.Landscape,o.kq.LANDSCAPE_ADDITIONAL,t),this.isAdditionalTabletLandscapeBlockEnabled&&this.defineGPTSlot(this.blockIds.landscape,[[320,s]],k.JK.Landscape,o.kq.LANDSCAPE_TABLET_ADDITIONAL,t);break;case E.Xn.RIGHT:case E.Xn.LEFT:this.defineGPTSlot(this.blockIds.landscape,["fluid"],k.JK.Landscape,o.kq.LANDSCAPE_SIDE,t)}}defineGPTSlot(e,t,a,r,s){var n;const{googletag:o}=window;Ra.spoiler(e,a,r)("defineAndDisplayGPTSlot",`isErrorOnDisplaySlots = ${!o.pubads||!o.defineSlot}`);const i=null==(n=o.defineSlot(e,t,Oa+r))?void 0:n.addService(o.pubads());i?(i.stickyPlacement=a,i.stickyBlockType=r,i.stickyLocation=s,this.slots[a][r]={loaded:!1,retries:0,slot:i}):((0,se.H)({block:ne.W.GOOGLE_ADS,prefix:Da,message:"googletag couldn't create gptSlot"}),this.onClose())}displaySlotsBatched(e){return Ta(this,null,(function*(){var t;const a=[];this.clickDaemon=new ae.U({app_id:this.props.appId,tag:o.$H.STICKY}),this.clickDaemon.tryOpen({provider:w.e.Google,reason:e?re.p_.REFRESH:re.p_.ONSPOT}),this.slotsArray.forEach((e=>{e.slot&&(this.tryShowAdv(e.slot,!0),e.isBatched&&(e.isBatched=!1,a.push(e.slot)))})),this.usePrebid&&(yield this.prebidStartAuction(),yield null==(t=this.waitForAuction)?void 0:t.promise),googletag.pubads().refresh(a),this.usePrebid&&this.useMultipleAuction&&(this.waitForAuction=null)}))}loadScripts(){var e;if(Ra("loadScripts isLoaded=",this.isScriptsLoaded),this.isScriptsLoaded)return;this.clickDaemon=new ae.U({app_id:this.props.appId,tag:o.$H.STICKY});const t=(0,da.D)(ha.CX).then((()=>{throw new Error(`Scripts load timeout (${ha.CX}ms)`)})),a=(0,ua.cQ)({cdnUrl:this.context.cdnUrl,flags:this.context.abt.flags,fullUrl:(0,ka.e)().href,options:{isSlowCountry:this.context.isSlowCountry}}),r=(0,ha.xq)({metrikaCounter:null==(e=(0,oa.getDomainConfig)().analytics.counters)?void 0:e.metrika,parallel:(0,tt.RM)(this.context.abt.flags,wt.Z.prebidLoadAfterGpt)||!1,prebidScriptUrl:this.usePrebid?a:void 0});Promise.race([t,r]).then((e=>Ta(this,null,(function*(){var t;if(Ra("onScriptsLoaded: true"),e.prebid||(this.usePrebid=!1,null==(t=this.waitForAuction)||t.resolve()),e.gptError)throw e.gptError;this.isScriptsLoaded=!0,yield this.initGPT(),this.usePrebid&&(yield this.initPrebid()),yield this.displaySlotsBatched(!1)})))).catch((e=>{this.onScriptsLoadError(e)}))}onScriptsLoadError(e){Ra("onScriptsLoadError",e),(0,se.H)({block:ne.W.GOOGLE_ADS,prefix:Da,message:"script failed to load"}),this.onClose(),this.props.onAdvShowed()}initPrebid(){return Ta(this,null,(function*(){Ra("[prebid_sticky] initPrebid"),yield(0,ua.OH)(),yield(0,ua.BA)((e=>Ta(this,null,(function*(){return e.addAdUnits(this.prebidAdUnits)}))))}))}showAdv(e,t=!1){const{googletag:a}=window,{stickyPlacement:r,stickyBlockType:s}=e;if(!r||!s)return;Ra("showAdv",s);const n=this.slots[r][s];if(!n.retries){const{stickyPlacement:t,stickyBlockType:a}=e,r=t&&a&&this.slots[t][a].loaded;this.clickDaemon.demand({advBlockId:e.getAdUnitPath(),depth:0,provider:w.e.Google,reason:r?re.p_.REFRESH:re.p_.ONSPOT}),this.isFirstTryOpen&&(Ba("isFirstTryOpen",!0),this.isFirstTryOpen=!1)}e.clickDaemon=this.clickDaemon.copy(),e.clickDaemon.request(),t?n.isBatched=!0:a.pubads().refresh([e]),this.props.onAdvShowed()}tryShowAdv(e,t=!1){const{advHidden:a,canShowDesktopAdv:r,canShowPortraitAdv:s,canShowLandscapeAdv:n}=this.props,{stickyPlacement:i,stickyBlockType:d}=e;if(!i||!d)return;Ra("tryShowAdv",d);const{flags:c}=this.context.abt;switch(d){case o.kq.DESKTOP:r&&!a&&this.state.windowInnerHeight>=La&&!(0,k.Ab)(c)&&this.showAdv(e,t);break;case o.kq.DESKTOP_ADDITIONAL:r&&!a&&this.state.windowInnerHeight>=_a&&!(0,k.Ab)(c)&&this.showAdv(e,t);break;case o.kq.DESKTOP_BOTTOM_BIG:r&&!a&&(0,k.yh)(c)&&this.showAdv(e,t);break;case o.kq.DESKTOP_BOTTOM_SMALL:r&&!a&&(0,k.nT)(c)&&this.showAdv(e,t);break;case o.kq.PORTRAIT:s&&!a&&l.default.isPortrait&&this.showAdv(e,t);break;case o.kq.LANDSCAPE_SIDE:case o.kq.LANDSCAPE:case o.kq.LANDSCAPE_ADDITIONAL:n&&!a&&l.default.isLandscape&&this.showAdv(e,t);break;case o.kq.LANDSCAPE_TABLET_ADDITIONAL:this.isAdditionalTabletLandscapeBlockEnabled&&n&&!a&&l.default.isLandscape&&this.showAdv(e,t)}}hideAdvSlot(e){Ra("hideAdvSlot"),googletag.pubads().clear([e])}renderBanner(e,t,a,r,n){const{showSpinner:i}=this.state,l=Oa+t,d=e===k.JK.Desktop,c=e===k.JK.Landscape,h=d?k.P5.COLUMN:k.P5.ROW,u=(0,k.oi)(r,n),p=this.props.advHidden||t===o.kq.PORTRAIT&&!this.props.canShowPortraitAdv||c&&!this.props.canShowLandscapeAdv||d&&!this.props.canShowDesktopAdv||t===o.kq.DESKTOP_BOTTOM_BIG&&!(0,k.yh)(this.context.abt.flags)||t===o.kq.DESKTOP_BOTTOM_SMALL&&!(0,k.nT)(this.context.abt.flags);return s().createElement("div",{className:Ca({[e]:!0,[`${e}_${a}`]:!0,direction:h,border_round:!d,hidden:p,"with-disable-ad-button":!(0,k.Ab)(this.context.abt.flags),"middle-layer-light":this.props.isMiddleLayerShownInGame&&this.context.isMiddleLayerInGameExp&&!this.props.darkTheme}),id:l,key:l,style:u},!c&&t!==o.kq.DESKTOP_ADDITIONAL&&s().createElement(b.y,{className:Ca("spinner",{hidden:!i}),key:`${l}-spinner`,position:"center",size:28,spinning:!0,view:"default"}))}render(){var e;const{advHidden:t,canShowDesktopAdv:a,hideAdvCloseButton:r,desktopAdvWidth:n,isLandscapeSide:i,mobileAdvLandscapeHeight:l,mobileAdvSideLandscapeWidth:d,mobileAdvPortraitHeight:h,stickyBannerLocation:{desktop:u,mobileLandscape:p,mobilePortrait:m}}=this.props,{isHeaderEnabled:v,showLandscapeSpinner:g,windowInnerHeight:f}=this.state;if(u){const i={marginTop:v&&!r?-this.headerHeight:0,paddingTop:r?0:this.headerHeight,width:n},l={width:n,marginTop:v?-this.headerHeight:0},d=(0,tt.oh)(this.context.abt.flags),h=(0,tt.rl)(this.context.abt.flags);return s().createElement(s().Fragment,null,(d||h)&&this.renderBanner(k.JK.Desktop,d?o.kq.DESKTOP_BOTTOM_SMALL:o.kq.DESKTOP_BOTTOM_BIG,u,{height:d?k.Aw:k.zc,maxHeight:d?k.Aw:k.zc},{position:"absolute",bottom:0}),s().createElement("div",{className:Ca("desktop-wrapper",{hidden:t||!a||(0,k.Ab)(this.context.abt.flags),"with-disable-ad-button":Na,"middle-layer-light":this.props.isMiddleLayerShownInGame&&this.context.isMiddleLayerInGameExp&&!this.props.darkTheme}),style:i},!this.props.hideAdvCloseButton&&(null==(e=this.props.wrapperRef)?void 0:e.current)&&(0,c.createPortal)(s().createElement("div",{className:Ca("desktop-disable-ad-button-wrapper"),style:l},s().createElement(x,null)),this.props.wrapperRef.current),f>=La&&this.renderBanner(k.JK.Desktop,o.kq.DESKTOP,u,{maxWidth:n,width:n,minHeight:this.desktopAdvMinHeight}),f>=_a&&this.renderBanner(k.JK.Desktop,o.kq.DESKTOP_ADDITIONAL,u,{maxWidth:n,width:n})))}const y=(0,k.Z4)("landscape",this.isAdditionalTabletLandscapeBlockEnabled);return s().createElement(s().Fragment,null,m&&this.renderBanner(k.JK.Portrait,o.kq.PORTRAIT,m,{height:h,maxHeight:h}),p&&s().createElement("div",{className:Ca("landscape-wrapper",{[p]:!0,"with-disable-ad-button":Na}),style:this.landscapeStyles},s().createElement(b.y,{className:Ca("spinner",{hidden:!g}),key:"landscape-spinner",position:"center",size:28,spinning:!0,view:"default"}),i&&this.renderBanner(k.JK.Landscape,o.kq.LANDSCAPE_SIDE,p,{width:d}),!i&&this.renderBanner(k.JK.Landscape,o.kq.LANDSCAPE,p,{height:l,maxHeight:l,minWidth:y}),!i&&this.isAdditionalTabletLandscapeBlockEnabled&&this.renderBanner(k.JK.Landscape,o.kq.LANDSCAPE_TABLET_ADDITIONAL,p,{height:l,maxHeight:l,minWidth:y}),!i&&this.renderBanner(k.JK.Landscape,o.kq.LANDSCAPE_ADDITIONAL,p,{height:l,maxHeight:l,minWidth:y})))}}const $a=(0,h.$j)((function(e){var t;return{advGameCanBeLoaded:e.advGameCanBeLoaded,darkTheme:(0,R.Up)(e),isMiddleLayerShownInGame:null==(t=e.middleLayerInGameData)?void 0:t.show}}))(Ma);var Fa=a(96665);const Ha=new Set;function Wa(e){!function(e,t){(0,se.H)({block:ne.W.ADV_STICKY,message:`${e}: ${t.message}`},t)}("NativeStickyApi error",e)}function Ga(e){var t,a;return"function"==typeof(null==(a=null==(t=window.yandex)?void 0:t.ads)?void 0:a[e])}function Za(e){return function(...t){var a,r,s;return Ga(e)?null==(s=null==(r=null==(a=window.yandex)?void 0:a.ads)?void 0:r[e])?void 0:s.call(r,...t).catch((e=>{throw Wa(e),e})):function(e){const t=new Error(`Action "${e}" is not available`);return Wa(t),Promise.reject(t)}(e)}}const ja={isActionAvailable:Ga,hideStickyBanner:Za("hideStickyBanner"),refreshStickyBanner:Za("refreshStickyBanner"),showStickyBanner:e=>{const{blockId:t,mediation:a,position:r,orientation:s,dimension:n,revenueData:o}=e;return Za("showStickyBanner")(t,a,r,s,n,o)},stickyBannerIsShowing:Za("stickyBannerIsShowing")};var Ua=a(34711),qa=a(7991),za=Object.defineProperty,Va=Object.getOwnPropertySymbols,Ka=Object.prototype.hasOwnProperty,Ya=Object.prototype.propertyIsEnumerable,Xa=(e,t,a)=>t in e?za(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Ja=(e,t)=>{for(var a in t||(t={}))Ka.call(t,a)&&Xa(e,a,t[a]);if(Va)for(var a of Va(t))Ya.call(t,a)&&Xa(e,a,t[a]);return e},Qa=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const er=(0,g.M$)("NativeStickyAdvBanner",g.XG.Adv);class tr extends L.P{constructor(e,t){var a;super(e),this.isAdvHidden=s().createRef(),this.refreshTimeoutIds={landscape:0,portrait:0},this.isAdNeedToRefresh={portrait:!1,landscape:!1},this.advHeight={portrait:k.qi,landscape:k.qi},this.revenueData={app_id:this.props.appId},this.revenueDataAsString="",this.changeOrientationListener=()=>Qa(this,null,(function*(){const e=l.default.isPortrait?o.kq.PORTRAIT:o.kq.LANDSCAPE;if(er(`changeOrientationListener isAdNeedToRefresh${e}=${this.isAdNeedToRefresh[e]}`),this.isAdNeedToRefresh[e])return void this.updateAdv(e);if(!this.nativeStickyApi.isActionAvailable("stickyBannerIsShowing"))return;const t=yield this.nativeStickyApi.stickyBannerIsShowing();er(`changeOrientationListener isAdvShowing=${t} advHidden=${this.isAdvHidden.current}`),t||this.isAdvHidden.current||this.openNativeAdvBanner(e)})),this.blockIds=(0,k.AO)({advBlocks:t.playPageData.gameSettings.advBlocks,flags:t.abt.flags,residenceInfo:null==(a=t.playPageData.gameSettings.advInfo)?void 0:a.residence_info,withWorldWideAdv:t.withWorldWideAdv,locations:this.props.stickyBannerLocation,useHighPortraitBlockIds:this.props.useHighPortraitBlockIds}),this.nativeStickyApi=ja,this.library=(0,k.dF)(t.abt.flags);const r=(0,Ua.X)(),n=(0,qa.W5)(),i=Ja(Ja({},r?{clid:r}:{}),n?{gclid:n}:{});Object.assign(this.revenueData,i),this.revenueDataAsString=JSON.stringify(this.revenueData),this.advHeight={portrait:e.mobileAdvPortraitHeight,landscape:e.isLandscapeSide?e.mobileAdvSideLandscapeWidth:e.mobileAdvLandscapeHeight}}componentDidUpdate(e){e.advHidden&&!this.props.advHidden&&this.tryShowAdv(),!e.advHidden&&this.props.advHidden&&this.hideAdv(),this.isAdvHidden.current=this.props.advHidden}componentWillUnmount(){l.default.removeChangeListener(this.changeOrientationListener),window.clearTimeout(this.refreshTimeoutIds.landscape),window.clearTimeout(this.refreshTimeoutIds.portrait),this.onClose(!1)}tryShowAdv(){return Qa(this,null,(function*(){if(this.clickDaemon=new ae.U({tag:o.$H.STICKY,app_id:this.props.appId}),!this.nativeStickyApi.isActionAvailable("stickyBannerIsShowing"))return er("tryShowAdv","ads.stickyBannerIsShowing is not a function"),void this.onClose();const e=yield this.nativeStickyApi.stickyBannerIsShowing();if(this.props.onAdvShowed(),e)return void er("tryShowAdv","adv is showing");const{mobilePortrait:t,mobileLandscape:a}=this.props.stickyBannerLocation;this.clickDaemon.tryOpen({provider:w.e.Native,reason:re.p_.ONSPOT}),t&&l.default.isPortrait?(this.clickDaemon.demand({advBlockId:this.blockIds.portrait}),this.openNativeAdvBanner(o.kq.PORTRAIT)):a&&l.default.isLandscape&&(this.clickDaemon.demand({advBlockId:this.blockIds.landscape}),this.openNativeAdvBanner(o.kq.LANDSCAPE))}))}componentDidMount(){return Qa(this,null,(function*(){er(`blockIds = ${JSON.stringify(this.blockIds)}\n\n            revenueData=${this.revenueDataAsString}\n        `),yield this.tryShowAdv(),l.default.addChangeListener(this.changeOrientationListener)}))}hideAdv(){this.nativeStickyApi.isActionAvailable("hideStickyBanner")?(this.nativeStickyApi.hideStickyBanner(),this.props.onAdvShowed()):er("hideAdv","ads.hideStickyBanner is undefined")}onClose(e=!0){e&&this.clickDaemon.close(),this.hideAdv(),this.props.onClose()}openNativeAdvBanner(e){if(!this.nativeStickyApi.isActionAvailable("showStickyBanner"))return er("openNativeAdvBanner","ads.showStickyBanner is undefined"),void this.onClose();const{stickyBannerLocation:{mobilePortrait:t,mobileLandscape:a}}=this.props,r="portrait"===e?t:a;if(!r)return void er("openNativeAdvBanner","ad position is a null");const s=function(e,t){return"upper"===t?t="bottom":"left"===t&&(t="right"),`${e}-${t}`}(e,r);if(Ha.has(s))return er("openNativeAdvBanner","The previous show ended with an error"),void this.onClose();this.clickDaemon.request({advBlockId:this.blockIds[e],reason:re.p_.ONSPOT}),this.nativeStickyApi.showStickyBanner({blockId:this.blockIds[e],mediation:this.library,position:r,orientation:e,dimension:this.advHeight[e],revenueData:{revenueData:this.revenueDataAsString}}).then((()=>{Ha.delete(s),this.clickDaemon.response(),this.clickDaemon.show(),this.isAdNeedToRefresh[e]=!1,this.runUpdateAdvTimeout(e)})).catch((e=>{var t;Ha.add(s),this.clickDaemon.error(null!=(t=e.message)?t:String(e)),er(e),this.onClose()}))}runUpdateAdvTimeout(e){const t=l.default.isPortrait?"portrait":"landscape";this.refreshTimeoutIds[e]=window.setTimeout((()=>{e===t?this.updateAdv(e):this.isAdNeedToRefresh[e]=!0}),this.props.intervalBetweenRefreshAd)}updateAdv(e){this.nativeStickyApi.isActionAvailable("refreshStickyBanner")?(this.clickDaemon=new ae.U({tag:o.$H.STICKY,app_id:this.props.appId}),this.clickDaemon.tryOpen({provider:w.e.Native,reason:re.p_.REFRESH}),this.clickDaemon.demand({advBlockId:this.blockIds[e]}),this.clickDaemon.request(),this.nativeStickyApi.refreshStickyBanner().then((()=>{this.clickDaemon.response(),this.clickDaemon.show(),window.clearTimeout(this.refreshTimeoutIds[e]),this.isAdNeedToRefresh[e]=!1,this.runUpdateAdvTimeout(e)})).catch((e=>{var t;this.clickDaemon.error(null!=(t=e.message)?t:String(e)),er(e),this.onClose()}))):er("updateAdv","ads.refreshAdvert is undefined")}render(){return null}}var ar=a(78740),rr=a(95968),sr=a(40174),nr=a(38508),or=a(17061),ir=a(79049),lr=a(41811),dr=Object.defineProperty,cr=Object.defineProperties,hr=Object.getOwnPropertyDescriptors,ur=Object.getOwnPropertySymbols,pr=Object.prototype.hasOwnProperty,mr=Object.prototype.propertyIsEnumerable,vr=(e,t,a)=>t in e?dr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,gr=(e,t)=>{for(var a in t||(t={}))pr.call(t,a)&&vr(e,a,t[a]);if(ur)for(var a of ur(t))mr.call(t,a)&&vr(e,a,t[a]);return e};const fr=!0,yr=v().with("yandex-sticky-adv-banner"),br=(0,g.M$)("YandexStickyAdvBanner",g.XG.Adv);class wr extends L.P{constructor(){super(...arguments),this.gameBlockIds=(0,k.V0)({advBlocks:this.context.playPageData.gameSettings.advBlocks,appId:this.props.appId,flags:this.context.abt.flags,locations:this.props.stickyBannerLocation,useHighPortraitBlockIds:this.props.useHighPortraitBlockIds}),this.blockIds={desktop:"",desktop_additional:"",desktop_bottom_small:"R-I-394969-47",desktop_bottom_big:"R-I-394969-48",portrait:"",portrait_high:"",landscape:"",landscape_additional:""},this.containerIds={portrait:"yandex-adv-sticky-banner-portrait",portrait_high:"yandex-adv-sticky-banner-portrait",landscape:"yandex-adv-sticky-banner-landscape",landscape_additional:"yandex-adv-sticky-banner-landscape_additional",desktop:"yandex-adv-sticky-banner-desktop",desktop_additional:"yandex-adv-sticky-banner-desktop_additional",desktop_bottom_small:"yandex-adv-sticky-banner-desktop_bottom_small",desktop_bottom_big:"yandex-adv-sticky-banner-desktop_bottom_big"},this.useWhiteBackgroundOnDesktop=Boolean((0,tt.pJ)(this.context.abt.flags)&&this.props.stickyBannerLocation.desktop),this.additionalLandscapeBlockEnabled=(0,tt.Vr)(this.context.abt.flags)&&this.props.stickyBannerLocation.mobileLandscape!==E.Xn.RIGHT,this.timeToLoadAdv=(0,k.Qt)(this.context.abt.flags),this.clickDaemon=new ae.U({app_id:this.props.appId,tag:o.$H.STICKY}),this.loadedFlags={isDesktopAdvLoaded:!1,isLandscapeAdvLoaded:!1,isPortraitAdvLoaded:!1,isRefreshAdv:!1,isRefreshLandscapeAdv:!1},this.hasBeenShownAtLeastOnce=!1,this.scriptLoadPromiseWrapper=new ia.Z,this.headerHeight=(0,M.C)(),this.landscapeWrapperStyles=this.props.isLandscapeSide?{}:{left:-this.headerHeight,width:`calc(100% + ${this.headerHeight}px)`},this.landscapeBlockStyles=this.props.isLandscapeSide?{width:this.props.mobileAdvSideLandscapeWidth}:{height:this.props.mobileAdvLandscapeHeight,maxHeight:this.props.mobileAdvLandscapeHeight},this.state={isAdditionalLandscapeMediaAdType:!1,isHeaderEnabled:!(0,N.Ij)(),isLandscapeMediaAdType:!1,isPortraitMediaAdType:!1,showDesktopAdditional:!1,showLandscapeAdditional:!1,showSpinner:!0},this.initAdvStickyBlocks=()=>{const{stickyBannerLocation:{desktop:e,mobileLandscape:t,mobilePortrait:a}}=this.props;if(e)return this.desktopAdvOptions=this.getAdvOptions(o.kq.DESKTOP,this.blockIds[o.kq.DESKTOP]),this.desktopAdditionalAdvOptions=this.getAdvOptions(o.kq.DESKTOP_ADDITIONAL,this.blockIds[o.kq.DESKTOP_ADDITIONAL]),this.desktopBottomSmallAdvOptions=this.getAdvOptions(o.kq.DESKTOP_BOTTOM_SMALL,this.blockIds[o.kq.DESKTOP_BOTTOM_SMALL]),this.desktopBottomBigAdvOptions=this.getAdvOptions(o.kq.DESKTOP_BOTTOM_BIG,this.blockIds[o.kq.DESKTOP_BOTTOM_BIG]),void this.showDesktopAdv();a&&(this.portraitAdvOptions=this.getAdvOptions(o.kq.PORTRAIT,this.blockIds[o.kq.PORTRAIT]),this.showAdv(o.kq.PORTRAIT)),t&&(this.landscapeAdvOptions=this.getAdvOptions(o.kq.LANDSCAPE,this.blockIds[o.kq.LANDSCAPE]),this.additionalLandscapeBlockEnabled&&(this.landscapeAdditionalAdvOptions=this.getAdvOptions(o.kq.LANDSCAPE_ADDITIONAL,this.blockIds[o.kq.LANDSCAPE_ADDITIONAL])),this.showAdv(o.kq.LANDSCAPE)),l.default.addChangeListener(this.changeOrientationListener)},this.changeOrientationListener=()=>{l.default.isPortrait?this.showAdv(o.kq.PORTRAIT):l.default.isLandscape&&this.showAdv(o.kq.LANDSCAPE)},this.updateRefreshTimer=e=>{switch(e){case o.kq.DESKTOP_BOTTOM_BIG:case o.kq.DESKTOP_BOTTOM_SMALL:br("update refresh timer"),window.clearTimeout(this.refreshDesktopBottomTimeoutId),this.refreshDesktopBottomTimeoutId=window.setTimeout(this.handleDesktopRefreshTimeout,this.props.intervalBetweenRefreshAd);break;case o.kq.DESKTOP:br("update refresh timer"),window.clearTimeout(this.refreshTimeoutId),this.refreshTimeoutId=window.setTimeout(this.handleDesktopRefreshTimeout,this.props.intervalBetweenRefreshAd);break;case o.kq.PORTRAIT:br("update refresh timer"),window.clearTimeout(this.refreshTimeoutId),this.refreshTimeoutId=window.setTimeout((()=>{this.setState({showSpinner:!0},(()=>{this.refreshPortrait()}))}),this.props.intervalBetweenRefreshAd);break;case o.kq.LANDSCAPE:br("update refresh timer"),window.clearTimeout(this.refreshLandscapeTimeoutId),this.refreshLandscapeTimeoutId=window.setTimeout((()=>{this.refreshLandscape()}),this.props.intervalBetweenRefreshAd)}},this.handleDesktopRefreshTimeout=()=>{this.loadedFlags.isRefreshAdv=!0,this.loadedFlags.isDesktopAdvLoaded=!1,this.setShowState(o.kq.DESKTOP_ADDITIONAL,!1),this.destroyAdv(this.blockIds[o.kq.DESKTOP]),this.destroyAdv(this.blockIds[o.kq.DESKTOP_ADDITIONAL]),this.destroyAdv(this.blockIds[o.kq.DESKTOP_BOTTOM_SMALL]),this.destroyAdv(this.blockIds[o.kq.DESKTOP_BOTTOM_BIG]),br("refresh timer executed"),this.showDesktopAdv()},this.refreshLandscape=()=>{this.setShowState(o.kq.LANDSCAPE_ADDITIONAL,!1),this.destroyAdv(this.blockIds[o.kq.LANDSCAPE_ADDITIONAL]),this.destroyAdv(this.blockIds[o.kq.LANDSCAPE]),this.loadedFlags.isRefreshLandscapeAdv=!0,this.loadedFlags.isLandscapeAdvLoaded=!1,this.showAdv(o.kq.LANDSCAPE)},this.refreshPortrait=()=>{this.destroyAdv(this.blockIds[o.kq.PORTRAIT]),this.loadedFlags.isRefreshAdv=!0,this.loadedFlags.isPortraitAdvLoaded=!1,this.showAdv(o.kq.PORTRAIT)}}componentWillUnmount(){window.clearTimeout(this.refreshTimeoutId),window.clearTimeout(this.refreshDesktopBottomTimeoutId),window.clearTimeout(this.refreshLandscapeTimeoutId),window.clearTimeout(this.rejectTimeoutId),window.clearTimeout(this.additionalBlockTimeoutId),window.clearInterval(this.checkReadyIntervalId),l.default.removeChangeListener(this.changeOrientationListener)}handleAdvBlockIdError(e){(0,se.H)({block:ne.W.ADV_STICKY,message:`AdvStickyBanner error [yandex]: There is no blockId for ${e}`})}tryInitAdvBlockId(e,t){return!!t&&(this.blockIds[e]=t,!0)}componentDidMount(){const{desktop:e,mobileLandscape:t,mobilePortrait:a}=this.props.stickyBannerLocation;if(e){const e=this.tryInitAdvBlockId(o.kq.DESKTOP,this.gameBlockIds.desktop);this.tryInitAdvBlockId(o.kq.DESKTOP_ADDITIONAL,this.gameBlockIds.desktop_additional),this.tryInitAdvBlockId(o.kq.DESKTOP_BOTTOM_SMALL,this.gameBlockIds.desktop_bottom_small),this.tryInitAdvBlockId(o.kq.DESKTOP_BOTTOM_BIG,this.gameBlockIds.desktop_bottom_big),e||(this.onClose({error:"desktop block not initialized"}),this.handleAdvBlockIdError(o.kq.DESKTOP))}if(a){this.tryInitAdvBlockId(o.kq.PORTRAIT,this.gameBlockIds.portrait)||(this.onClose({onlyPortrait:!0,error:"portrait block not initialized"}),this.handleAdvBlockIdError(o.kq.PORTRAIT))}if(t){const e=this.tryInitAdvBlockId(o.kq.LANDSCAPE,this.gameBlockIds.landscape);this.tryInitAdvBlockId(o.kq.LANDSCAPE_ADDITIONAL,this.gameBlockIds.landscape_additional),e||(this.onClose({onlyLandscape:!0,error:"landscape block not initialized"}),this.handleAdvBlockIdError(o.kq.LANDSCAPE))}this.props.advGameCanBeLoaded&&this.loadAdvScript(),B.Z.onInternalMessage("header",(e=>{this.setState({isHeaderEnabled:"enabled"===e.data.action})}))}componentDidUpdate(e){const{advGameCanBeLoaded:t,stickyBannerLocation:{desktop:a,mobilePortrait:r,mobileLandscape:s}}=this.props;this.loadedScript?(e.advHidden&&!this.props.advHidden||!e.canShowPortraitAdv&&this.props.canShowPortraitAdv||!e.canShowLandscapeAdv&&this.props.canShowLandscapeAdv)&&(a&&this.showDesktopAdv(),r&&this.showAdv(o.kq.PORTRAIT),s&&this.showAdv(o.kq.LANDSCAPE)):!e.advGameCanBeLoaded&&t&&this.loadAdvScript()}isAdditionalBlock(e){return[o.kq.DESKTOP_ADDITIONAL,o.kq.LANDSCAPE_ADDITIONAL].includes(e)}onAdLoadFailed(e){br("onAdLoadFailed",e);if(this.isAdditionalBlock(e))this.setShowState(e,!1);else if(!1===(0,tt.RM)(this.context.abt.flags,wt.Z.advHideEmptySticky))this.updateRefreshTimer(e);else{const t=e===o.kq.PORTRAIT,a=e===o.kq.LANDSCAPE;this.onClose({onlyLandscape:a,onlyPortrait:t})}}destroyAdv(e){var t,a;br("Ya.Context.AdvManager.destroy",e),null==(a=null==(t=window.Ya)?void 0:t.Context)||a.AdvManager.destroy({blockId:e})}logAdvRequest(e,t){var a;this.clickDaemon=new ae.U({app_id:this.props.appId,tag:o.$H.STICKY});const r=this.hasBeenShownAtLeastOnce?re.p_.REFRESH:re.p_.ONSPOT;this.clickDaemon.tryOpen({provider:w.e.Yandex,reason:r});const s=this.clickDaemon.copy();t.clickDaemon=s,null==(a=t.setRequestClickDaemon)||a.call(t,s),s.demand({advBlockId:this.blockIds[e],reason:r,provider:w.e.Yandex,depth:0}),s.request()}onScriptError({onlyLandscape:e,onlyPortrait:t}){br("window.Ya.Context.AdvManager.render is not defined"),this.onClose({onlyPortrait:t,onlyLandscape:e})}showDesktopAdv(){(0,k.nT)(this.context.abt.flags)?this.showAdv(o.kq.DESKTOP_BOTTOM_SMALL):(0,k.yh)(this.context.abt.flags)?this.showAdv(o.kq.DESKTOP_BOTTOM_BIG):this.showAdv(o.kq.DESKTOP)}showAdv(e){return t=this,a=null,r=function*(){var t,a,r;if(this.props.advHidden)return void this.props.onAdvShowed();yield this.scriptLoadPromiseWrapper.promise;const{isDesktopAdvLoaded:s,isPortraitAdvLoaded:n,isLandscapeAdvLoaded:i}=this.loadedFlags,{canShowDesktopAdv:d,canShowPortraitAdv:c,canShowLandscapeAdv:h}=this.props;if(!(null==(r=null==(a=null==(t=window.Ya)?void 0:t.Context)?void 0:a.AdvManager)?void 0:r.render))return this.onScriptError({onlyLandscape:e===o.kq.LANDSCAPE,onlyPortrait:e===o.kq.PORTRAIT}),void this.props.onAdvShowed();let u;switch(e){case o.kq.DESKTOP:d&&!s&&(u=this.desktopAdvOptions);break;case o.kq.DESKTOP_ADDITIONAL:u=this.desktopAdditionalAdvOptions;break;case o.kq.DESKTOP_BOTTOM_SMALL:u=this.desktopBottomSmallAdvOptions;break;case o.kq.DESKTOP_BOTTOM_BIG:u=this.desktopBottomBigAdvOptions;break;case o.kq.PORTRAIT:c&&!n&&l.default.isPortrait&&(u=this.portraitAdvOptions);break;case o.kq.LANDSCAPE:h&&!i&&l.default.isLandscape&&(u=this.landscapeAdvOptions);break;case o.kq.LANDSCAPE_ADDITIONAL:u=this.landscapeAdditionalAdvOptions}u&&(this.logAdvRequest(e,u),br(`Ya.Context.AdvManager.render ${e}`,u),(0,sr.Q$)({abtFlags:this.context.abt.flags,adOptions:u,methodName:sr.xn.RENDER,onAdLoadFailed:()=>{var t;null==(t=null==u?void 0:u.clickDaemon)||t.responseEmpty(),this.onAdLoadFailed(e)}})),this.props.onAdvShowed()},new Promise(((e,s)=>{var n=e=>{try{i(r.next(e))}catch(e){s(e)}},o=e=>{try{i(r.throw(e))}catch(e){s(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);i((r=r.apply(t,a)).next())}));var t,a,r}loadAdvScript(){window.yaContextCb?this.onAdvScriptLoaded():(0,ir.x)({id:"yandexads-context",src:this.context.yaAdsScript}).then((()=>{this.onAdvScriptLoaded()})).catch((()=>{this.onAdvScriptError()}))}onAdvScriptLoaded(){var e,t,a;this.loadedScript=!0,this.scriptLoadPromiseWrapper.resolve(void 0),(null==(a=null==(t=null==(e=window.Ya)?void 0:e.Context)?void 0:t.AdvManager)?void 0:a.render)?this.initAdvStickyBlocks():(this.rejectTimeoutId=window.setTimeout((()=>{(0,se.H)({block:ne.W.ADV_STICKY,message:"AdvStickyBanner error [yandex]: script failed to load"}),window.clearInterval(this.checkReadyIntervalId),this.onClose({error:"script failed to load"})}),this.timeToLoadAdv),this.checkReadyIntervalId=window.setInterval((()=>{var e,t,a;(null==(a=null==(t=null==(e=window.Ya)?void 0:e.Context)?void 0:t.AdvManager)?void 0:a.render)&&(window.clearInterval(this.checkReadyIntervalId),window.clearTimeout(this.rejectTimeoutId),this.initAdvStickyBlocks())}),200))}setShowState(e,t){switch(e){case o.kq.DESKTOP_ADDITIONAL:this.setState({showDesktopAdditional:t});break;case o.kq.LANDSCAPE_ADDITIONAL:this.setState({showLandscapeAdditional:t})}}getAdvOptions(e,t){const a=e===o.kq.LANDSCAPE,r=e===o.kq.PORTRAIT,s=this.isAdditionalBlock(e),n=s?2:1,i=this,l=(0,or.V)(lr.Je,this.context.location);let d=this.clickDaemon;var c,h;return{async:!0,blockId:t,clickDaemon:this.clickDaemon,pageNumber:n,disableRefresh:!0,extParams:(c=gr({},l?{google_aid:l}:{}),h={utm_source_service:"games","distr-id":this.props.appId,"game-distrib-stat-id":(0,ee.Sn)()},cr(c,hr(h))),renderTo:`${this.containerIds[e]}`,statId:(0,ee.Sn)(),onError:function(o){br(`onError code=${o.code}, text=${o.text}, type=${o.type}`);const l=(0,nr.M)(o,{blockId:t,pageId:n});d.error(l),s?i.setShowState(e,!1):!1===(0,tt.RM)(i.context.abt.flags,wt.Z.advHideEmptySticky)?i.updateRefreshTimer(e):i.onClose({onlyPortrait:r,onlyLandscape:a,clickDaemon:d})},onRender:function(a){br(`onRender ${t}`,a),d.response(),i.handleAdvRender(e,a.productType,d)},setRequestClickDaemon:e=>{d=e}}}handleAdvRender(e,t,a){this.hasBeenShownAtLeastOnce=!0;const r=()=>{a&&a.show()};switch(e){case o.kq.DESKTOP_ADDITIONAL:r();break;case o.kq.DESKTOP_BOTTOM_BIG:case o.kq.DESKTOP_BOTTOM_SMALL:r(),this.setState({showSpinner:!1});break;case o.kq.DESKTOP:{this.loadedFlags.isDesktopAdvLoaded=!0,r();let e=!1;k.U_.includes(t)||this.state.showDesktopAdditional||(this.additionalBlockTimeoutId=window.setTimeout((()=>this.showAdv(o.kq.DESKTOP_ADDITIONAL)),k.fE),e=!0),this.setState({showDesktopAdditional:e,showSpinner:!1});break}case o.kq.PORTRAIT:this.setState({showSpinner:!1,isPortraitMediaAdType:"direct"!==t}),this.loadedFlags.isPortraitAdvLoaded=!0,r();break;case o.kq.LANDSCAPE:let e=!1;const s="direct"!==t;!this.additionalLandscapeBlockEnabled||this.state.showLandscapeAdditional||k.iv.includes(t)||(this.additionalBlockTimeoutId=window.setTimeout((()=>this.showAdv(o.kq.LANDSCAPE_ADDITIONAL)),k.fE),e=!0),this.setState({showSpinner:!1,showLandscapeAdditional:e,isLandscapeMediaAdType:s}),this.loadedFlags.isLandscapeAdvLoaded=!0,a&&a.show();break;case o.kq.LANDSCAPE_ADDITIONAL:"direct"!==t&&this.setState({isAdditionalLandscapeMediaAdType:!0}),a&&a.show()}this.updateRefreshTimer(e)}onAdvScriptError(){this.scriptLoadPromiseWrapper.reject(void 0),(0,se.H)({block:ne.W.ADV_STICKY,message:"AdvStickyBanner error [yandex]: script failed to load"}),this.onClose({error:"script failed to load"}),this.props.onAdvShowed()}onClose(e){const t=null==e?void 0:e.clickDaemon;t&&!t.hadEvent(re.zL.REQUEST)&&t.error("Sticky banner close without any requests."),this.props.onClose(e),t?t.close():this.clickDaemon.close()}renderBanner(e,t,a,r){const{canShowPortraitAdv:n,canShowLandscapeAdv:i}=this.props,{isPortraitMediaAdType:l,isLandscapeMediaAdType:d,isAdditionalLandscapeMediaAdType:c,showDesktopAdditional:h,showLandscapeAdditional:u,showSpinner:p}=this.state,m=(0,k.oi)(a,r),v=e===o.kq.LANDSCAPE||e===o.kq.LANDSCAPE_ADDITIONAL,g=e===o.kq.PORTRAIT,f=l&&g||d&&e===o.kq.LANDSCAPE||c&&e===o.kq.LANDSCAPE_ADDITIONAL,y=!h&&e===o.kq.DESKTOP_ADDITIONAL||!u&&e===o.kq.LANDSCAPE_ADDITIONAL||this.props.advHidden||g&&!n||v&&!i||e===o.kq.DESKTOP_BOTTOM_BIG&&!(0,k.yh)(this.context.abt.flags)||e===o.kq.DESKTOP_BOTTOM_SMALL&&!(0,k.nT)(this.context.abt.flags);return s().createElement("div",{className:yr({media:Boolean(f),[e]:t,border_round:Boolean(f),hidden:y,"white-bg":this.useWhiteBackgroundOnDesktop,"middle-layer-light":this.props.isMiddleLayerShownInGame&&this.context.isMiddleLayerInGameExp&&!this.props.darkTheme}),id:this.containerIds[e],key:e,style:m},!v&&s().createElement(b.y,{className:yr("spinner",{hidden:!p}),key:`${e}-spinner`,position:"center",size:28,spinning:!0,view:"default"}))}render(){var e;const{advHidden:t,canShowDesktopAdv:a,hideAdvCloseButton:r,desktopAdvWidth:n,isLandscapeSide:i,mobileAdvPortraitHeight:l,stickyBannerLocation:{desktop:d,mobileLandscape:h,mobilePortrait:u}}=this.props,{isHeaderEnabled:p}=this.state;if(d){const i={width:n,marginTop:p&&!r?-this.headerHeight:0,paddingTop:r?0:this.headerHeight},l={width:n,marginTop:p?-this.headerHeight:0},h=(0,tt.oh)(this.context.abt.flags),u=(0,tt.rl)(this.context.abt.flags);return s().createElement(s().Fragment,null,(h||u)&&this.renderBanner(h?o.kq.DESKTOP_BOTTOM_SMALL:o.kq.DESKTOP_BOTTOM_BIG,d,{height:h?k.Aw:k.zc,maxHeight:h?k.Aw:k.zc},{position:"absolute",bottom:0}),s().createElement("div",{className:yr("desktop-wrapper",{hidden:t||!a||(0,k.Ab)(this.context.abt.flags),"with-disable-ad-button":fr,"middle-layer-light":this.props.isMiddleLayerShownInGame&&this.context.isMiddleLayerInGameExp&&!this.props.darkTheme}),style:i},!r&&(null==(e=this.props.wrapperRef)?void 0:e.current)&&(0,c.createPortal)(s().createElement("div",{className:yr("desktop-disable-ad-button-wrapper"),style:l},s().createElement(x,null)),this.props.wrapperRef.current),this.renderBanner(o.kq.DESKTOP,d,{}),this.renderBanner(o.kq.DESKTOP_ADDITIONAL,d,{})))}return s().createElement(s().Fragment,null,u&&this.renderBanner(o.kq.PORTRAIT,u,{height:l,maxHeight:l}),h&&s().createElement("div",{className:yr("landscape-wrapper",{[h]:!0}),style:gr({},this.landscapeWrapperStyles)},this.renderBanner(o.kq.LANDSCAPE,h,this.landscapeBlockStyles),!i&&this.renderBanner(o.kq.LANDSCAPE_ADDITIONAL,h,this.landscapeBlockStyles)))}}const kr=(0,h.$j)((function(e){var t;return{advGameCanBeLoaded:e.advGameCanBeLoaded,darkTheme:(0,R.Up)(e),isMiddleLayerShownInGame:null==(t=e.middleLayerInGameData)?void 0:t.show}}))(wr);var Er=a(46211),Sr=a(21466),Ar=a(50042),Ir=a(61874),Pr=a(35090),Tr=a(39732),Cr=a(72538),Rr=a(8393),Dr=Object.defineProperty,Or=Object.defineProperties,Lr=Object.getOwnPropertyDescriptors,_r=Object.getOwnPropertySymbols,xr=Object.prototype.hasOwnProperty,Nr=Object.prototype.propertyIsEnumerable,Br=(e,t,a)=>t in e?Dr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Mr=(e,t)=>{for(var a in t||(t={}))xr.call(t,a)&&Br(e,a,t[a]);if(_r)for(var a of _r(t))Nr.call(t,a)&&Br(e,a,t[a]);return e},$r=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const Fr=!0,Hr=(0,g.M$)("AdvStickyBannerManager",g.XG.Adv),Wr="adv-sticky-banner";class Gr extends L.P{constructor(e,t){super(e,t),this.desktopAdvWidth=k.q5,this.desktopAdvHeight=k.zc,this.mobileAdvPortraitHeight=k.qi,this.mobileAdvLandscapeHeight=k.qi,this.mobileAdvSideLandscapeWidth=k.HZ,this.intervalBetweenRefreshAd=wa.yR,this.isAdvStickyBannerEnabled=!1,this.minScreenWidthForDesktopAdv=k.ie,this.isAdvStickyEnabledOnStartByExp=!1,this.isReplaceSimilarGamesOnStickyBannerByExp=!1,this.forcedToHideRelatedAdv=!0===(0,tt.RM)(this.context.abt.flags,wt.Z.advStickyBannerForcedHideAd),this.adClosed=!1,this.useHighPortraitBlockIds=!1,this.isLandscapeSide=!1,this.stickyBannerLocation={desktop:null,mobileLandscape:null,mobilePortrait:null},this.services=[],this.isGoogleExp=(0,na.O_)(this.context.abt.flags),this.isYandexExp=(0,na.MH)(this.context.abt.flags),this.onStickyBannerMessage=e=>$r(this,null,(function*(){const{action:t,data:a}=e.data;"blur"===(null==a?void 0:a.reason)&&this.setState({isPageBlured:"hide"===t})})),this.onExternalMessage=(e,t)=>$r(this,null,(function*(){const{action:a}=e.data;switch(a){case"adv-show-sticky-banner":{if(Hr(`onExternalMessage: action: "${a}"`),this.adClosed=!1,!this.isAdvStickyBannerEnabled)return void t({data:{stickyAdvIsShowing:!1,reason:o.$R.ADV_IS_NOT_CONNECTED}});if(!this.canShowAdv())return void t({data:{stickyAdvIsShowing:!1,reason:o.$R.UNKNOWN}});this.initAdv();const e=this.state.canShowAdvStickyBanner?{}:{reason:o.$R.UNKNOWN};t({data:Mr({stickyAdvIsShowing:this.state.canShowAdvStickyBanner},e)});break}case"adv-hide-sticky-banner":Hr(`onExternalMessage: action: "${a}"`),this.adClosed=!0,this.hideAdv(),t({data:{stickyAdvIsShowing:!1}});break;case"adv-status-sticky-banner":{if(!this.isAdvStickyBannerEnabled)return void t({data:{stickyAdvIsShowing:!1,reason:o.$R.ADV_IS_NOT_CONNECTED}});const e=this.state.canShowAdvStickyBanner&&!this.state.advStickyBannerHidden;Hr(`onExternalMessage: action: "${a}", stickyAdvIsShowing: ${e}`),t({data:{stickyAdvIsShowing:e}});break}}})),this.handleVisibilityChange=()=>{"hidden"===(null==document?void 0:document.visibilityState)?this.setHideState(!0):this.initAdv()},this.handleFullscreenChange=()=>{this.props.isFullscreenActive?this.hideAdv():this.initAdv()},this.handleDesktopResize=()=>{const e=()=>{(0,bt.bY)().innerWidth<=this.minScreenWidthForDesktopAdv&&!(0,k.Ab)(this.context.abt.flags)||this.isGoogleBottomStickyEnabled()&&!this.canShowGoogleBottomSticky()?this.hideAdv():this.initAdv()};if(!(0,tt.$p)(this.context.abt.flags))return void e();const t=(0,k.Ab)(this.context.abt.flags)?E.rq.BOTTOM:E.rq.RIGHT;this.stickyBannerLocation.desktop!==t?(this.stickyBannerLocation.desktop=t,this.hideAdv(e)):e()},this.handleMobileResize=()=>{Hr("handleMobileResize",window.innerWidth,window.innerHeight,k.rv),this.state.advStickyBannerHidden||!(0,k.JY)({forcedToHideRelatedAdv:this.forcedToHideRelatedAdv,minLandscapeHeight:this.minHeightToHideLandscapeAdv,minLandscapeWidth:this.isLandscapeSide?k.rv:void 0,minPortraitHeight:this.minHeightToHidePortraitAdv})?this.state.advStickyBannerHidden&&this.initAdv():this.hideAdv()},this.onSubscriptionsMessage=e=>$r(this,null,(function*(){const{action:t}=e.data;if("changed"===t){(yield(0,Ir.K)())&&this.state.canShowAdvStickyBanner&&this.handleCloseAdv()}})),this.hideAdv=(e=(()=>{}))=>{this.removeDefaultClasses(),Hr("hideAdv"),this.setState({advStickyBannerHidden:!0,isGameFrameCanBeResizedInDesktop:!1,isGameFrameCanBeResizedInLandscape:!1,isGameFrameCanBeResizedInPortrait:!1},e),Cr.Z.removeResizeBlock(Wr),this.removeBodyStickyResize()},this.handleCloseAdv=e=>{this.removeDefaultClasses(),B.Z.post({type:"sticky-manager",action:"on-hide"}),(null==e?void 0:e.onlyPortrait)&&(this.setState({isGameFrameCanBeResizedInPortrait:!1}),l.default.isPortrait&&(Cr.Z.removeResizeBlock(Wr),this.removeBodyStickyResize())),(null==e?void 0:e.onlyLandscape)&&(this.setState({isGameFrameCanBeResizedInLandscape:!1}),l.default.isLandscape&&(Cr.Z.removeResizeBlock(Wr),this.removeBodyStickyResize())),this.state.isGameFrameCanBeResizedInLandscape&&(null==e?void 0:e.onlyPortrait)||this.state.isGameFrameCanBeResizedInPortrait&&(null==e?void 0:e.onlyLandscape)||((0,c.flushSync)((()=>this.setState({canShowAdvStickyBanner:!1,isGameFrameCanBeResizedInDesktop:!1,isGameFrameCanBeResizedInPortrait:!1,isGameFrameCanBeResizedInLandscape:!1}))),Cr.Z.removeResizeBlock(Wr),this.removeBodyStickyResize(),this.adClosed=!0)};const{gameSettings:{features:a,settings:r},gameInfo:{appId:s},request:{flags:n}}=this.context.playPageData;this.headerSelector="minified"===e.headerType?".play-game-minified-header":".play-game-header",this.middleLayerInGameSelector=`.${Fa.P}`;const{adv:i,stickyAdvDisabledOnStart:d}=(0,k.Lf)(r);this.isAdvStickyEnabledOnStartByExp=(0,k.KV)({isDesktop:Fr,flags:n}),this.isReplaceSimilarGamesOnStickyBannerByExp=(0,k.t9)({isDesktop:Fr,flags:n}),this.isAdvStickyBannerEnabled=!this.isParentWindow&&(this.isAdvStickyEnabledOnStartByExp||this.isReplaceSimilarGamesOnStickyBannerByExp||(0,k.uk)({adv:i,appId:s,isDesktop:Fr,flags:n,orientation:null==a?void 0:a.orientation}));const h=(0,tt.$9)(n,wt.Z.advStickyMinDesktopWidth);if(h&&(this.minScreenWidthForDesktopAdv=h),!i)return void(this.isAdvStickyBannerEnabled=!1);const u=(0,k.jx)({adv:i,flags:n,appId:s,orientation:null==a?void 0:a.orientation});this.state={advStickyBannerHidden:!this.canShowAdv(),canShowAdvStickyBanner:!1,isGameFrameCanBeResizedInDesktop:Boolean(u.desktop),isGameFrameCanBeResizedInLandscape:Boolean(u.mobileLandscape),isGameFrameCanBeResizedInPortrait:Boolean(u.mobilePortrait),isPageBlured:this.context.isAdvSplashScreenEnabled};{const e=this.isAdvStickyEnabledOnStartByExp?E.rq.RIGHT:u.desktop,t=(0,k.Ab)(n)?E.rq.BOTTOM:e;this.stickyBannerLocation={desktop:t,mobilePortrait:null,mobileLandscape:null}}this.adClosed=d&&!this.isAdvStickyEnabledOnStartByExp&&!this.isReplaceSimilarGamesOnStickyBannerByExp}addBodyStickyReady(){document.body.classList.add(Rr.S.ready)}addBodyStickyIsGoogle(){document.body.classList.add(Rr.S.isGoogle)}addBodyStickyResize(){document.body.classList.add(Rr.S.resize)}removeBodyStickyResize(){document.body.classList.remove(Rr.S.resize)}isGoogleBottomStickyEnabled(){const{abt:e}=this.context;return this.isGoogle&&((0,k.nT)(e.flags)||(0,k.yh)(e.flags))}canShowGoogleBottomSticky(){var e,t;const{abt:a}=this.context;return(0,k.nT)(a.flags)&&this.isGoogleBottomStickySizesInWindowViewport(null==(e=this.context.allAdvBlocks.google.sticky)?void 0:e.desktop.bottomSmall)||(0,k.yh)(a.flags)&&this.isGoogleBottomStickySizesInWindowViewport(null==(t=this.context.allAdvBlocks.google.sticky)?void 0:t.desktop.bottomBig)}isGoogleBottomStickySizesInWindowViewport(e){if(!e)return!1;const{innerWidth:t,innerHeight:a}=(0,bt.bY)();return(0,Je.TG)({canReturnEmptyArray:!0,maxAdvHeight:a,maxAdvWidth:t,sizes:e.reduce(((e,t)=>[...t.sizes,...e]),[])}).length>0}canShowAdv(){var e,t;const{abt:a,playPageData:r}=this.context,{settings:s}=r.gameSettings,{adv:i}=(0,k.Lf)(s);if(!i)return!1;if((0,Pr._G)())return!0;if((0,tt.Ww)(a.flags,o.By.STICKY))return!1;if(Hr(`services = ${this.services}`),0===this.services.length)return!1;const{advDisabledByPartnersKit:l}=this.props,d=this.isDisabledBySubscription();if(Hr([`\nisAdDisabledBySubsciption = ${d}`,`\nadvDisabledByPartnersKit = ${l}`,`settings.adv = ${JSON.stringify(null==s?void 0:s.adv,null,2)}`].join("\n")),d||l)return this.removeDefaultClasses(),!1;const c=n.parse(this.props.location.search.slice(1)),h=(0,Tr.E)((0,or.V)("utm_medium")),u=(0,or.V)("clid")||(null==(e=window.YandexGamesSDK)?void 0:e.clid),p=(0,Sr.k4)(h,u);return Hr(`isAdDisabledByUtm = ${p},\n\n            params.clid = ${c.clid},\n\n            window.YandexGamesSDK.clid = ${null==(t=window.YandexGamesSDK)?void 0:t.clid},\n\n            clid = ${u},\n\n            utmMedium = ${h}\n        `),!p&&(this.props.isFullscreenActive?(Hr("Desktop on fullscreen mode"),(0,se.H)({block:ne.W.ADV_STICKY,message:"AdvStickyBanner error: Desktop window on fullscreen mode",level:"info"}),!1):(0,bt.bY)().innerWidth<=this.minScreenWidthForDesktopAdv&&!(0,k.Ab)(a.flags)?(Hr("Desktop width too narrow"),(0,se.H)({block:ne.W.ADV_STICKY,message:"AdvStickyBanner error: Desktop width too narrow",level:"info"}),!1):this.isGoogleBottomStickyEnabled()&&!this.canShowGoogleBottomSticky()?(Hr("Desktop width too narrow to replace similar games"),(0,se.H)({block:ne.W.ADV_STICKY,message:"AdvStickyBanner error: Desktop width too narrow to replace similar games",level:"info"}),!1):!this.adClosed)}componentDidMount(){var e,t,a,r,s;const{allAdvBlocks:n,playPageData:o,abt:{flags:i},isGamesApp:d,isGamesLiteApp:c,isIOSGamesLiteApp:h,withWorldWideAdv:u}=this.context,{gameSettings:{settings:p}}=o,{adv:m,stickyAdvDisabledOnStart:v}=(0,k.Lf)(p);if(!m||!this.isAdvStickyBannerEnabled)return void this.removeDefaultClasses();(null==(a=null==(t=null==(e=window.appData)?void 0:e.advDataStore)?void 0:t.stickyAdv)?void 0:a.refreshInterval)&&(this.intervalBetweenRefreshAd=window.appData.advDataStore.stickyAdv.refreshInterval);{const{innerWidth:e,innerHeight:t,zoom:a}=(0,bt.bY)();(0,k.Ne)("canShow",{height:t,minScreenWidthForDesktopAdv:this.minScreenWidthForDesktopAdv,width:e,zoom:a})}this.services=(0,k.g)({advBlocks:n,flags:i,isGamesApp:d,isGamesLiteApp:c,isIOSGamesLiteApp:h,withWorldWideAdv:u}),this.isPublift=this.services.includes(w.e.PubliftZone),this.isAdsense=this.services.includes(w.e.Adsense),this.isGoogle=this.services.includes(w.e.Google),this.isNative=this.services.includes(w.e.Native),this.isParentWindow=this.services.includes(w.e.ParentWindow),this.isYandex=this.services.includes(w.e.Yandex);this.isNative&&!(0,Ar.zg)(k.XK)||this.initParamsByViewport(),this.initExperimentParams(),this.validateAdvSize();const{desktop:g,mobilePortrait:f,mobileLandscape:y}=this.stickyBannerLocation;if(document.body.classList.add("sticky-inited"),g){if(this.addBodyStickyReady(),!(null==(s=null==(r=m.sticky)?void 0:r.desktop)?void 0:s.right)&&!this.isAdvStickyEnabledOnStartByExp&&!this.isReplaceSimilarGamesOnStickyBannerByExp)return;return(!v||this.isAdvStickyEnabledOnStartByExp||this.isReplaceSimilarGamesOnStickyBannerByExp)&&this.initAdv(),this.initMessaging(),window.addEventListener("resize",this.handleDesktopResize),void(c||document.addEventListener("visibilitychange",this.handleVisibilityChange))}(f||y)&&(this.isLandscapeSide=y===E.Xn.LEFT||y===E.Xn.RIGHT,v||this.initAdv(),!this.isNative&&(this.minHeightToHidePortraitAdv||this.minHeightToHideLandscapeAdv||this.mobileAdvSideLandscapeWidth)&&window.addEventListener("resize",this.handleMobileResize),l.default.addChangeListener((()=>{(this.minHeightToHidePortraitAdv||this.minHeightToHideLandscapeAdv||this.isNative)&&this.handleMobileResize(),this.isNative||this.state.advStickyBannerHidden||!this.state.canShowAdvStickyBanner||this.resizeMobileGameBlock()})),this.initMessaging(),c||document.addEventListener("visibilitychange",this.handleVisibilityChange)),this.addBodyStickyReady()}componentDidUpdate(e,t){e.isFullscreenActive!==this.props.isFullscreenActive&&this.handleFullscreenChange(),t.advStickyBannerHidden!==this.state.advStickyBannerHidden&&B.Z.post({type:"sticky-manager",action:this.state.advStickyBannerHidden?"on-hide":"on-show"}),e.advDisabledByPartnersKit&&!this.props.advDisabledByPartnersKit&&this.initAdv()}get isFullscreenEnabled(){return Boolean(this.props.isFullscreenEnabled||d.w.available||(null==document?void 0:document[rr.Z.fullscreenEnabled]))}addDesktopResize(){const e=(0,k.Ab)(this.context.abt.flags),t=e?0:-this.desktopAdvWidth,a=e?-this.desktopAdvHeight:0,r={width:t,height:a};Cr.Z.addResizeBlock(Wr,{game:r,[`.${ar.Ek}`]:{width:t-ar.UG,height:a},[this.headerSelector]:r,[this.middleLayerInGameSelector]:r}),this.addBodyStickyResize()}initContainerToDisplayAdv(){if(this.isNative)return;if(this.isParentWindow)return;const{desktop:e}=this.stickyBannerLocation;if(e)return this.addDesktopResize(),void this.removeDefaultClasses();this.resizeMobileGameBlock()}initMessaging(){B.Z.onAllMessages("adv-manager",this.onExternalMessage),B.Z.onInternalMessage("subscriptions",this.onSubscriptionsMessage,{withHistory:!0}),((0,tt.bF)(this.context.abt.flags)||this.context.isAdvSplashScreenEnabled)&&B.Z.onInternalMessage("sticky-banner",this.onStickyBannerMessage)}initParamsByViewport(){const{flags:e}=this.context.abt,{innerWidth:t,innerHeight:a}=(0,bt.bY)();return(0,tt.$p)(e)?(this.desktopAdvHeight=(0,tt.oh)(e)?k.Aw:k.zc,void(this.isGoogle&&this.addBodyStickyIsGoogle())):void(this.isGoogle?(this.desktopAdvHeight=0,this.desktopAdvWidth=k.q5,this.addBodyStickyIsGoogle()):(this.desktopAdvHeight=0,this.desktopAdvWidth=t*k.PV/100,this.isAdsense&&(this.desktopAdvWidth=Math.max(this.desktopAdvWidth,ft.K))))}initExperimentParams(){const{flags:e}=this.context.abt,t=(0,tt.$9)(e,wt.Z.advStickyBannerDesktopWidth),a=(0,tt.$9)(e,wt.Z.advStickyBannerPortraitHeight),r=(0,tt.$9)(e,wt.Z.advStickyBannerLandscapeHeight),s=(0,tt.$9)(e,wt.Z.advStickyBannerLandscapeWidth),n=(0,tt.$9)(e,wt.Z.advStickyBannerMinPortraitViewportHeight),o=(0,tt.$9)(e,wt.Z.advStickyBannerMinLandscapeViewportHeight);t&&!this.isReplaceSimilarGamesOnStickyBannerByExp&&(this.desktopAdvWidth=t),a&&(this.mobileAdvPortraitHeight=a),r&&(this.mobileAdvLandscapeHeight=r),n&&(this.minHeightToHidePortraitAdv=n),o&&(this.minHeightToHideLandscapeAdv=o),s&&(this.mobileAdvSideLandscapeWidth=s)}validateAdvSize(){if(this.isParentWindow)return this.desktopAdvWidth=0,this.desktopAdvHeight=0,this.mobileAdvPortraitHeight=0,void(this.mobileAdvLandscapeHeight=0);this.desktopAdvWidth=Math.floor(Math.min(Math.max(this.desktopAdvWidth,k.Ic),k.q5)),this.desktopAdvHeight=Math.floor(Math.min(Math.max(this.desktopAdvHeight,k.Aw),k.zc)),k.RH<this.mobileAdvPortraitHeight&&(this.mobileAdvPortraitHeight=k.qi),k.VT<this.mobileAdvLandscapeHeight&&(this.mobileAdvLandscapeHeight=k.qi)}resizeMobileGameBlock(){const{mobilePortrait:e,mobileLandscape:t}=this.stickyBannerLocation,{isGameFrameCanBeResizedInPortrait:a,isGameFrameCanBeResizedInLandscape:r}=this.state;if(!a&&l.default.isPortrait||!r&&l.default.isLandscape)return Cr.Z.removeResizeBlock(Wr),this.removeBodyStickyResize(),void this.removeDefaultClasses();const s=this.isLandscapeSide?this.mobileAdvSideLandscapeWidth:this.mobileAdvLandscapeHeight,n=l.default.isPortrait?this.mobileAdvPortraitHeight:s;if(this.isLandscapeSide&&l.default.isLandscape){const e=t===E.Xn.LEFT?-n-k.gG:-n-2*k.gG;return Cr.Z.addResizeBlock(Wr,{game:Mr({width:e},t===E.Xn.LEFT?{left:n+k.gG}:{})}),this.removeDefaultClasses(),void this.addBodyStickyResize()}if(e===E.Xn.UPPER&&l.default.isPortrait||t===E.Xn.UPPER&&l.default.isLandscape){const e={top:n+k.gG,height:-n-k.gG};Cr.Z.addResizeBlock(Wr,Mr({game:e},l.default.isLandscape&&{[this.headerSelector]:e})),this.removeDefaultClasses(),this.addBodyStickyResize()}if(e===E.Xn.BOTTOM&&l.default.isPortrait||t===E.Xn.BOTTOM&&l.default.isLandscape){const e={height:-n-2*k.gG};Cr.Z.addResizeBlock(Wr,{game:e,[this.headerSelector]:e}),this.removeDefaultClasses(),this.addBodyStickyResize()}}isDisabledBySubscription(){return!!Boolean(this.props.userData.login)&&this.props.isAdDisabledBySubscription}initAdv(){const e=this.canShowAdv();if(Hr("initAdv"),e&&!this.adClosed){const{desktop:e,mobileLandscape:t,mobilePortrait:a}=this.stickyBannerLocation;this.setState({advStickyBannerHidden:!1,canShowAdvStickyBanner:!0,isGameFrameCanBeResizedInDesktop:Boolean(e),isGameFrameCanBeResizedInPortrait:Boolean(a),isGameFrameCanBeResizedInLandscape:Boolean(t)},(()=>{this.initContainerToDisplayAdv()}))}}setHideState(e){this.setState({advStickyBannerHidden:e})}removeDefaultClasses(){var e;"function"==typeof(null==(e=Cr.Z)?void 0:e.removeDefaultClass)&&Cr.Z.removeDefaultClass(["sticky-desktop","sticky-mobile"])}renderBanner(){if(!this.isAdvStickyBannerEnabled)return null;if(!this.state.canShowAdvStickyBanner)return null;if(this.isParentWindow)return null;if(this.props.advDisabledByPartnersKit)return null;const{appId:e}=this.context.playPageData.gameInfo,{advStickyBannerHidden:t,isGameFrameCanBeResizedInDesktop:a,isGameFrameCanBeResizedInLandscape:r,isGameFrameCanBeResizedInPortrait:n,isPageBlured:o}=this.state,i={advHidden:o||t,appId:e,intervalBetweenRefreshAd:this.intervalBetweenRefreshAd,isPageBlured:o,isLandscapeSide:this.isLandscapeSide,mobileAdvLandscapeHeight:this.mobileAdvLandscapeHeight,mobileAdvPortraitHeight:this.mobileAdvPortraitHeight,mobileAdvSideLandscapeWidth:this.mobileAdvSideLandscapeWidth,stickyBannerLocation:this.stickyBannerLocation,useHighPortraitBlockIds:this.useHighPortraitBlockIds,onAdvShowed:this.removeDefaultClasses,onClose:this.handleCloseAdv};if(this.isNative)return s().createElement(tr,Mr({},i));const l={canShowDesktopAdv:a,canShowLandscapeAdv:r,canShowPortraitAdv:n,desktopAdvWidth:this.desktopAdvWidth,desktopAdvHeight:this.desktopAdvHeight,hideAdvCloseButton:this.props.hideAdvCloseButton,wrapperRef:this.props.wrapperRef};return this.isPublift?s().createElement(qe,Mr(Mr({},i),l)):this.isAdsense?s().createElement(ve,Mr(Mr({},i),l)):this.isGoogle?this.isGoogleExp?s().createElement(sa,Mr(Mr({},i),l)):s().createElement($a,((e,t)=>Or(e,Lr(t)))(Mr(Mr({},i),l),{isPageBlured:o})):this.isYandex?this.isYandexExp?s().createElement(sa,Mr(Mr({},i),l)):s().createElement(kr,Mr(Mr({},i),l)):null}render(){return s().createElement("div",{className:"sticky-banner-container"},this.renderBanner())}}const Zr=(0,i.E)((0,h.$j)((function(e){return{advDisabledByPartnersKit:e.advDisabledByPartnersKit,isAdDisabledBySubscription:(0,Er.Ak)(e),isFullscreenActive:e.ui.isFullscreenActive,isFullscreenEnabled:e.ui.isFullscreenEnabled,userData:e.userData}}))(Gr));var jr=a(53603),Ur=a(75217);const qr=s().memo((({hideAdvCloseButton:e,headerType:t,wrapperRef:a})=>{const n=(0,r.useContext)(L.Z),{isReady:o}=(0,jr.s)(),{abt:{flags:i}}=n;return(0,tt.V)(i)&&!o||(0,Ur.O)()?null:s().createElement(Zr,{headerType:t,hideAdvCloseButton:e,wrapperRef:a})}))},13547:(e,t,a)=>{a.d(t,{Z:()=>v});var r=a(87363),s=a(53726),n=a(43506),o=a(93298),i=Object.defineProperty,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,h=(e,t,a)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,u=(e,t)=>{for(var a in t||(t={}))d.call(t,a)&&h(e,a,t[a]);if(l)for(var a of l(t))c.call(t,a)&&h(e,a,t[a]);return e};const p=(0,o.M$)("Waterfall",o.XG.Adv,{background:"#1d9f16"}),m=(0,r.forwardRef)(((e,t)=>{var a=e,{onProviderLoaded:o,onWaterfallFailed:i,onWaterfallNext:h,onError:m=(({error:e,waterfallItem:t})=>{p(`Renderer ${null==t?void 0:t.provider} error:`,e)}),onRequest:v,onResponse:g,onShow:f,onSkip:y,children:b,providerTimeout:w,waterfallList:k,alwaysRender:E}=a,S=((e,t)=>{var a={};for(var r in e)d.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&l)for(var r of l(e))t.indexOf(r)<0&&c.call(e,r)&&(a[r]=e[r]);return a})(a,["onProviderLoaded","onWaterfallFailed","onWaterfallNext","onError","onRequest","onResponse","onShow","onSkip","children","providerTimeout","waterfallList","alwaysRender"]);const A=(0,r.useRef)(null),[I,P]=(0,r.useState)(null),T=(0,r.useRef)({onRequestRef:()=>{},onResponseRef:()=>{},onShowRef:()=>{},onErrorRef:()=>{},onFailedRef:()=>{},onSkipRef:()=>{},onWaterfallFailed:()=>{},onWaterfallNext:()=>{}}),[C,R]=(0,r.useState)(S);(0,r.useEffect)((()=>{(0,s.wU)(C,S)||R(S)}),[S,C]),(0,r.useEffect)((()=>{T.current.onWaterfallNext=h,T.current.onWaterfallFailed=i}),[h,i]);const D=(0,r.useCallback)((()=>{var e,t;const a=null!=I?I:null,r=I?k.indexOf(I)+1:0,s=k[r];if(void 0===s)return p.spoiler(k)("No items left:",s),void T.current.onWaterfallFailed(new Error("No waterfall items left"),C);P(s),p.spoiler(k)("Next:",s),null==(t=(e=T.current).onWaterfallNext)||t.call(e,s,a,C)}),[I,k,C]);(0,r.useMemo)((()=>{T.current.onFailedRef=D,T.current.onSkipRef=D}),[D]),(0,r.useEffect)((()=>{0!==k.length&&P(null)}),[k]),(0,r.useEffect)((()=>{0===k.length||I||D()}),[D,k,I]);const O=(0,r.useCallback)((e=>{p(`Provider ${null==I?void 0:I.provider} failed:`,e),I&&(null==m||m({error:e,waterfallItem:I,provider:null,slot:null},C)),D()}),[m,D,I,C]);(0,r.useImperativeHandle)(t,(()=>({rendererRef:A.current})));const L=(0,n.Z)(null==I?void 0:I.provider,O,w);(0,r.useMemo)((()=>{if(!I||!L)return;const e=e=>e?(t,a)=>{e(u({waterfallItem:I,provider:L},t),u(u({},C),a))}:()=>{};T.current.onRequestRef=e(v),T.current.onResponseRef=e(g),T.current.onShowRef=e(f),T.current.onErrorRef=e(m),T.current.onSkipRef=e(y)}),[m,v,g,f,y,L,C,I]);const{onRendererResponse:_,onRendererRequest:x,onRendererShow:N,onRendererError:B,onRendererFailed:M,onRendererSkip:$}=(0,r.useMemo)((()=>({onRendererResponse:(...e)=>{var t,a;return null==(a=(t=T.current).onResponseRef)?void 0:a.call(t,...e)},onRendererRequest:(...e)=>{var t,a;return null==(a=(t=T.current).onRequestRef)?void 0:a.call(t,...e)},onRendererShow:(...e)=>{var t,a;return null==(a=(t=T.current).onShowRef)?void 0:a.call(t,...e)},onRendererError:(...e)=>{var t,a;return null==(a=(t=T.current).onErrorRef)?void 0:a.call(t,...e)},onRendererFailed:(...e)=>{var t,a;return null==(a=(t=T.current).onFailedRef)?void 0:a.call(t,...e)},onRendererSkip:(...e)=>{var t,a;return null==(a=(t=T.current).onSkipRef)?void 0:a.call(t,...e)}})),[]);return(0,r.useEffect)((()=>{I&&L&&(null==o||o(I,L))}),[L,I,o]),I&&L||E?(0,r.cloneElement)(r.Children.only(b),{provider:L,ref:A,waterfallItem:I,onError:B,onFailed:M,onRequest:x,onResponse:_,onShow:N,onSkip:$}):null}));m.displayName="Waterfall";const v=(0,r.memo)(m)},43506:(e,t,a)=>{a.d(t,{Z:()=>Ze,l:()=>Ge});var r=a(87363);class s extends Error{constructor(e){super(`Provider ${e} load timeout.`)}}var n=a(88561),o=a(69110),i=a(35742),l=Object.defineProperty,d=Object.defineProperties,c=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,t,a)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,v=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));class g extends o.Z{constructor(){super(),this.providerName=i.oO.AdsenseBlock,this.providerLoaderName=i.Po.Adsense}get isAdBreakReady(){return n.Z.isAdBreakReady}init(){return v(this,null,(function*(){try{yield n.Z.load(),this._loadPromise.resolve(this)}catch(e){this._loadPromise.reject(e)}}))}createSlot(e){return v(this,arguments,(function*({blockId:e}){return{type:"preroll",name:"adsense_block_"+e}}))}preloadSlot({slot:e}){return new Promise(((t,a)=>{var r;adBreak((r=((e,t)=>{for(var a in t||(t={}))u.call(t,a)&&m(e,a,t[a]);if(h)for(var a of h(t))p.call(t,a)&&m(e,a,t[a]);return e})({},e),d(r,c({adBreakDone({breakStatus:r}){switch(r){case"notReady":a(new Error("Adsense provider not ready to display adv."));break;case"frequencyCapped":a(new Error("Adsense ad wasn't shown because the frequency cap."));break;case"invalid":a(new Error("Adsense placement was invalid and ignored for subsequent shows."));break;case"viewed":t({isEmpty:!1,slot:e});break;default:t({isEmpty:!0,slot:e})}}}))))}))}showSlot(e){return Promise.resolve()}destroySlot(e){return Promise.resolve()}}const f=new g;var y=a(29747),b=a(26108),w=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));class k extends o.Z{constructor(){super(),this.providerName=i.oO.AdsenseRewarded,this.providerLoaderName=i.Po.Adsense}init(){return w(this,null,(function*(){try{yield n.Z.load(),this._loadPromise.resolve(this)}catch(e){this._loadPromise.reject(e)}}))}createSlot(e){return w(this,arguments,(function*({blockId:e}){return{name:e,type:"reward"}}))}preloadSlot(e){return w(this,arguments,(function*({slot:e}){const{type:t,name:a}=e;e.preloadPromise=new b.Z,e.showPromise=new b.Z;const r=new b.Z;return adBreak({type:t,name:a,beforeReward:t=>{var a;e.show=t,null==(a=e.preloadPromise)||a.resolve({isEmpty:!1,slot:e})},beforeAd:()=>{var t;null==(t=e.showPromise)||t.resolve({slot:e,waitForView:r.promise})},adDismissed:()=>{r.resolve({isDismissed:!0})},adViewed:()=>{r.resolve({isDismissed:!1})},adBreakDone:t=>{var a,r,s,n;const{breakStatus:o}=t;switch(o){case"notReady":null==(a=e.preloadPromise)||a.reject(new Error("Adsense provider not ready to display adv."));break;case"frequencyCapped":null==(r=e.preloadPromise)||r.reject(new Error("Adsense ad wasn't shown because the frequency cap."));break;case"invalid":null==(s=e.preloadPromise)||s.reject(new Error("Adsense placement was invalid and ignored for subsequent shows."));break;default:null==(n=e.preloadPromise)||n.reject(new Error(`Adsense error with break status "${o}"`))}}}),e.preloadPromise.promise}))}showSlot(e){return w(this,null,(function*(){if(!e.showPromise||!e.show)throw new Error(`No preloadSlot called for slot ${e.name}.`);return e.show(),e.showPromise.promise}))}destroySlot(e){return w(this,null,(function*(){return Promise.resolve()}))}}const E=new k;var S=a(79098),A=a(73441),I=a(85623),P=a(79049);class T extends A.G{init(){return e=this,t=null,a=function*(){try{yield Promise.all([(0,I.S$)(),(0,P.x)({id:"anymind-script",src:"//anymind360.com/js/17039/ats.js"})]),this.loadPromise.resolve(this)}catch(e){this.loadPromise.reject(e)}},new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));var e,t,a}}const C=new T;class R extends A.G{init(){(0,I.S$)().then((()=>(0,I.Vg)())).then((()=>(0,I.bT)((e=>{return t=this,a=null,r=function*(){e.enableServices()},new Promise(((e,s)=>{var n=e=>{try{i(r.next(e))}catch(e){s(e)}},o=e=>{try{i(r.throw(e))}catch(e){s(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);i((r=r.apply(t,a)).next())}));var t,a,r})))).then((()=>this.loadPromise.resolve(this))).catch((e=>this.loadPromise.reject(e)))}}const D=new R;class O extends o.Z{constructor(){super(...arguments),this.providerName=i.oO.AnymindBlock,this.providerLoaderName=i.Po.Anymind,this.googleSlotEvents={slotRenderEnded:new WeakMap,impressionViewable:new WeakMap}}init(){return e=this,t=null,a=function*(){try{yield Promise.all([D.load(),C.load()]),yield(0,I.bT)((e=>{const t=e.pubads(),a=e=>{t.addEventListener(e,(t=>{const a=this.googleSlotEvents[e].get(t.slot);null==a||a(t)}))};a("slotRenderEnded"),a("impressionViewable")})),this._loadPromise.resolve(this)}catch(e){this._loadPromise.reject(e)}},new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));var e,t,a}createSlot({blockId:e,divId:t,size:a}){return(0,I.bT)((r=>{const s=r.pubads(),n=r.defineSlot(null!=e?e:S.Lx,a,t);if(!n)throw new Error("Failed to create googletag.Slot.");return n.addService(s),{googleSlot:n,showPromise:new b.Z}}))}preloadSlot({slot:e}){return new Promise((t=>{this.onGoogleEvent(e.googleSlot,"slotRenderEnded",(a=>{t({isEmpty:a.isEmpty,slot:e})})),this.onGoogleEvent(e.googleSlot,"impressionViewable",(t=>{e.showPromise.resolve()}));googletag.pubads().refresh([e.googleSlot])}))}showSlot(e){return e.showPromise.promise}destroySlot(e){return null==googletag||googletag.destroySlots([e.googleSlot]),Promise.resolve()}onGoogleEvent(e,t,a){this.googleSlotEvents[t].set(e,a)}}const L=new O;class _ extends o.Z{constructor(){super(...arguments),this.providerName=i.oO.AnymindManual,this.providerLoaderName=i.Po.Anymind,this.googleSlotEvents={slotRenderEnded:new WeakMap,impressionViewable:new WeakMap,gameManualInterstitialSlotReady:new WeakMap,gameManualInterstitialSlotClosed:new WeakMap},this.showFunction=new WeakMap}init(){return e=this,t=null,a=function*(){try{yield Promise.all([D.load(),C.load()]),yield(0,I.bT)((e=>{const t=e.pubads(),a=e=>{t.addEventListener(e,(t=>{const a=this.googleSlotEvents[e].get(t.slot);null==a||a(t)}))};a("slotRenderEnded"),a("impressionViewable"),a("gameManualInterstitialSlotReady"),a("gameManualInterstitialSlotClosed")})),this._loadPromise.resolve(this)}catch(e){this._loadPromise.reject(e)}},new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));var e,t,a}createSlot({blockId:e}){return(0,I.bT)((t=>{const a=t.pubads(),r=t.defineOutOfPageSlot(e,t.enums.OutOfPageFormat.GAME_MANUAL_INTERSTITIAL);if(!r)throw new Error("Failed to create googletag.Slot.");return r.addService(a),r}))}preloadSlot({slot:e}){return new Promise((t=>{this.onGoogleEvent(e,"slotRenderEnded",(a=>{a.isEmpty&&t({isEmpty:!0,slot:e})})),this.onGoogleEvent(e,"gameManualInterstitialSlotReady",(a=>{const{makeGameManualInterstitialVisible:r}=a;this.showFunction.set(e,r),t({isEmpty:!1,slot:e})}));googletag.pubads().refresh([e])}))}showSlot(e){const t=this.showFunction.get(e);if(!t)throw new Error("provider.showSlot() should be called after .preloadSlot()");const a=new Promise((t=>{this.onGoogleEvent(e,"gameManualInterstitialSlotClosed",(()=>{t()}))}));return t(),a}destroySlot(e){return(0,I.bT)((t=>{t.destroySlots([e])}))}onGoogleEvent(e,t,a){this.googleSlotEvents[t].set(e,a)}}const x=new _;class N extends o.Z{constructor(){super(...arguments),this.providerName=i.oO.AnymindManual,this.providerLoaderName=i.Po.Anymind,this.googleSlotEvents={slotRenderEnded:new WeakMap,impressionViewable:new WeakMap,rewardedSlotGranted:new WeakMap,rewardedSlotReady:new WeakMap,rewardedSlotClosed:new WeakMap},this.showFunction=new WeakMap}init(){return e=this,t=null,a=function*(){try{yield Promise.all([D.load(),C.load()]),yield(0,I.bT)((e=>{const t=e.pubads(),a=e=>{t.addEventListener(e,(t=>{const a=this.googleSlotEvents[e].get(t.slot);null==a||a(t)}))};a("slotRenderEnded"),a("impressionViewable"),a("rewardedSlotGranted"),a("rewardedSlotReady"),a("rewardedSlotClosed")})),this._loadPromise.resolve(this)}catch(e){this._loadPromise.reject(e)}},new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));var e,t,a}createSlot({blockId:e}){return(0,I.bT)((t=>{const a=t.pubads(),r=t.defineOutOfPageSlot(e,t.enums.OutOfPageFormat.REWARDED);if(!r)throw new Error("Failed to create googletag.Slot.");return r.addService(a),r}))}preloadSlot({slot:e}){return new Promise((t=>{this.onGoogleEvent(e,"slotRenderEnded",(a=>{a.isEmpty&&t({isEmpty:!0,slot:e})})),this.onGoogleEvent(e,"rewardedSlotReady",(a=>{const{makeRewardedVisible:r}=a;this.showFunction.set(e,r),t({isEmpty:!1,slot:e,rewardedPromise:new Promise((t=>{this.onGoogleEvent(e,"rewardedSlotGranted",(()=>{t()}))}))})}));googletag.pubads().refresh([e])}))}showSlot(e){const t=this.showFunction.get(e);if(!t)throw new Error("provider.showSlot() should be called after .preloadSlot()");const a=new Promise((t=>{this.onGoogleEvent(e,"rewardedSlotClosed",(()=>{t()}))}));return t(),a}destroySlot(e){return(0,I.bT)((t=>{t.destroySlots([e])}))}onGoogleEvent(e,t,a){this.googleSlotEvents[t].set(e,a)}}const B=new N;var M=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));class $ extends o.Z{constructor(){super(...arguments),this.providerName=i.oO.DummyBlock,this.providerLoaderName=i.Po.Promo}init(){return M(this,null,(function*(){this._loadPromise.resolve(this)}))}createSlot(e){return M(this,arguments,(function*({divId:e}){return{divId:e}}))}preloadSlot(e){return M(this,null,(function*(){return{isEmpty:!1,slot:{divId:e.slot.divId}}}))}showSlot(e){return M(this,arguments,(function*({divId:e}){const t=document.getElementById(e);t&&(t.innerHTML='<div class="adv-feed-grid-dummy"></div>')}))}destroySlot(e){return Promise.resolve()}}const F=new $;var H=a(26667),W=a(83950);class G extends o.Z{constructor(){super(),this.providerName=i.oO.GoogleAnchor,this.providerLoaderName=i.Po.Google,this.googleSlotEvents={slotRenderEnded:new WeakMap,impressionViewable:new WeakMap},this.toggleAnchor=(e,t,a)=>{const r=new CustomEvent("toggleAnchor",{detail:{slot:e,open:t,creativeHeight:a}});this.dispatchEvent(r)}}init(){return e=this,t=null,a=function*(){var e,t;try{yield D.load(),yield(0,I.bT)((e=>{const t=e.pubads(),a=e=>{t.addEventListener(e,(t=>{const a=this.googleSlotEvents[e].get(t.slot);null==a||a(t)}))};a("slotRenderEnded"),a("impressionViewable")})),this.toggleObserver=(0,W.V)("anchor-toggle-observer",{threshold:[.1,1]}),this.addEventListener("toggleAnchor",this.onToggleAnchor),null==(e=this.loadPromise)||e.resolve(this)}catch(e){null==(t=this.loadPromise)||t.reject(e)}},new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));var e,t,a}onToggleAnchor(e){const{slot:t,open:a,creativeHeight:r}=e.detail;H.Ah.spoiler(t)("Toggle Anchor",a,"height",r);let s=a?r+24:0;document.documentElement.style.setProperty("--anchor-bottom-height",`${s}px`)}createSlot({blockId:e}){return(0,I.bT)((()=>{const t=googletag.defineOutOfPageSlot(e,googletag.enums.OutOfPageFormat.BOTTOM_ANCHOR);if(!t)throw new Error("Failed to create googletag slot.");const a=googletag.pubads();return t.addService(a),t}))}preloadSlot({slot:e}){return new Promise((t=>{this.onGoogleEvent(e,"slotRenderEnded",(a=>{var r,s;if(a.isEmpty)return t({isEmpty:!0,slot:e});const n=document.getElementById(a.slot.getSlotElementId());if(!n)return;const o=null!=(s=null==(r=a.size)?void 0:r[1])?s:0,i="number"==typeof o?o:0;this.toggleObserver.unobserve(n);let l=0;a.slot.isAnchorOpened=!1,this.toggleObserver.observe(n,(e=>{!1===a.slot.isAnchorOpened&&l<=e.intersectionRatio?(this.toggleAnchor(a.slot,!0,i),a.slot.isAnchorOpened=!0):!0===a.slot.isAnchorOpened&&l>=e.intersectionRatio&&(this.toggleAnchor(a.slot,!1,i),a.slot.isAnchorOpened=!1),l=e.intersectionRatio})),t({isEmpty:!1,slot:e})}));googletag.pubads().refresh([e])}))}showSlot(e){return new Promise((t=>{this.onGoogleEvent(e,"impressionViewable",(e=>{t()}))}))}destroySlot(e){return Promise.resolve()}onGoogleEvent(e,t,a){this.googleSlotEvents[t].set(e,a)}}const Z=new G;var j=a(21698);class U extends o.Z{constructor(){super(),this.providerName=i.oO.GoogleBlock,this.providerLoaderName=i.Po.Google,this.isSlotRefreshable=!0,this.googleSlotEvents={slotRenderEnded:new WeakMap,impressionViewable:new WeakMap},this.existingSlots=new WeakMap}init(){return e=this,t=null,a=function*(){try{yield D.load(),yield(0,I.bT)((e=>{const t=e.pubads(),a=e=>{t.addEventListener(e,(t=>{const a=this.googleSlotEvents[e].get(t.slot);null==a||a(t)}))};a("slotRenderEnded"),a("impressionViewable")})),this._loadPromise.resolve(this)}catch(e){this._loadPromise.reject(e)}},new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));var e,t,a}createSlot({blockId:e,divId:t,size:a,testId:r,usePrevious:s=!1}){return(0,I.bT)((()=>{var n;const o=googletag.pubads();let i=null;if(s&&(i=null!=(n=o.getSlots().find((e=>e.getSlotElementId()===t)))?n:null,i)){const e=this.existingSlots.get(i);if(e)return e}if(i=googletag.defineSlot(null!=e?e:S.Lx,a,t),!i)throw new Error("Failed to create googletag slot.");i.addService(o);const l={googleSlot:i,showPromise:new b.Z,testId:r};return this.existingSlots.set(i,l),l}))}preloadSlot({slot:e}){return new Promise((t=>{this.onGoogleEvent(e.googleSlot,"slotRenderEnded",(a=>{e.testId&&(0,j.o)(e.googleSlot,e.testId),t({isEmpty:a.isEmpty,slot:e})})),this.onGoogleEvent(e.googleSlot,"impressionViewable",(t=>{e.showPromise.resolve()}));googletag.pubads().refresh([e.googleSlot])}))}showSlot(e){return e.showPromise.promise}destroySlot(e){return null==googletag||googletag.destroySlots([e.googleSlot]),Promise.resolve()}onGoogleEvent(e,t,a){this.googleSlotEvents[t].set(e,a)}}const q=new U;var z=a(80346),V=a(99102),K=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));let Y;const X=()=>K(void 0,null,(function*(){if(Y)return yield Y;yield K(void 0,null,(function*(){window.fusetag=window.fusetag||{que:[]};const{fusetag:e}=window,t=yield(0,I.N5)();e.que.push((function(){e.pageInit({pageTargets:Object.entries(t).map((([e,t])=>({key:e,value:t})))})}))}));const e=(0,P.x)({id:"fuse-script",loadTest:()=>Boolean(window.fusetag.initialised),src:"https://cdn.fuseplatform.net/publift/tags/2/3840/fuse.js"});return Y=e.then((()=>(0,z.b)())).then((()=>K(void 0,null,(function*(){window.googletag=window.googletag||{cmd:[]},googletag.cmd.push((function(){const e=googletag.pubads();return(0,V.c)(e)}))})))).then((()=>e)),yield Y})),J=e=>K(void 0,null,(function*(){return new Promise(((t,a)=>{window.fusetag=window.fusetag||{que:[]};const r=window.fusetag;r.que||(r.que=[]),r.que.push((()=>K(void 0,null,(function*(){try{t(yield e(r))}catch(e){a(e)}}))))}))}));class Q extends A.G{init(){X().then((()=>this.loadPromise.resolve(this))).catch((e=>this.loadPromise.reject(e)))}}const ee=new Q;var te=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));class ae extends o.Z{constructor(){super(),this.providerName=i.oO.PubliftRewarded,this.providerLoaderName=i.Po.Publift,this.supportsRetries=!1,this.googleSlotEvents={slotRenderEnded:new WeakMap,impressionViewable:new WeakMap}}init(){return te(this,null,(function*(){try{yield ee.load(),yield(0,I.bT)((e=>{const t=e.pubads(),a=e=>{t.addEventListener(e,(t=>{const a=this.googleSlotEvents[e].get(t.slot);null==a||a(t)}))};a("slotRenderEnded"),a("impressionViewable")})),this._loadPromise.resolve(this)}catch(e){this._loadPromise.reject(e)}}))}createSlot(e){return te(this,arguments,(function*({blockId:e}){const t=yield(0,I.bT)((t=>{var a;const r=null==(a=t.defineOutOfPageSlot(e,t.enums.OutOfPageFormat.REWARDED))?void 0:a.addService(t.pubads());return r?(t.enableServices(),r):null}));if(!t)throw new Error("Cannot create slot");return Object.assign(t,{blockId:e})}))}preloadSlot(e){return te(this,arguments,(function*({slot:e}){const t=e;t.preloadPromise=new b.Z,t.rewardedPromise=new b.Z,t.closePromise=new b.Z;let a=!1;return yield(0,I.bT)((e=>{this.onGoogleEvent(t,"slotRenderEnded",(e=>{e.isEmpty&&t.preloadPromise.resolve({isEmpty:!0,slot:t})})),e.pubads().addEventListener("rewardedSlotReady",(e=>{t.show=e.makeRewardedVisible,t.preloadPromise.resolve({isEmpty:!1,slot:t})})),e.pubads().addEventListener("rewardedSlotClosed",(()=>{e.destroySlots([t]),t.closePromise.resolve({isRewarded:a})})),e.pubads().addEventListener("rewardedSlotGranted",(()=>{a=!0,t.rewardedPromise.resolve({isRewarded:a})}))})),googletag.display(t),googletag.pubads().refresh([t]),{slot:t,isEmpty:!1}}))}showSlot(e){const{rewardedPromise:t,closePromise:a}=e;if(!t||!a||!e.show)throw new Error(`No preloadSlot called for slot ${e.blockId}.`);return e.show(),Promise.resolve({rewardedPromise:t.promise,closePromise:a.promise})}destroySlot(e){return Promise.resolve()}onGoogleEvent(e,t,a){this.googleSlotEvents[t].set(e,a)}}const re=new ae;var se=a(93298),ne=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const oe=(0,se.M$)("PubliftZoneProvider");class ie extends o.Z{constructor(){super(),this.providerName=i.oO.PubliftZone,this.providerLoaderName=i.Po.Publift,this.supportsRetries=!1,this.googleSlotEvents={slotRenderEnded:new WeakMap,impressionViewable:new WeakMap}}init(){return ne(this,null,(function*(){try{yield ee.load(),yield(0,I.bT)((e=>{const t=e.pubads(),a=e=>{t.addEventListener(e,(t=>{const a=this.googleSlotEvents[e].get(t.slot);null==a||a(t)}))};a("slotRenderEnded"),a("impressionViewable")})),this._loadPromise.resolve(this)}catch(e){this._loadPromise.reject(e)}}))}createSlot(e){return ne(this,arguments,(function*({blockId:e,divId:t,zoneId:a}){oe("[FUSE] creatingSlot",{blockId:e,divId:t,zoneId:a});const r=yield J((()=>fusetag.registerZone(t)));yield J((()=>fusetag.activateZone(t)));const s=yield(0,I.bT)((()=>ne(this,null,(function*(){var e;return null!=(e=googletag.pubads().getSlots().find((e=>e.getSlotElementId()===r)))?e:null}))));if(!r||!s)throw oe("[FUSE] No slot found for",{zoneId:a,zoneDivId:r,blockId:e,slot:null==s?void 0:s.getSlotElementId(),slots:googletag.pubads().getSlots().map((e=>e.getSlotElementId())).join(",")}),new Error("Cannot create slot");return oe("[FUSE] slotCreated",{slot:null==s?void 0:s.getSlotElementId(),slots:googletag.pubads().getSlots().map((e=>e.getSlotElementId())).join(",")}),Object.assign(s,{blockId:e,zoneDivId:r,zoneId:a,divId:t})}))}preloadSlot({slot:e}){return new Promise((t=>{this.onGoogleEvent(e,"slotRenderEnded",(a=>{t({isEmpty:a.isEmpty,slot:e})}))}))}showSlot(e){return new Promise((t=>{this.onGoogleEvent(e,"impressionViewable",(()=>{t()}))}))}destroySlot(e){return ne(this,null,(function*(){oe("[FUSE] destroying slot",{divId:e.divId}),yield J((()=>fusetag.destroyZone(e.divId)))}))}onGoogleEvent(e,t,a){this.googleSlotEvents[t].set(e,a)}}const le=new ie;const de={current:0};class ce extends A.G{init(){return e=this,t=null,a=function*(){try{yield(0,P.x)({id:"yandexads-context",src:window.appData.yaAdsScript}),this.loadPromise.resolve(this)}catch(e){this.loadPromise.reject(e)}},new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));var e,t,a}}const he=new ce;var ue=a(40174),pe=a(58432),me=a(17061),ve=a(41811),ge=Object.defineProperty,fe=Object.defineProperties,ye=Object.getOwnPropertyDescriptors,be=Object.getOwnPropertySymbols,we=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable,Ee=(e,t,a)=>t in e?ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Se=(e,t)=>{for(var a in t||(t={}))we.call(t,a)&&Ee(e,a,t[a]);if(be)for(var a of be(t))ke.call(t,a)&&Ee(e,a,t[a]);return e},Ae=(e,t)=>fe(e,ye(t)),Ie=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));class Pe extends o.Z{constructor(){super(...arguments),this.providerName=i.oO.YandexBlock,this.providerLoaderName=i.Po.Yandex}init(){return Ie(this,null,(function*(){try{yield he.load(),this._loadPromise.resolve(this)}catch(e){this._loadPromise.reject(e)}}))}createSlot(e){return Ie(this,arguments,(function*({blockId:e,darkTheme:t,disableRefresh:a=!1,divId:r,location:s,withPageNumber:n=!0}){const o=(0,me.V)(ve.Je,s);return{async:!0,blockId:e,darkTheme:t,disableRefresh:a,pageNumber:n?de.current++:void 0,extParams:Ae(Se({},o?{google_aid:o}:{}),{utm_source_service:"games","game-distrib-stat-id":(0,pe.Sn)()}),renderTo:r,statId:(0,pe.Sn)()}}))}hasPlaceholder(){return!0}preloadSlot(e){return Ie(this,arguments,(function*({flags:e,slot:t,onRenderCallback:a}){return new Promise(((r,s)=>{(0,ue.Q$)({abtFlags:e,adOptions:Ae(Se({},t),{onRender:e=>{const{productType:s}=e;null==a||a({hasPlaceholder:H.jY.includes(e.productType||"")&&!0}),r({isEmpty:!1,slot:t,productType:s})},onError:e=>{s(new Error("Unexpected ad slot error: "+e.text))}}),methodName:ue.xn.RENDER,onAdLoadFailed:e=>{e.code!==ue.uy.TIMEOUT?r({isEmpty:!0,slot:t}):s(e)}})}))}))}showSlot(e){return Ie(this,null,(function*(){}))}destroySlot(e){var t,a;return null==(a=null==(t=window.Ya)?void 0:t.Context)||a.AdvManager.destroy({blockId:e.blockId,renderTo:e.renderTo}),Promise.resolve()}}const Te=new Pe;var Ce=a(74878),Re=Object.defineProperty,De=Object.defineProperties,Oe=Object.getOwnPropertyDescriptors,Le=Object.getOwnPropertySymbols,_e=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable,Ne=(e,t,a)=>t in e?Re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Be=(e,t)=>{for(var a in t||(t={}))_e.call(t,a)&&Ne(e,a,t[a]);if(Le)for(var a of Le(t))xe.call(t,a)&&Ne(e,a,t[a]);return e},Me=(e,t)=>De(e,Oe(t)),$e=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));class Fe extends o.Z{constructor(){super(...arguments),this.providerName=i.oO.YandexCombined,this.providerLoaderName=i.Po.Yandex}init(){return $e(this,null,(function*(){try{yield he.load(),this._loadPromise.resolve(this)}catch(e){this._loadPromise.reject(e)}}))}createSlot(e){return $e(this,arguments,(function*({blockId:e,darkTheme:t,disableRefresh:a=!1,divId:r,location:s,withPageNumber:n=!0}){const o=(0,me.V)(ve.Je,s);return{async:!0,blockId:e+"-"+(0,Ce.aC)(),darkTheme:t,disableRefresh:a,pageNumber:n?de.current++:void 0,extParams:Me(Be({},o?{google_aid:o}:{}),{utm_source_service:"games","game-distrib-stat-id":(0,pe.Sn)()}),renderTo:r,statId:(0,pe.Sn)()}}))}preloadSlot(e){return $e(this,arguments,(function*({flags:e,slot:t}){return new Promise(((a,r)=>{(0,ue.Q$)({abtFlags:e,adOptions:Me(Be({},t),{onRender:e=>{const{productType:r}=e;a({isEmpty:!1,slot:t,productType:r})},onError:e=>{r(new Error("Unexpected ad slot error: "+e.text))}}),methodName:ue.xn.RENDER,onAdLoadFailed:()=>{a({isEmpty:!0,slot:t})}})}))}))}showSlot(e){return $e(this,null,(function*(){}))}destroySlot(e){return Promise.resolve()}}const He=new Fe,We={[i.oO.AdsenseBlock]:f,[i.oO.AdsenseResponsive]:y.Z,[i.oO.AdsenseRewarded]:E,[i.oO.AnymindBlock]:L,[i.oO.AnymindManual]:x,[i.oO.AnymindRewarded]:B,[i.oO.GoogleAnchor]:Z,[i.oO.GoogleBlock]:q,[i.oO.YandexBlock]:Te,[i.oO.YandexCombined]:He,[i.oO.DummyBlock]:F,[i.oO.PubliftZone]:le,[i.oO.PubliftRewarded]:re};const Ge=e=>{return t=void 0,a=null,r=function*(){return We[e].load()},new Promise(((e,s)=>{var n=e=>{try{i(r.next(e))}catch(e){s(e)}},o=e=>{try{i(r.throw(e))}catch(e){s(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);i((r=r.apply(t,a)).next())}));var t,a,r},Ze=(e,t,a)=>{const[n,o]=(0,r.useState)(null),i=(0,r.useMemo)((()=>e?(null==n?void 0:n.providerName)===e?n:(e=>{const t=We[e];return(null==t?void 0:t.loaded)?t:null})(e):null),[e,n]);return(0,r.useEffect)((()=>{let r,n=!1;return!i&&e&&(a&&(r=window.setTimeout((()=>{n=!0,t(new s(e))}),a)),Ge(e).then((e=>{n||o(e)})).catch((e=>{n||t(e)}))),()=>{n=!0,window.clearTimeout(r)}}),[e,i,t,a]),i}},62011:(e,t,a)=>{a.d(t,{Z:()=>p});var r=a(87363),s=a.n(r),n=Object.defineProperty,o=Object.defineProperties,i=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,h=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,u=(e,t)=>{for(var a in t||(t={}))d.call(t,a)&&h(e,a,t[a]);if(l)for(var a of l(t))c.call(t,a)&&h(e,a,t[a]);return e};const p=function(e,t,a){return(0,r.forwardRef)(((n,l)=>{var d;const c=(0,r.useContext)(t),h={};for(const e in a)h[e]=null==(d=a[e])?void 0:d.call(a,c);return(0,r.useMemo)((()=>{return s().createElement(e,(t=u(u({},n),h),o(t,i({ref:l}))));var t}),[n,...Object.values(h)])}))}},21918:(e,t,a)=>{a.d(t,{Z:()=>f});var r=a(87363),s=a.n(r),n=a(26667);const o=(0,r.forwardRef)((({},e)=>{const[t,a]=(0,r.useState)(!1);return(0,r.useImperativeHandle)(e,(()=>({toggleTempRendererState:e=>a(e)})),[]),"Temp state: "+(t?"On":"Off")}));var i=a(13547);const l=()=>{const e=(0,r.useRef)(null);(0,r.useEffect)((()=>{(0,n._y)("IngameAdv | Created")}),[]);const t=(0,r.useCallback)(((e,t)=>{(0,n._y)("IngameAdv | WaterfallFailed",e,t)}),[]);return s().createElement(i.Z,{alwaysRender:!0,ref:e,waterfallList:[],onWaterfallFailed:t},s().createElement(o,null))};var d=a(57745),c=a(90543),h=Object.defineProperty,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,v=(e,t,a)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const g=(0,r.createContext)({dispatch:()=>{},state:{}});const f=(y=()=>{const e=(0,d.HX)().ingameAdv;return(0,r.useEffect)((()=>{(0,n._y)("IngameAdv | Manager init",e)}),[e]),s().createElement(l,null)},e=>{const[t,a]=(0,r.useReducer)(c.Z,{});return s().createElement(g.Provider,{value:{state:t,dispatch:a}},s().createElement(y,((e,t)=>{for(var a in t||(t={}))p.call(t,a)&&v(e,a,t[a]);if(u)for(var a of u(t))m.call(t,a)&&v(e,a,t[a]);return e})({},e)))});var y},88561:(e,t,a)=>{a.d(t,{Z:()=>g});var r=a(46210),s=a(26667),n=a(14408),o=a(73441),i=a(57745),l=a(95025),d=a(5e4),c=a(37705),h=a(79049),u=a(13377),p=a(49659);const m="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js";class v extends o.G{constructor(){super(...arguments),this.isAdBreakReady=!1}init(){return e=this,t=null,a=function*(){var e,t,a,o;window.adsbygoogle=window.adsbygoogle||[],window.adBreak=window.adConfig=function(e){var t;null==(t=window.adsbygoogle)||t.push(e)};try{null==(e=window.clickdaemonLog)||e.call(window,"adv_debug",{scope:"AdsenseProviderLoader",event:"load",step:"1"});const o=(0,r.hF)((0,p.e)().href);yield(0,h.x)({async:!0,src:o?(0,r.zR)(o):m,id:"adsense-script",crossOrigin:"anonymous",onScriptCreated:e=>{var t,a;const{dataset:r}=e,s=function(){var e,t,a,r,s,n,o;const c=null==(a=null==(t=null==(e=window.appData)?void 0:e.advDataStore)?void 0:t.feedAdv)?void 0:a.common.waterfall,h=null==c?void 0:c.find(i.UJ);if(h)return h.clientId;const u=(0,l.gK)({flags:window.appData.abt.flags,ingameAdvData:null==(r=window.appData.advDataStore)?void 0:r.ingameAdv,withWorldWideAdv:window.appData.withWorldWideAdv}),p=[...u.interstitial,...u.rewarded].find((e=>e.provider===d.e.AdsenseResponsive));return p&&"clientId"in p?p.clientId:null==(o=null==(n=null==(s=window.appData)?void 0:s.allAdvBlocks)?void 0:n.adsense)?void 0:o.interstitial.clientId}();s||(0,c.H)({block:u.W.GOOGLE_ADS,message:"No clientId passed in Adsense script."}),r.adClient=s,r.adFormat="auto",r.adFrequencyHint="30s";const o=(0,n.aO)(null==(a=null==(t=window.appData)?void 0:t.abt)?void 0:a.flags);o&&(r.adChannel=o)}}),null==(t=window.clickdaemonLog)||t.call(window,"adv_debug",{scope:"AdsenseProviderLoader",event:"load",step:"2"}),(0,s._y)("Adsense script loaded."),adConfig({preloadAdBreaks:"on",sound:"off",onReady:()=>{var e;null==(e=window.clickdaemonLog)||e.call(window,"adv_debug",{scope:"AdsenseProviderLoader",event:"load",step:"4"})}}),(0,s._y)("Adsense adBreak ready."),this.isAdBreakReady=!0,this.loadPromise.resolve(this),null==(a=window.clickdaemonLog)||a.call(window,"adv_debug",{scope:"AdsenseProviderLoader",event:"load",step:"3"})}catch(e){null==(o=window.clickdaemonLog)||o.call(window,"adv_debug",{scope:"AdsenseProviderLoader",event:"load",step:"error"}),this.loadPromise.reject(e),function(){const e={};fetch(m).then((t=>{e.headers={};for(let[a,r]of t.headers.entries())"expires"!==a&&(e.headers[a]=r.substring(0,1e3));return e.ok=t.ok,e.redirected=t.redirected,e.status=t.status,e.statusText=t.statusText.substring(0,1e3),e.url=t.url.substring(0,1e3),t})).then((e=>e.text())).then((t=>e.text=t.substring(0,1e3))).then((()=>{e.fetched=!0})).catch((()=>e.fetched=!1)).finally((()=>{(0,c.H)({additional:e,block:u.W.GOOGLE_ADS,message:"[adv] checkScriptAvailability [adsbygoogle.js]"})}))}()}},new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));var e,t,a}}const g=new v},73441:(e,t,a)=>{a.d(t,{G:()=>n});var r=a(26108),s=a(3436);class n extends s.R{constructor(){super()}load(){return this.loadPromise||(this.loadPromise=new r.Z,this.init()),this.loadPromise.promise}}},29747:(e,t,a)=>{a.d(t,{K:()=>d,Z:()=>h});var r=a(26667),s=a(14408),n=a(88561),o=a(69110),i=a(35742),l=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const d=250;class c extends o.Z{constructor(){super(),this.providerName=i.oO.AdsenseResponsive,this.providerLoaderName=i.Po.Adsense}get isAdBreakReady(){return n.Z.isAdBreakReady}init(){return l(this,null,(function*(){var e,t,a,r,o,i,l,d;null==(e=window.clickdaemonLog)||e.call(window,"adv_debug",{scope:"AdsenseResponsiveProvider",event:"init",step:"1"});try{(0,s.rA)(null!=(r=null==(a=null==(t=window.appData)?void 0:t.abt)?void 0:a.flags)?r:{})&&this.initObserverForThirdPartyAdsenseAds(),yield n.Z.load(),null==(o=window.clickdaemonLog)||o.call(window,"adv_debug",{scope:"AdsenseResponsiveProvider",event:"init",step:"2"}),this._loadPromise.resolve(this),null==(i=window.clickdaemonLog)||i.call(window,"adv_debug",{scope:"AdsenseResponsiveProvider",event:"init",step:"3"})}catch(e){null==(l=window.clickdaemonLog)||l.call(window,"adv_debug",{scope:"AdsenseResponsiveProvider",event:"init",step:"4"}),this._loadPromise.reject(e)}null==(d=window.clickdaemonLog)||d.call(window,"adv_debug",{scope:"AdsenseResponsiveProvider",event:"init",step:"5"})}))}createSlot(e){return l(this,arguments,(function*({adFormat:e,blockId:t,clientId:a,divId:s,height:n,maxHeight:o,width:i}){const l=document.querySelector(`#${CSS.escape(s)}`);if(!l)throw new Error(`Container #${s} not found`);const d=document.createElement("ins");d.classList.add("adsbygoogle"),d.style.display="block",d.style.margin="auto",n=null!=n?n:l.clientHeight,i=null!=i?i:l.clientWidth,d.style.height=`${n}px`,d.style.width=`${i}px`,o&&(d.style.maxHeight=`${o}px`),(0,r._y)(`Create Adsense slot, height: ${n}px, width: ${i}px, adFormat: ${e}`);const{dataset:c}=d;return c.adClient=a,c.adSlot=t,e&&(c.adFormat=e),c.fullWidthResponsive="true",l.appendChild(d),this.createPreloadPromise(d),d}))}initObserverForThirdPartyAdsenseAds(){new MutationObserver((e=>{for(const t of e)if("childList"===t.type){const{addedNodes:e}=t;e.forEach((e=>{e instanceof HTMLElement&&e.classList.contains("adsbygoogle-noablate")&&e.remove()}))}})).observe(document.documentElement,{childList:!0})}createPreloadPromise(e){this.preloadPromise=new Promise((t=>{const a=new MutationObserver((a=>{for(const r of a){const a=r.target;switch(r.attributeName){case"data-ad-status":{const r=a.dataset.adStatus;return t("filled"===r?{isEmpty:!1,slot:e}:{isEmpty:!0,slot:e})}case"style":a.style.width="",this.fixHeightStyle(a)}}}));a.observe(e,{attributes:!0,attributeFilter:["data-ad-status","style"],attributeOldValue:!0}),e.parentNode&&a.observe(e.parentNode,{attributes:!0,attributeFilter:["style"]})}))}preloadSlot({slot:e}){return adBreak({}),this.preloadPromise}showSlot(e){return Promise.resolve()}destroySlot(e){return l(this,null,(function*(){return e.remove(),Promise.resolve()}))}fixHeightStyle(e){window.setTimeout((()=>{var t;let a=3,s=e;const n=["minHeight","height","maxHeight"];try{for(;a-- >0&&(s=null!=(t=null==s?void 0:s.parentElement)?t:null);)for(const e of n)s.style.removeProperty(e)}catch(e){(0,r._y)("Failed to fix height styles: ",e.message)}}),0)}}const h=new c},69110:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(26108),s=a(3436);class n extends s.R{constructor(){super(),this.supportsRetries=!0}get loaded(){var e;return(null==(e=this.loadPromise)?void 0:e.state)===r.W.Fulfilled}get loadPromise(){return this._loadPromise}load(){return this._loadPromise||(this._loadPromise=new r.Z,this.init()),this._loadPromise.promise}hasPlaceholder(){return!1}}const o=n},21698:(e,t,a)=>{a.d(t,{o:()=>n});var r=a(26667);const s=r._y.tag("testId"),n=(e,t)=>{try{const a=e.getSlotElementId(),r=document.getElementById(a);if(!r)return;if(1!==r.childElementCount)return void s.log(`Element ${a} has ${r.childElementCount} children (not 1).`);const n=r.firstElementChild;if(!(n&&n instanceof HTMLDivElement&&n.id.startsWith("google_ads_iframe_")))return void s.spoiler(n).log("Failed to set banner testId.");n.dataset.testid=t}catch(e){s.spoiler(e).log("Failed to set banner testId.")}}},52193:(e,t,a)=>{a.d(t,{Z:()=>d});var r=a(63904),s=a.n(r),n=a(87363),o=a.n(n),i=a(94671);const l=s().with("age-rating-badge"),d=({ageRating:e,mix:t=""})=>o().createElement("div",{className:(0,i.E)(l(),t)},e)},16982:(e,t,a)=>{a.d(t,{Z:()=>c});var r=a(63904),s=a.n(r),n=a(87363),o=a.n(n),i=a(5825),l=a(36172);const d=s().with("badge"),c=e=>{const{isBlack:t,mix:a,onClick:r,size:s,text:n,type:c,withShadow:h,title:u}=e,p=(0,i.C)(l.Up);return o().createElement("div",{className:`${d({darkTheme:p,size:s,type:c,with_shadow:h,isBlack:t})} ${a}`,title:u,onClick:r},n)}},32922:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a(48225).Z},64264:(e,t,a)=>{a.d(t,{Z:()=>y});var r=a(63904),s=a.n(r),n=a(87363),o=a.n(n),i=a(4463),l=a(53644),d=a(40184),c=a(5825),h=a(96952),u=a(53722),p=a(41811),m=a(15771),v=a(57681);const g=s().with("category-link");function f(e,t){return t===p.w5?"/":t===p.z8?p.qW:t===p.zW?p.WP:(0,v.QG)(e,{name:t})}const y=function(e){const t=(0,i.TH)(),a=(0,d.b)(),{abt:r}=a,s=(0,c.T)(),v=(0,n.useMemo)((()=>(0,m.XP)(r.flags)),[r.flags]),{children:y,categoryName:b,pathname:w,mix:k="",onClick:E,target:S,title:A,testId:I}=e,P=(0,n.useCallback)((e=>{(0,h.D)((()=>{null==E||E(e)}))}),[s,v,b,E]);return o().createElement(l.rU,{className:`${g()} ${k} default-link`,"data-testid":I,state:{isInternalStep:!0},target:S,title:A,to:{pathname:w||f(a,b),search:b===p.zW?t.search:(0,u.v6)(t)},onClick:P},y)}},59453:(e,t,a)=>{a.d(t,{Z:()=>v});var r=a(63904),s=a.n(r),n=a(87363),o=a.n(n),i=a(53726),l=a(15201),d=a(34967),c=a(82027),h=a(96952),u=a(89592);const p=s().with("close-button");class m extends n.PureComponent{constructor(){super(...arguments),this.handleClick=e=>{e.preventDefault(),e.stopPropagation(),this.props.disabled||(0,h.D)((()=>{var e;this.props.onClick(c.hz.cross),(0,d.NF)({},u.Ji.CLOSE_BUTTON_CLICK,{source:null!=(e=this.props.source)?e:""})}))}}render(){const{color:e,"data-testid":t,disabled:a,mix:r,type:s,getText:n}=this.props;return o().createElement(l.Z,{alt:n("common.close"),className:`${p({color:e,disabled:a,type:s})} ${r}`,"data-testid":t,size:"m",onClick:this.handleClick})}}m.defaultProps={mix:"",onClick:()=>{}};const v=(0,i.$j)((function(e){return{getText:e.getText}}))(m)},61451:(e,t,a)=>{a.d(t,{Z:()=>I});var r=a(38096),s=a(44700),n=a(63904),o=a.n(n),i=a(87363),l=a.n(i),d=a(40184),c=a(85467),h=a(82027),u=a(34711),p=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const m=e=>{const t=(new Date).getFullYear();return{copyrightSymbol:"©",copyrightSpacer:" ",dates:e&&e!==t?`${e}—${t}`:`${t}`}};var v=Object.defineProperty,g=Object.defineProperties,f=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,k=(e,t,a)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const E=o().with("copyright"),S=({className:e="",ContainerTag:t="div",legalInfo:a})=>{const{componentsSettings:s}=(0,r.getDomainConfig)(),n=function(){const e=(0,i.useRef)(null),{isGamesApp:t}=(0,d.b)();return(0,i.useEffect)((()=>{const a=e=>p(this,null,(function*(){try{yield window.navigator.clipboard.writeText(e),e="Copied in clipboard:\n\n"+e}catch(e){console.error(e)}alert(e)})),r=()=>p(this,null,(function*(){var e,r;if(t)null==(r=null==(e=window.yandex)?void 0:e.device)||r.getDeviceInfo((e=>p(this,null,(function*(){let t="failed to get debug info, see console errors";try{const{app_build_number:a,app_platform:r,did:s,lang:n,model:o,os_version:i,uuid:l}=JSON.parse(e);t=[`Device: ${o}`,`Platform: ${r} ${i}`,`App build version: ${a}`,`UUID: ${l}`,`Device ID: ${s}`,`Lang/GeoID: ${n}/${window.clientMetadata.geoId}`].join("\n")}catch(e){console.error(e)}yield a(t)}))));else{const{platform:e,appVersion:t,lang:r,geoId:s}=window.clientMetadata,n=[`Device: ${window.navigator.userAgent}`,`Platform: ${e}`,`App build version: ${t}`,`Clid: ${(0,u.X)()}`,`Lang/GeoID: ${r}/${s}`].join("\n");yield a(n)}})),s=e.current;return null==s||s.addEventListener("dblclick",r),()=>{null==s||s.removeEventListener("dblclick",r)}}),[t]),e}(),{copyrightSymbol:o,copyrightSpacer:c,dates:h}=m(s.copyright.startYear);return l().createElement(t,{className:`${E()} ${e}`},o,c,l().createElement("span",{className:E("dates"),ref:n},h),c,c,a,c)},A=(0,i.memo)((({useFullCompanyInfo:e})=>{const t=(0,r.getDomainConfig)(),{componentsSettings:{copyright:a}}=t,{tld:n}=(0,d.b)(),o=(0,c.T)(),u=(0,h.oS)({customCopyright:null==a?void 0:a.customCopyright,getText:o,useFullCompanyInfo:e,tld:n}),p=(0,i.useMemo)((()=>Array.isArray(u)?u.map(((e,t)=>l().createElement(l().Fragment,{key:t},e,t+1!==u.length&&l().createElement("br",null)))):u),[u]);let m=`https://${t.hostname}.${n}`;return t.hostname===r.EDomain.Yandex&&"ru"===n&&(m="https://ya.ru"),l().createElement(s.r,{className:E("company-info"),href:m,rel:"noopener",target:"_blank"},p)})),I=e=>{var t=e,{isShortDescription:a=!1}=t,r=((e,t)=>{var a={};for(var r in e)b.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&y)for(var r of y(e))t.indexOf(r)<0&&w.call(e,r)&&(a[r]=e[r]);return a})(t,["isShortDescription"]);const s=(0,i.useMemo)((()=>{const e=!a;return l().createElement(l().Fragment,null,e&&l().createElement("br",null),l().createElement(A,{useFullCompanyInfo:e}))}),[a]);return l().createElement(S,(n=((e,t)=>{for(var a in t||(t={}))b.call(t,a)&&k(e,a,t[a]);if(y)for(var a of y(t))w.call(t,a)&&k(e,a,t[a]);return e})({},r),g(n,f({legalInfo:s}))));var n}},88372:(e,t,a)=>{a.d(t,{Z:()=>C});var r=a(71487),s=a(85383),n=a(84819),o=a(53726),i=a(45331),l=a(55968),d=a(33119),c=a(16527),h=a(97808),u=a(98343),p=a(74085),m=a(34967),v=a(77901),g=a(4915),f=a(31085),y=a(70602),b=a(40656),w=a(93298),k=a(15771),E=a(89592);const S=(0,w.M$)("DisplayInstallation",w.XG.Popup),{answerTimeoutToInstallationInMs:A}=u.addToHomeScreenSettings,I=b.IZ,P=["show-api-prompt","show-shortcut-popup","show-standalone-api-prompt"];class T extends i.P{constructor(e,t){super(e,t),this.isPlayToEarn=!1,this.handleVisibilityChange=()=>{return e=this,t=null,a=function*(){!1===document.hidden&&(this.removeVisibilityChangeListener(),this.showInstallationPromptPromise())},new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));var e,t,a},this.appinstalledHandler=()=>{const e={type:this.props.type};this.sourceShortcut&&(e.source=this.sourceShortcut),S("appinstalled with params:",e),(0,m.NF)({},E.Ji.SHORTCUT_API_APPINSTALLED,e),this.isPlayToEarn&&this.sendPlayToEarnEvent(),y.Fj.apiAppInstalled((0,y.oU)({context:this.context,popupType:"system",source:this.sourceShortcut?(0,y.N7)(this.sourceShortcut):f.pR.CATALOG}))},this.shortcutManagerEventHandler=e=>{const{type:t,action:a,data:r}=e.data;if("shortcut-manager"===t)P.includes(a)&&r.source?this.sourceShortcut=r.source:this.sourceShortcut=void 0},this.disableShortcutButton=()=>{this.props.dispatch((0,d.tm)(!0))},this.waitForUserGestureToInstall=()=>{this.props.dispatch((0,d.I6)(!0))},this.stopWaitingForUserGestureToInstall=()=>{this.props.dispatch((0,d.I6)(!1))},this.showInstallationPromptCommonApi=e=>{const{shortcutEventPrompt:t,shortcutInstallationCb:a}=this.props,r=(0,v.RY)();S(`showInstallationPromptCommonApi with source = ${e}, shortcutEventPrompt = ${t}`),t&&(y.Fj.show((0,y.oU)({context:this.context,popupType:"system",source:(0,y.aV)(e)})),t.prompt().then((()=>{this.props.dispatch((0,d.FJ)(void 0)),(0,m.NF)({},E.Ji.SHORTCUT_PROMPT_SHOW,{showPromptSource:e}),this.installationChecker.updateInstallationData(e),t.userChoice.then((t=>{y.Fj.click((0,y.oU)({context:this.context,popupType:"system",source:(0,y.aV)(e),result:"accepted"===t.outcome?"accepted":"rejected"})),"accepted"===t.outcome?((0,m.NF)({},E.Ji.SHORTCUT_USER_CHOICE_ACCEPTED),this.disableShortcutButton(),this.props.dispatch((0,d.w0)()),this.isPlayToEarn&&r&&this.sendPlayToEarnEvent()):(this.props.dispatch((0,d.yf)(!0)),(0,m.NF)({},E.Ji.SHORTCUT_USER_CHOICE_DISMISSED)),null==a||a(t),this.props.dispatch(d.Nw)}))})).catch((()=>{this.waitForUserGestureToInstall()})))},this.showInstallationPromptPromise=()=>{const e={waitingPeriod:b.s2,maxCallCount:3};e.waitingPeriod=I,S("options",e),this.installationChecker.checkInstallationCapability(e)&&(this.props.dispatch((0,d.M4)(!1)),this.showInstallationPrompt(f.Wp.VisibilityChange),window.setTimeout((()=>{this.stopWaitingForUserGestureToInstall()}),A))},this.showInstallationPrompt=e=>{this.showInstallationPromptCommonApi(e)},this.installationChecker=new g.Z}addVisibilityChangeListener(){"catalog"===this.props.type&&((0,k.wy)(this.context.abt.flags).visibilitychange||(0,n.v_)({on:"disable_pwa_promo"})||(S("addEventListener visibilitychange"),document.addEventListener("visibilitychange",this.handleVisibilityChange)))}removeVisibilityChangeListener(){S("removeEventListener visibilitychange"),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}addAppinstalledListener(){S("add appinstalled"),window.addEventListener("appinstalled",this.appinstalledHandler)}removeAppinstalledListener(){S("remove appinstalled"),window.removeEventListener("appinstalled",this.appinstalledHandler)}initMessaging(){"game"===this.props.type&&h.Z.onAllMessages("shortcut-manager",this.shortcutManagerEventHandler,{withHistory:!0})}removeMessaging(){"game"===this.props.type&&h.Z.offAllMessages("shortcut-manager",this.shortcutManagerEventHandler)}sendPlayToEarnEvent(){const{dispatch:e}=this.props;e((0,c.$B)(l.cb.CREATE_LINK_IN_CATALOGUE))}componentDidUpdate(e){this.props.shortcutButtonFlag!==e.shortcutButtonFlag?this.showInstallationPrompt(f.Wp.Button):this.props.shortcutGameFlag!==e.shortcutGameFlag?this.showInstallationPrompt(f.Wp.Game):this.props.shortcutPopupFlag!==e.shortcutPopupFlag?this.showInstallationPrompt(f.Wp.Popup):this.props.shortcutInstallerFlag!==e.shortcutInstallerFlag?this.showInstallationPrompt(f.Wp.ShortcutInstaller):this.props.shortcutInlineBannerFlag!==e.shortcutInlineBannerFlag?this.showInstallationPrompt(f.Wp.InlineBanner):this.props.shortcutRecentGamesFlag!==e.shortcutRecentGamesFlag?this.showInstallationPrompt(f.Wp.RecentGames):this.props.shortcutRecentGamesButtonFlag!==e.shortcutRecentGamesButtonFlag?this.showInstallationPrompt(f.Wp.MyGamesInlineShortcutButton):this.props.shortcutMyGamesInlineFlag!==e.shortcutMyGamesInlineFlag?this.showInstallationPrompt(f.Wp.MyGamesInlineShortcutPopup):this.props.shortcutMyGamesDrawerFlag!==e.shortcutMyGamesDrawerFlag&&this.showInstallationPrompt(f.Wp.MyGamesDrawerShortcutPopup),this.props.shortcutUserGesturePrompt&&!e.shortcutUserGesturePrompt&&this.logUserGesturePrompt()}logUserGesturePrompt(){const{shortcutUserGesturePrompt:e}=this.props;y.Fj.show((0,y.oU)({context:this.context,popupType:"system",source:f.pR.USER_GESTURE})),null==e||e.userChoice.then((e=>{y.Fj.click((0,y.oU)({context:this.context,popupType:"system",source:f.pR.USER_GESTURE,result:"accepted"===e.outcome?"accepted":"rejected"}))})).finally((()=>{this.props.dispatch((0,d.r7)(void 0))}))}componentDidMount(){var e;const{abt:t}=this.context;this.isPlayToEarn=(0,k.XP)(t.flags),this.initMessaging(),this.addVisibilityChangeListener(),this.addAppinstalledListener(),(0,p.Z)()&&(y.Fj.installed(),null==(e=this.props.history)||e.listen((0,r.P)((()=>{y.Fj.installed()}),10*b.WT)))}componentWillUnmount(){this.removeVisibilityChangeListener(),this.removeAppinstalledListener(),this.removeMessaging()}render(){return null}}const C=(0,s.E)((0,o.$j)((function(e){return{shortcutInlineBannerFlag:e.shortcutInlineBannerFlag,shortcutButtonFlag:e.shortcutButtonFlag,shortcutInstallerFlag:e.shortcutInstallerFlag,shortcutEventPrompt:e.shortcutEventPrompt,shortcutGameFlag:e.shortcutGameFlag,shortcutPopupFlag:e.shortcutPopupFlag,shortcutRecentGamesFlag:e.shortcutRecentGamesFlag,shortcutMyGamesInlineFlag:e.shortcutMyGamesInlineFlag,shortcutMyGamesDrawerFlag:e.shortcutMyGamesDrawerFlag,shortcutRecentGamesButtonFlag:e.shortcutRecentGamesButtonFlag,shortcutInstallationCb:e.shortcutInstallationCb,shortcutUserGesturePrompt:e.shortcutUserGesturePrompt}}))(T))},20523:(e,t,a)=>{a.d(t,{Z:()=>g});var r=a(38096),s=a(40562),n=a(84819),o=a(63904),i=a.n(o),l=a(87363),d=a.n(l),c=a(40184),h=a(85467),u=a(5825),p=a(36172),m=a(69838);const v=i().with("domain-logo"),g=({lazy:e,imageSize:t="m",isShort:a,textSize:o="m",showImage:i=!0,showText:l=!0,textColor:g,type:f})=>{const y=(0,h.T)(),b=(0,u.C)(p.Up),w=(0,c.b)(),{cdnUrl:k,lang:E}=w,{hostname:S,componentsSettings:{domainLogo:A}}=(0,r.getDomainConfig)(),I=Boolean(null==A?void 0:A.useSingleLogo),P=(null==A?void 0:A.textSizeLogo)||o,T=`${k}/games-static/static-data/images/logo/`,C=y("common.service.name");if(a){let t=`${T}short/${S}`;return(0,n.v_)({on:"yandex_branding"})&&S===r.EDomain.Yandex?(t+="_branding",(0,s.K)(E)||(t+="_en"),t+=".png"):(S!==r.EDomain.Yandex||(0,s.K)(E)||(t+="_en"),t+=".svg"),d().createElement("div",{className:v()},d().createElement("img",{alt:C,className:v("image",{short:!0}),crossOrigin:"anonymous",loading:e?"lazy":void 0,src:t,title:C}))}const R=`${S}-text-${g||b?"light":"dark"}.svg`,D=`${T}${S}.svg`,O=`${T}${R}`,L=!i&&I?"single":(null==A?void 0:A.sizeLogo)||t;let _=i||I,x=l&&!I;return f===m.q7.HEADER&&(_=!1,x=!0),d().createElement("div",{className:v()},_&&d().createElement("img",{alt:C,className:v("image",{size:L,singleLogo:I}),crossOrigin:"anonymous",loading:e?"lazy":void 0,src:D,title:C}),x&&d().createElement("img",{alt:C,className:v("text",{size:P}),crossOrigin:"anonymous",id:R,loading:e?"lazy":void 0,src:O,title:C}))}},88846:(e,t,a)=>{a.d(t,{Z:()=>H});var r=a(38096),s=a(58904),n=a(63904),o=a.n(n),i=a(87363),l=a.n(i),d=a(53726),c=a(45331),h=a(61451),u=a(40184),p=a(85467),m=a(92477);const v=o().with("footer-links"),g=()=>{const{tld:e}=(0,u.b)(),t=(0,p.T)(),a=(()=>{const{tld:e}=(0,u.b)(),{hostname:t}=(0,r.getDomainConfig)();return"ru"===e&&"yandex"===t})();return l().createElement("div",{className:v("wrap")},l().createElement("ul",{className:v("list")},l().createElement("li",{className:v("item")},l().createElement("a",{className:v("link"),href:t("license.link",{params:{tld:(0,m.T)(e)}}),rel:"noopener",target:"_blank"},t("license.text"))),l().createElement("li",{className:v("item")},l().createElement("a",{className:v("link"),href:t("confidential.link"),rel:"noopener",target:"_blank"},t("confidential.text"))),a&&l().createElement("li",{className:v("item")},l().createElement("a",{className:v("link"),href:t("recommendations.link"),rel:"noopener",target:"_blank"},t("recommendations.text"))),l().createElement("li",{className:v("item")},l().createElement("a",{className:v("link"),href:t("support.button.link"),rel:"noopener",target:"_blank"},t("support.button.text")))))},f=()=>{const{basePath:e,legalPages:t}=(0,r.getDomainConfig)(),a=(0,p.T)();return t?l().createElement("div",{className:v("wrap")},l().createElement("ul",{className:v("list")},Object.entries(t).sort(((e,t)=>e[1].footerOrder-t[1].footerOrder)).map((([t,r])=>{const s=a(`${r.pagePrefix}.link.text`,{withNoErrors:!0})||a(`${r.pagePrefix}.title`,{withNoErrors:!0});return r.hideLink||!s?null:l().createElement("li",{className:v("item"),key:t},l().createElement("a",{className:v("link"),href:`${e}${t}`,rel:"noopener",target:"_blank"},s))})))):l().createElement(g,null)},y=l().memo((({className:e,contentClassName:t})=>l().createElement("article",{className:`${v()} ${e}`},l().createElement("div",{className:t},l().createElement(h.Z,{className:v("copyright"),isShortDescription:!1}),l().createElement(f,null)))));var b=a(15201);const w=o().with("social"),k=l().memo((e=>{const t=(0,p.T)(),{children:a,socialNetworks:r,showDescription:s=!0}=e;return l().createElement("div",{className:w()},a,s&&l().createElement("span",{className:w("label")},t("social.text")),r.map((e=>{const a=t(`social.${e}`);return"-"===a?null:l().createElement("a",{className:w("icon"),href:a,key:e,target:"_blank"},l().createElement(b.Z,{type:`social-${e}`}))})))}));var E=(e=>(e.INSTAGRAM="instagram",e.PINTEREST="pinterest",e.SNAPCHAT="snapchat",e.TELEGRAM="telegram",e.TIKTOK="tiktok",e.VK="vk",e.ZEN="zen",e))(E||{});const S=k,A=[E.TELEGRAM,E.ZEN,E.TIKTOK],I=({children:e})=>l().createElement(S,{showDescription:!1,socialNetworks:A},e);var P=a(71852);const T=o().with("section"),C=e=>{const{children:t,headLevel:a,hasTitle:r=!0,onRef:s=(()=>{}),mix:n="",title:o,titleIcon:i}=e;return l().createElement("section",{className:`${T()} ${n}`,ref:s},r&&l().createElement(P.Z,{headLevel:a,icon:i,mix:T("title"),title:o}),l().createElement("div",{className:T("content")},t))};var R=a(33119),D=a(5825),O=a(34967),L=a(31085),_=a(70602),x=a(89592);const N=o().with("footer"),B=!1,M=()=>{var e;const t=(0,p.T)(),a=(0,r.getDomainConfig)(),n=(0,i.useCallback)((()=>{(0,O.NF)({},x.Ji.CLICK_PARTNER_BUTTON)}),[]);if(!(null==(e=a.componentsSettings.footer)?void 0:e.usePartnersBlock))return null;const o=t("partners.button.text.new"),d=t("partners.button.link");return l().createElement("article",{className:`${N("partners")}`},l().createElement("div",{className:N("background")}),l().createElement("div",{className:N("image")}),l().createElement(C,{hasTitle:!0,headLevel:3,mix:N("content"),title:t("partners.header")},l().createElement("p",{className:N("text")},t("partners.text")),l().createElement(s.z,{"data-testid":"FooterButton-Partner",href:d,rel:"noopener",size:40,target:"_blank",view:"primary",onClick:n},o)))},$=({disabled:e,hasShortcutFunctions:t,withoutShortcut:a,withPartners:n})=>{const{hasSideBar:o,tld:d,lang:c,baseHost:h,baseUrl:m,abt:v}=(0,u.b)(),g=(0,p.T)(),f=(0,i.useRef)(!1),y=(0,D.T)(),{secondaryShortcutButtonView:b,usePartnersBlock:w,onlyButtonInMobile:k,allowSidebar:E}=(0,r.getDomainConfig)().componentsSettings.footer||{};(0,i.useEffect)((()=>{a||!t||f.current||(f.current=!0,_.Fj.show((0,_.oU)({context:{baseHost:h,baseUrl:m,lang:c,tld:d,abt:v},popupType:"system",source:(0,_.aV)(L.Wp.Button)})))}),[d,c,h,m,a,t,v]);const S=(0,i.useCallback)((()=>{_.Fj.click((0,_.oU)({context:{baseHost:h,baseUrl:m,lang:c,tld:d,abt:v},popupType:"system",source:(0,_.aV)(L.Wp.Button),result:"accepted"})),y((0,R.JB)()),(0,O.NF)({},x.Ji.CLICK_SHORTCUT_BUTTON),(0,O.NF)({},x.Ji.CATALOG_SHORTCUT_CLICK,{shortcutSource:L.Wp.Button})}),[v,h,m,y,c,d]),A=(0,i.useCallback)((()=>{y((0,R.JB)()),(0,O.NF)({},x.Ji.CLICK_SIDEBAR_BUTTON),(0,O.NF)({},x.Ji.CATALOG_SHORTCUT_CLICK,{shortcutSource:L.Wp.Button})}),[y]);if(a||!t)return null;const I=o?"sidebar":"shortcut",P=B,T=!n||!w,M=b&&!T;let $;return $=g(E?(o?"sidebar":"shortcut")+".description.text":"shortcut.description.text.desktop"),l().createElement("article",{className:N("shortcut",{sidebar:o,shown:t,only_button:P,only_shortcut_block:T})},t&&l().createElement(C,{hasTitle:!0,headLevel:3,mix:N("content"),title:g(`${I}.title.text`)},l().createElement("p",{className:N("text"),hidden:P},$),l().createElement(s.z,{className:N("shortcut-button"),"data-testid":"FooterButton-Shortcut",disabled:e,size:40,view:M?"secondary":"primary",onClick:o?A:S},g(`${I}.desktop.button.text`))))};l().memo((()=>{const e=(0,p.T)();return l().createElement("a",{className:N("link"),href:e("common.support.link"),rel:"noopener",target:"_blank"},e("common.support.help"))}));class F extends c.P{constructor(){super(...arguments),this.handleShortcutButtonClick=()=>{this.props.dispatch((0,R.JB)()),(0,O.NF)({},x.Ji.CLICK_SHORTCUT_BUTTON),(0,O.NF)({},x.Ji.CATALOG_SHORTCUT_CLICK,{shortcutSource:L.Wp.Button})},this.handleSidebarButtonClick=()=>{this.props.dispatch((0,R.JB)()),(0,O.NF)({},x.Ji.CLICK_SIDEBAR_BUTTON),(0,O.NF)({},x.Ji.CATALOG_SHORTCUT_CLICK,{shortcutSource:L.Wp.Button})}}renderShortcutButton(){const{disableShortcutButton:e,withoutShortcut:t,hasShortcutFunctions:a,shortcutCancelled:r,withPartners:s}=this.props;return l().createElement($,{disabled:e,hasShortcutFunctions:r||a,withPartners:s,withoutShortcut:t})}socialNetworks(){var e;return(null==(e=(0,r.getDomainConfig)().componentsSettings.footer)?void 0:e.disableSocialNetworks)?null:l().createElement(I,null,B)}render(){const{feedPaddings:e,hasShortcutFunctions:t,type:a,withPartners:r,withoutHorizontalLine:s,withoutShortcut:n,shortcutCancelled:o}=this.props,i=s?null:l().createElement("div",{className:N("horizontal-line")});return l().createElement("footer",{className:`${N({type:a})} ${e?"centered-content":""}`},l().createElement("div",null,i,l().createElement("div",{className:N("blocks")},r&&l().createElement(M,null),this.renderShortcutButton()),!1),!1,l().createElement("div",{className:N("wrapper")},l().createElement("div",{className:""},i),l().createElement(y,{className:N("links")}),this.socialNetworks()))}}F.defaultProps={feedPaddings:!0,withPartners:!0};const H=(0,d.$j)((function(e){return{hasShortcutFunctions:Boolean(e.shortcutEventPrompt),disableShortcutButton:e.disableShortcutButton,shortcutCancelled:e.shortcutCancelled,theme:e.theme.value}}))(F)},8037:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a(88846).Z},6193:(e,t,a)=>{a.d(t,{Z:()=>f});var r=a(63904),s=a.n(r),n=a(87363),o=a.n(n),i=a(53726),l=a(52193);const d=a(16982).Z;var c=a(5718),h=a(82027),u=a(41811);const p=s().with("game-badges"),m=[u.xY.ADAPTIVE_RECOMMENDED_NEW,u.xY.L,u.xY.RECOMMENDED_NEW,u.xY.PREMIUM,u.xY.PREMIUM_BIG],v=[u.xY.ADAPTIVE_RECOMMENDED_NEW,u.xY.S];class g extends n.Component{constructor(){super(...arguments),this.getTextByType=(e,t)=>{const{getText:a,isWebApp:r}=this.props;if(!e)return"";switch(e){case h.nJ.NEW:return a(`badge.${e}${r?".webapp":""}`);case h.nJ.PROMO_DIRECT:case h.nJ.TV_RECENT:return"";case h.nJ.PROMO_EVENT:return a("badge.promo");default:return t||""}},this.getStickyBadge=()=>{const{size:e,badgeType:t,badgeTitle:a,isCustomBlackBadge:r}=this.props;if(!t)return null;const s=m.includes(e);if(t===h.nJ.NEW&&!s)return null;const n=v.includes(e);if(t===h.nJ.PROMO_DIRECT&&!n)return null;const i=this.getTextByType(t,a),l=this.getTitleByType(t);return o().createElement(d,{isBlack:r,key:"new",mix:p("sticky-badge"),size:e,text:i,title:l,type:t,withShadow:!1})}}render(){const{ageRating:e,gqRating:t}=this.props,a=[],r=this.getStickyBadge();return r&&a.unshift(r),e&&a.unshift(o().createElement(l.Z,{ageRating:e,key:"age-rating",mix:p("age-rating-badge")})),t&&a.unshift(o().createElement(c.Z,{isBackgroundTransparent:!0,isCornered:!0,key:"quality-score",mix:p("game-quality-badge"),value:t,withoutText:!0})),a}getTitleByType(e){const{getText:t}=this.props;if(e===h.nJ.PROMO_DIRECT)return t("badge.direct")}}g.defaultProps={mix:""};const f=(0,i.$j)((function(e){return{getText:e.getText}}))((0,n.memo)(g))},61715:(e,t,a)=>{a.d(t,{V:()=>m,y:()=>v});var r=a(63904),s=a.n(r),n=a(87363),o=a.n(n),i=a(89245),l=a(1779),d=a(63662),c=a(82027),h=a(89592);const u=s(),p=(0,l.ZP)([l.nh.onClickGamePage],h.SS.GAME)(i.Z),m={gameInfo:"game-info",gameUrl:"game-url"},v=({disableGameOpeningOnClick:e,game:t,infoPage:a,ignoresTvNavigation:r,isErrorPage:s,listType:n,mixElem:l="",redirParams:h,withoutLink:m,onClick:v,onRef:g,children:f=null})=>{const{clickDaemonParams:y}=(0,d.b)();if(m)return f;const b=a?p:i.Z;return o().createElement(b,{actionSource:c.zD.picture,disableGameOpeningOnClick:e,disableHeader:false,game:t,ignoresTvNavigation:r,infoPage:a,isErrorPage:s,mix:u(l),page:null==y?void 0:y.page,pos:{listType:n},redirParams:h,requestId:t.requestId,wrapperName:null==y?void 0:y.wrapper,onClick:v,onRef:g},f)}},39589:(e,t,a)=>{a.d(t,{Z:()=>we});var r=a(85383),s=a(63904),n=a.n(s),o=a(87363),i=a.n(o),l=a(53726),d=a(99815),c=(e=>(e.Horizontal="horizontal",e.Vertical="vertical",e))(c||{}),h=a(82521),u=a(45331),p=a(6193),m=a(43692),v=a(61715),g=a(15227),f=a(59638),y=a(86551);function b(e,t,a){let r=t;for(;r;){if(r.classList.contains(a))return!0;if(r.isEqualNode(e))return!1;r=r.parentElement}return!1}var w=a(92213),k=a(22066),E=a(82027),S=a(15771);function A(e,t){return t?e?`${e} shows-visible-debug-overlay-paint`:"shows-visible-debug-overlay-paint":e}class I extends u.P{constructor(e){super(e),this.handleClick=e=>{this.containerClickedSession!==this.props.catalogSessionUid&&e.target instanceof HTMLElement&&b(e.currentTarget,e.target,"play")&&(this.containerClickedSession=this.props.catalogSessionUid,this.props.clickCallback({container:this.inViewContainer,callbackData:this.props.callbackData})),this.props.onClick&&this.props.onClick(e)},this.addHandlers=()=>{this.props.horizontalContainer&&this.props.horizontalContainer.addEventListener("scroll",this.handleScroll,{passive:!0}),window.addEventListener("scroll",this.handleScroll,{passive:!0})},this.removeHandlers=()=>{this.props.horizontalContainer&&this.props.horizontalContainer.removeEventListener("scroll",this.handleScroll),window.removeEventListener("scroll",this.handleScroll)},this.isElemVisible=()=>{const{scrollMode:e}=this.props,t=e!==E.Qd.horizontal||this.informer.isPercentElemVisible(e,this.props.showThreshold),a=this.informer.isPercentElemVisible(E.Qd.vertical,this.props.showThreshold);return t&&a},this.cancelCallback=()=>{window.clearTimeout(this.callbackTimeoutID),this.callbackTimeoutID=void 0,this.containerShownSession=void 0,this.isContainerBeganToShow=!1},this.handleScroll=()=>{this.startWaiting(!1)},this.inViewContainerRefCb=e=>{var t,a;return this.inViewContainer=e,null==(a=(t=this.props).onRef)?void 0:a.call(t,e)},this.isContainerBeganToShow=!1}componentDidMount(){this.informer=new w.Z(this.inViewContainer),this.props.callbackOnComponentDidMount(this.inViewContainer),this.addHandlers(),this.startWaiting(!0)}componentDidUpdate(e){e.horizontalContainer!==this.props.horizontalContainer&&(e.horizontalContainer&&e.horizontalContainer.removeEventListener("scroll",this.handleScroll),this.props.horizontalContainer&&this.props.horizontalContainer.addEventListener("scroll",this.handleScroll,{passive:!0})),e.catalogSessionUid!==this.props.catalogSessionUid&&(this.removeHandlers(),this.addHandlers(),this.startWaiting(!0))}componentWillUnmount(){this.removeHandlers(),this.callbackTimeoutID&&this.cancelCallback()}callCallback(e){this.isElemVisible()&&(this.containerShownSession=this.props.catalogSessionUid,this.isContainerBeganToShow=!1,this.callbackTimeoutID=void 0,this.props.showCallback({firstScreen:e,container:this.inViewContainer,callbackData:this.props.callbackData}),this.removeHandlers(),(0,S.sv)(this.context.abt.flags)&&this.setState({wasShown:!0}))}startWaiting(e){this.containerShownSession!==this.props.catalogSessionUid&&(this.isElemVisible()?(this.isContainerBeganToShow=!0,this.callbackTimeoutID||(this.callbackTimeoutID=window.setTimeout((()=>{this.callCallback(e)}),this.props.showCallbackTimeout))):this.isContainerBeganToShow&&this.cancelCallback())}render(){var e;const{mix:t,children:a,onMouseEnter:r,onMouseLeave:s,onTouchStart:n,onTouchStartCapture:o,testId:l,onMouseMove:d}=this.props;return i().createElement("div",{className:A(t,null==(e=this.state)?void 0:e.wasShown),"data-testid":l,ref:this.inViewContainerRefCb,onClick:this.handleClick,onMouseEnter:r,onMouseLeave:s,onMouseMove:d,onTouchStart:n,onTouchStartCapture:o},a)}}I.defaultProps={clickCallback:()=>{},showCallback:()=>{},callbackOnComponentDidMount:()=>{},showCallbackTimeout:800,showThreshold:.5,attrs:{},callbackData:{}},I.defaultState={wasShown:!1};const P=(0,l.$j)((function(e){var t;return{catalogSessionUid:Boolean(null==(t=e.middleLayerInGameData)?void 0:t.show)?k.y:e.catalogSessionUid}}))(I);var T=a(482);const C=(0,l.$j)((function(e){return{catalogSessionUid:e.catalogSessionUid}}))((e=>{const{catalogSessionUid:t,horizontalContainer:a,showCallbackTimeout:r=800,showThreshold:s=.5,callbackData:n={},showCallback:l=(()=>{}),clickCallback:d=(()=>{}),onClick:c}=e,h=(0,o.useRef)(!0),u=(0,o.useRef)(""),p=(0,o.useRef)(null),m=(0,o.useCallback)((()=>{p.current&&l({firstScreen:h.current,container:p.current,callbackData:n})}),[l,n]);(0,o.useEffect)((()=>{function e(){h.current=!1}return null==a||a.addEventListener("horizontalScroll",e,{passive:!0}),()=>{null==a||a.removeEventListener("horizontalScroll",e)}}),[a]),(0,T.V)({ref:p,onShow:m,threshold:s,delay:r});const{mix:v,children:g,onMouseEnter:f,onMouseLeave:y,onTouchStart:w,onTouchStartCapture:k,testId:E,onMouseMove:S}=e;return i().createElement("div",{className:v,"data-testid":E,ref:t=>{var a;return p.current=t,null==(a=e.onRef)?void 0:a.call(e,t)},onClick:e=>{if(u.current!==t&&e.target instanceof HTMLElement&&b(e.currentTarget,e.target,"play")){if(u.current=t,!p.current)return;d({container:p.current,callbackData:n})}null==c||c(e)},onMouseEnter:f,onMouseLeave:y,onMouseMove:S,onTouchStart:w,onTouchStartCapture:k},g)}));var R=a(38096),D=a(62010),O=a(90380);const L=({event:e,normalizationMultiplier:t,once:a,place:r,type:s,uniqId:n,value:o})=>{const{baseUrl:l,deviceType:d}=i().useContext(u.Z),c=i().useMemo((()=>{const i=a?"":Math.random(),{hostname:c}=(0,R.getDomainConfig)(),h=(0,D.Bh)({event:e,domain:c,deviceType:d,place:r,sampling:"sampling"}),u=`event=${encodeURIComponent(h)}&value=${encodeURIComponent(o)}&uniqId=${encodeURIComponent(n)}&rnd=${encodeURIComponent(i)}&${D.ZS}=${encodeURIComponent(t)}`;return`${l}/pixel-counters/${s}.jpg?${u}`}),[l,d,t,n,r,s,e,o,a]);return i().createElement("img",{alt:"pixel-counter","data-counter-event":e,"data-counter-type":s,"data-counter-uniqid":n,"data-counter-value":o,src:c,style:{position:"absolute",width:0,height:0}})},_=({event:e,once:t=!0,place:a,type:r,uniqId:s,value:n})=>{const{abt:o,isPromoCounterEnabled:l}=i().useContext(u.Z),d=(0,S.$9)(o.flags,O.Z.pixelCounterReduction);return l&&a&&d?i().createElement(L,{event:e,normalizationMultiplier:d,once:t,place:a,type:r,uniqId:s,value:n}):null};var x=Object.defineProperty,N=Object.defineProperties,B=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable,H=(e,t,a)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,W=(e,t)=>{for(var a in t||(t={}))$.call(t,a)&&H(e,a,t[a]);if(M)for(var a of M(t))F.call(t,a)&&H(e,a,t[a]);return e};const G=e=>{const t=W({"data-visibility-links":e.visibilityLinks.join(","),"data-check-viewport":e.checkViewport},e.place?{"data-place":e.place}:{});return i().createElement("div",((e,t)=>N(e,B(t)))(W({},t),{className:"visibility-tracker"}))};var Z=a(1779),j=a(33119),U=a(52157),q=a(37860),z=a(18546),V=a(22823),K=a(94671),Y=a(98343),X=a(83950),J=a(52706),Q=a(96952),ee=a(37705),te=a(36918),ae=a(58226),re=a(41811),se=a(40656),ne=a(13377),oe=a(49659),ie=a(70091),le=a(89592),de=a(57681),ce=a(29008),he=a(44865),ue=(a(78989),a(89568),a(81290),Object.defineProperty),pe=Object.getOwnPropertySymbols,me=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable,ge=(e,t,a)=>t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,fe=(e,t)=>{for(var a in t||(t={}))me.call(t,a)&&ge(e,a,t[a]);if(pe)for(var a of pe(t))ve.call(t,a)&&ge(e,a,t[a]);return e};const ye=n().with("game-card");class be extends o.Component{constructor(e,t){super(e,t),this.isBannerCarouselObserverAssigned=!1,this.expandingThumbnailTimeoutId=null,this.isExpandingThumbnailEnabled=!1,this.tapOverCaptureTimeoutId=null,this.checkGameIdIsAlreadySent=e=>{if(0===e.row)return window.gameIdsWithAlreadySentVisibilityLinks.includes(e.appID)},this.createIntersectionCallback=()=>{const{abt:{flags:e}}=this.context,{gameCardRef:t}=this.state;if(!(0,S.nD)(e))return e=>{var a;e.intersectionRatio<=0||(this.hitBkVisibilityLinks(),null==(a=this.intersectionObserver)||a.unobserve(t))};let a;return e=>{e.intersectionRatio<=0||(e.isIntersecting?a=setTimeout((()=>{var e;null==(e=this.intersectionObserver)||e.unobserve(t),clearTimeout(a),this.hitBkVisibilityLinks()}),2e3):clearTimeout(a))}},this.hitBkVisibilityLinks=()=>{var e;const{game:t}=this.props;(null==(e=t.visibility_links)?void 0:e.length)?this.checkAppIdBeforeSend&&this.checkGameIdIsAlreadySent(t)||(this.addPixel("games_from_bk_hit"),this.hasBkVisibilityLinkHit=!0,Promise.all(t.visibility_links.map((e=>(0,z.Z)(e,{credentials:"include"}).catch((t=>{throw this.onBkHitError(e,t),t}))))).catch((()=>{this.addPixel("games_from_bk_hit_failed")}))):this.addPixel("games_from_bk_no_hit_link")},this.checkCardInViewPort=e=>{if(!e)return!1;const t=e.getBoundingClientRect(),a=window.document.body.getBoundingClientRect();return t.top>a.top&&t.bottom<a.bottom&&t.left>a.left&&t.right<a.right},this.setGameCardRefWithoutOnRef=e=>{const{game:t}=this.props,{abt:a}=this.context;e&&!this.state.gameCardRef&&this.setState({gameCardRef:e}),(0,S.Ts)(a.flags)&&t.source===re.yH&&this.checkCardInViewPort(e)&&this.hitBkVisibilityLinks()},this.getHandleHover=e=>()=>{var t,a,r,s,n;const{game:o,onTapHoverCapture:i}=this.props;(this.isExpandingThumbnailEnabled||i)&&(null==(t=this.props.isUserScrolling)?void 0:t.current)&&!0===e||(this.setState({hover:e}),e?null==(r=(a=this.props).onHover)||r.call(a,o):null==(n=(s=this.props).onUnhover)||n.call(s,o))},this.handleExpandingThumbShow=()=>{this.sendClickDaemonLog("expanding_thumb_show")},this.handleExpandingThumbHide=e=>{this.sendClickDaemonLog("expanding_thumb_hide",{duration:e})},this.handleMouseMove=()=>{this.state.showExpandingThumbnail||this.state.hover||this.handleHoverOn()},this.handleTapOut=e=>{this.state.hoverTs!==e.timeStamp&&(this.setState({hover:!1}),window.removeEventListener("touchstart",this.handleTapOut))},this.handleTapOver=e=>{this.props.onTapHoverCapture||(this.state.hover?e.stopPropagation():(this.setState({hover:!0,hoverTs:e.timeStamp}),window.addEventListener("touchstart",this.handleTapOut,{passive:!0})))},this.handleTapOverCapture=()=>{const{game:e,isUserScrolling:t,onTapHoverCapture:a,onTapUnhoverCapture:r,forceHover:s}=this.props;a&&((null==t?void 0:t.current)||(s?null==a||a(e):this.state.hover||(this.setState({hover:!0}),null==a||a(e)),this.tapOverCaptureTimeoutId&&clearTimeout(this.tapOverCaptureTimeoutId),this.tapOverCaptureTimeoutId=setTimeout((()=>{this.tapOverCaptureTimeoutId=null,this.setState({hover:!1}),null==r||r(e)}),10*se.WT)))},this.handleClick=e=>{const t=e.target;let a;a=(null==t?void 0:t.classList.contains(ye(v.V.gameInfo)))?Z.a$.INFO:(null==t?void 0:t.classList.contains(ye("title")))?Z.a$.TITLE:t.closest(".expanding-thumb__info")?Z.a$.EXPANDING_THUMB_INFO:t.closest(".expanding-thumb__button")?Z.a$.EXPANDING_THUMB_BUTTON:t.closest(".expanding-thumb__video")?Z.a$.EXPANDING_THUMB_VIDEO:t.closest(".expanding-thumb__header")?Z.a$.EXPANDING_THUMB_HEADER:t.closest(".expanding-thumb__description")?Z.a$.EXPANDING_THUMB_DESCRIPTION:t.closest(".expanding-thumb")?Z.a$.EXPANDING_THUMB:"number"==typeof this.props.moreGamesCount?Z.a$.SHOW_MORE:Z.a$.CARD;const r=this.sendClickDaemonLog(Y.zx.CLICK,{clickElement:a});this.handleHoverOff();const{appID:s,click_link:n}=this.props.game;n&&fetch(n).then((e=>{if(200!==e.status)throw new Error(`Game click_link fetch return ${e.status}`)})).catch((e=>{(0,ee.H)({prefix:"GameCard",block:ne.W.CATALOG,message:"Failed to fetch click link",additional:{clickLink:n}},e)})),this.props.onClick&&this.props.onClick(e,s,r)},this.hideExpandingThumb=()=>{this.setState({showExpandingThumbnail:!1})},this.getStaticRtxParams=()=>{const{game:e,listType:t,listCategory:a,line:r,size:s,currentTab:n,row:o,column:i,hasRecentGames:l}=this.props,{categoryNames:d}=this,{categoryIDs:c,title:h,appID:u,row:p=o,column:m=i,source:v}=e,{deviceType:g,platform:f,rtxReqid:y}=this.context;return{clientDeviceType:g,column:m,deviceType:g,game:{appID:u,id:String(u),categoriesNames:d,categoryIDs:c,title:h},line:r+(n===re.zW?0:1+Number(l)),listType:t,listCategory:a,platform:f,row:"number"==typeof p?p+Number(l):void 0,rtxReqid:y,size:s,tabCategory:n,type:le.SS.GAME,videoCard:this.hasVideo,source:v}},this.sendShowParams=({firstScreen:e,container:t})=>{this.setState({firstScreen:e},(()=>{this.props.withoutLogging||((0,j.yO)({appID:this.props.game.appID,baseUrl:this.context.baseUrl,recommenderApiUrl:this.context.recommenderApiUrl}),this.sendClickDaemonLog(Y.zx.SHOW),this.sendParams({name:E.fl.show},t,e))}))},this.sendClickParams=({container:e})=>{(0,Q.D)((()=>this.sendParams({name:E.fl.click},e)))},this.gameOpened=()=>{const{game:e,onGameOpen:t}=this.props;(0,Q.D)((()=>{null==t||t(e.appID)}))};const{size:a,forceHover:r,listType:s}=e,{uatraits:n}=this.context,o=(null==n?void 0:n.isTablet)||(0,J.X)();this.expandingMode=(0,S.UZ)(t.abt.flags),this.isExpandingThumbnailEnabled=(s===re.co.SUGGESTED||s===re.co.CATEGORIZED)&&Boolean(this.expandingMode)&&!o,this.hasVideo=this.canShowVideoPreview(),this.categoryNames=this.getCategoryNames(),this.withOtherCoverDesign=a===re.xY.HIT||a===re.xY.RECOMMENDED_NEW||a===re.xY.ADAPTIVE_RECOMMENDED_NEW||a===re.xY.PREMIUM_BIG||a===re.xY.PROFILE_RECENT_GAMES||a===re.xY.TV,this.isAllGamesHub=a===re.xY.ALL_GAMES_DESKTOP||a===re.xY.ALL_GAMES_TABLET||a===re.xY.ALL_GAMES_MOBILE,this.handleHoverOn=this.getHandleHover(!0),this.handleHoverOff=this.getHandleHover(!1),this.state={firstScreen:!0,hover:Boolean(r),pixelCounters:[],showExpandingThumbnail:!1},this.redirParams=this.generateMetrikaParams()}get firstScreen(){var e;return(null!=(e=this.props.firstScreen)?e:this.state.firstScreen)?1:0}get checkAppIdBeforeSend(){return Array.isArray(window.gameIdsWithAlreadySentVisibilityLinks)}get bkPromoPlace(){return(0,D.VX)({chunk:this.props.line,listType:this.props.listType,currentTab:this.props.currentTab})}componentDidMount(){const{game:e}=this.props,{platform:t,abt:a}=this.context,r=(0,S.$9)(a.flags,O.Z.promoIntersactionObserverThreshold)||.9;if(e.source===re.yH){this.intersectionObserver=(0,X.V)("game-card",{root:null,rootMargin:"0px",threshold:r});const{isMobile:e,isDesktop:a,isTV:s}=(0,ce.AK)(t);(0,ee.Kz)("game_card_promo_render",1,{prefix:"GameCard",message:"bk_promo render",block:ne.W.CATALOG,additional:{isMobile:e,isDesktop:a,isTV:s},source:"catalog"})}}componentDidUpdate(e,t){var a;const{game:r,forceHover:s,listType:n,page:o}=this.props,{forceHover:i}=e,{gameCardRef:l}=this.state;if(e.page!==o&&this.redirParams&&(this.redirParams.page=o),s!==i&&this.setState({hover:null!==this.tapOverCaptureTimeoutId||Boolean(s)}),this.isExpandingThumbnailEnabled){if(!t.hover&&this.state.hover){const e=300;this.expandingThumbnailTimeoutId=setTimeout((()=>{this.setState({showExpandingThumbnail:!0})}),e)}t.hover&&!this.state.hover&&(this.expandingThumbnailTimeoutId&&clearTimeout(this.expandingThumbnailTimeoutId),this.setState({showExpandingThumbnail:!1}))}if(r.source===re.yH&&!this.isBannerCarouselObserverAssigned&&!this.hasBkVisibilityLinkHit&&this.isBkCounterAvailable&&l&&(this.addPixel("games_from_bk_observer_set"),this.isBannerCarouselObserverAssigned=!0,null==(a=this.intersectionObserver)||a.observe(l,this.createIntersectionCallback())),!t.hover&&this.state.hover){const{block:e,col:t,elem:a,page:s}=this.generateMetrikaParams();q.H.dispatch((0,U.b8)({appId:r.appID,block:e,col:t,elem:a,hasVideo:this.hasVideo,autoplay:Boolean(this.props.forceHover),item:"game",listType:n,page:s,requestId:r.requestId}))}t.hover&&!this.state.hover&&q.H.dispatch((0,U.nn)({appId:r.appID})),this.props.forceUnhoverRef&&(this.props.forceUnhoverRef.forceUnhover=()=>{this.setState({hover:!1}),this.tapOverCaptureTimeoutId&&(clearTimeout(this.tapOverCaptureTimeoutId),this.tapOverCaptureTimeoutId=null)})}addPixel(e){const{pixelCounters:t}=this.state;t.includes(e)||this.setState({pixelCounters:[...t,e]})}componentWillUnmount(){var e;null==(e=this.intersectionObserver)||e.unobserve(this.state.gameCardRef),this.expandingThumbnailTimeoutId&&clearTimeout(this.expandingThumbnailTimeoutId),this.tapOverCaptureTimeoutId&&clearTimeout(this.tapOverCaptureTimeoutId),this.props.forceUnhoverRef&&(this.props.forceUnhoverRef.forceUnhover=void 0)}shouldComponentUpdate(e,t){return(0,ae.V)(this,e,t,["location"])}get isBkCounterAvailable(){const{abt:e}=this.context;return e.flags[O.Z.bannerCarousel]||!1!==(0,S.RM)(e.flags,O.Z.bannerCarouselDirect)}getCategoryNames(){const{game:e}=this.props,{categoryIDs:t=[]}=e,{categoryDataMappedByID:a}=this.context;return t.map((e=>a[e]&&a[e].name)).filter(Boolean)}sendParams(e,t,a){this.props.withoutLogging||this.props.dispatch((0,j.tn)({staticParams:this.getStaticRtxParams(),action:e,blockSize:t&&{height:t.scrollHeight,width:t.scrollWidth},firstScreen:a}))}onBkHitError(e,t){var a;const{game:r,withoutLogging:s}=this.props;s||((0,ee.H)({prefix:"GameCard",block:ne.W.CATALOG,message:"Failed to hit visibility link",additional:{link:e}},t),null==(a=window.clickdaemonLog)||a.call(window,Y.zx.BK_HIT_COUNTER_ERROR,{app_id:r.appID,link:e}))}sendClickDaemonLog(e,t){var a,r;const{withoutLogging:s,game:n,size:o,carouselSize:i,moreGamesCount:l,navigator:d}=this.props;if(s)return;const c=this.generateMetrikaParams(),h={page:c.page,block:c.block,block_index:c.block_index,item:"number"==typeof l?"block":"game",wrapper:c.wrapper,row:c.row,col:c.col,app_id:n.appID,card:o,url:(0,oe.e)().href,rtx_reqid:this.context.rtxReqid||this.props.rtxReqid||"",first_screen:this.firstScreen?1:0,has_video:this.hasVideo,source:n.source,same_block_index:null!=(a=c.same_block_index)?a:0};if(n.requestId&&(h.request_id=n.requestId),n.gamesRequestId&&(h.games_request_id=n.gamesRequestId),i&&(h.carousel_size=i),"click"===e){const{multimorda:e}=this.context;(null==t?void 0:t.clickElement)===Z.a$.INFO?h.click_url=d.createHref(fe(fe({},location),(0,E.Rp)(Boolean(e),n.appID,location.search))):h.click_url=d.createHref({pathname:(0,de.TI)(this.context,{appID:n.appID})}),h.elem=null==t?void 0:t.clickElement}"expanding_thumb_hide"===e&&(h.duration=null==t?void 0:t.duration);const u=(0,V.L)();if(u){const{key:e,value:t}=u;h[e]=t}return null==(r=window.clickdaemonLog)||r.call(window,e,h),h}_renderCaption(){const{hideDescription:e,isCaption:t,withIcon:a,withShortDescription:r}=this.props;if(e||!t)return null;const s=ye("description",{"with-hyphens":this.withOtherCoverDesign||this.isAllGamesHub?"yes":"no"}),{disableGameOpeningOnClick:n,game:o,isErrorPage:l,listType:d,withoutLink:c}=this.props,h=`${ye("title")} ${ye("no-caption")}`;return i().createElement(ke,{className:s,disableGameOpeningOnClick:n,game:o,gameOpened:this.gameOpened,isErrorPage:l,listType:d,redirParams:this.redirParams,titleClassName:h,withIcon:a,withShortDescription:r,withoutLink:c})}getBadgeType(){const{promo:e,game:t,noStickyBadge:a}=this.props,{categoryNames:r}=this;return t.source===re.yH?E.nJ.PROMO_DIRECT:a?void 0:e?E.nJ.PROMO_EVENT:r.includes(re.xo)?E.nJ.NEW:void 0}get rowForMetrikaParams(){const{game:e,row:t}=this.props;return void 0===t?void 0!==e.row?e.row-(this.props.correctRow||0):0:t}generateMetrikaParams(){var e,t,a;const{game:r,hasRecentGamesNumber:s,line:n,loggingType:o,moreGamesCount:i,page:l}=this.props,d=this.props.listCategory&&`cat_${this.props.listCategory}`,c="profile"===l?"profile":d||this.props.listType||l;let h=n;this.props.listType!==re.co.PLAYED&&"profile"!==c&&(h+=Number(s));const u={block:null!=o?o:c,block_index:h,card:this.props.size,carousel_size:null!=(e=this.props.carouselSize)?e:void 0,col:(null!=(t=this.props.column)?t:r.column)||0,first_screen:this.firstScreen,page:l,rn:(0,ie.Bt)(),row:this.rowForMetrikaParams,rtx_reqid:this.context.rtxReqid||this.props.rtxReqid||"",same_block_index:null!=(a=this.props.sameBlockIndex)?a:0,wrapper:this.props.wrapperName,request_id:r.requestId};return r.gamesRequestId&&(u.games_request_id=r.gamesRequestId),"number"==typeof i&&(u.elem="more_games"),u}renderExpandingThumbnail(){const e="undefined"!=typeof window&&(0,oe.e)().hash.startsWith("#app=");if(!(this.isExpandingThumbnailEnabled&&!e&&this.state.showExpandingThumbnail&&this.state.gameCardRef))return null;const{carouselWrapperRef:t,containerRef:a,disableGameOpeningOnClick:r,game:s,gameVideoIdSuffix:n}=this.props;return i().createElement(y.i,{carouselWrapperRef:t,containerRef:a,disableGameOpeningOnClick:r,game:s,gameCardRef:this.state.gameCardRef,gameVideoProps:{videoIdSuffix:n},hideThumb:this.hideExpandingThumb,mode:this.expandingMode,redirParams:this.redirParams,onHide:this.handleExpandingThumbHide,onShow:this.handleExpandingThumbShow})}canShowVideoPreview(){var e,t;const{disableVideos:a,game:r,hideVideo:s,size:n}=this.props,o=null==(t=null==(e=r.media)?void 0:e.videos)?void 0:t[0];if(s||a||!o)return!1;const{width:i,height:l,previewUrl:d}=o;if((e=>e===re.xY.ACCENT_THUMB_HORIZONTAL||e===re.xY.ACCENT_THUMB_VERTICAL||e===re.xY.HIT)(n))return Boolean(d);const c=i>l||this.isExpandingThumbnailEnabled;return Boolean(d&&c&&(n===re.xY.TV||n===re.xY.L||n===re.xY.CATEGORIZED_NEW_L||n===re.xY.HIT||n===re.xY.RECOMMENDED_NEW||n===re.xY.ADAPTIVE_RECOMMENDED_NEW||n===re.xY.PREMIUM_BIG))}getAgeRating(){var e;const{hasAgeRating:t,game:a}=this.props;if(!t)return;const r=null==(e=a.features)?void 0:e.age_rating;return!r||(parseInt(r,10)||0)<16?void 0:r}renderBadges(){var e;const{game:t,hasRating:a,size:r,hasQualityScore:s}=this.props,n=this.getBadgeType(),o=(0,he.Um)(t.categoryIDs);return this.isAllGamesHub?null:i().createElement(p.Z,{ageRating:this.getAgeRating(),badgeTitle:null==(e=t.badge)?void 0:e.badgeTitle,badgeType:n,gqRating:s?t.gqRating:void 0,isWebApp:o,rating:a?t.rating:void 0,size:r})}renderTVBadges(){if(this.props.game.isRecentTVGame)return i().createElement(p.Z,{ageRating:this.getAgeRating(),badgeType:E.nJ.TV_RECENT,size:re.xY.TV})}renderVisibilityTracker(){const{game:e}=this.props,{abt:{flags:t}}=this.context;return(0,S.lt)(t)&&e.source===re.yH&&e.visibility_links?i().createElement(G,{checkViewport:(0,S.T4)(t),place:this.bkPromoPlace,visibilityLinks:e.visibility_links}):null}renderCardCover(){var e;const{accentThumbMode:t,disableGameOpeningOnClick:a,game:r,gameVideoIdSuffix:s,isErrorPage:n,listType:o,moreGamesCount:l,noAutoPlay:d,promo:h,size:u,withoutLink:p}=this.props,m="number"!=typeof l;if(this.hasVideo&&!this.isExpandingThumbnailEnabled)return i().createElement(f.Z,{alt:r.title,disableGameOpeningOnClick:a,game:r,hover:this.state.hover,isErrorPage:n,listType:o,media:r.media,mix:(0,K.E)(ye("video-card"),t===c.Vertical&&ye("video-card",{"vertical-shift":m}),ye(v.V.gameUrl)),noAutoPlay:d,redirParams:this.redirParams,size:u,useVideoThumbnailForCover:t===c.Vertical,videoIdSuffix:s});const g=null==(e=null==h?void 0:h.images)?void 0:e[0],y=g&&u===re.xY.L?{cover:g}:r.media;return i().createElement(Ee,{disableGameOpeningOnClick:a,game:r,gameOpened:this.gameOpened,isErrorPage:n,listType:o,media:y,redirParams:this.redirParams,size:u,withoutLink:p})}renderGameInfo(){const{disableGameOpeningOnClick:e,game:t,hasInfo:a,isErrorPage:r,listType:s,size:n,withoutLink:o}=this.props;return Boolean(!r&&!this.isAllGamesHub&&a&&!this.isExpandingThumbnailEnabled)?i().createElement(Se,{disableGameOpeningOnClick:e,game:t,isErrorPage:r,listType:s,redirParams:this.redirParams,withoutLink:o}):null}render(){var e;const{accentThumbMode:t,game:a,hasTransform:r,hideLabels:s,horizontalContainer:n,horizontalContainerRef:o,isHighlighted:l,listType:u,mix:p,moreGamesCount:v,scrollMode:g,size:f,useNewLogging:y}=this.props,b=null!=n?n:null==o?void 0:o.current,w=!this.isExpandingThumbnailEnabled&&!Boolean(t)&&(r||this.withOtherCoverDesign),k=`${ye({size:f,transform:w,type:u,highlighted:l,fullHeight:this.isExpandingThumbnailEnabled})} ${p}`,E=y?C:P,A="number"==typeof v;return i().createElement(E,{clickCallback:this.sendClickParams,horizontalContainer:b,mix:k,scrollMode:g,showCallback:this.sendShowParams,showCallbackTimeout:(0,S.l6)(this.context.abt.flags),testId:`GameCard-${a.appID}`,onClick:this.handleClick,onMouseEnter:this.handleHoverOn,onMouseLeave:this.handleHoverOff,onMouseMove:this.handleMouseMove,onRef:this.setGameCardRefWithoutOnRef,onTouchStart:this.handleTapOver,onTouchStartCapture:this.handleTapOverCapture},null==(e=this.state.pixelCounters)?void 0:e.map((e=>i().createElement(_,{event:e,key:e,once:!1,place:this.bkPromoPlace,type:"histogram",uniqId:"game_card_hit_link_counter",value:1}))),i().createElement("div",{className:ye("graphic",{size:f}),"data-nosnippet":"true",style:{background:t===c.Vertical?a.media.cover.mainColor:void 0}},this.renderCardCover(),A?i().createElement(m.Z,{gamesCount:v}):i().createElement(i().Fragment,null,this.renderBadges(),t===c.Horizontal&&i().createElement(d.H,{game:a}),t===c.Vertical&&i().createElement(h.P,{game:a}))),!A&&i().createElement(i().Fragment,null,!0!==s&&this._renderCaption(),this.renderGameInfo()),this.renderVisibilityTracker(),this.renderExpandingThumbnail())}}be.defaultProps={mix:"",listCategory:"",hasAgeRating:!0,hasInfo:!0,hasRating:!0,hasQualityScore:!0,hasTransform:!0,isErrorPage:!1},be.contextType=u.Z;const we=(0,r.E)((0,l.$j)((function(e,t){var a;const{isErrorPage:r,params:s,location:n}=t,o=(0,te.nU)(e,n,s),{recentGames:i,tagID:l}=e,d=null==(a=e.middleLayerInGameData)?void 0:a.appId,c=(0,te.mT)({currentTab:o,isErrorPage:r,recentGames:i,tagID:l});return{disableVideos:e.disableVideos,hasRecentGames:(s.currentTab,e.hasRecentGames),hasRecentGamesNumber:Number(Boolean(c)),currentTab:o,rtxReqid:e.rtxReqid,promo:(0,te.G1)(e.promos,t.game.appID),page:(0,te.L8)({currentTab:o,tagID:l,isErrorPage:r,middleLayerAppId:d})}}))(be)),ke=i().memo((e=>i().createElement("div",{className:e.className},i().createElement(v.y,{disableGameOpeningOnClick:e.disableGameOpeningOnClick,game:e.game,ignoresTvNavigation:!0,infoPage:!1,isErrorPage:e.isErrorPage,key:`${e.game.appID}-description`,listType:e.listType,mixElem:ye(v.V.gameUrl,{"contains-image":!1}),redirParams:e.redirParams,withoutLink:e.withoutLink,onClick:e.gameOpened},e.withIcon&&i().createElement(g.Z,{media:e.game.media,mix:ye("icon"),size:re.xY.SIZE_144}),i().createElement("span",{className:e.titleClassName,title:e.game.title},e.game.title),e.withShortDescription&&i().createElement("p",{className:ye("short-description")},e.game.shortDescription))))),Ee=i().memo((e=>i().createElement(v.y,{disableGameOpeningOnClick:e.disableGameOpeningOnClick,game:e.game,ignoresTvNavigation:!1,infoPage:!1,isErrorPage:e.isErrorPage,key:`${e.game.appID}-cover`,listType:e.listType,mixElem:ye(v.V.gameUrl,{"contains-image":!0}),redirParams:e.redirParams,withoutLink:e.withoutLink,onClick:e.gameOpened},i().createElement(g.Z,{alt:e.game.title,media:e.media,mix:ye("image"),size:e.size})))),Se=i().memo((e=>i().createElement(v.y,{disableGameOpeningOnClick:e.disableGameOpeningOnClick,game:e.game,ignoresTvNavigation:!1,infoPage:!0,isErrorPage:e.isErrorPage,key:`${e.game.appID}-info`,listType:e.listType,mixElem:ye(v.V.gameInfo,{"contains-image":!1}),redirParams:e.redirParams,withoutLink:e.withoutLink})))},96763:(e,t,a)=>{a.d(t,{Z:()=>u});var r=a(63904),s=a.n(r),n=a(87363),o=a.n(n),i=a(45331),l=a(68712),d=a(60405);const c=s().with("game-categories");class h extends n.Component{render(){const{categoryDataMappedByID:e}=this.context,{categoryIDs:t,mix:a="",withLink:r=!0,withIcon:s=!0}=this.props;return o().createElement("ul",{className:`${c()} ${a}`},t.map((t=>{const a=e[t];return a?o().createElement("li",{className:c("category"),key:a.name},o().createElement(l.Z,{name:a.name,title:a.title,type:d.q.CLEAR,withIcon:s,withLink:r})):null})))}}h.contextType=i.Z;const u=h},1589:(e,t,a)=>{a.d(t,{Z:()=>Ge});var r=a(81517),s=a(59303),n=a(10576),o=a(84819),i=a(63904),l=a.n(i),d=a(87363),c=a.n(d),h=a(45112),u=a(90543),p=Object.defineProperty,m=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=(e,t,a)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const y={waterfall:[]},b=(0,d.createContext)(y),w=(0,d.createContext)((e=>e)),k=()=>(0,d.useContext)(b);function E(e){return t=>{const[a,r]=(0,d.useReducer)(u.Z,y);return c().createElement(b.Provider,{value:a},c().createElement(w.Provider,{value:r},c().createElement(e,((e,t)=>{for(var a in t||(t={}))v.call(t,a)&&f(e,a,t[a]);if(m)for(var a of m(t))g.call(t,a)&&f(e,a,t[a]);return e})({},t))))}}class S extends Error{constructor(){super("Slot is empty.")}}var A=a(57745),I=Object.defineProperty,P=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,R=(e,t,a)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;function D(e){return t=>{const a=(0,A.HX)(),r=(0,d.useContext)(w);return(0,d.useEffect)((()=>{var e;const t=null==(e=a.splashAdv)?void 0:e.common.waterfall;t&&r({waterfall:t})}),[a,a.splashAdv,r]),c().createElement(e,((e,t)=>{for(var a in t||(t={}))T.call(t,a)&&R(e,a,t[a]);if(P)for(var a of P(t))C.call(t,a)&&R(e,a,t[a]);return e})({},t))}}var O=a(35742);function L({blockNumber:e,waterfallItem:t}){var a;return(0,O.tq)(t)?null==(a=t.blockIds[e])?void 0:a.blockId:"unknown"}const _=[300,250],x=l().with("splash-adv-block"),N=(0,d.forwardRef)((({blockNumber:e,provider:t,waterfallItem:a,onRequest:r,onResponse:s,onShow:n,onFailed:o,onError:i},l)=>{const h="splash_adv_block_"+e;return(0,d.useEffect)((()=>{var l,d,c;l=void 0,d=null,c=function*(){if(a&&t)try{let o;if((0,A.oX)(a)){const s=t,n=L({waterfallItem:a,blockNumber:e});o=yield s.createSlot({blockId:n,divId:h,size:_}),null==r||r({slot:o},{payloadAdBlockId:o.googleSlot.getAdUnitPath()})}else if((0,A.yi)(a)){const s=t,n=L({waterfallItem:a,blockNumber:e});o=yield s.createSlot({adFormat:"fluid",blockId:n,clientId:a.clientId,divId:h,height:_[1],maxHeight:_[1],width:_[0]}),null==r||r({slot:o},{payloadAdBlockId:n})}const{isEmpty:i}=yield t.preloadSlot({slot:o});if(null==s||s({slot:o,isEmpty:i}),i)throw new S;yield t.showSlot(o),null==n||n({slot:o})}catch(e){null==i||i({error:e,slot:null}),null==o||o(e)}},new Promise(((e,t)=>{var a=e=>{try{s(c.next(e))}catch(e){t(e)}},r=e=>{try{s(c.throw(e))}catch(e){t(e)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,r);s((c=c.apply(l,d)).next())}))}),[e,h,o,i,r,s,n,t,a]),c().createElement("div",{className:`${x({gpt:!0})}`,id:h})}));var B=a(62011),M=a(45331),$=a(15771),F=a(90380);const H=l().with("splash-adv-block"),W=(0,d.forwardRef)((({blockNumber:e,provider:t,waterfallItem:a,onRequest:r,onResponse:s,onShow:n,onFailed:o,onError:i,location:l,flags:h},u)=>{const p="splash_adv_block_"+e;return(0,d.useEffect)((()=>{var d,c,u;d=void 0,c=null,u=function*(){var d;if(!a)return;const c=t,u=L({waterfallItem:a,blockNumber:e});try{const e=yield c.createSlot({blockId:u,divId:p,location:l,darkTheme:null!=(d=(0,$.RM)(h,F.Z.advGameLoaderDarkAdvTheme))&&d});null==r||r({slot:e},{payloadAdBlockId:e.blockId});const{slot:t,isEmpty:a}=yield c.preloadSlot({slot:e,flags:h});if(null==s||s({slot:t,isEmpty:a}),a)throw new S;yield c.showSlot(t),null==n||n({slot:t})}catch(e){null==i||i({error:e,slot:null}),null==o||o({error:e})}},new Promise(((e,t)=>{var a=e=>{try{s(u.next(e))}catch(e){t(e)}},r=e=>{try{s(u.throw(e))}catch(e){t(e)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,r);s((u=u.apply(d,c)).next())}))}),[e,p,h,r,s,n,i,o,l,t,a]),c().createElement("div",{className:H({rsya:!0}),id:p})})),G=(0,d.memo)((0,B.Z)(W,M.Z,{flags:e=>e.abt.flags,location:e=>e.location}));var Z=Object.defineProperty,j=Object.defineProperties,U=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,K=(e,t,a)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Y=(e,t)=>{for(var a in t||(t={}))z.call(t,a)&&K(e,a,t[a]);if(q)for(var a of q(t))V.call(t,a)&&K(e,a,t[a]);return e},X=(e,t)=>j(e,U(t));const J=(0,d.forwardRef)(((e,t)=>{var a;switch(null==(a=e.provider)?void 0:a.providerName){case O.oO.YandexBlock:return c().createElement(G,X(Y({},e),{ref:t}));case O.oO.GoogleBlock:case O.oO.AdsenseResponsive:return c().createElement(N,X(Y({},e),{ref:t}));default:return console.error("Unknown provider"),null}}));var Q=a(13547),ee=a(98816),te=a(51290),ae=a(97553);const re=l().with("splash-adv-adaptive"),se=E(D((({onAdvLoadingFinished:e,onAdvShowed:t})=>{const a=k(),r=(0,d.useMemo)((()=>new te.U({tag:ee.$H.SPLASH})),[]),s=(0,d.useMemo)((()=>a.waterfall),[a]),[n,o]=(0,d.useState)(!1);(0,d.useMemo)((()=>{var e,t;s.length&&"undefined"!=typeof window&&r.tryOpen({reason:ae.p_.ONSPOT,provider:null!=(t=null==(e=s[0])?void 0:e.provider)?t:"none"})}),[r,s]);const i=(0,d.useCallback)(((e,t)=>{const a=L({waterfallItem:e,blockNumber:0});if(t){const t=s.indexOf(e);r.waterfall({advBlockId:a,provider:e.provider,depth:t,reason:ae.p_.WATERFALL})}else r.demand({advBlockId:a,provider:e.provider})}),[r,s]),l=(0,d.useCallback)((()=>{e(0),t(),o(!0)}),[e,t]),h=(0,d.useCallback)((({error:e})=>{e instanceof S||r.error(e.message)}),[r]),u=(0,d.useCallback)(((e,{payloadAdBlockId:t})=>{r.request({advBlockId:t})}),[r]),p=(0,d.useCallback)((({isEmpty:t})=>{t?r.responseEmpty():(r.response(),e(1))}),[r,e]),m=(0,d.useCallback)((()=>{r.show(),t()}),[r,t]);return c().createElement("div",{className:re({failed:n})},c().createElement(Q.Z,{waterfallList:s,onError:h,onRequest:u,onResponse:p,onShow:m,onWaterfallFailed:l,onWaterfallNext:i},c().createElement(J,{blockNumber:0})))}))),ne=l().with("splash-adv"),oe=({blockNumber:e,blocksCount:t,onAdvBlockLoadingFinished:a,onAdvShowed:r})=>{const s=k(),n=(0,d.useMemo)((()=>new te.U({tag:ee.$H.SPLASH,blocks_count:t,block_number:e})),[t,e]),o=(0,d.useMemo)((()=>s.waterfall),[s]),[i,l]=(0,d.useState)(!1);(0,d.useMemo)((()=>{var e,t;o.length&&"undefined"!=typeof window&&n.tryOpen({reason:ae.p_.ONSPOT,provider:null!=(t=null==(e=o[0])?void 0:e.provider)?t:"none"})}),[n,o]);const h=(0,d.useCallback)(((t,a)=>{const r=L({waterfallItem:t,blockNumber:e});if(a){const e=o.indexOf(t);n.waterfall({advBlockId:r,provider:t.provider,depth:e,reason:ae.p_.WATERFALL})}else n.demand({advBlockId:r,provider:t.provider})}),[e,n,o]),u=(0,d.useCallback)((()=>{a(!1),r(!1),l(!0)}),[a,r]),p=(0,d.useCallback)((({error:e})=>{e instanceof S||n.error(e.message)}),[n]),m=(0,d.useCallback)(((e,{payloadAdBlockId:t})=>{n.request({advBlockId:t})}),[n]),v=(0,d.useCallback)((({isEmpty:e})=>{e?n.responseEmpty():(n.response(),a(!0))}),[n,a]),g=(0,d.useCallback)((()=>{n.show(),r(!0)}),[n,r]);return c().createElement("div",{className:ne("block-container",{failed:i})},c().createElement(Q.Z,{waterfallList:o,onError:p,onRequest:m,onResponse:v,onShow:g,onWaterfallFailed:u,onWaterfallNext:h},c().createElement(J,{blockNumber:e})))};var ie=a(67471);const le=({blockWidth:e,maxBlocksCount:t,gap:a})=>{if("undefined"==typeof window)return t;const r=(0,ie.bY)().innerWidth;let s=Math.floor(r/e);if(s<=1)return 1;return s*e+a*(s-1)>r&&s--,Math.min(s,t)},de=l().with("splash-adv"),ce=E(D((({onAdvLoadingFinished:e,onAdvShowed:t})=>{const a=(0,d.useRef)([]),r=(0,d.useRef)([]),s=(0,d.useMemo)((()=>new Array(le({maxBlocksCount:3,blockWidth:300,gap:15})).fill(0)),[]),n=(0,d.useCallback)((t=>{a.current.push(t),a.current.length>=s.length&&e(a.current.filter((e=>e)).length)}),[s.length,a,e]),o=(0,d.useCallback)((e=>{r.current.push(e),r.current.length>=s.length&&t()}),[s.length,t]);return c().createElement("div",{className:de()},s.map(((e,t)=>c().createElement(oe,{blockNumber:t,blocksCount:s.length,key:t,onAdvBlockLoadingFinished:n,onAdvShowed:o}))))}))),he=l().with("fake-splash-adv"),ue=({blocksCount:e})=>{const t=(0,d.useMemo)((()=>new Array(e).fill(1)),[e]);return c().createElement("div",{className:he()},t.map(((e,t)=>c().createElement("div",{className:he("block",{adaptive:(0,o.v_)({on:"adv_splash.yandex_adaptive"})}),key:t}))))};var pe=a(73694),me=a(70776),ve=a(40184),ge=a(11324),fe=a(68199),ye=a(41811),be=Object.defineProperty,we=Object.getOwnPropertySymbols,ke=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable,Se=(e,t,a)=>t in e?be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const Ae=l().with("preloading-content"),Ie=({onClick:e,iconSize:t})=>{var a;const r=(0,ve.b)(),{playPageData:s,isSlowCountry:n}=r,o=null==(a=s.gameData)?void 0:a.media,i=(0,d.useRef)(null),[l]=(0,me.h)(i,"splash-screen");if(!o)return c().createElement(pe.y,{size:46,spinning:!0,view:"default"});const h=n?ye.xY.SIZE_84_LOW:t||ye.xY.M,u=(0,ge.Jn)(o,((e,t)=>{for(var a in t||(t={}))ke.call(t,a)&&Se(e,a,t[a]);if(we)for(var a of we(t))Ee.call(t,a)&&Se(e,a,t[a]);return e})({size:h},(0,fe.R)(n)?{cdnUrl:r.cdnUrl}:{})),p="function"==typeof e;return c().createElement("img",{alt:s.gameTitle,className:Ae("game-icon",{clickable:p}),crossOrigin:"anonymous",fetchPriority:"high",loading:"eager",ref:i,src:u,style:{backgroundColor:(0,ge.jl)(o,{size:h})},title:s.gameTitle,onClick:e,onLoad:l})},Pe=l().with("play-button"),Te=({loaderVisible:e,onClick:t,text:a})=>c().createElement("div",{className:Pe({loading:e}),onClick:t},c().createElement("span",{className:Pe("text",{loading:e})},a));var Ce=a(30367),Re=a(97808),De=a(47484);const Oe=e=>new Promise((t=>e(t))),Le=()=>Oe(De.EE).then((()=>"waitTTI")),_e=e=>new Promise((t=>{const a=e=>{Ce.UD.includes(e.data.action)&&(Re.Z.offAllMessages("game-measuring",a),t(e.data.action))};e&&Le().then(t),Re.Z.onAllMessages("game-measuring",a)})),xe=e=>{return t=void 0,a=null,r=function*(){const t=Promise.race([Oe(De.UQ).then((()=>"waitAllTTI")),_e(e)]),[a]=yield Promise.all([t,Le()]);return a},new Promise(((e,s)=>{var n=e=>{try{i(r.next(e))}catch(e){s(e)}},o=e=>{try{i(r.throw(e))}catch(e){s(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);i((r=r.apply(t,a)).next())}));var t,a,r};var Ne=a(64295),Be=a(10739),Me=a(53603),$e=a(85467),Fe=a(73285),He=a(14228);a(33777);const We=l().with("adv-game-loader"),Ge=()=>{const{abt:{flags:e},playPageData:{gameInfo:{title:t}}}=(0,ve.b)(),a=(0,$e.T)(),{setIsReady:i}=(0,Me.s)(),{hideGameLoaderCallback:l}=(0,Ne.p)(),u=(0,d.useRef)(null),[p,m]=(0,d.useState)({resultReceived:!1,enabled:!1}),[v,g]=(0,d.useState)(""),[f,y]=(0,d.useState)(!1),[b,w]=(0,d.useState)(0),[k,E]=(0,d.useState)(!1),[S,A]=(0,d.useState)(!1),[I,P]=(0,d.useState)(!1),[T,C]=(0,d.useState)(!0),R=ye.xY.ADV_LOADER_DESKTOP,D=(0,d.useMemo)((()=>Boolean((0,$.RM)(e,F.Z.advGameLoaderStayOnLoad)||!p.resultReceived||p.enabled)),[e,p.enabled,p.resultReceived]),O=(0,d.useMemo)((()=>Boolean(D&&(f&&v||I))),[f,v,I,D]),L=(0,d.useMemo)((()=>a(O?"splash-screen.play":"splash-screen.loading")),[a,O]),_=(0,d.useCallback)((()=>{Re.Z.post((0,r.bS)({actionSource:s.EO.PlayButton,permission:n.aR.ALLOW}))}),[]),x=(0,d.useCallback)((e=>{Re.Z.post({type:"splash",action:"set-was-closed"}),Re.Z.post({type:"document-events",action:"hide-splash-screen"}),l(e),i(!0),C(!1),(0,Be.fX)()}),[l,i]),N=(0,d.useCallback)((()=>{O&&(_(),x("play click"))}),[_,x,O]),B=(0,d.useCallback)((e=>{0!==e?(w(e),window.setTimeout((()=>{E(!0)}),700)):y(!0)}),[]),M=(0,d.useCallback)((()=>{A(!0),window.setTimeout((()=>{y(!0)}),Ce.PJ)}),[]);return(0,h.qR)((()=>(xe().then((e=>g(e))),(0,He.y)().then((e=>m({resultReceived:!0,enabled:e}))),u.current=window.setTimeout((()=>P(!0)),Ce.v4),()=>{u.current&&clearTimeout(u.current)}))),(0,d.useEffect)((()=>{if(!T)return;const e=(({advLoaded:e,gameLoadedReason:t,hideTimeoutFinished:a,playButtonExists:r})=>a?"timeout":!r&&t&&e?t:null)({advLoaded:f,gameLoadedReason:v,hideTimeoutFinished:I,playButtonExists:D});!e||"timeout"===e&&D||x(e)}),[f,v,x,I,T,D]),T?c().createElement("div",{className:We(),"data-type":"game-loader"},c().createElement("div",{className:We("splash-adv-container",{"adv-showed":Boolean(k)})},(0,o.v_)({on:"adv_splash.yandex_adaptive"})?c().createElement(se,{onAdvLoadingFinished:B,onAdvShowed:M}):c().createElement(ce,{onAdvLoadingFinished:B,onAdvShowed:M})),c().createElement("div",{className:We("fake-adv-container",{"adv-loaded":Boolean(b),"adv-showed":Boolean(k&&S)})},b>0&&c().createElement(ue,{blocksCount:b})),c().createElement("div",{className:We("preloading-content-container",{"adv-loaded":Boolean(b),"adv-failed":(I||f)&&!b,"game-loaded":O,"guard-enabled":p.enabled})},c().createElement(Ie,{iconSize:R,onClick:O?N:void 0}),c().createElement("span",{className:We("preloading-content-title")},(0,Fe.T)(t))),c().createElement("div",{className:We("play-button-container",{"adv-loaded":Boolean(b),"adv-failed":(I||f)&&!b})},c().createElement(Te,{loaderVisible:!O,text:L,onClick:N}),c().createElement("div",{className:We("guard-text-container",{hidden:!p.enabled})},c().createElement("div",{className:We("guard-text")},a("guard.legal.text.v3"),c().createElement("a",{href:a("guard.license.link.href"),target:"_blank"},a("guard.license.link.text")))))):null}},30367:(e,t,a)=>{a.d(t,{AK:()=>l,NS:()=>n,PJ:()=>c,UD:()=>o,lt:()=>i,v4:()=>d});var r=a(10719),s=a(40656);r.ur.GameReady;const n={"adv-show-fullscreen":{messageType:"adv-manager",hideReason:"advertisement"},[r.ur.GameReady]:{messageType:"game-measuring",hideReason:"gameReady"}},o=[r.ur.GameInit,r.ur.GameReady,r.ur.GameReadyForce],i=()=>["adv-manager","game-measuring"],l=()=>["adv-show-fullscreen",r.ur.GameReady],d=10*s.WT,c=3*s.WT},61560:(e,t,a)=>{a.d(t,{Z:()=>z});var r=a(10719),s=a(63904),n=a.n(s),o=a(87363),i=a.n(o),l=a(30367),d=a(38096),c=a(40562),h=a(84819),u=a(73694),p=a(45112),m=a(40656);const v=n().with("preload-logo"),g=2*m.WT,f=({onClick:e,onEnded:t})=>((0,p.qR)((()=>{window.setTimeout((()=>{null==t||t()}),g)})),i().createElement("div",{className:"phone"},i().createElement("div",{className:v(),onClick:e},i().createElement("div",{className:v("container")},i().createElement("div",{className:v("yandex")}),i().createElement("div",{className:v("hole")},i().createElement("div",{className:v("hole-circle")}),i().createElement("div",{className:v("gamepad")})),i().createElement("div",{className:v("games")})))));var y=a(40184),b=a(11324),w=a(68199),k=a(45583);var E=a(41811),S=Object.defineProperty,A=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,T=(e,t,a)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const C=n().with("preloading-video-content"),R=({iconSize:e,onClick:t,onLoad:a})=>{var r;const{playPageData:s,isSlowCountry:n,cdnUrl:l}=(0,y.b)(),c=(0,o.useRef)(null),{preloadVideoUrl:h}=(0,d.getDomainConfig)(),[m,v]=(0,o.useState)(!1),[g,S]=(0,o.useState)(!1),{isSafari:R}=(0,y.b)(),D=null==(r=s.gameData)?void 0:r.media,O=(0,o.useRef)(null),L=n?E.xY.SIZE_84_LOW:e||E.xY.M,_=(0,o.useCallback)((()=>S(!0)),[]);(0,p.qR)((()=>{if(!(c.current instanceof HTMLVideoElement))return void v(!0);const e=c.current,t=window.setTimeout((()=>{v(!0)}),700),a=R?null==h?void 0:h.replace(".webm",".mp4"):h;(0,k.l)(e,((e,t="https://yastatic.net/s3")=>e.replace("%CDN_URL%",t))(a||"",l),(()=>m?Promise.resolve():(window.clearTimeout(t),e.play())))}));const x=D?(0,b.Jn)(D,((e,t)=>{for(var a in t||(t={}))I.call(t,a)&&T(e,a,t[a]);if(A)for(var a of A(t))P.call(t,a)&&T(e,a,t[a]);return e})({size:L},(0,w.R)(n)?{cdnUrl:l}:{})):void 0;return g?i().createElement("div",{className:C()},i().createElement("div",{className:C("aura-wrapper")},i().createElement("div",{className:C("aura")})),i().createElement("div",{className:C("icon-wrapper")},i().createElement("div",{className:C("img-wrapper",{animation:Boolean(D)})},D?i().createElement("img",{alt:s.gameTitle,className:C("game-icon",{clickable:Boolean(t)}),crossOrigin:"anonymous",fetchPriority:"high",loading:"eager",ref:O,src:x,title:s.gameTitle,onClick:t,onLoad:a}):i().createElement("div",{className:C("img-stub")}),i().createElement(u.y,{className:C("spin"),size:46,spinning:!0,thickness:"bold",view:"default"})),i().createElement("div",{className:C("text")},s.gameInfo.title))):i().createElement("div",{className:C()},m?i().createElement(f,{onEnded:_}):i().createElement("video",{className:C("preload-video",{isMobile:!1}),muted:!0,ref:c,onClick:t,onEnded:_}))};var D=a(70776),O=a(85467),L=Object.defineProperty,_=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,B=(e,t,a)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const M=n().with("preloading-content"),$=({onClick:e,iconSize:t,withBlur:a=!0})=>{var r;const s=(0,y.b)(),n=(0,O.T)()("common.loading"),{playPageData:l,isSlowCountry:p,cdnUrl:m,lang:v}=s,g=null==(r=l.gameData)?void 0:r.media,f=(0,o.useRef)(null),[k]=(0,D.h)(f,"splash-screen"),{preloadVideoUrl:S}=(0,d.getDomainConfig)(),A=Boolean((0,h.v_)({on:"show_preload_video"})&&S&&(0,c.K)(v)),I=p?E.xY.SIZE_84_LOW:t||E.xY.M,P=(0,b.Jn)(g||{},((e,t)=>{for(var a in t||(t={}))x.call(t,a)&&B(e,a,t[a]);if(_)for(var a of _(t))N.call(t,a)&&B(e,a,t[a]);return e})({size:I},(0,w.R)(p)?{cdnUrl:m}:{}));if(!g)return i().createElement(u.y,{size:46,spinning:!0,view:"default"});const T={filter:a?`drop-shadow(0px 0px 70px ${g.icon.mainColor})`:void 0,backgroundColor:(0,b.jl)(g,{size:I})};return i().createElement("div",{className:M()},A&&i().createElement(R,{onClick:e,onLoad:k}),!A&&i().createElement(i().Fragment,null,i().createElement("img",{alt:l.gameTitle,className:M("game-icon",{clickable:Boolean(e)}),crossOrigin:"anonymous",fetchPriority:"high",loading:"eager",ref:f,src:P,style:T,title:l.gameTitle,onClick:e,onLoad:k}),i().createElement("div",{className:M("text")},n)))};var F=a(64295),H=a(53603),W=a(97808),G=a(14228),Z=a(47484),j=a(15771),U=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const q=n().with("game-loader"),z=()=>{const e=(0,y.b)(),{abt:{flags:t},playPageData:a}=e,{setIsReady:s}=(0,H.s)(),[n,d]=(0,o.useState)(!1),[c,h]=(0,o.useState)(null),u=(0,o.useRef)(null),p=(0,o.useCallback)((()=>{h("click")}),[]),m=(0,j.Rg)(t),v=(0,o.useRef)(null),{hideGameLoaderCallback:g}=(0,F.p)(),f=(0,o.useCallback)((()=>U(void 0,null,(function*(){const e=new Promise((e=>U(void 0,null,(function*(){W.Z.onExternalMessage("game-measuring",(t=>{l.UD.includes(t.data.action)&&e(t.data.action)})),(0,Z.UQ)((()=>e("waitAllTTI"))),(yield(0,G.y)())&&(0,Z.EE)((()=>e("waitTTI")))})))),t=new Promise((e=>{(0,Z.EE)((()=>e("waitTTI")))})),[a]=yield Promise.all([e,t]);return a}))),[]);return(0,o.useEffect)((()=>{var e,t,a,s,n;const o=(0,l.AK)(),i=null==(n=null==(s=null==(a=null==(t=null==(e=window.earlyEvents)?void 0:e.messages)?void 0:t.find((e=>{var t,a;return o.includes(null==(a=null==(t=e.data)?void 0:t.originalEvent)?void 0:a.action)})))?void 0:a.data)?void 0:s.originalEvent)?void 0:n.action;i?h(l.NS[i].hideReason):o.includes(r.ur.GameReady)&&f().then((e=>{h(e)}))}),[f]),(0,o.useEffect)((()=>{if(!n){const e=(0,l.lt)(),t=(0,l.AK)(),a=e=>{const{action:a}=e.data;t.includes(a)&&h(l.NS[a].hideReason)};return W.Z.onAllMessages(e,a),()=>{v.current&&W.Z.offAllMessages(e,a)}}}),[n]),(0,o.useEffect)((()=>{n&&u.current&&clearTimeout(u.current)}),[n]),(0,o.useEffect)((()=>{u.current=setTimeout((()=>{h("timeout"),u.current=null}),l.v4)}),[a.gameInfo.appId]),(0,o.useEffect)((()=>{!v.current&&c&&(v.current=c,W.Z.post({type:"document-events",action:"hide-splash-screen"}),s(!0),setTimeout((()=>{d(!0),g(c)}),250))}),[c,t,s,g]),n?null:i().createElement("div",{className:q({hidden:Boolean(c),transparent:m}),"data-type":"game-loader",onClick:p},i().createElement($,null))}},64295:(e,t,a)=>{a.d(t,{p:()=>d});var r=a(87363);const s=e=>()=>e?Date.now()-e:null;var n=a(97808),o=a(47484),i=a(93298);const l=(0,i.M$)("SplashScreen",i.XG.Dev),d=()=>{const e=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(!i.HQ)return;e.current=Date.now();const t=s(e.current),a=e=>{l("onGameMeasuringEvent",e.data.action)};return n.Z.onExternalMessage("game-measuring",a),(0,o.EE)((()=>l("waitTTI",t()))),(0,o.UQ)((()=>l("waitAllTTI",t()))),()=>{n.Z.offInternalMessage("game-measuring",a)}}),[]),{mountedTime:e,hideGameLoaderCallback:t=>{const a=s(e.current)();l(`Splash screen hide by ${t}. elapsed time: ${a}`)}}}},59638:(e,t,a)=>{a.d(t,{Z:()=>w});var r=a(63904),s=a.n(r),n=a(87363),o=a.n(n),i=a(15227),l=a(13582),d=a(94671),c=a(41811),h=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=(e,t,a)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const y=s().with("game-video");class b extends o().PureComponent{constructor(){super(...arguments),this.getVideoPreviewUrl=()=>{var e,t,a,r;return(null==(r=null==(a=null==(e=this.props.game.media)?void 0:e.videos)?void 0:a[null!=(t=this.props.videoIndex)?t:0])?void 0:r.previewUrl)||""},this.createVideoId=e=>{var t;return`game-video-${e}${null!=(t=this.props.videoIdSuffix)?t:""}`}}render(){const e=this.props,{alt:t,media:a,mix:r,size:s=c.xY.M,skipPreview:n,useVideoThumbnailForCover:h}=e,b=((e,t)=>{var a={};for(var r in e)v.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&m)for(var r of m(e))t.indexOf(r)<0&&g.call(e,r)&&(a[r]=e[r]);return a})(e,["alt","media","mix","size","skipPreview","useVideoThumbnailForCover"]);return o().createElement(l.Z,(w=((e,t)=>{for(var a in t||(t={}))v.call(t,a)&&f(e,a,t[a]);if(m)for(var a of m(t))g.call(t,a)&&f(e,a,t[a]);return e})({},b),k={id:this.createVideoId(this.props.game.appID),mix:(0,d.E)(y(),r),previewUrl:this.getVideoPreviewUrl(),skipPoster:h},u(w,p(k))),!n&&o().createElement(i.Z,{alt:t,media:a,mix:`${y("video")} ${r}`,size:s,useVideoThumbnailForCover:h}));var w,k}}const w=b},14943:(e,t,a)=>{a.d(t,{Z:()=>c});var r=a(73694),s=a(63904),n=a.n(s),o=a(87363),i=a.n(o);const l=n().with("image");class d extends o.Component{constructor(e){super(e),this.imgRef=i().createRef(),this.onLoad=()=>{this.setState({status:"loaded"})},this.onError=()=>{this.setState({status:"error"})},this.state={status:e.disableSpinner?"loaded":"loading"}}componentDidMount(){var e;(null==(e=this.imgRef.current)?void 0:e.complete)&&"loaded"!==this.state.status&&this.onLoad()}componentDidUpdate(e){var t;this.props.src!==e.src&&this.setState({status:"loading"}),(null==(t=this.imgRef.current)?void 0:t.complete)&&"loaded"!==this.state.status&&this.onLoad()}render(){const e=`${l("",{state:this.state.status})} ${this.props.className}`.trim();return i().createElement("div",{className:e},i().createElement("img",{alt:this.props.alt||"",className:l("img"),crossOrigin:this.props.crossOrigin,ref:this.imgRef,src:this.props.src,title:this.props.title,onError:this.onError,onLoad:this.onLoad}),i().createElement(r.y,{position:"center",size:this.props.size,spinning:"loading"===this.state.status,view:"default"}))}}const c=d},1338:(e,t,a)=>{a.d(t,{O:()=>s});var r=a(87363);const s=(0,r.createContext)({clickDaemonParams:{},metrikaParams:{},sendClickDaemon:()=>{},sendMetrika:()=>{}})},65453:(e,t,a)=>{a.d(t,{E6:()=>s,Oe:()=>o,Tp:()=>n,XB:()=>r});var r=(e=>(e.DEBUG="debug",e.ERROR="error",e.INFO="info",e.WARN="warn",e))(r||{});const s=1e4,n=200,o=10},17431:(e,t,a)=>{a.d(t,{Z:()=>p});var r=a(58904),s=a(63904),n=a.n(s),o=a(87363),i=a.n(o),l=a(53726),d=a(59453),c=a(65453);const h=n().with("message-box");class u extends o.PureComponent{constructor(){super(...arguments),this.state={destroyed:!1,visible:!1},this.handleClick=()=>{var e,t;this.toggleVisibility(!1),null==(t=(e=this.props).onClick)||t.call(e)},this.onSnooze=()=>{var e,t;this.toggleVisibility(!1),null==(t=(e=this.props).onSnooze)||t.call(e)}}componentDidMount(){const{autohide:e}=this.props;this.openingTimer=window.setTimeout((()=>this.toggleVisibility(!0)),c.Oe),e&&(this.hidingTimer=window.setTimeout((()=>this.toggleVisibility(!1)),c.E6))}componentWillUnmount(){window.clearTimeout(this.openingTimer),this.hidingTimer&&window.clearTimeout(this.hidingTimer),this.destroyTimer&&window.clearTimeout(this.destroyTimer)}toggleVisibility(e){var t,a;this.setState({visible:e}),e||(null==(a=(t=this.props).onClose)||a.call(t),this.destroyTimer=window.setTimeout((()=>{this.setState({destroyed:!0})}),c.Tp))}renderSnoozeButton(){return this.props.onSnooze?i().createElement(r.z,{className:h("snooze"),rounded:!0,size:24,view:"secondary",onClick:this.onSnooze},"😴 ",i().createElement("span",{className:h("snooze-title")},this.props.getText("common.hide").toLowerCase())):null}renderCloseButton(){return this.props.withCloseButton?i().createElement(d.Z,{type:"popup",onClick:this.handleClick}):null}renderContent(){return i().createElement("div",{className:h("content"),onClick:this.handleClick},this.props.children)}render(){const{level:e=c.XB.INFO}=this.props,{destroyed:t,visible:a}=this.state;return t?null:i().createElement("div",{className:h({level:e,visible:a})},this.renderSnoozeButton(),this.renderCloseButton(),this.renderContent())}}const p=(0,l.$j)((function(e){return{getText:e.getText}}))(u)},80412:(e,t,a)=>{a.d(t,{Z:()=>I});var r=a(63904),s=a.n(r);var n=!1;if("undefined"!=typeof window){var o={get passive(){n=!0}};window.addEventListener("testPassive",null,o),window.removeEventListener("testPassive",null,o)}var i="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),l=[],d=!1,c=-1,h=void 0,u=void 0,p=void 0,m=function(e){return l.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))},v=function(e){var t=e||window.event;return!!m(t.target)||(t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1))},g=function(){void 0!==p&&(document.body.style.paddingRight=p,p=void 0),void 0!==h&&(document.body.style.overflow=h,h=void 0)},f=function(){if(void 0!==u){var e=-parseInt(document.body.style.top,10),t=-parseInt(document.body.style.left,10);document.body.style.position=u.position,document.body.style.top=u.top,document.body.style.left=u.left,window.scrollTo(t,e),u=void 0}},y=function(e,t){if(e){if(!l.some((function(t){return t.targetElement===e}))){var a={targetElement:e,options:t||{}};l=[].concat(function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(l),[a]),i?window.requestAnimationFrame((function(){if(void 0===u){u={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left};var e=window,t=e.scrollY,a=e.scrollX,r=e.innerHeight;document.body.style.position="fixed",document.body.style.top=-t,document.body.style.left=-a,setTimeout((function(){return window.requestAnimationFrame((function(){var e=r-window.innerHeight;e&&t>=r&&(document.body.style.top=-(t+e))}))}),300)}})):function(e){if(void 0===p){var t=!!e&&!0===e.reserveScrollBarGap,a=window.innerWidth-document.documentElement.clientWidth;if(t&&a>0){var r=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right"),10);p=document.body.style.paddingRight,document.body.style.paddingRight=r+a+"px"}}void 0===h&&(h=document.body.style.overflow,document.body.style.overflow="hidden")}(t),i&&(e.ontouchstart=function(e){1===e.targetTouches.length&&(c=e.targetTouches[0].clientY)},e.ontouchmove=function(t){1===t.targetTouches.length&&function(e,t){var a=e.targetTouches[0].clientY-c;!m(e.target)&&(t&&0===t.scrollTop&&a>0||function(e){return!!e&&e.scrollHeight-e.scrollTop<=e.clientHeight}(t)&&a<0?v(e):e.stopPropagation())}(t,e)},d||(document.addEventListener("touchmove",v,n?{passive:!1}:void 0),d=!0))}}else console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.")},b=a(87363),w=a.n(b),k=a(59453),E=a(27609);const S=s().with("modal-wrapper"),A=class e extends b.PureComponent{constructor(){super(...arguments),this.elementRef=w().createRef(),this.handleCloseButtonClick=()=>{this.props.onClose()},this.handleModalClick=e=>{this.props.closeByOuterClick&&e.target.classList.contains(S())&&this.props.onClose()}}componentDidMount(){null!==this.elementRef.current&&this.props.blockBodyScroll&&y(this.elementRef.current,{allowTouchMove:e=>{for(;e&&e!==document.body;){if(null!==e.getAttribute("data-body-scroll-lock-ignore"))return!0;if(!e.parentElement)return!1;e=e.parentElement}return!1},reserveScrollBarGap:!0})}componentWillUnmount(){var e;null!==this.elementRef.current&&this.props.blockBodyScroll&&((e=this.elementRef.current)?(l=l.filter((function(t){return t.targetElement!==e})),i&&(e.ontouchstart=null,e.ontouchmove=null,d&&0===l.length&&(document.removeEventListener("touchmove",v,n?{passive:!1}:void 0),d=!1)),i?f():g()):console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices."))}render(){const{centeredVertically:t,children:a,closeButtonColor:r,closeButtonType:s,cls:n="",containerRef:o,isAdaptive:i,style:l,testId:d}=this.props;let c=this.elementRef;return o&&(c=(0,E.l)(this.elementRef,o)),w().createElement("div",{className:`${S({"centered-vertically":t,adaptive:i})} ${n}`,"data-testid":d,ref:c,style:l,onClick:this.handleModalClick},w().createElement("div",{className:S("container")},"none"!==s&&w().createElement(k.Z,{color:r||"black",type:s||e.defaultProps.closeButtonType,onClick:this.handleCloseButtonClick}),a))}};A.defaultProps={blockBodyScroll:!0,centeredVertically:!0,closeButtonType:"popup",closeByOuterClick:!0,isAdaptive:!1};let I=A},23404:(e,t,a)=>{a.d(t,{Cn:()=>g,EC:()=>d,Iy:()=>u,Si:()=>c,Sk:()=>i,UG:()=>o,_u:()=>p,hL:()=>n,kn:()=>l,qS:()=>h,wt:()=>v,xd:()=>s,yt:()=>m});var r=a(5e4);const s={fullscreen:"fullscreen",desktop:"desktop"},n=15e3,o=15e3,i=3e4,l={countdown:"play-countdown",headerFix:"with-play-game-header-fix",modal:"play-modal",modalClose:"play-modal-close",modalFullscreen:"play-modal_fullscreen",modalInner:"play-modal__inner",modalVisible:"play-modal_visible",modalWithBlur:"play-modal_with-blur",modalWithHeader:"play-modal_with-header",noClickOverlay:"adv-no-click-overlay",yabroChromeLower79:"play-modal_yabro_chrome_lower_79"},d={start_fullscreen:"R-A-3462885-6",fullscreen:"R-A-3462885-2",rewarded:"R-A-3462885-1"},c="aab-adv_with_disable_adv_button",h="No adv to show now - it can happen sometimes\nTry reload page(Ctrl+F5) or open in different browser",u="No rewarded video to show now - it can happen sometimes\nTry reload page(Ctrl+F5) or open in different browser",p="Trouble with showing adv",m="Adv SDK error",v=[r.e.AdsenseResponsive,r.e.Google,r.e.GoogleInstream,r.e.GoogleManual,r.e.Native,r.e.Prebid,r.e.PrebidTGO,r.e.Yandex],g="adv_show_delay"},10739:(e,t,a)=>{a.d(t,{lu:()=>ne,KW:()=>ke,Sn:()=>Se,fl:()=>Ee,$3:()=>ee,ss:()=>le,qu:()=>V,tq:()=>ie,dh:()=>ce,mx:()=>de,el:()=>ge,TE:()=>he,zw:()=>ae,PS:()=>re,xK:()=>ve,uD:()=>ye,Ij:()=>me,un:()=>Ae,g5:()=>ue,ey:()=>K,SW:()=>te,R4:()=>Y,J4:()=>se,U2:()=>J,gp:()=>be,WL:()=>Q,HH:()=>pe,fX:()=>fe});var r=a(81517),s=a(1277),n=a(94199),o=(a(84819),a(23404)),i=a(54814),l=a(97808),d=Object.defineProperty,c=Object.defineProperties,h=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,v=(e,t,a)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,g=(e,t)=>{for(var a in t||(t={}))p.call(t,a)&&v(e,a,t[a]);if(u)for(var a of u(t))m.call(t,a)&&v(e,a,t[a]);return e},f=(e,t)=>c(e,h(t));function y(e){if(!(e instanceof Error))try{e=new Error(String(e))}catch(t){e=new Error("Unknown error object")}return f(g({},JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)))),{stack:e.stack,name:e.name})}const b={gamesApp:{worldWide:72e3,default:12e4},web:{worldWide:6e4,default:6e4}};var w=a(50042),k=a(42126),E=a(98816),S=a(76488),A=a(17061),I=a(34967),P=a(77901),T=a(37705),C=a(41811),R=a(93298),D=a(13377),O=a(15771),L=a(90380),_=a(49659),x=a(89592),N=a(29008),B=Object.defineProperty,M=Object.defineProperties,$=Object.getOwnPropertyDescriptors,F=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,G=(e,t,a)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Z=(e,t)=>{for(var a in t||(t={}))H.call(t,a)&&G(e,a,t[a]);if(F)for(var a of F(t))W.call(t,a)&&G(e,a,t[a]);return e},j=(e,t)=>M(e,$(t)),U=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const q=-90,z=90,V=(0,R.M$)("Adv manager",R.XG.Adv);function K(e){console.warn("There is no partnerID: partnerId provides only on link in console. If you opened link from console then accept agreement in admin panel"),(0,I.U4)({},{borrowParams:{advPartnerErrorData:{appId:e},errorText:"Empty partnerId"}})}function Y(){const e=(0,k.Z)({url:(0,_.e)().href,removed:["a_delay"]});window.history.replaceState(null,document.title,e)}function X(){V("sendAdvClickGoal"),(0,I.NF)({},x.Ji.ADV_CLICK,{advType:"game",sdkVersion:2})}function J(e,t){l.Z.post({type:"adv-debug-info",action:"set-debug-adv-block",data:{type:e,id:t}})}function Q(){l.Z.post({type:"adv-debug-info",action:"show-debug-info"})}function ee(e,t,a){var r;const n=null!=(r=(0,O.mn)(a,`adv-blocks:${t}`))?r:(0,O.mn)(a,"adv-blocks");if(!n||"object"!=typeof n)return function(e,t,a){var r;const s=a[`adv-block:${t}`]||a["adv-block"]||(null==(r=a["adv-exp"])?void 0:r[t]);if(!s||"object"!=typeof s)return e;if((0,T.H)({additional:{flagValue:s},message:'Deprecated "adv-block" flag'}),!s.fullscreen&&!s.fullscreen_landscape&&!s.rewarded)return(0,T.H)({block:D.W.ADV},new Error(`invalid adv experiment format, expected { fullscreen?: "R-I-12345", fullscreen_landscape?: "R-I-54321", rewarded?: "R-I-54321" } (at least one property), got:', ${s}`)),e;return Object.assign({},e,j(Z({},s),{desktop:s,mobile:s}))}(e,t,a);return n.desktop&&"object"==typeof n.desktop||n.mobile&&"object"==typeof n.mobile||n.native&&"object"==typeof n.native?(0,s.T)(e,n):((0,T.H)({block:D.W.ADV},new Error(`Invalid "adv-blocks" experiment format:', ${n}`)),e)}function te(e){if((0,P.qo)()){const t=e.style;t.width=`${window.innerWidth}px`,t.height=`${window.innerHeight}px`}const t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${t}px`);const a=window.pageYOffset;return window.scroll(0,0),a}function ae(){function e(){window.orientation===z?document.documentElement.style.removeProperty("--iphone-bangs-adv-padding-left"):document.documentElement.style.setProperty("--iphone-bangs-adv-padding-left","0"),window.orientation===q?document.documentElement.style.setProperty("--iphone-bangs-padding-right","1"):document.documentElement.style.setProperty("--iphone-bangs-padding-right","0")}e(),n.default.addChangeListener(e)}function re(){l.Z.post({type:"adv-debug-info",action:"hide-debug-info"})}function se(e,t){const a=t.querySelector(`.${e.modalContent}`);if(a){const e=a.firstElementChild;e&&e.addEventListener("click",X,!0)}}class ne extends Error{constructor(e,t={isEmpty:!1,isFinal:!1,wasShown:!1}){super(e),this.params=t}}function oe(e){try{return String(e.message||e).substring(0,100)}catch(e){}return""}function ie(e,t){return(...a)=>{try{if("function"!=typeof e)throw new Error("fn must be a function");return e(...a)}catch(e){(0,T.H)({block:D.W.ADV,additional:{origError:oe(e)},message:t},e)}}}function le(e){const{advElement:t,type:a,flags:r,appId:s,isIOS:n}=e,i=r[`no_click_${a}:${s}`]||r[`no_click_${a}`]||(n?100:0);if(!i)return;if(!t)return void(0,T.H)({block:D.W.ADV},new Error("Cannot place no click overlay - advElement is null"));const l=document.createElement("div");l.className=o.kn.noClickOverlay,t.appendChild(l),setTimeout((()=>{t.removeChild(l)}),i)}function de(e,t,a){const r=(0,O.$9)(t,L.Z.newAdvInterval);if("number"==typeof r)return r;return!S.XK&&parseInt(e||"0",10)||((s={withWorldWideAdv:Boolean(a),isGamesApp:(0,w.VP)()}).isGamesApp?s.withWorldWideAdv?b.gamesApp.worldWide:b.gamesApp.default:s.withWorldWideAdv?b.web.worldWide:b.web.default);var s}function ce(e){if(e){const t=parseInt(e,10)||0;if(t>0)return t}const t=(0,A.V)("utm_source");if(t){if(["adv","google","yandex"].includes(t))return C.JH}return 0}function he(e){return`play-modal_view-type_${e}`}function ue(e,t){const{additional:a,error:r,name:s,tag:n}=t;(0,T.H)({block:D.W.ADV,prefix:`${o.yt}: `,additional:{adv:j(Z({},a),{name:s,service:e.serviceName,tag:n})}},r)}function pe(){if(me())return;l.Z.post({type:"play-game-header",action:"show"});const e=document.querySelector(".header-container"),t=document.querySelector(".stack"),a=document.querySelector(".menu__overlay");e&&(e.style.display=""),a&&(a.style.top=""),t&&(t.style.top="")}function me(){return"no"===(0,A.V)("header")}function ve(){l.Z.post({type:"play-game-header",action:"hide"});const e=document.querySelector(".header-container"),t=document.querySelector(".stack"),a=document.querySelector(".menu__overlay");e&&(e.style.display="none"),a&&(a.style.top="0px"),t&&(t.style.top="0px")}function ge(e){return`${o.kn.modal}_${e}`}function fe(){V("show sticky banner"),l.Z.post({type:"sticky-banner",action:"show",data:{reason:"blur"}})}function ye(e,t,a){var r;const s=null!=(r=t.getTimeoutExtraTime(i.QA.ServiceInit,a))?r:0;let n=(0,O.$9)(e,L.Z.adScriptInitTimeout)||3500+s;const o=(0,O.$9)(e,`adv_${t.serviceName}_init_timeout`);return void 0!==o&&(n=o+s,s&&V(`Note: Service ${t.serviceName} added extra init timeout: ${s} (total: ${n})`)),n}function be(e,t,a,r){var s;const n=null!=(s=a.getTimeoutExtraTime(t===E.$H.INTERSTITIAL?i.QA.ShowFullscreen:i.QA.ShowRewarded,r))?s:0;let l=(t===E.$H.INTERSTITIAL?o.hL:o.UG)+n;const d=(0,O.$9)(e,`adv_${a.serviceName}_show_timeout`);return void 0!==d&&(l=d+n,n&&V(`Note: Service ${a.serviceName} added extra showAdv timeout: ${n} (total: ${l})`)),l}function we(e){l.Z.postToChild(e),l.Z.post(j(Z({},e),{action:`debug-action-${e.action}`}))}function ke(e,t){(0,O.bF)(t)&&e.addCallbacks({onOpen:()=>{V("hide sticky banner"),l.Z.post({type:"sticky-banner",action:"hide",data:{reason:"blur"}})},onClose:()=>{fe()}})}function Ee(e,t,a){return U(this,null,(function*(){if(t!==E.$H.REWARDED)return;const s=(0,N.AK)(a);if(!s.isAndroid||s.isStandalone)return;const o=yield l.Z.post(r.Vo.GetState()),{screenOrientationWasLocked:i}=o.data;if(i)return;const d=()=>{n.default.unlock().catch((()=>{}))};e.addCallbacks({onOpen:()=>{n.default.lock().catch((()=>{}))},onClose:d,onError:d})}))}function Se(e,t){switch(t){case E.$H.INTERSTITIAL:e.addCallbacks({onOpen:()=>we(r.fB.AdvCallbackOpen()),onClose:e=>l.Z.postToChild(r.fB.AdvCallbackClose({wasShown:e})),onError:e=>we(r.fB.AdvCallbackError({fromMethod:"showFullScreenAdv",error:y(e)})),onOffline:()=>we(r.fB.AdvCallbackOffline())});break;case E.$H.REWARDED:e.addCallbacks({onOpen:()=>we(r.fB.RewardedVideoCallbackOpen()),onRewarded:()=>we(r.fB.RewardedVideoCallbackRewarded()),onClose:()=>we(r.fB.RewardedVideoCallbackClose()),onError:e=>we(r.fB.RewardedVideoCallbackError({error:y(e),fromMethod:"onError"}))})}}function Ae(){return!1}},96981:(e,t,a)=>{a.d(t,{Z:()=>Rn});var r=a(63904),s=a.n(r),n=a(87363),o=a.n(n),i=a(45331),l=a(97808);const d=s().with("adv-debug-info");let c="",h="";class u extends i.P{constructor(e){super(e),this.switchDebugInfo=()=>{var e,t;const{isOverlayVisible:a}=this.state,{appId:r}=this.props;if(this.setState((e=>({isOverlayVisible:!e.isOverlayVisible}))),a)return;const s=[`Версия SDK: ${window.appData.version}`,`Реклама: ${c} - ${h}`,`Эксперименты: ${JSON.stringify(window.appData.abt.flags,null,2)}`,`UserAgent: ${navigator.userAgent}`,`AppID: ${r}`],n=`https://forms.yandex-team.ru/surveys/73978/?${[`answer_short_text_644835=${encodeURIComponent("Проблема с рекламой")}`,`answer_long_text_644836=${encodeURIComponent("\n\n===== отладочная информация:\n"+s.join("\n"))}`].join("&")}`,o=()=>{var e;const t="Логи метрики:\n\n"+(null==(e=window.metrikaLogs)?void 0:e.data.map((e=>`${e.type}${e.goal?` ${e.goal}`:""} - ${JSON.stringify(e.data)}`)).slice().reverse().join("\n\n"))||0;this.setState({metrikaLogsText:t}),navigator.clipboard.writeText(s.join("\n")+"\n\n"+t)};o(),window.metrikaLogs.onUpdate=o,null==(t=null==(e=null==window?void 0:window.Ya)?void 0:e.Rum)||t.logEventString("adv","butterfly manual report",{additional:s}),this.setState({logs:s,linkHref:n})},this.state={isVisible:!1,isOverlayVisible:!1,linkHref:"",logs:[],metrikaLogsText:""}}componentDidMount(){this.initMessaging()}initMessaging(){l.Z.onInternalMessage("adv-debug-info",(e=>{const{action:t}=e.data;switch(t){case"show-debug-info":this.setState({isVisible:!0});break;case"hide-debug-info":this.hide();break;case"set-debug-adv-block":c=e.data.data.type,h=e.data.data.id}}))}hide(){window.metrikaLogs.onUpdate=void 0,this.setState({isVisible:!1})}render(){const{logs:e,metrikaLogsText:t,isVisible:a,isOverlayVisible:r,linkHref:s}=this.state,{isDevFeaturesEnabled:n}=this.props;return n&&a?o().createElement("div",{className:d()},o().createElement("button",{className:d("button"),onClick:this.switchDebugInfo},"🐞"),r&&o().createElement("div",{className:d("overlay"),onClick:this.switchDebugInfo},o().createElement("div",{className:d("clipboard-notice")},"Данные скопированы в буфер обмена"),o().createElement("div",{className:d("data")},e.join("\n")),o().createElement("a",{href:s,target:"_blank"},"Тикет в StarTrek"),o().createElement("div",{className:d("metrika-logs")},t))):null}}const p=u;var m=a(14408),v=a(98816),g=a(81517),f=a(10719),y=a(26108),b=a(43506),w=a(35742),k=a(84819),E=a(58904),S=a(73694),A=a(14375),I=a(10739),P=a(40184),T=a(85467),C=a(94671),R=a(96952),D=a(909),O=a(15771);const L="FullscreenBlock-module__container--suKYF",_="FullscreenBlock-module__hidden--FjMwl",x="FullscreenBlock-module__touchControls--FJKug",N="FullscreenBlock-module__spinner--ZgJZq",B="FullscreenBlock-module__desktopClose--vu832",M="FullscreenBlock-module__block--rJxBU",$="FullscreenBlock-module__blockDefaultPaddings--PcHqu",F="FullscreenBlock-module__blockSmallPaddings--FtXVj",H="FullscreenBlock-module__blockNoPaddings--uTgyK",W="FullscreenBlock-module__placeholder--hKxU_",G="FullscreenBlock-module__adsenseDefaultStyles--V8RS4";var Z=Object.defineProperty,j=Object.defineProperties,U=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,K=(e,t,a)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Y=(e,t)=>{for(var a in t||(t={}))z.call(t,a)&&K(e,a,t[a]);if(q)for(var a of q(t))V.call(t,a)&&K(e,a,t[a]);return e},X=(e,t)=>j(e,U(t));const J="fullscreenBlock_container",Q="fullscreenBlock_block";function ee(e){return""===e?J:`${J}_${e}`}function te(e){return""===e?Q:`${Q}_${e}`}const ae={default:$,unset:H,small:F},re=({advManager:e})=>{var t,a,r,s;const i=(0,T.T)(),{abt:{flags:d}}=(0,P.b)(),c=(0,n.useMemo)((()=>({usePlaceholder:(0,O.Sf)(d),useLoader:(0,O.Z0)(d),controlsDelay:(0,O.sQ)(d)})),[d]),h=(0,n.useRef)([]),u=(0,n.useRef)(null),[p,m]=(0,n.useState)({isVisible:!1,loadedProviderBlock:null,showControls:!1,isHeaderEnabled:!(0,I.Ij)(),callbacks:{},visibleChange:!1}),[v,g]=(0,n.useState)([""]),[f,y]=(0,n.useState)(v[0]),b=(0,n.useCallback)((()=>{m((e=>X(Y({},e),{isVisible:!1,loadedProviderBlock:null,callbacks:{}})))}),[]),w=(0,n.useCallback)((()=>{var e,t;(0,A.D)(),null==(t=(e=p.callbacks).onClose)||t.call(e),b()}),[b,p.callbacks]),$=(0,n.useCallback)((e=>{"Escape"===e.key&&p.isVisible&&(0,R.D)((()=>{w()}))}),[p.isVisible,w]),F=(0,n.useCallback)(((e,t)=>{const{action:a,data:r}=e.data;switch(a){case"show":{const{onOpen:e,onClose:a}=r;m((t=>X(Y({},t),{isVisible:!0,visibleChange:!0,showControls:!1,callbacks:{onOpen:e,onClose:a}}))),t();break}case"show-block":{const{blockName:e}=r;y((()=>(t(),ee(e))));break}case"hide":const{blockName:e}=null!=r?r:{};if(e&&f!==ee(e))break;b();break;case"add-block":{const{blockName:e}=r;if(v.includes(e))return void t();g((a=>(h.current.push(t),[...a,e])));break}case"show-controls":m((e=>X(Y({},e),{showControls:!0})));break;case"is-visible":t({data:{isVisible:p.isVisible}});break;case"slot-loaded":m((e=>X(Y({},e),{loadedProviderBlock:r.blockName}))),t()}}),[v,f,b,p.isVisible]);(0,n.useEffect)((()=>(window.addEventListener("keydown",$),l.Z.onInternalMessage("adv-fullscreen-block",F),()=>{window.removeEventListener("keydown",$),l.Z.offInternalMessage("adv-fullscreen-block",F),u.current&&clearTimeout(u.current)})),[$,F]),(0,n.useEffect)((()=>{var e,t;p.isVisible&&p.visibleChange&&(null==(t=(e=p.callbacks).onOpen)||t.call(e),c.controlsDelay<1||(m(X(Y({},p),{showControls:!1,visibleChange:!1})),u.current=window.setTimeout((()=>{m((e=>X(Y({},e),{showControls:!0})))}),c.controlsDelay)))}),[c.controlsDelay,p]),(0,n.useEffect)((()=>{h.current.length&&(h.current.forEach((e=>{e()})),h.current.length=0)}),[v]);const H=(0,n.useCallback)((()=>{(0,R.D)((()=>{w()}))}),[w]),Z=(0,n.useCallback)((()=>{(0,D.Z)()}),[]),j=e.isDisableAdButtonEnabled,U=0===c.controlsDelay||p.showControls,q=(0,O.Hr)(e.flags),z=(0,O.Rw)(e.flags),V=(0,k.v_)({on:"adv_interstitial.publift.enabled"})&&(null==(a=null==(t=e.allAdvBlocks.publift)?void 0:t.interstitial)?void 0:a.zoneId)?{"data-fuse":null==(s=null==(r=e.allAdvBlocks.publift)?void 0:r.interstitial)?void 0:s.zoneId}:null;return o().createElement("div",{className:(0,C.E)(L,void 0,p.isVisible?"visible":_,q?void 0:G),"data-testid":"adv-fullscreen-container"},o().createElement("div",null,o().createElement("div",{className:(0,C.E)(B,U?void 0:_),"data-testid":"adv-fullscreen-closeButton",onClick:H}),c.useLoader&&o().createElement(S.y,{className:(0,C.E)(N,U?_:void 0),key:"landscape-spinner",position:"center",size:32,spinning:!0,view:"default"}),v.map((e=>{const t=ee(e);return o().createElement("div",{className:(0,C.E)(M,ae[z],c.usePlaceholder?W:void 0,f===t?void 0:_,te(e),e===p.loadedProviderBlock?`${Q}_loaded`:void 0),key:t},o().createElement("div",Y({id:t},V)))}))),j?o().createElement("div",{className:(0,C.E)(x,U?void 0:_)},j&&o().createElement(E.z,{className:"","data-testid":"adv-fullscreen-closeButton",size:40,view:"secondary",onClick:Z},i("header.popup.disable.ads")),o().createElement(E.z,{className:"","data-testid":"adv-fullscreen-closeButton",size:40,view:"primary",onClick:H},i("adv.close"))):null)};var se=a(93298);const ne=(0,se.M$)("AdvAdsense",se.XG.Adv,{background:"#0c6c09"});class oe{constructor(e,t){var a,r,s,n;this.service=e,this.initTime=Date.now(),this.lastShowedTimeByTag={[v.$H.INTERSTITIAL]:-1,[v.$H.REWARDED]:-1},this.skipsCounterByTag={[v.$H.INTERSTITIAL]:0,[v.$H.REWARDED]:0},this.initGuardApplyHandler();const{flags:o}=this.advManager,{checksCountCommon:i,showIntervalByTagMs:l,checksCountByTag:d,initDelayMs:c,guardDelayMs:h,showIntervalCommonMs:u}=null!=t?t:{};this.rules={showIntervalByTagMs:this.getRuleValue(m.LQ,l,0),showIntervalCommonMs:null!=(r=null!=(a=(0,m.OF)(this.service.serviceName,o))?a:u)?r:0,initDelayMs:this.getRuleValue(m.vp,c,0),guardDelayMs:this.getRuleValue(m.ro,h,0),checksCountByTag:this.getRuleValue(m.YS,d,0),checksCountCommon:null!=(n=null!=(s=(0,m.g3)(this.service.serviceName,o))?s:i)?n:0}}get advManager(){return this.service.advManager}get skipsCounter(){return this.skipsCounterByTag[v.$H.INTERSTITIAL]+this.skipsCounterByTag[v.$H.REWARDED]}get lastShowedTime(){return Math.max(this.lastShowedTimeByTag[v.$H.INTERSTITIAL],this.lastShowedTimeByTag[v.$H.REWARDED])}getSkipReason({tag:e}){const t=this.calculateSkipReason({tag:e});return t&&this.skipsCounterByTag[e]++,t}calculateSkipReason({tag:e}){const{showIntervalCommonMs:t,showIntervalByTagMs:a,checksCountCommon:r,checksCountByTag:s,initDelayMs:n,guardDelayMs:o}=this.rules;return n[e]&&this.getTimeDiff(this.initTime)<n[e]?"init_delay":o[e]&&this.guardApplyTime&&this.getTimeDiff(this.guardApplyTime)<o[e]?"guard_delay":a[e]&&this.getTimeDiff(this.lastShowedTimeByTag[e])<a[e]?"show_interval_by_tag":t&&this.getTimeDiff(this.lastShowedTime)<t?"show_interval_common":s[e]&&this.skipsCounterByTag[e]<s[e]?"show_calls_by_tag":r&&this.skipsCounter<r?"show_calls_common":null}getTimeDiff(e,t){return Math.abs((e||0)-(null!=t?t:Date.now()))}getRuleValue(e,t,a){var r,s,n,o;const{flags:i}=this.advManager;return{[v.$H.INTERSTITIAL]:null!=(s=null!=(r=e(v.$H.INTERSTITIAL,this.service.serviceName,i))?r:null==t?void 0:t[v.$H.INTERSTITIAL])?s:a,[v.$H.REWARDED]:null!=(o=null!=(n=e(v.$H.REWARDED,this.service.serviceName,i))?n:null==t?void 0:t[v.$H.REWARDED])?o:a}}initGuardApplyHandler(){return e=this,t=null,a=function*(){yield Promise.all([this.advManager.guardClosedPromiseWrapper.promise,this.advManager.splashScreenPromise.promise]).then((()=>this.guardApplyTime=Date.now()))},new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));var e,t,a}resetShowTimer(e){this.lastShowedTimeByTag[e]=Date.now()}}var ie=a(54814),le=a(60295);const de=(0,se.M$)("AdvService",se.XG.Adv);class ce{constructor(e,t,a,r){this.advManager=e,this.options=t,this.serviceName=a,this.initPromise=new y.Z,this.initTime=Date.now(),this.canShowController=new oe(this,r)}getAdvBlockId(e,t){return"invalid_block"}getWaterfallItem(e){var t,a;return null!=(a=null==(t=this.advManager.waterfallQueue[e])?void 0:t.find((e=>e.provider===this.serviceName)))?a:null}isTagActive(e){return this.options.tags[e]!==ie.pP.Skip}isTagWaterfall(e){return this.options.tags[e]!==ie.pP.Onspot}onServiceLoaded(){this.initPromise.resolve(),(0,le.s4)("play_adv_service_init",Date.now()-this.initTime,!0,{"-additional":encodeURIComponent(JSON.stringify({advtype:this.serviceName,options:this.options}))})}onServiceError(e){let t=null!=e?e:new Error("Service not initialized: Unhandled undefined error (safe)");e instanceof Error&&(e.message=`Service not initialized: ${e.message}`),(0,I.g5)(this,{error:t,additional:{error:e}}),this.initPromise.reject(t)}getTimeoutExtraTime(e,t){}checkCanShow(e,t){const a=this.canShowController.getSkipReason({tag:e});return a?(de(`[${this.serviceName}] Skip service by reason: ${a}`),ie.Kc.Next):ie.Kc.Ok}get hasFullscreenAdv(){var e;return null==(e=this.advManager.advUsedBlocks.fullscreen)||e}get hasRewarderdAdv(){var e;return null==(e=this.advManager.advUsedBlocks.rewarded)||e}showRewardedVideo(e){return Promise.reject()}resetShowTimer(e){this.canShowController.resetShowTimer(e)}cancelShow(e){}}var he=a(5e4);function ue({querySelector:e,interval:t=100,rejectTimeout:a=3e3}){return new Promise(((r,s)=>{function n(){try{let t=document.querySelector(e);if(t)return r(t),!0}catch(e){return s(e),!1}}if(n())return;const o=window.setTimeout((()=>{l(),s(new Error("Can not find element"))}),a),i=window.setInterval((()=>{n()&&l()}),t);function l(){clearInterval(i),clearTimeout(o)}}))}var pe=a(40656),me=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));class ve extends ce{constructor(e,t){var a,r,s;const{serviceName:n}=t;if(![he.e.Adsense,he.e.AdsenseResponsive].includes(n))throw new Error(`Invalid service name: ${n}, kind of 'adsense' expected.`);super(e,t,n),this.isResponsive=!1,this.isResponsive=n===he.e.AdsenseResponsive;const o=null==(a=e.waterfallQueue)?void 0:a[v.$H.INTERSTITIAL].find((e=>e.provider===he.e.AdsenseResponsive)),{clientId:i,slotId:l}=(0,ie.hk)(o)?o:null!=(s=null==(r=e.allAdvBlocks.adsense)?void 0:r.interstitial)?s:{};this.clientId=null!=i?i:"invalid_block",this.slotId=null!=l?l:"invalid_block",this.init()}init(){return me(this,null,(function*(){try{const e=this.isTagActive(v.$H.INTERSTITIAL),t=this.isTagActive(v.$H.REWARDED),[a,r]=yield Promise.all([e?yield(0,b.l)(this.isResponsive?w.oO.AdsenseResponsive:w.oO.AdsenseBlock):null,t?yield(0,b.l)(w.oO.AdsenseRewarded):null]);e&&a&&(this.provider=a,yield ue({querySelector:`.${L}`,interval:100,rejectTimeout:1500}),yield l.Z.post({type:"adv-fullscreen-block",action:"add-block",data:{blockName:this.serviceName},timeout:pe.WT})),t&&r&&(this.rewardedProvider=r),this.onServiceLoaded()}catch(e){this.onServiceError(e)}}))}getTimeoutExtraTime(e,t){switch(e){case ie.QA.ServiceInit:return 3*pe.WT;case ie.QA.ShowFullscreen:return 5*pe.yR}return super.getTimeoutExtraTime(e,t)}getAdvBlockId(e,t){switch(e){case v.$H.INTERSTITIAL:return this.isResponsive?this.slotId:this.clientId;case v.$H.REWARDED:return"adsense_rewarded"}return super.getAdvBlockId(e,t)}showFullscreenAdv({callbacks:e,clickDaemon:t,reason:a}){return new Promise(((r,s)=>me(this,null,(function*(){try{const{serviceName:n,isResponsive:o,clientId:i}=this,d=this.provider;if(!d)return void s(new Error("Adsense provider not loaded."));const c=this.getAdvBlockId(v.$H.INTERSTITIAL,a);let h,u=!1;o&&(yield l.Z.post({type:"adv-fullscreen-block",action:"show-block",data:{blockName:n},timeout:pe.WT}),yield l.Z.post({type:"adv-fullscreen-block",action:"show",data:{onClose:()=>{u&&e.onClose(u),h&&d.destroySlot(h)}}})),e.onOpen(!1),t.request({advBlockId:c}),ne("Create slot",c,i,ee(n)),h=yield d.createSlot({adFormat:"auto",blockId:c,clientId:i,divId:ee(n),height:window.innerHeight-192,width:window.innerWidth-144});const{isEmpty:p,slot:m}=yield d.preloadSlot({slot:h});if(p)throw t.responseEmpty(),new I.lu("Slot is empty",{isEmpty:!0});t.response(),u=!0,(0,O.Hr)(this.advManager.flags)&&l.Z.post({type:"adv-fullscreen-block",action:"slot-loaded",data:{blockName:n},timeout:pe.WT}),yield d.showSlot(m),t.show(),o||e.onClose(!0),r()}catch(e){s(e)}}))))}showRewardedVideo({callbacks:e,clickDaemon:t,reason:a}){return new Promise(((r,s)=>me(this,null,(function*(){try{const{clientId:n,rewardedProvider:o}=this;if(!o)return void s(new Error("Provider not loaded."));const i=this.getAdvBlockId(v.$H.REWARDED,a);let l,d=!1;t.request({advBlockId:i}),ne("Create rewarded slot",i,n),l=yield o.createSlot({blockId:i});const{isEmpty:c,slot:h}=yield o.preloadSlot({slot:l});if(c)throw t.responseEmpty(),new I.lu("Slot is empty",{isEmpty:!0});t.response(),r();const{waitForView:u}=yield o.showSlot(h);d=!0,e.onOpen(!0);const{isDismissed:p}=yield u;p||e.onRewarded(),e.onClose(d)}catch(e){s(e)}}))))}cancelShow(e){if(e===v.$H.INTERSTITIAL)l.Z.post({type:"adv-fullscreen-block",action:"hide",data:{blockName:this.serviceName}})}}var ge=a(37705),fe=a(79049),ye=a(13377);const be=(e,t)=>{e.show(),null==t||t()},we=(e,t,a)=>{if("viewed"===e)return void t.response();const r=["error"].includes(e);t.responseEmpty(),a(new I.lu(`Azerion returned ${e} status`,{isEmpty:!r}))};var ke=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));var Ee=(e=>(e.Display="display",e.Interstitial="interstitial",e.Midroll="interstitial",e.Preroll="interstitial",e.Rewarded="rewarded",e))(Ee||{}),Se=(e=>(e.SDK_ERROR="SDK_ERROR",e.SDK_GAME_PAUSE="SDK_GAME_PAUSE",e.SDK_GAME_START="SDK_GAME_START",e.SDK_GDPR_TARGETING="SDK_GDPR_TARGETING",e.SDK_GDPR_THIRD_PARTY="SDK_GDPR_THIRD_PARTY",e.SDK_GDPR_TRACKING="SDK_GDPR_TRACKING",e.SDK_LB_LOGIN="SDK_LB_LOGIN",e.SDK_READY="SDK_READY",e.SDK_REWARDED_WATCH_COMPLETE="SDK_REWARDED_WATCH_COMPLETE",e.SDK_SHW_LB="SDK_SHW_LB",e))(Se||{});var Ae=a(17061),Ie=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));let Pe=null;var Te=a(79098),Ce=a(90380);const Re=e=>{var t;return null!=(t=(0,O.RM)(e,Ce.Z.advGoogleInstreamResponsiveContainer))&&t},De="//imasdk.googleapis.com/js/sdkloader/ima3.js",Oe=[{width:1280,height:720},{width:854,height:480},{width:960,height:720},{width:640,height:480}],Le=1e4;var _e=a(94199);class xe{constructor(e){this.adsManager=e,this.isComplete=!1,this.readyPromise=new y.Z,this.startedPromise=new y.Z,this.showPromise=new y.Z,this.onAdError=e=>{this.isComplete=!0,this.destroy(e)},this.onAdLoaded=()=>{this.readyPromise.resolve()},this.onAdStarted=()=>{this.startedPromise.resolve()},this.onAdComplete=()=>{this.isComplete||(this.isComplete=!0,this.showPromise.resolve())},this.destroy=e=>{this.readyPromise.reject(e),this.showPromise.reject(e),this.startedPromise.reject(e)},this.start=()=>{try{this.adsManager.start()}catch(e){return e}},this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdLoaded),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdStarted),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAdComplete),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdComplete),this.readyPromise.promise.catch((()=>{})),this.startedPromise.promise.catch((()=>{})),this.showPromise.promise.catch((()=>{}))}}var Ne=a(65751),Be=a(38096),Me=a(29483),$e=a(26667),Fe=a(37930),He=a(34711),We=a(31136),Ge=a(49659),Ze=Object.defineProperty,je=Object.getOwnPropertySymbols,Ue=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable,ze=(e,t,a)=>t in e?Ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Ve=(e,t)=>{for(var a in t||(t={}))Ue.call(t,a)&&ze(e,a,t[a]);if(je)for(var a of je(t))qe.call(t,a)&&ze(e,a,t[a]);return e};const Ke="https://pubads.g.doubleclick.net/gampad/ads?"+Object.entries({tfcd:0,sz:"640x360|640x480",gdfp_req:1,output:"vast",unviewed_position_start:1,env:"vp",vpos:"midroll",vad_type:"linear",max_ad_duration:5e4,vpa:"auto",vpmute:0,nofb:1,plcmt:1}).map((([e,t])=>`${e}=${encodeURIComponent(t)}`)).join("&"),Ye="https://pubads.g.doubleclick.net/gampad/ads?"+Object.entries({tfcd:0,npa:0,sz:"1x1|300x169|400x300|640x480",gdfp_req:1,unviewed_position_start:1,ad_type:"skippablevideo",output:"vast",env:"vp",impl:"s"}).map((([e,t])=>`${e}=${encodeURIComponent(t)}`)).join("&"),Xe=()=>{const{hostname:e}=(0,Be.getDomainConfig)(),{hostname:t,pathname:a}=(0,Ge.e)();return`https://${t.replace(new RegExp(`(.+)(${(0,Me.h)(e)}.)`),"$2")}${a}`};function Je(e){return(e=>((0,k.v_)({on:"adv_interstitial.instream_publift.enabled"})?Ye:Ke)+"&"+Object.entries({iu:e,description_url:Xe()}).map((([e,t])=>`${e}=${encodeURIComponent(t)}`)).join("&"))(e.blockId)+function(e){const t=Ve({appID:e},(0,Fe.F)()),a=(0,He.X)();return void 0!==a&&(t.clid=a),"&cust_params="+encodeURIComponent(Ne.stringify(t))}(e.appID)}const Qe=(e,t)=>{const a=(0,We.D)(e).then((()=>!0));return e=>{return r=void 0,s=null,n=function*(){(yield Promise.race([a,e]))&&t()},new Promise(((e,t)=>{var a=e=>{try{i(n.next(e))}catch(e){t(e)}},o=e=>{try{i(n.throw(e))}catch(e){t(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,o);i((n=n.apply(r,s)).next())}));var r,s,n}},et=()=>{var e,t,a,r;const s=(0,k.v_)({on:"adv_interstitial.instream_publift.enabled"})?"publift":"google",{interstitial:{[s]:n},rewarded:{google:o}}=(0,Be.getDomainConfig)().adv,i="desktop",{showInterval:l}=null!=(t=null==(e=null==n?void 0:n.instream)?void 0:e[i])?t:{},{showInterval:d}=null!=(r=null==(a=null==o?void 0:o.instream)?void 0:a[i])?r:{};return{[v.$H.INTERSTITIAL]:l,[v.$H.REWARDED]:d}};var tt=a(97553),at=a(51290),rt=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const st=(0,se.M$)("GoogleInstreamPrerender",se.XG.Adv,{background:"#d486f2"});class nt{constructor(e,t){this.service=e,this.adContainer=t,this.videoPlayer=document.createElement("video"),this.currentAdvLogger=null,this.createAdDisplayContainer=()=>{this.adDisplayContainer=new google.ima.AdDisplayContainer(this.adContainer,this.videoPlayer),this.adContainer.addEventListener("click",this.adContainerClick)},this.adContainerClick=()=>{this.adsManager&&this.adsManager.resume()},this.initAdsLoader=()=>{this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded,!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1)},this.onAdError=e=>{var t;const a=e.getError(),r=a.getMessage();st(r),(0,ge.H)({block:ye.W.ADV,message:r,additional:{adv:{service:this.service.serviceName}}},a),null==(t=this.currentAdLoading)||t.reject(a),this.currentAdLoading=void 0,this.resetSDK()},this.resetSDK=()=>{var e,t,a;st("resetting sdk state"),null==(e=this.adsManager)||e.destroy(),null==(t=this.adsLoader)||t.contentComplete(),null==(a=this.adsLoader)||a.destroy(),this.initAdsLoader(),this.currentShow=void 0},this.onAdsManagerLoaded=e=>{var t,a;st("ad manager loaded");const r=new google.ima.AdsRenderingSettings;r.enablePreloading=!(0,O.Rb)(this.service.advManager.flags),this.adsManager=e.getAdsManager(this.videoPlayer,r),this.currentShow=new xe(this.adsManager);const{width:s,height:n}=this.getRendererSize();this.adsManager.init(s,n,google.ima.ViewMode.NORMAL),null==(t=this.currentAdvLogger)||t.response(),null==(a=this.currentAdLoading)||a.resolve(),this.currentAdLoading=void 0},this.setRendererSize=({width:e,height:t})=>{l.Z.post({type:"instream-fullscreen-render",action:"set-size",data:{width:e,height:t}})},this.getRendererSize=()=>{const e=this.isHeaderEnabled?-32:0,t=(_e.default.isLandscape,e),a={width:window.innerWidth-4+0,height:window.innerHeight+t};return Oe.find((({width:e,height:t})=>e<=a.width&&t<=a.height))||a},this.onResizeHandler=()=>rt(this,null,(function*(){var e;let t;if(this.isResponsiveContainer){t=(yield l.Z.post(g.KT.GetSize({tag:v.$H.INTERSTITIAL}))).data}else t=this.getRendererSize(),this.setRendererSize(t);null==(e=this.adsManager)||e.resize(t.width,t.height,google.ima.ViewMode.NORMAL)})),this.videoPlayer.setAttribute("playsinline","true"),this.isHeaderEnabled=!(0,I.Ij)(),this.isResponsiveContainer=Re(e.advManager.flags),this.createAdDisplayContainer(),this.initAdsLoader(),this.setRendererSize(this.getRendererSize()),_e.default.addChangeListener(this.onResizeHandler),window.addEventListener("resize",this.onResizeHandler),this.prefetchAd()}prefetchAd(){var e;(0,O.Rb)(this.service.advManager.flags)||(this.loadAd(tt.p_.PRELOAD),null==(e=this.currentAdLoading)||e.promise.catch((e=>{var t,a;st("prefetching failed"),null==(a=this.currentAdvLogger)||a.error((null==(t=null==e?void 0:e.getMessage)?void 0:t.call(e))||e)})))}loadAd(e){if(st(`asked to load an ad for ${e}`),this.currentAdLoading||this.currentShow)return;this.currentAdvLogger=new at.U({app_id:this.service.advManager.appId,tag:v.$H.INTERSTITIAL});const t=new google.ima.AdsRequest,{advManager:a}=this.service,r=this.service.getAdvBlockId();t.adTagUrl=Je({appID:a.appId,blockId:r}),t.pageUrl=Xe();const s=this.getRendererSize();t.linearAdSlotWidth=s.width,t.linearAdSlotHeight=s.height,t.nonLinearAdSlotWidth=s.width,t.nonLinearAdSlotHeight=s.height,t.forceNonLinearFullSlot=!0,this.currentAdvLogger.request({advBlockId:r,provider:he.e.GoogleInstream,reason:e}),this.currentAdLoading=new y.Z,this.adsLoader.requestAds(t)}getAdToShow(){return rt(this,null,(function*(){if(st("got call to show ads"),this.currentShow||(this.currentAdLoading?st("ad is already loading, waiting for it"):(st("dont have any ad ready, trying to load it"),this.loadAd(tt.p_.ONSPOT)),yield this.currentAdLoading.promise),this.adDisplayContainer.initialize(),st("ad display container initialized!"),!this.currentShow)throw new Error("there is no current show, that should not happen");st("ad data is ready, returning");const e=this.currentShow;return{advLogger:this.currentAdvLogger,showPromise:e.showPromise.promise.finally((()=>{this.resetSDK(),this.prefetchAd()})).catch((()=>{})),readyPromise:e.readyPromise.promise,startedPromise:e.startedPromise.promise,destroy:()=>e.destroy(),startAd:()=>{const t=e.start();if(t)throw st("error starting an ad"),(0,ge.H)({block:ye.W.ADV,additional:{adv:{service:this.service.serviceName}}},t),e.destroy(),t;((e,t)=>{try{if(1!==e.childElementCount)return void $e._y.tag("testId").log(`Element has more than one children (child count: ${e.childElementCount})`);const a=e.firstElementChild;if(!(a&&a instanceof HTMLDivElement))return void $e._y.tag("testId").spoiler(a).log("Failed to set banner testId.");a.dataset.testid=t}catch(e){$e._y.tag("testId").spoiler(e).log("Failed to set banner testId.")}})(this.adContainer,"interstitial-slot_google-instream")}}}))}}var ot=a(46210);function it({fullUrl:e}){const t=(0,ot.Qs)(e);return t?(0,ot.d2)(t):De}var lt=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const dt=(0,se.M$)("GoogleInstream",se.XG.Adv,{background:"#d486f2"});var ct=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));class ht{constructor(e,t){this.service=e,this.tag=t,this.imaAdsManager=null,this.waitForPreload=void 0,this.onImaAdsLoaderLoaded=null,this.onImaAdsLoaderError=null,this.debugLog=(0,se.M$)("GoogleInstreamPrerender",[se.XG.Adv,this.tag],{background:"#d486f2"}),this.onResizeHandler=()=>ct(this,null,(function*(){var e;const{width:t,height:a}=yield this.getRendererSize();null==(e=this.imaAdsManager)||e.resize(t,a,google.ima.ViewMode.NORMAL)})),this.preload=e=>ct(this,[e],(function*({advLogger:e=new at.U({app_id:this.service.advManager.appId,tag:this.tag}),reason:t=tt.p_.PRELOAD}){var a;if(this.waitForPreload)return this.waitForPreload.promise;this.debugLog(`preload called (reason: ${t})`),e||(e=new at.U({app_id:this.service.advManager.appId,tag:this.tag}));const r=this.service.getAdvBlockId(this.tag,t);e.request({advBlockId:r,provider:this.service.serviceName,reason:t});const s=new y.Z;this.waitForPreload=s;try{const n=new y.Z;s.promise.catch((()=>{this.debugLog("Resolve show promise due preload's promise rejection"),n.resolve()}));const{height:o,width:i}=yield this.getRendererSize(),l=new google.ima.AdsRequest;l.linearAdSlotWidth=l.nonLinearAdSlotWidth=i,l.linearAdSlotHeight=l.nonLinearAdSlotHeight=o,l.forceNonLinearFullSlot=!0,l.adTagUrl=Je({appID:this.service.advManager.appId,blockId:r}),l.pageUrl=Xe(),this.onImaAdsLoaderLoaded=t=>ct(this,null,(function*(){var a;this.debugLog("preload response received",t);const r=new google.ima.AdsRenderingSettings,o=t.getAdsManager({currentTime:0,duration:0},r);o.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(e=>{const t=e.getError(),a=new Error(`${t.getMessage()} [${t.getType()}]`);(0,I.g5)(this.service,{error:a}),s.state===y.W.Pending?s.reject(a):n.reject(a)})),o.addEventListener(google.ima.AdEvent.Type.LOADED,(t=>{this.debugLog("preload adv loaded (ready for playing)",t),s.resolve({isEmpty:!1,advLogger:e,show:()=>(this.debugLog("show called"),o.start(),n.promise)})})),o.addEventListener(google.ima.AdEvent.Type.STARTED,(e=>{this.debugLog("adv started (video playing)",e)})),o.addEventListener(google.ima.AdEvent.Type.SKIPPED,(e=>{this.debugLog("adv skipped (clicked close button)",e)})),o.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(e=>{this.debugLog("adv finished (closed)",e),n.resolve()})),this.imaAdsManager=o,e.response(),this.imaDisplayContainer.initialize();const{height:i,width:l}=yield this.getRendererSize();this.debugLog(`rendererSize height: ${i}, width: ${l}`),null==(a=this.imaAdsManager)||a.init(l,i,google.ima.ViewMode.NORMAL)})),this.onImaAdsLoaderError=a=>{var r;null==(r=this.imaAdsManager)||r.destroy();const n=a.getError(),o=`${n.getMessage()} [${n.getType()}]`;if(this.debugLog("preload load error",o),n.getErrorCode()===google.ima.AdError.ErrorCode.VAST_NO_ADS_AFTER_WRAPPER)return e.responseEmpty(),void s.resolve({isEmpty:!0,advLogger:e});t===tt.p_.PRELOAD&&(null==e||e.error(o)),s.reject(new Error(o))},null==(a=this.imaAdsLoader)||a.requestAds(l)}catch(e){s.reject(e)}return s.promise})),this.getRendererSize=()=>ct(this,null,(function*(){const e=yield l.Z.post(g.KT.GetSize({tag:this.tag})),{data:{width:t,height:a}}=e;const r=(0,I.Ij)()?0:32,s={width:window.innerWidth,height:window.innerHeight-r};return Oe.find((({width:e,height:t})=>e<=s.width&&t<=s.height))||s})),this.debugLog("init"),this.videoElement=document.createElement("video"),this.videoElement.setAttribute("playsinline","true"),this.videoContainer=document.querySelector(`#advBlock_${he.e.GoogleInstream}_${this.tag}`),this.videoContainer.addEventListener("click",(()=>{var e;try{null==(e=this.imaAdsManager)||e.resume()}catch(e){this.debugLog("videoContainer click resume error",e)}})),this.imaDisplayContainer=new google.ima.AdDisplayContainer(this.videoContainer,this.videoElement),this.imaAdsLoader=new google.ima.AdsLoader(this.imaDisplayContainer),this.imaAdsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(e=>{var t;return null==(t=this.onImaAdsLoaderLoaded)?void 0:t.call(this,e)}),!1),this.imaAdsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(e=>{var t;return null==(t=this.onImaAdsLoaderError)?void 0:t.call(this,e)}),!1),_e.default.addChangeListener(this.onResizeHandler),window.addEventListener("resize",this.onResizeHandler)}clear(){var e,t;null==(e=this.imaAdsManager)||e.destroy(),null==(t=this.waitForPreload)||t.resolve({advLogger:void 0,isEmpty:!0}),delete this.waitForPreload}}var ut=a(59886),pt=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const mt=(0,se.M$)("GoogleInstream",se.XG.Adv,{background:"#d486f2"});const vt="undefined"!=typeof document&&(0,m.vV)(window.appData.abt.flags)?class extends ce{constructor(e,t){super(e,t,he.e.GoogleInstream,{initDelayMs:{[v.$H.INTERSTITIAL]:Le,[v.$H.REWARDED]:Le}}),this.showFullscreenAdv=e=>pt(this,[e],(function*({callbacks:e,clickDaemon:t,reason:a,tag:r}){return new Promise(((s,n)=>pt(this,null,(function*(){try{if(!this.interstitialPreload)throw new Error(`No ${r} preload created.`);const{advLogger:n,isEmpty:o,show:i}=yield this.interstitialPreload.preload({advLogger:t,reason:a});if(t.bindRequest(n),o||!i)throw new I.lu(ut.XO.INSTREAM_EMPTY,{isEmpty:!0});s((()=>pt(this,null,(function*(){e.onOpen(!0),l.Z.post(g.KT.Show({tag:v.$H.INTERSTITIAL})),yield i(),e.onClose(!0)}))))}catch(e){n(e)}}))))})),this.showRewardedVideo=e=>pt(this,[e],(function*({callbacks:e,clickDaemon:t,reason:a,tag:r}){return new Promise(((s,n)=>pt(this,null,(function*(){try{if(!this.rewardedPreload)throw new Error(`No ${r} preload created.`);const{advLogger:n,isEmpty:o,show:i}=yield this.rewardedPreload.preload({advLogger:t,reason:a});if(t.bindRequest(n),o||!i)throw new I.lu(ut.XO.INSTREAM_EMPTY,{isEmpty:!0});s((()=>pt(this,null,(function*(){e.onOpen(!0),l.Z.post(g.KT.Show({tag:v.$H.REWARDED})),yield i(),e.onRewarded(),e.onClose(!0)}))))}catch(e){n(e)}}))))})),this.init()}getAdvBlockId(e,t){var a,r,s;return null!=(s=e===v.$H.REWARDED?null==(a=this.advManager.allAdvBlocks.instream)?void 0:a.rewarded:null==(r=this.advManager.allAdvBlocks.instream)?void 0:r.interstitial)?s:Te.Lx}init(){return pt(this,null,(function*(){try{yield(0,fe.x)({id:"ima",src:De}),google.ima.settings.setLocale(this.advManager.lang),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),this.isTagActive(v.$H.INTERSTITIAL)&&(yield ue({querySelector:`#advBlock_${he.e.GoogleInstream}_${v.$H.INTERSTITIAL}`,interval:100,rejectTimeout:1500}),this.interstitialPreload=new ht(this,v.$H.INTERSTITIAL),(0,O.Rb)(this.advManager.flags)||this.interstitialPreload.preload({}).catch((e=>(0,I.g5)(this,{error:e})))),this.isTagActive(v.$H.REWARDED)&&(yield ue({querySelector:`#advBlock_${he.e.GoogleInstream}_${v.$H.REWARDED}`,interval:100,rejectTimeout:1500}),this.rewardedPreload=new ht(this,v.$H.REWARDED),this.rewardedPreload.preload({}).catch((e=>(0,I.g5)(this,{error:e})))),this.onServiceLoaded()}catch(e){mt(e),this.onServiceError(e)}}))}onShowAdvFinished({tag:e}){var t,a;switch(this.cancelShow(e),e){case v.$H.INTERSTITIAL:(0,O.Rb)(this.advManager.flags)||null==(t=this.interstitialPreload)||t.preload({}).catch((e=>(0,I.g5)(this,{error:e,tag:v.$H.INTERSTITIAL})));break;case v.$H.REWARDED:null==(a=this.rewardedPreload)||a.preload({}).catch((e=>(0,I.g5)(this,{error:e,tag:v.$H.REWARDED})))}}cancelShow(e){var t,a;switch(l.Z.post(g.KT.Hide({tag:e})),e){case v.$H.INTERSTITIAL:null==(t=this.interstitialPreload)||t.clear();break;case v.$H.REWARDED:null==(a=this.rewardedPreload)||a.clear()}}}:class extends ce{constructor(e,t){super(e,t,he.e.GoogleInstream,{initDelayMs:{[v.$H.INTERSTITIAL]:Le,[v.$H.REWARDED]:Le},showIntervalByTagMs:et()}),this.allScriptsInited=new y.Z,this.allScriptsInited.promise.catch((()=>{})),this.init()}getAdvBlockId(){var e,t;return null!=(t=null==(e=this.advManager.allAdvBlocks.instream)?void 0:e.interstitial)?t:Te.Lx}init(){return lt(this,null,(function*(){try{let e;if(yield(0,fe.x)({id:"ima",src:it({fullUrl:(0,Ge.e)().href})}),Re(this.advManager.flags))e="advBlock_"+he.e.GoogleInstream+"_"+v.$H.INTERSTITIAL;else{const{data:t}=yield l.Z.post({action:"update-block-id",data:{blockId:"advBlock_"+he.e.GoogleInstream},type:"instream-fullscreen-render",timeout:1e3});e=t.blockId}const t=yield ue({querySelector:`#${e}`,interval:100,rejectTimeout:1500});google.ima.settings.setLocale(this.advManager.lang),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),this.adContainer=t,this.adPrerender=new nt(this,this.adContainer),this.allScriptsInited.resolve(),this.onServiceLoaded()}catch(e){dt(e),(0,ge.H)({block:ye.W.ADV,additional:{adv:{service:this.serviceName}}},e),this.allScriptsInited.reject(),this.onServiceError()}}))}showFullscreenAdv({callbacks:e,clickDaemon:t}){return new Promise(((a,r)=>lt(this,null,(function*(){var s;try{yield this.allScriptsInited.promise;let r=yield this.adPrerender.getAdToShow();const{advLogger:n,startAd:o,destroy:i,showPromise:d,readyPromise:c,startedPromise:h}=r;n&&t.bindRequest(n);const u=Qe(7e3,(()=>{throw dt("Timer cutoff!"),i(),new Error("Video ad cutoff by timer")}));dt("waiting for ad to be ready"),yield u(c),dt("ad ready, playing");let p=!1;d.catch((()=>{})).finally((()=>{var t;null==(t=e.onClose)||t.call(e,p),Re(this.advManager.flags)?l.Z.post(g.KT.Hide({tag:v.$H.INTERSTITIAL})):l.Z.post({type:"instream-fullscreen-render",action:"hide"})})),dt("calling manager to start ad"),o(),Re(this.advManager.flags)?l.Z.post(g.KT.Show({tag:v.$H.INTERSTITIAL})):l.Z.post({type:"instream-fullscreen-render",action:"show"}),null==(s=e.onOpen)||s.call(e),p=!0,dt("waiting for playback to start"),yield u(h),a(),dt("ad playback started"),yield d}catch(e){r(e)}}))))}showRewardedVideo(){return lt(this,null,(function*(){return Promise.reject(new Error("Not implemented exception!"))}))}},gt=(0,se.M$)("GoogleManual",se.XG.Adv,{background:"#0c6c09"});var ft=a(85623),yt=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));class bt{constructor(e){this.service=e,this.waitForSlotReady=void 0,this.gptCallbacks={},(0,ft.bT)((e=>{const t=e.pubads();["slotRenderEnded","gameManualInterstitialSlotReady","gameManualInterstitialSlotClosed"].forEach((e=>{t.addEventListener(e,(t=>{var a,r;t.slot===this.slot&&(null==(r=(a=this.gptCallbacks)[e])||r.call(a,t))}))}))}))}defineSlot(){return yt(this,null,(function*(){return(0,ft.bT)((e=>{const t=e.defineOutOfPageSlot(this.service.getAdvBlockId(v.$H.INTERSTITIAL),e.enums.OutOfPageFormat.GAME_MANUAL_INTERSTITIAL);if(!t)throw new Error("Failed to create googletag.Slot.");return t.addService(e.pubads()),this.slot=t,e.enableServices(),t}))}))}preload(){return yt(this,arguments,(function*({reason:e=tt.p_.PRELOAD,clickDaemon:t}={}){if(this.waitForSlotReady)return this.waitForSlotReady.promise;gt.spoiler(this)("Preload interstitial slot");const a=new y.Z;try{this.waitForSlotReady=a,t||(t=new at.U({app_id:this.service.advManager.appId,tag:v.$H.INTERSTITIAL})),null==t||t.request({provider:this.service.serviceName,advBlockId:this.service.getAdvBlockId(v.$H.INTERSTITIAL),reason:e}),this.slot&&googletag.destroySlots([this.slot]),this.slot=yield this.defineSlot(),this.gptCallbacks.slotRenderEnded=e=>{if(e.isEmpty)return null==t||t.responseEmpty(),a.resolve({isEmpty:!0,clickDaemon:t}),void delete this.waitForSlotReady;null==t||t.response()};const r=new y.Z;this.gptCallbacks.gameManualInterstitialSlotReady=e=>{const{makeGameManualInterstitialVisible:s}=e;a.resolve({isEmpty:!1,clickDaemon:t,waitForShow:()=>(s(),delete this.waitForSlotReady,r.promise)})},this.gptCallbacks.gameManualInterstitialSlotClosed=()=>{r.resolve()},googletag.pubads().refresh([this.slot])}catch(e){(0,I.g5)(this.service,{error:e})}return a.promise}))}show(){return yt(this,null,(function*(){}))}cancel(){var e,t;gt("Cancel preload promise"),null==(e=this.waitForSlotReady)||e.resolve({isEmpty:!1}),delete this.waitForSlotReady,this.slot&&(null==(t=googletag.destroySlots)||t.call(googletag,[this.slot]))}}var wt=a(78308),kt=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));var Et=a(36529),St=a(23617),At=a(50042),It=a(41811),Pt=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const Tt={[It.y_.YANDEX]:{fullscreenBlockFlag:Ce.Z.nativeFullscreenBlock,rewardedBlockFlag:Ce.Z.nativeRewardedBlock},[It.y_.APPODEAL]:{fullscreenBlockFlag:Ce.Z.nativeAppodealFullscreenBlock,rewardedBlockFlag:Ce.Z.nativeAppodealRewardedBlock},[It.y_.APPLOVIN]:{fullscreenBlockFlag:Ce.Z.nativeApplovinFullscreenBlock,rewardedBlockFlag:Ce.Z.nativeApplovinRewardedBlock},[It.y_.DEFAULT]:{fullscreenBlockFlag:Ce.Z.nativeFullscreenBlock,rewardedBlockFlag:Ce.Z.nativeRewardedBlock}};function Ct(e){return Pt(this,arguments,(function*({advBlocks:e,flags:t,residenceInfo:a}){var r,s,n,o;let i=It.y_.DEFAULT,l=String(e.native_interstitial||""),d=String(e.native_rewarded||"");if(!Boolean(null==a?void 0:a.EU)){if((0,At.zg)("22.1.2.848")&&(i=(0,O.di)(t,Ce.Z.mediation)||i,l=(0,O.di)(t,Ce.Z.nativeFullscreenBlock)||l,d=(0,O.di)(t,Ce.Z.nativeRewardedBlock)||d,(0,O.sE)(t))){const e=null!=(n=yield null==(s=null==(r=window.yandex)?void 0:r.ads)?void 0:s.getLibraries())?n:[];i=1===e.length?e[0].name:It.y_.DEFAULT;const a=Tt[i];l=(0,O.di)(t,a.fullscreenBlockFlag)||l,d=(0,O.di)(t,a.rewardedBlockFlag)||d}(null==(o=window.clientMetadata)?void 0:o.isOnlyRsyaAd)&&(l=String(e.native_rsya_interstitial||""),d=String(e.native_rsya_rewarded||""),i=It.y_.DEFAULT)}return{mediation:i,fullscreenBlock:l,rewardedBlock:d}}))}const Rt="0",Dt="R-V-5320861-1",Ot="R-V-5356156-1";const Lt=e=>e.split("-V-")[1].split("-")[0];function _t(e,t){return"string"==typeof e&&/R-V-[0-9]+-[0-9]/.test(e)?Lt(e):(console.info(`[Native adv TV] Using fallback block ${t}`),Lt(t))}var xt=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const Nt=(0,se.M$)("NativeAdv",se.XG.Adv);let Bt;function Mt(e){setTimeout((()=>function(e){return xt(this,arguments,(function*({advBlocks:e,appId:t,flags:a,residenceInfo:r}){var s;const{mediation:n,fullscreenBlock:o}=yield Ct({advBlocks:e,flags:a,residenceInfo:r}),i=new at.U({app_id:t,tag:v.$H.INTERSTITIAL});Bt=i,Nt(`Preload. mediation = ${n}, fullscreen = ${o}`),i.request({advBlockId:o,provider:he.e.Native,reason:tt.p_.PRELOAD});const l=null==(s=window.yandex)?void 0:s.ads,d=()=>{i.error(tt.Ud.NOT_IMPL)};let c;if((0,St.x)()){const e=_t((0,O.Qx)(a)?o:void 0,Dt);if(!l||!l.preloadInstreamAdv)return void d();c=l.preloadInstreamAdv(e,Rt)}else{if(!l||!l.preloadFullscreenAdv)return void d();c=l.preloadFullscreenAdv(o,n)}c.then((()=>{i.response()})).catch((e=>{i.error(`${tt.Ud.ERROR}_${e.message}`),console.error(e)}))}))}(e)),3e3)}var $t=a(7991),Ft=Object.defineProperty,Ht=Object.getOwnPropertySymbols,Wt=Object.prototype.hasOwnProperty,Gt=Object.prototype.propertyIsEnumerable,Zt=(e,t,a)=>t in e?Ft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,jt=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const Ut=[];function qt(e,t){return new Promise(((a,r)=>{Ut.push({type:e,operation:t,resolve:a,reject:r}),1===Ut.length&&function(){jt(this,null,(function*(){for(;Ut.length>0;){const{operation:e,resolve:t,reject:a}=Ut[0];try{t(yield e())}catch(e){a(e)}Ut.splice(0,1)}}))}()}))}function zt(e){let t;function a(){if(!t){const a=(0,$t.W5)();t=JSON.stringify(((e,t)=>{for(var a in t||(t={}))Wt.call(t,a)&&Zt(e,a,t[a]);if(Ht)for(var a of Ht(t))Gt.call(t,a)&&Zt(e,a,t[a]);return e})({app_id:e.appId,clid:(0,He.X)()},a?{gclid:a}:{}))}return t}const r=window.appData.isGamesLiteApp;let s=null;function n(){return jt(this,null,(function*(){return null===s&&(s=yield Ct({advBlocks:e.advBlocks,flags:e.flags,residenceInfo:e.residenceInfo})),s}))}return{getFullscreenBlockId(){return jt(this,null,(function*(){const{fullscreenBlock:e}=yield n();return e}))},getRewardedBlockId(){return jt(this,null,(function*(){const{rewardedBlock:e}=yield n();return e}))},preloadFullscreenAdv(){return jt(this,null,(function*(){const{mediation:e,fullscreenBlock:t}=yield n();if(console.info("[Native adv] preload",e,"fullscreen ad:",t),!t)return Promise.reject(new Error("No fullscreen block for preload"));const a=()=>{var a,r,s;return null==(s=null==(r=null==(a=window.yandex)?void 0:a.ads)?void 0:r.preloadFullscreenAdv)?void 0:s.call(r,t,e)};return r?a():qt("preload",a)}))},preloadRewardedVideo(){return jt(this,null,(function*(){const{mediation:e,rewardedBlock:t}=yield n();if(console.info("[Native adv] preload",e,"rewarded video:",t),!t)return Promise.reject(new Error("No rewarded block for preload"));const a=()=>{var a,r,s;return null==(s=null==(r=null==(a=window.yandex)?void 0:a.ads)?void 0:r.preloadRewardedVideo)?void 0:s.call(r,t,e)};return r?a():qt("preload",a)}))},showFullscreenAdv(e){return jt(this,arguments,(function*({onShowCalled:e}){const{mediation:t,fullscreenBlock:s}=yield n(),o=a();if(console.info("[Native adv] show",t,"fullscreen ad:",s,o),!s)return Promise.reject(new Error("No fullscreen block for show"));const i=()=>{var a,r,n,i,l;return(null==(r=null==(a=window.yandex)?void 0:a.ads)?void 0:r.showFullscreenAdv)&&e(),null==(l=null==(i=null==(n=window.yandex)?void 0:n.ads)?void 0:i.showFullscreenAdv)?void 0:l.call(i,s,t,{revenueData:o})};return r?i():qt("show",i)}))},showRewardedVideo(e){return jt(this,arguments,(function*({onShowCalled:e}){const{mediation:t,rewardedBlock:s}=yield n(),o=a();if(console.info("[Native adv] show",t,"rewarded video:",s,o),!s)return Promise.reject(new Error("No rewarded block for show"));const i=()=>{var a,r,n,i,l;return(null==(r=null==(a=window.yandex)?void 0:a.ads)?void 0:r.showRewardedVideo)&&e(),null==(l=null==(i=null==(n=window.yandex)?void 0:n.ads)?void 0:i.showRewardedVideo)?void 0:l.call(i,s,t,{revenueData:o})};return r?i():qt("show",i)}))}}}var Vt=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));var Kt=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const Yt="Ad request completed successfully, but there are no ads available",Xt=3*pe.WT,Jt=3*pe.WT;var Qt=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const ea=(0,se.M$)("AdvPromo",void 0,{background:"#0c6c09"});class ta extends ce{constructor(e,t,a=he.e.Promo){super(e,t,a),this.lang=e.context.playPageData.request.lang,this.onServiceLoaded()}getAdvBlockId(e,t){return"onboarding_promo"}showFullscreenAdv(e){return Qt(this,arguments,(function*({callbacks:e,clickDaemon:t,reason:a,depth:r}){return new Promise(((s,n)=>Qt(this,null,(function*(){ea.spoiler(a,r)("showFullscreenAdv",e),t.request(),l.Z.post({type:"adv-promo-block",action:"show",data:{advTag:v.$H.INTERSTITIAL,reason:a,onError:e=>{"Promo chunk wasnt loaded"===e.message?(t.error(e.message),s()):n(new Error(`PromoBlock error ${e.message}`))},onOpen:()=>{t.response(),e.onOpen(),s()},onClose:()=>{e.onClose()}}})}))))}))}showRewardedVideo(e){return Qt(this,arguments,(function*({callbacks:e,clickDaemon:t}){return new Promise(((a,r)=>Qt(this,null,(function*(){ea("showRewardedVideo",e),t.request(),l.Z.post({type:"adv-promo-block",action:"show",data:{advTag:v.$H.REWARDED,onError:e=>{r(new Error(`PromoBlock error ${e.message}`))},onOpen:()=>{t.response(),e.onOpen(),a()},onRewarded:()=>{e.onRewarded()},onClose:()=>{e.onClose()}}})}))))}))}}var aa=a(29011);var ra=a(23404);const sa="GameEvents";class na{constructor(){this.listeners=[],window.addEventListener("message",(e=>{e.data.source===sa&&this.processEvent(e)}))}addListener(e){return this.listeners.push(e),()=>{this.removeListener(e)}}removeListener(e){this.listeners=this.listeners.filter((t=>t!==e))}processEvent(e){const{responseToId:t}=e.data;for(let a of this.listeners)if(!a.messageId||a.messageId===t){a.fn(e.data)&&this.removeListener(a)}}}function oa({action:e,payload:t,responseToId:a,type:r}){const s=`${Date.now()}-${Math.random()}`;return window.parent.postMessage({action:e,id:s,payload:t,responseToId:a,source:sa,type:r,ver:1},"*"),s}var ia=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const la=(0,se.M$)("AdvParentWindow",void 0,{background:"#0c6c09"});var da=a(71487);function ca(){const e=document.querySelector(`#${J}`);e&&(e.innerText="")}const ha=(0,se.M$)("AdvPrebidTGO",se.XG.Adv,{background:"#0c6c09"});var ua=a(21698),pa=a(25562),ma=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));class va{constructor(e){var t,a;this.service=e,this.waitForSlotReady=void 0,this.retries=0,this.waitForSlotViewable=void 0,this.retries=(t=e.advManager.flags,null!=(a=(0,O.$9)(t,Ce.Z.advGoogleInterstitialRetries))?a:2),(0,ft.bT)((e=>{e.pubads().addEventListener("slotRenderEnded",(e=>{var t;e.slot===this.slot&&(null==(t=this.onSlotRenderEnded)||t.call(this,e))})).addEventListener("impressionViewable",(e=>{var t;e.slot===this.slot&&(null==(t=this.onImpressionViewable)||t.call(this,e))}))}))}defineSlot(e){return(0,ft.bT)((t=>{const a=(0,pa.iv)(this.service.advManager.flags);ha(`defineSlot. filteredSizes=[${a.join(",")}]`);const r=t.defineSlot(this.service.getAdvBlockId(v.$H.INTERSTITIAL,e),a,ee(this.service.serviceName));if(!r)throw new Error(ut.XO.NO_SLOT);return r.addService(t.pubads()),r.retry=0,t.enableServices(),r}))}preload(e){return ma(this,arguments,(function*({reason:e=tt.p_.PRELOAD,depth:t,clickDaemon:a,beforeRequest:r}){let s=this.retries;if(void 0!==t&&(this.waitForSlotReady&&this.slot&&(ha.tag("Retry")("Skip retry, due showAdv call"),this.slot.retry=1/0),s=0),this.waitForSlotReady)return this.waitForSlotReady.promise;ha.spoiler(this)("Preload interstitial slot");const n=new y.Z;this.waitForSlotReady=n;const o=new y.Z;return this.waitForSlotViewable=o,this.slot?this.slot.retry=0:(yield l.Z.post({type:"adv-fullscreen-block",action:"add-block",data:{blockName:this.service.serviceName},timeout:pe.WT}),this.slot=yield this.defineSlot(e)),r&&(yield r()),a||(a=new at.U({app_id:this.service.advManager.appId,tag:v.$H.INTERSTITIAL})),a.request({provider:this.service.serviceName,advBlockId:this.service.getAdvBlockId(v.$H.INTERSTITIAL,e),reason:e}),this.onSlotRenderEnded=t=>{if(n.state===y.W.Pending){if(t.isEmpty)return null==a||a.responseEmpty(),t.slot.retry<s?(ha.tag("Retry")(`Retrying request, ${t.slot.retry+1} of ${this.retries}`),null==a||a.request({provider:this.service.serviceName,advBlockId:this.service.getAdvBlockId(v.$H.INTERSTITIAL,e),reason:e}),t.slot.retry++,void googletag.pubads().refresh([this.slot])):(n.resolve({isEmpty:!0,clickDaemon:a}),delete this.waitForSlotReady,void delete this.waitForSlotViewable);a.response(),n.resolve({isEmpty:!1,clickDaemon:a}),(0,ua.o)(t.slot,"interstitial-banner_google")}else ha("Ignore slot response, preload canceled.")},this.onImpressionViewable=()=>{o.resolve()},googletag.pubads().refresh([this.slot]),this.waitForSlotReady.promise}))}show(){return ma(this,null,(function*(){if(!this.waitForSlotViewable)throw new Error("Call Preload.show() before preload()");ha.spoiler(this)("Show interstitial slot"),yield l.Z.post({type:"adv-fullscreen-block",action:"show-block",data:{blockName:this.service.serviceName}}),yield this.waitForSlotViewable.promise,delete this.waitForSlotReady,delete this.waitForSlotViewable}))}cancel(){var e,t;ha("Cancel preload promises"),null==(e=this.waitForSlotReady)||e.resolve({isEmpty:!1,clickDaemon:null}),null==(t=this.waitForSlotViewable)||t.resolve(),delete this.waitForSlotReady,delete this.waitForSlotViewable}}var ga=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const fa={slotRenderEnded:"onSlotRenderEnded",rewardedSlotReady:"onRewardedSlotReady",rewardedSlotGranted:"onRewardedSlotGranted",rewardedSlotClosed:"onRewardedSlotClosed"};class ya{constructor(e){var t,a;this.service=e,this.slot=void 0,this.waitForSlotReady=void 0,this.retries=(t=this.service.advManager.flags,null!=(a=(0,O.$9)(t,Ce.Z.advGoogleRewardedRetries))?a:0),(0,ft.bT)((()=>{const e=googletag.pubads();for(const t in fa)e.addEventListener(t,(e=>{var a;const{slot:r}=e;r===this.slot&&(null==(a=this[fa[t]])||a.call(this,e))}))})),_e.default.addChangeListener((()=>{var e;null==(e=this.onOrientationChange)||e.call(this)}))}defineSlot({retry:e}){return(0,ft.bT)((()=>{const t=googletag.defineOutOfPageSlot(this.service.getAdvBlockId(v.$H.REWARDED),googletag.enums.OutOfPageFormat.REWARDED);if(!t)throw new Error(ut.XO.NO_SLOT);return t.addService(googletag.pubads()),t.retry=e,t}))}preload(){return ga(this,arguments,(function*({depth:e,clickDaemon:t,reason:a=tt.p_.PRELOAD}={}){if(this.waitForSlotReady)return this.retries&&this.slot&&void 0!==e&&(ha.tag(["Retry","Rewarded"])("Skip retry, due showAdv call"),this.slot.retry=0),this.waitForSlotReady.promise;ha.spoiler(this)("Preload rewarded slot");const r=new y.Z;this.waitForSlotReady=r;const s=new y.Z;let n,o=!1,i=!1;try{t||(t=new at.U({app_id:this.service.advManager.appId,tag:v.$H.REWARDED})),this.slot&&googletag.destroySlots([this.slot]),this.slot=yield this.defineSlot({retry:void 0===e?this.retries:0}),t.request({advBlockId:this.service.getAdvBlockId(v.$H.REWARDED,a),provider:this.service.serviceName,reason:a});const l=(e=0)=>ga(this,null,(function*(){this.slot&&googletag.destroySlots([this.slot]),this.slot=yield this.defineSlot({retry:e}),null==t||t.request({advBlockId:this.service.getAdvBlockId(v.$H.REWARDED,a),reason:a}),googletag.pubads().refresh([this.slot])}));this.onOrientationChange=()=>{if(ha.spoiler("orientationChange",i),o&&i&&this.slot)return googletag.destroySlots([this.slot]),s.resolve({wasShown:o,wasRewarded:i}),void delete this.waitForSlotReady;delete this.waitForSlotReady,l(0)},this.onSlotRenderEnded=e=>{if(e.isEmpty)return null==t||t.responseEmpty(),this.retries&&e.slot.retry?(ha.tag(["Retry","Interstitial"])(`Retrying request, ${this.retries-e.slot.retry+1} of ${this.retries}`),void l(e.slot.retry-1)):(r.resolve({clickDaemon:t,isEmpty:!0}),delete this.waitForSlotReady,void(o&&s.resolve({wasShown:o,wasRewarded:i})));null==t||t.response()},this.onRewardedSlotReady=e=>{o?e.makeRewardedVisible():r.resolve({isEmpty:!1,clickDaemon:t,waitForShow:t=>(n=t,o=!0,e.makeRewardedVisible(),s.promise)})},this.onRewardedSlotGranted=()=>{var e;null==(e=null==n?void 0:n.onRewarded)||e.call(n),i=!0},this.onRewardedSlotClosed=()=>{s.resolve({wasShown:!0,wasRewarded:i}),delete this.waitForSlotReady},googletag.pubads().refresh([this.slot])}catch(e){(0,I.g5)(this.service,{error:e})}return this.waitForSlotReady.promise}))}show(){return ga(this,null,(function*(){}))}cancel(){var e,t;ha("Cancel rewarded preload"),null==(e=this.waitForSlotReady)||e.resolve({isEmpty:!1}),delete this.waitForSlotReady,this.slot&&(null==(t=googletag.destroySlots)||t.call(googletag,[this.slot]))}}var ba=a(58098),wa=a(78569),ka=a(89592),Ea=Object.defineProperty,Sa=Object.defineProperties,Aa=Object.getOwnPropertyDescriptors,Ia=Object.getOwnPropertySymbols,Pa=Object.prototype.hasOwnProperty,Ta=Object.prototype.propertyIsEnumerable,Ca=(e,t,a)=>t in e?Ea(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Ra=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const Da="ca-pub-7899932632484219";var Oa=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));var La=a(26256);class _a{ready(){return(0,I.qu)("[adv.prerender] ready"),this.promise}}class xa extends _a{constructor(e){super(),this.service=e,this.consecutivePreloadFails=0,this.finalRetryFailureTime=0,this.debugLog=(0,se.M$)(`[RetryablePrerender ${this.service.serviceName}]`,se.XG.Adv)}retryPreloading(e,t){return this.debugLog("Checking ability to retry"),this.finalRetryFailureTime&&Math.abs(Date.now()-this.finalRetryFailureTime)<=this.consecutivePreloadFailsInterval?(this.debugLog(`Skip: Retries timeout of ${this.consecutivePreloadFailsInterval} milliseconds not yet reached`),!1):(this.finalRetryFailureTime&&(this.debugLog("Resetting retry timer"),this.finalRetryFailureTime=0,this.consecutivePreloadFails=0),this.consecutivePreloadFails>=this.maxConsecutiveRetries?(this.debugLog("Skip: Consecutive preload failures exceeded the maximum retries"),this.finalRetryFailureTime=Date.now(),!1):(this.consecutivePreloadFails++,this.debugLog(`Retrying. Attempt: ${this.consecutivePreloadFails}`),this.next(e,new at.U({app_id:this.service.advManager.appId,tag:t})).then((a=>{a.hasContent&&!a.err?this.consecutivePreloadFails=0:this.retryPreloading(e,t)})),!0))}get maxConsecutiveRetries(){var e;return null!=(e=(0,O.$9)(this.service.advManager.flags,Ce.Z.advDevPreloadRetries))?e:4}get consecutivePreloadFailsInterval(){var e;return null!=(e=(0,O.$9)(this.service.advManager.flags,Ce.Z.advDevPreloadRetriesSeqInterval))?e:5e4}}const Na={modal:"modal",rewardedVideo:"rewarded_video",modalVisible:"modal_visible",modalVisiblePreroll:"modal_visible_preroll",modalMedia:"modal__media",modalClose:"modal__close",modalBottom:"modal__bottom",modalButton:"modal__button",modalButtonClose:"modal__button_close",modalButtonDisableAdv:"modal__button_disable_adv",fullscreenButtonTop:"fullscreen_button_top",modalAdvCountdown:"modal__advCountdown",modalAdvCountdownCircle:"modal__advCountdownCircle",modalContent:"modal_content",modalContentOld:"modal__content_old",mobileCloseButton:"mobile_close_button",modalRewarded:"modal__rewarded",modalDesktopCountdown:"modal__desktop_countdown",modalWrap:"modal__wrap",modalContentSearchApplication:"modal__content_search-application",modalCloseSearchApplication:"modal__close_search-application",yandexAdaptive:"yandex-adaptive",withNativeClose:"with-native-close"},Ba=20;var Ma=a(34967),$a=a(76958),Fa=Object.defineProperty,Ha=Object.getOwnPropertySymbols,Wa=Object.prototype.hasOwnProperty,Ga=Object.prototype.propertyIsEnumerable,Za=(e,t,a)=>t in e?Fa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,ja=(e,t)=>{for(var a in t||(t={}))Wa.call(t,a)&&Za(e,a,t[a]);if(Ha)for(var a of Ha(t))Ga.call(t,a)&&Za(e,a,t[a]);return e};const Ua=(0,se.M$)("YandexAdv",[se.XG.Adv],{background:"#d7bc29"});function qa(){return Object.keys(Na).reduce(((e,t)=>(e[t]=`play-yandex-${Na[t]}`,e)),{})}function za(e,t,a){const r=e[`${t}SearchApplication`];return`${e[t]} ${a?r:""}`}function Va(){var e,t,a;(0,Ma.U4)({},{borrowParams:{adv:{yaContextScriptLoad:Boolean(null==(a=null==(t=null==(e=window.Ya)?void 0:e.Context)?void 0:t.AdvManager)?void 0:a.render)}}})}function Ka({advBlocks:e,deviceType:t,reason:a}){var r,s,n,o,i,l;if((0,St.x)())return a===tt.p_.START_FULLSCREEN?ra.EC.start_fullscreen:ra.EC.fullscreen;if(t===$a.n.desktop){const t=ja(ja({},e),e.desktop);return a===tt.p_.START_FULLSCREEN&&null!=(r=t.start_fullscreen)?r:t.fullscreen}const d=ja(ja({},e),e.mobile);let c=d.fullscreen;return a===tt.p_.START_FULLSCREEN?(c=null!=(s=d.start_fullscreen)?s:c,c=_e.default.isLandscape?null!=(n=d.start_fullscreen_landscape)?n:c:null!=(o=d.start_fullscreen_portrait)?o:c):c=_e.default.isLandscape?null!=(i=d.fullscreen_landscape)?i:c:null!=(l=d.fullscreen_portrait)?l:c,c}function Xa({advBlocks:e,deviceType:t}){if((0,St.x)())return ra.EC.rewarded;if(t===$a.n.desktop){return ja(ja({},e),e.desktop).rewarded}return ja(ja({},e),e.mobile).rewarded}var Ja=a(40174),Qa=Object.defineProperty,er=Object.getOwnPropertySymbols,tr=Object.prototype.hasOwnProperty,ar=Object.prototype.propertyIsEnumerable,rr=(e,t,a)=>t in e?Qa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;class sr extends Error{constructor({type:e,text:t,code:a},r,s={}){super(),this.message=`${r}: err.code=${a}`,this.additional=((e,t)=>{for(var a in t||(t={}))tr.call(t,a)&&rr(e,a,t[a]);if(er)for(var a of er(t))ar.call(t,a)&&rr(e,a,t[a]);return e})({adv:{text:null==t?void 0:t.substr(0,100),code:a,type:e}},s)}}var nr=a(38508),or=a(58432),ir=Object.defineProperty,lr=Object.defineProperties,dr=Object.getOwnPropertyDescriptors,cr=Object.getOwnPropertySymbols,hr=Object.prototype.hasOwnProperty,ur=Object.prototype.propertyIsEnumerable,pr=(e,t,a)=>t in e?ir(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,mr=(e,t)=>{for(var a in t||(t={}))hr.call(t,a)&&pr(e,a,t[a]);if(cr)for(var a of cr(t))ur.call(t,a)&&pr(e,a,t[a]);return e},vr=(e,t)=>lr(e,dr(t));class gr extends xa{constructor(e,t,a){super(e),this._previousReason=tt.p_.PRELOAD,this.previousPageNumber=0,this.yandexAdvService=e;const{advBlocks:r}=e.advManager;Ua(`[adv.prerender] yandex init with advBlocks = ${JSON.stringify(r,null,"\t")}`),Ua(`[adv.prerender] reason = ${t}`),e.savedPageYOffset=(0,I.SW)(e.advContainer),this.promise=new Promise(((e,r)=>{this.next(t,a).then(e).catch(r)}))}get previousReason(){return this._previousReason}next(e=this._previousReason,t){Ua("[adv.prerender] next"),this._previousReason!==e&&(this._previousReason=e);const{yandexAdvService:a}=this,{advBlocks:r,deviceType:s}=a.advManager;return this.promise=new Promise(((a,n)=>{this.previousPageNumber+=1;const o=Ka({advBlocks:r,deviceType:s,reason:e});Ua(`[adv.prerender] advBlockId = ${o}`),l.Z.post({type:"yandex-fullscreen-render",action:"update-block-id",data:{blockId:o,pageNumber:this.previousPageNumber},timeout:1e3}).then((({data:e})=>{const{blockId:t}=e;return ue({querySelector:`#${t}`,interval:100,rejectTimeout:1500})})).then((r=>{this.renderYaAdv(a,n,{advBlockId:o,reason:e,renderTo:r.id,clickDaemon:t})})).catch((e=>{a({hasContent:!1,err:e})}))})).catch((e=>({hasContent:!1,err:e}))),this.promise}renderYaAdv(e,t,{advBlockId:a,clickDaemon:r,reason:s,renderTo:n}){var o,i,d,c,h;Ua("[adv.prerender] renderYaAdv");const{flags:u,isAdvDisabled:p}=this.yandexAdvService.advManager;null==(i=(o=this.yandexAdvService).destroyAdv)||i.call(o);try{if(p)return void e({hasContent:!1,noRequest:!0});if(!(null==(h=null==(c=null==(d=window.Ya)?void 0:d.Context)?void 0:c.AdvManager)?void 0:h.render)){throw new Error("window.Ya.Context.AdvManager.render is not defined")}const{appId:t,deviceId:o}=this.yandexAdvService.advManager,i=this.previousPageNumber%Ba;(0,I.U2)("РСЯ fullscreen",`${i}`),s===tt.p_.WATERFALL?r.request():r.request({advBlockId:a,provider:this.yandexAdvService.serviceName,reason:s});const m=mr(vr(mr({},(0,St.x)()?{type:"fullscreen",platform:"desktop"}:{}),{async:!0,blockId:a,disableRefresh:!0,extParams:vr(mr({},o?{google_aid:o}:{}),{utm_source_service:"games","distr-id":t,"game-distrib-stat-id":(0,or.Sn)()}),pageNumber:i,renderTo:n,statId:(0,or.Sn)(),lazyLoad:!1,onError:t=>{Ua("[adv.prerender] onError");const s=(0,nr.M)(t,{blockId:a,pageId:i});(0,ge.H)({additional:{advBlockId:a,pageId:i},block:ye.W.ADV,prefix:ra.yt},new sr(t,"Callback onError in fullscreen")),e({hasContent:!1,err:new Error(s),clickDaemon:r})},onRender:t=>{(0,St.x)()&&window.focus(),r.response(),this.yandexAdvService.destroyAdv=()=>{var e,t;this.yandexAdvService.destroyAdv=void 0,null==(t=null==(e=window.Ya)?void 0:e.Context)||t.AdvManager.destroy({blockId:a})},e({hasContent:!0,isMediaAdv:"rtb"===t.product,clickDaemon:r})}}),(0,St.x)()?{onClose:()=>{(0,R.D)((()=>{l.Z.post({type:"yandex-adv-service",action:"close-adv"})}))}}:{}),v=()=>{null==r||r.responseEmpty(),e({hasContent:!1,clickDaemon:r})};Ua("[adv.prerender] Preload fullscreen ad - AdvManager.render"),(0,Ja.Q$)({abtFlags:u,adOptions:m,methodName:Ja.xn.RENDER,onAdLoadFailed:v})}catch(e){t(e)}}}var fr=Object.defineProperty,yr=Object.defineProperties,br=Object.getOwnPropertyDescriptors,wr=Object.getOwnPropertySymbols,kr=Object.prototype.hasOwnProperty,Er=Object.prototype.propertyIsEnumerable,Sr=(e,t,a)=>t in e?fr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Ar=(e,t)=>{for(var a in t||(t={}))kr.call(t,a)&&Sr(e,a,t[a]);if(wr)for(var a of wr(t))Er.call(t,a)&&Sr(e,a,t[a]);return e},Ir=(e,t)=>yr(e,br(t));class Pr extends _a{constructor(e,t,a){super(),this.yandexAdvService=e,this._previousReason=tt.p_.PRELOAD,this.previousPageNumber=0,this.isProcessing=!1;const{advBlocks:r}=e.advManager;Ua(`[adv.prerender] yandex init with advBlocks = ${JSON.stringify(r,null,"\t")}`),Ua(`[adv.prerender] startReason = ${t}`),e.savedPageYOffset=(0,I.SW)(e.advContainer),this.promise=new Promise(((e,r)=>{this.next(t,a).then(e).catch(r)}))}get previousReason(){return this._previousReason}next(e=this._previousReason,t){var a;Ua("[adv.prerender] next"),this._previousReason!==e&&(this._previousReason=e);const{yandexAdvService:r}=this,{advBlocks:s}=r.advManager;return null==(a=r.destroyAdv)||a.call(r),Ua("[adv.prerender] isProcessing =",this.isProcessing),this.promise=new Promise(((a,r)=>{this.isProcessing=!0,this.previousPageNumber+=1;const n=Ka({advBlocks:s,deviceType:this.getPlatform(),reason:e});Ua(`[adv.prerender] advBlockId = ${n}`),l.Z.post({type:"yandex-fullscreen-render",action:"update-block-id",data:{blockId:n,pageNumber:this.previousPageNumber},timeout:1e3}).then((({data:e})=>{const{blockId:t}=e;return ue({querySelector:`#${t}`,interval:100,rejectTimeout:1500})})).then((s=>{this.renderYaAdv(a,r,{advBlockId:n,reason:e,renderTo:s.id,clickDaemon:t})})).catch((e=>{a({hasContent:!1,err:e})}))})).catch((e=>(this.isProcessing=!1,{hasContent:!1,err:e}))),this.promise}getRsyaPlatform(){var e,t,a,r;const s=null==(r=null==(a=null==(t=null==(e=window.Ya)?void 0:e.Context)?void 0:t.AdvManager)?void 0:a.getPlatform)?void 0:r.call(a);return null!=s?s:"desktop"}getPlatform(){return"touch"===this.getRsyaPlatform()?"mobile":"desktop"}renderYaAdv(e,t,{advBlockId:a,clickDaemon:r,reason:s,renderTo:n}){var o,i,l,d,c;Ua("[adv.prerender] renderYaAdv");const{isAdvDisabled:h,flags:u}=this.yandexAdvService.advManager;let p=e;null==(i=(o=this.yandexAdvService).destroyAdv)||i.call(o);try{if(h)return void p({hasContent:!1,noRequest:!0});if(!(null==(c=null==(d=null==(l=window.Ya)?void 0:l.Context)?void 0:d.AdvManager)?void 0:c.preload)){const e="window.Ya.Context.AdvManager.preload is not defined";throw r.error(e),new Error(e)}(0,I.U2)("РСЯ fullscreen",`${a}/${this.previousPageNumber%Ba}`),s===tt.p_.WATERFALL?r.request():r.request({advBlockId:a,provider:this.yandexAdvService.serviceName,reason:s});let e,t=!1;const o=new Promise((t=>e=t));let i=!1;const{appId:m,deviceId:v}=this.yandexAdvService.advManager,g=this.previousPageNumber%Ba,f={async:!0,blockId:a,disableRefresh:!0,extParams:Ir(Ar({},v?{google_aid:v}:{}),{utm_source_service:"games","distr-id":m,"game-distrib-stat-id":(0,or.Sn)()}),lazyLoad:!1,pageNumber:g,platform:this.getRsyaPlatform(),renderTo:n,statId:(0,or.Sn)(),type:"fullscreen",onClose:()=>{Ua("[adv.prerender] onClose"),this.isProcessing=!1,i=!1,this.yandexAdvService.hideFullscreenAdv(t)},onError:e=>{Ua("[adv.prerender] onError"),this.isProcessing=!1,i=!1;const t=String(e.text);(0,ge.H)({block:ye.W.ADV,additional:{advBlockId:a,pageId:g},prefix:ra.yt},new sr(e,"Callback onError in fullscreen")),p({hasContent:!1,err:new Error(t),clickDaemon:r})},onPreload:t=>{Ua("[adv.prerender] onPreload",p),i=!0,r.response(),p({showPrerenderedAd:()=>(Ua("[adv.prerender] showPrerenderedAd"),t(),o),clickDaemon:r}),p=e},onRender:e=>{if(Ua("[adv.prerender] onRender; isPreloaded =",i),!i)return Ua("[adv.prerender] Called `onRender` before `onPreload`. Abort. Call `onAdLoadFailed`."),void y();this.yandexAdvService.destroyAdv=()=>{var e,t;this.yandexAdvService.destroyAdv=void 0,Ua("[adv.prerender] yandexAdvService.destroyAdv called"),null==(t=null==(e=window.Ya)?void 0:e.Context)||t.AdvManager.destroy({blockId:a})},t=!0,p({hasContent:!0,isMediaAdv:"rtb"===e.product,clickDaemon:r})}},y=()=>{Ua("[adv.prerender] onAdLoadFailed"),r.responseEmpty(),this.isProcessing=!1,i=!1,p({hasContent:!1,clickDaemon:r})};Ua("[adv.prerender] Preload fullscreen ad - AdvManager.preload"),(0,Ja.Q$)({abtFlags:u,adOptions:f,methodName:Ja.xn.PRELOAD,onAdLoadFailed:y})}catch(e){t(e)}}}var Tr=a(95025),Cr=a(77901),Rr=Object.defineProperty,Dr=Object.defineProperties,Or=Object.getOwnPropertyDescriptors,Lr=Object.getOwnPropertySymbols,_r=Object.prototype.hasOwnProperty,xr=Object.prototype.propertyIsEnumerable,Nr=(e,t,a)=>t in e?Rr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Br=(e,t)=>{for(var a in t||(t={}))_r.call(t,a)&&Nr(e,a,t[a]);if(Lr)for(var a of Lr(t))xr.call(t,a)&&Nr(e,a,t[a]);return e},Mr=(e,t)=>Dr(e,Or(t)),$r=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const Fr=["direct","media-smart","media-image","media-creative","video-smart","auto-video-irect","video-creative","video-motion","media-creative-survey","video-creative-survey"];class Hr{constructor(e,t){this.yandexAdvService=e,this.pageNumber=0,this.isYandexSearchApp=(0,Cr.qo)()}next(e){const{flags:t}=this.yandexAdvService.advManager;t[Ce.Z.preloadRewardedVideo]&&(this.preloadedRewardedVideo=this.preloadRewardedVideo())}getOnCloseOptionForTV(){return(0,St.x)()?{onClose:()=>{this.yandexAdvService.getClickDaemon(v.$H.REWARDED).close(),this.hideVideoAdv(),"function"==typeof this.onClose&&this.onClose()}}:{}}preloadRewardedVideo(){const{appId:e,deviceId:t}=this.yandexAdvService.advManager,a=this.yandexAdvService.getAdvBlockId(v.$H.REWARDED);let r=()=>{},s=()=>{};const n=new Promise(((e,t)=>{r=e,s=t})),o=new Promise((n=>$r(this,null,(function*(){var o,i,d;try{const s=yield l.Z.post({type:"yandex-rewarded-render",action:"update-block-id",data:{blockId:a},timeout:1e3}),{data:{blockId:c}}=s,h=yield ue({querySelector:`#${c}`,interval:100,rejectTimeout:1500});if(!(null==(d=null==(i=null==(o=window.Ya)?void 0:o.Context)?void 0:i.AdvManager)?void 0:d.preload))throw new Error("window.Ya.Context.AdvManager.preload is not defined");Ua("[adv.rerender] Preload rewarded video - AdvManager.preload");const u=Br(Mr(Br({},(0,St.x)()?{type:"rewarded",platform:"desktop"}:{}),{async:!0,blockId:a,disableRefresh:!0,extParams:Mr(Br({},t?{google_aid:t}:{}),{utm_source_service:"games","distr-id":e,"game-distrib-stat-id":(0,or.Sn)()}),pageNumber:this.pageNumber,renderTo:h.id,statId:(0,or.Sn)(),onError:(e={})=>{(0,ge.H)({block:ye.W.ADV,prefix:ra.yt},new sr(e,"Callback onError in rewarded"))},onRender:e=>{e?e.product||(0,ge.H)({block:ye.W.ADV},new Error("Adv Rewarded: there is no data.product")):(0,ge.H)({block:ye.W.ADV},new Error("Adv Rewarded: there is no data")),Ua("[adv.rerender] Render preloaded rewarded"),r({hasContent:!0,productType:e.productType})},onPreload:e=>n({showRewardedCallback:e})}),this.getOnCloseOptionForTV()),p=()=>{(0,ge.H)({block:ye.W.ADV},new Error("Adv Rewarded: no content")),n({}),r({hasContent:!1})};(0,Ja.Q$)({abtFlags:this.yandexAdvService.advManager.flags,adOptions:u,methodName:Ja.xn.PRELOAD,onAdLoadFailed:p})}catch(e){n({}),s(e)}}))));return function(){return o.then((({showRewardedCallback:e})=>(null==e||e(),n)))}}resizeAdv(){this.yandexAdvService&&(this.yandexAdvService.savedPageYOffset=(0,I.SW)(this.yandexAdvService.advContainer))}hideVideoAdv(){var e,t;const{advManager:a}=this.yandexAdvService,{deviceType:r,advBlocks:s}=a,n=(0,St.x)()?ra.EC.rewarded:s.rewarded;(0,I.PS)(),r!==$a.n.desktop&&(0,I.HH)(),l.Z.post({type:"yandex-rewarded-render",action:"hide-rewarded"}),window.removeEventListener("resize",this.resizeAdv),window.scroll(0,this.yandexAdvService.savedPageYOffset),null==(t=null==(e=window.Ya)?void 0:e.Context)||t.AdvManager.destroy({blockId:n}),this.yandexAdvService.preloadRewardedAdv(tt.p_.PRELOAD)}renderFakeRewarded({advBlockId:e,clickDaemon:t,onRewardedForTV:a,previousRewardedPageNumber:r,reason:s}){const{advManager:n}=this.yandexAdvService,{appId:o,deviceId:i}=n;return new Promise(((n,d)=>$r(this,null,(function*(){var c,h,u;try{if(!(null==(u=null==(h=null==(c=window.Ya)?void 0:c.Context)?void 0:h.AdvManager)?void 0:u.render))throw new Error("window.Ya.Context.AdvManager.render is not defined");t.request({advBlockId:e,reason:s,provider:this.yandexAdvService.serviceName});const p=yield l.Z.post({type:"yandex-rewarded-render",action:"update-block-id",data:{blockId:e},timeout:1e3}),{data:{blockId:m}}=p,v=yield ue({querySelector:`#${m}`,interval:100,rejectTimeout:1500}),g=r%Ba;(0,I.U2)("РСЯ rewarded",`${e}/${g}`),(0,I.WL)();const f=Br(Br(Mr(Br({},(0,St.x)()?{type:"rewarded"}:{}),{async:!0,blockId:e,disableRefresh:!0,extParams:Mr(Br({},i?{google_aid:i}:{}),{utm_source_service:"games","distr-id":o,"game-distrib-stat-id":(0,or.Sn)()}),lazyLoad:!1,pageNumber:g,renderTo:v.id,statId:(0,or.Sn)(),onError:(e={})=>{d(new sr(e,"Callback onError in rewarded"))},onRender:e=>{(0,St.x)()&&window.focus(),e?e.product||(0,ge.H)({block:ye.W.ADV},new Error("Adv Rewarded: there is no data.product")):(0,ge.H)({block:ye.W.ADV},new Error("Adv Rewarded: there is no data")),t.response(),n({hasContent:!0,productType:e.productType})}}),(0,St.x)()?{onRewarded:a}:{}),this.getOnCloseOptionForTV()),y=()=>{(0,ge.H)({block:ye.W.ADV},new Error("Adv Rewarded: no content")),n({hasContent:!1})};(0,Ja.Q$)({abtFlags:this.yandexAdvService.advManager.flags,adOptions:f,methodName:Ja.xn.RENDER,onAdLoadFailed:y})}catch(e){d(e)}}))))}showRewardedVideo({callbacks:e,clickDaemon:t}){const{onOpen:a,onRewarded:r,onClose:s}=e,n=Boolean(this.isYandexSearchApp),{advManager:o,cssClasses:i}=this.yandexAdvService,{deviceType:d,viewType:c,flags:h}=o,u=this.yandexAdvService.getAdvBlockId(v.$H.REWARDED),p=document.querySelector(`.${i.rewardedVideo}`),m=Number(h[Ce.Z.rewardedVideoTimeout]);let g;this.onClose=s,g=!isNaN(m)&&m>0?m:20;let f=g;return window.addEventListener("resize",this.resizeAdv),d!==$a.n.desktop&&(0,I.xK)(),(c===ra.xd.fullscreen||n)&&this.resizeAdv(),new Promise(((e,a)=>{this.pageNumber=((this.pageNumber||0)+1)%Ba;const s=()=>{(h[Ce.Z.preloadRewardedVideo]?this.preloadedRewardedVideo.bind(this):this.renderFakeRewarded.bind(this))({advBlockId:u,clickDaemon:t,onRewardedForTV:(0,St.x)()?e=>{!0===e&&(null==r||r())}:void 0,previousRewardedPageNumber:this.pageNumber,reason:tt.p_.ONSPOT}).then(e).catch(a)};window.yaContextCb?(window.yaContextCb.push(s),Ua("[adv.rerender] new rewarded render on")):s()})).then((({hasContent:e,productType:t})=>{var n;if(Ua(`[adv.rerender] hasContent = ${e}, productType = ${t}`),!e)throw(0,Tr.Cj)(o.waterfallQueue[v.$H.REWARDED],he.e.Promo)||null==r||r(),new Error(ra.Iy);t&&Fr.includes(t)&&(g=7,f-=13),l.Z.post({type:"yandex-rewarded-render",action:"show-rewarded",data:{seconds:f}}).then((()=>{this.hideVideoAdv(),null==s||s()})),(0,St.x)()||l.Z.post({type:"yandex-rewarded-render",action:"on-rewarded"}).then((()=>{null==r||r()}));const d=(null==(n=this.yandexAdvService.advManager.context.uatraits)?void 0:n.OSFamily)===It.k8.IOS;(0,I.ss)({advElement:document.querySelector(`#yandex_rtb_rewarded_${u}`),type:v.$H.REWARDED,flags:o.flags,appId:o.appId,isIOS:d}),(0,I.J4)(i,p),null==a||a()})).catch((e=>{throw this.hideVideoAdv(),e}))}}var Wr=Object.defineProperty,Gr=Object.defineProperties,Zr=Object.getOwnPropertyDescriptors,jr=Object.getOwnPropertySymbols,Ur=Object.prototype.hasOwnProperty,qr=Object.prototype.propertyIsEnumerable,zr=(e,t,a)=>t in e?Wr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Vr=(e,t)=>{for(var a in t||(t={}))Ur.call(t,a)&&zr(e,a,t[a]);if(jr)for(var a of jr(t))qr.call(t,a)&&zr(e,a,t[a]);return e},Kr=(e,t)=>Gr(e,Zr(t)),Yr=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const Xr=["media-creative-reach","media-image","media-creative","video-creative"];class Jr{constructor(e,t){this.yandexAdvService=e,this.advContainer=null,this.currentProductType="",this.pageNumber=0,_e.default.addChangeListener((()=>{this.rerenderAdv()}))}next(){}getRsyaPlatform(){var e,t,a,r;const s=null==(r=null==(a=null==(t=null==(e=window.Ya)?void 0:e.Context)?void 0:t.AdvManager)?void 0:a.getPlatform)?void 0:r.call(a);return null!=s?s:"desktop"}getPlatform(){return"touch"===this.getRsyaPlatform()?"mobile":"desktop"}rerenderAdv(){var e,t;const a=this.getAdvBlockId();if(!this.yandexAdvService.isRewardedShowing||Xr.includes(this.currentProductType))return;null==(t=null==(e=window.Ya)?void 0:e.Context)||t.AdvManager.destroy({blockId:a});const r=this.yandexAdvService.getClickDaemon(v.$H.REWARDED);this.showRewardedVideo({callbacks:this.yandexAdvService.showAdvCallbacks[v.$H.REWARDED],clickDaemon:r,reason:tt.p_.PRELOAD,tag:v.$H.REWARDED,initialTag:v.$H.REWARDED,depth:0})}getAdvBlockId(){const{advManager:e}=this.yandexAdvService,{advBlocks:t}=e;return Xa({advBlocks:t,deviceType:this.getPlatform()})}hideRewarded(){var e,t;const{advManager:a}=this.yandexAdvService,{deviceType:r,flags:s}=a,n=this.getAdvBlockId();(0,I.PS)(),r!==$a.n.desktop&&(0,I.HH)(),l.Z.post({type:"yandex-rewarded-render",action:"hide-rewarded"}),null==(t=null==(e=window.Ya)?void 0:e.Context)||t.AdvManager.destroy({blockId:n}),!1!==(0,O.RM)(s,Ce.Z.rewardedPCodeAdvPreloadFs)&&(0,I.un)()&&this.yandexAdvService.preloadFullscreenAdv(tt.p_.PRELOAD)}renderRewarded({advBlockId:e,previousRewardedPageNumber:t,callbacks:a,clickDaemon:r}){const{advManager:s}=this.yandexAdvService,{flags:n}=s;return new Promise(((s,o)=>Yr(this,null,(function*(){var i,l,d;try{if(!(null==(d=null==(l=null==(i=window.Ya)?void 0:i.Context)?void 0:l.AdvManager)?void 0:d.render))throw new Error("window.Ya.Context.AdvManager.render is not defined");r.request({advBlockId:e,reason:tt.p_.ONSPOT,provider:this.yandexAdvService.serviceName});const c=t%Ba;(0,I.U2)("РСЯ rewarded",`${e}/${c}`),(0,I.WL)();const{appId:h,deviceId:u}=this.yandexAdvService.advManager,p={async:!0,blockId:e,disableRefresh:!0,extParams:Kr(Vr({},u?{google_aid:u}:{}),{utm_source_service:"games","distr-id":h,"game-distrib-stat-id":(0,or.Sn)()}),lazyLoad:!1,pageNumber:c,platform:this.getRsyaPlatform(),statId:(0,or.Sn)(),type:"rewarded",onError:(e={})=>{o(new sr(e,"Callback onError in rewarded"))},onClose:()=>{var e;this.currentProductType="",this.yandexAdvService.isRewardedShowing=!1,this.hideRewarded(),null==(e=a.onClose)||e.call(a)},onRewarded:e=>{e&&a.onRewarded&&a.onRewarded()},onRender:e=>{e?e.product||(0,ge.H)({block:ye.W.ADV},new Error("Adv Rewarded: there is no data.product")):(0,ge.H)({block:ye.W.ADV},new Error("Adv Rewarded: there is no data")),r.response(),s({hasContent:!0,productType:e.productType})}},m=()=>{(0,ge.H)({block:ye.W.ADV},new Error("Adv Rewarded: no content")),s({hasContent:!1})};(0,Ja.Q$)({abtFlags:n,adOptions:p,methodName:Ja.xn.RENDER,onAdLoadFailed:m})}catch(e){o(e)}}))))}showRewardedVideo({callbacks:e,clickDaemon:t,depth:a}){const{onRewarded:r,onOpen:s}=e,{advManager:n,cssClasses:o}=this.yandexAdvService,{deviceType:i}=n,d=this.getAdvBlockId();return this.advContainer=document.querySelector(`.${o.rewardedVideo}`),i!==$a.n.desktop&&(0,I.xK)(),this.yandexAdvService.isRewardedShowing=!0,new Promise(((r,s)=>Yr(this,null,(function*(){this.pageNumber=((this.pageNumber||0)+1)%Ba,window.yaContextCb?(window.yaContextCb.push((()=>{this.renderRewarded({advBlockId:d,previousRewardedPageNumber:this.pageNumber,callbacks:e,depth:a,clickDaemon:t}).then(r).catch(s)})),Ua("new rewarded render on")):this.renderRewarded({advBlockId:d,previousRewardedPageNumber:this.pageNumber,callbacks:e,depth:a,clickDaemon:t}).then(r).catch(s)})))).then((({hasContent:e,productType:t})=>{if(Ua(`[adv.rerender] hasContent = ${e}, productType = ${t}`),!e)throw(0,Tr.Cj)(n.waterfallQueue[v.$H.REWARDED],he.e.Promo)||null==r||r(),new Error(ra.Iy);l.Z.post({type:"yandex-rewarded-render",action:"show-rewarded"}),this.currentProductType=t||"",null==s||s()})).catch((e=>{throw this.hideRewarded(),this.currentProductType="",this.yandexAdvService.isRewardedShowing=!1,e}))}}var Qr=a(93013),es=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));a(39510);var ts=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));class as extends ce{constructor(e,t){const{serviceName:a}=t;super(e,t,a),this.init()}init(){return ts(this,null,(function*(){try{const e=this.isTagActive(v.$H.INTERSTITIAL),[t]=yield Promise.all([e?yield(0,b.l)(w.oO.AnymindBlock):null]);t&&(this.provider=t);const a=this.isTagActive(v.$H.REWARDED),[r]=yield Promise.all([a?yield(0,b.l)(w.oO.AnymindRewarded):null]);r&&(this.rewardedProvider=r),yield l.Z.post({type:"adv-fullscreen-block",action:"add-block",data:{blockName:this.serviceName},timeout:pe.WT}),this.onServiceLoaded()}catch(e){this.onServiceError(e)}}))}getAdvBlockId(e,t){var a;return(null==(a=this.getWaterfallItem(e))?void 0:a.blockId)||super.getAdvBlockId(e,t)}showFullscreenAdv({callbacks:e,clickDaemon:t,reason:a}){return new Promise(((r,s)=>ts(this,null,(function*(){try{const{provider:s,serviceName:n}=this;if(!s)throw new Error("Provider not loaded.");const o=this.getAdvBlockId(v.$H.INTERSTITIAL,a);let i,d=!1;yield l.Z.post({type:"adv-fullscreen-block",action:"show-block",data:{blockName:n},timeout:pe.WT}),yield l.Z.post({type:"adv-fullscreen-block",action:"show",data:{onClose:()=>{d&&e.onClose(d),i&&s.destroySlot(i)}}}),e.onOpen(!1),t.request({advBlockId:o});const c=ee(n);i=yield s.createSlot({blockId:o,divId:c,size:(0,pa.iv)(this.advManager.flags)});const{isEmpty:h,slot:u}=yield s.preloadSlot({slot:i});if(h)throw t.responseEmpty(),new I.lu("Slot is empty",{isEmpty:h});t.response(),d=!0,r(),yield s.showSlot(u),t.show(),yield l.Z.post({type:"adv-fullscreen-block",action:"show-controls",data:{blockName:n}})}catch(e){s(e)}}))))}showRewardedVideo(e){return ts(this,arguments,(function*({callbacks:e,clickDaemon:t,reason:a}){return new Promise(((r,s)=>ts(this,null,(function*(){try{const{rewardedProvider:s}=this;if(!s)throw new Error("Provider not loaded.");const n=this.getAdvBlockId(v.$H.REWARDED,a);let o;t.request({advBlockId:n}),o=yield s.createSlot({blockId:n});const{isEmpty:i,slot:l,rewardedPromise:d}=yield s.preloadSlot({slot:o});if(i)throw t.responseEmpty(),new I.lu("Slot is empty",{isEmpty:i});r(),null==d||d.then((()=>{e.onRewarded()})),e.onOpen(!0),yield s.showSlot(l),e.onClose(!0)}catch(e){s(e)}}))))}))}cancelShow(e){if(e===v.$H.INTERSTITIAL)l.Z.post({type:"adv-fullscreen-block",action:"hide"})}}var rs=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const ss=(0,se.M$)("PubliftAdvService",se.XG.Adv);class ns extends ce{constructor(e,t){const{serviceName:a}=t;if(![he.e.PubliftZone,he.e.PubliftRewarded].includes(a))throw new Error(`Invalid service name: ${a}, kind of 'publift' expected.`);super(e,t,a),this.refreshCounter=0,this.init()}get blockName(){return`${this.serviceName}_${this.refreshCounter}`}init(){return rs(this,null,(function*(){try{const e=this.isTagActive(v.$H.INTERSTITIAL),t=this.isTagActive(v.$H.REWARDED),[a,r]=yield Promise.all([e?yield(0,b.l)(w.oO.PubliftZone):null,t?yield(0,b.l)(w.oO.PubliftRewarded):null]);e&&a&&(this.interstitialProvider=a,yield ue({querySelector:`.${L}`,interval:100,rejectTimeout:1500}),yield l.Z.post({type:"adv-fullscreen-block",action:"add-block",data:{blockName:this.blockName},timeout:pe.WT})),t&&r&&(this.rewardedProvider=r),this.onServiceLoaded()}catch(e){this.onServiceError(e)}}))}getTimeoutExtraTime(e,t){switch(e){case ie.QA.ServiceInit:return 3*pe.WT;case ie.QA.ShowFullscreen:return 10*pe.WT}return super.getTimeoutExtraTime(e,t)}getAdvBlockId(e,t){var a,r,s,n,o,i;switch(e){case v.$H.INTERSTITIAL:return null!=(s=null==(r=null==(a=this.advManager.allAdvBlocks.publift)?void 0:a.interstitial)?void 0:r.blockId)?s:"invalid_block";case v.$H.REWARDED:return null!=(i=null==(o=null==(n=this.advManager.allAdvBlocks.publift)?void 0:n.rewarded)?void 0:o.blockId)?i:"invalid_block"}return super.getAdvBlockId(e,t)}getZoneId(){var e,t,a;return null!=(a=null==(t=null==(e=this.advManager.allAdvBlocks.publift)?void 0:e.interstitial)?void 0:t.zoneId)?a:"invalid_zone"}showFullscreenAdv({callbacks:e,clickDaemon:t,reason:a}){return new Promise(((r,s)=>rs(this,null,(function*(){try{const n=this.interstitialProvider;if(!n)return void s(new Error("Publift provider not loaded."));const o=this.getAdvBlockId(v.$H.INTERSTITIAL,a);let i,d=!1;yield l.Z.post({type:"adv-fullscreen-block",action:"show-block",data:{blockName:this.blockName},timeout:pe.WT}),yield l.Z.post({type:"adv-fullscreen-block",action:"show",data:{onClose:()=>rs(this,null,(function*(){d&&e.onClose(d),i&&n.destroySlot(i),this.refreshCounter++,yield l.Z.post({type:"adv-fullscreen-block",action:"add-block",data:{blockName:this.blockName},timeout:pe.WT})}))}}),e.onOpen(!1),t.request({advBlockId:o});const c=this.getZoneId();ss("Create slot",o,c,ee(this.blockName)),i=yield n.createSlot({blockId:o,divId:ee(this.blockName),zoneId:c});const{isEmpty:h,slot:u}=yield n.preloadSlot({slot:i});if(h)throw t.responseEmpty(),new I.lu("Slot is empty",{isEmpty:!0});t.response(),d=!0,yield n.showSlot(u),t.show(),r()}catch(e){s(e)}}))))}showRewardedVideo({reason:e,clickDaemon:t,callbacks:a}){return new Promise(((r,s)=>rs(this,null,(function*(){try{const{rewardedProvider:n}=this;if(!n)return void s(new Error("Provider not loaded."));const o=this.getAdvBlockId(v.$H.REWARDED,e);let i,l=!1;t.request({advBlockId:o}),ss("Create rewarded slot",o),i=yield n.createSlot({blockId:o});const{slot:d}=yield n.preloadSlot({slot:i}),{isEmpty:c}=yield d.preloadPromise.promise;if(c)throw t.responseEmpty(),new I.lu("Slot is empty",{isEmpty:!0});t.response(),l=!0,a.onOpen(!0),r();const{rewardedPromise:h,closePromise:u}=yield n.showSlot(d),{isRewarded:p}=yield Promise.race([h,u]);yield u,p&&a.onRewarded(),a.onClose(l)}catch(e){s(e)}}))))}cancelShow(e){if(e===v.$H.INTERSTITIAL)l.Z.post({type:"adv-fullscreen-block",action:"hide",data:{blockName:this.blockName}})}}const os={adsense:ve,adsense_responsive:ve,anymind_manual:as,anymind_block:as,anymind_rewarded:as,crazy_games:class extends ce{constructor(e,t){super(e,t,he.e.CrazyGames),this.closeWithLog=(e,t)=>{e.close(),null==t||t(!0)},this.showFullscreenAdv=e=>ke(this,[e],(function*({callbacks:e,clickDaemon:t}){return new Promise(((a,r)=>{var s;t.request({advBlockId:this.getAdvBlockId(v.$H.INTERSTITIAL)});try{null==(s=window.CrazyGames)||s.SDK.ad.requestAd("midgame",{adError:e=>{(0,I.qu)("[CrazyGames] showFullscreenAdv error",e),we("error",t,r)},adFinished:()=>{this.closeWithLog(t,e.onClose),we("viewed",t,r)},adStarted:()=>{be(t,e.onOpen),a()}})}catch(e){we("error",t,r)}}))})),this.showRewardedVideo=e=>ke(this,[e],(function*({callbacks:e,clickDaemon:t}){return new Promise(((a,r)=>{var s;t.request({advBlockId:this.getAdvBlockId(v.$H.REWARDED)});try{null==(s=window.CrazyGames)||s.SDK.ad.requestAd("rewarded",{adError:e=>{(0,I.qu)("[CrazyGames] showRewardedVideo error",e),we("error",t,r)},adFinished:()=>{this.closeWithLog(t,e.onClose),we("viewed",t,r)},adStarted:()=>{be(t,e.onOpen),a()}})}catch(e){we("error",t,r)}}))})),this.loadCrazyGamesSDKScript()}loadCrazyGamesSDKScript(){return ke(this,null,(function*(){var e;try{if(yield(0,fe.x)({id:"crazy-games-sdk",src:"https://sdk.crazygames.com/crazygames-sdk-v3.js"}),!(null==(e=window.CrazyGames)?void 0:e.SDK))throw new Error("No window.CrazyGames.SDK");yield window.CrazyGames.SDK.init();const{environment:t}=window.CrazyGames.SDK;if(!t||!["crazygames","local"].includes(t))throw new Error("Unexpected SDK environment: "+t);this.onServiceLoaded()}catch(e){(0,ge.H)({block:ye.W.ADV,additional:{adv:{service:this.serviceName}}},e),this.onServiceError()}}))}getAdvBlockId(e,t){return"crazy_games_block_id"}},azerion:class extends ce{constructor(e,t){super(e,t,he.e.Azerion),this.closeWithLog=(e,t,a)=>{e.close(),null==t||t(a)},this.rewardWithLog=(e,t)=>{e.rewarded(),null==t||t()},this.showFullscreenAdv=({callbacks:e,clickDaemon:t})=>new Promise(((a,r)=>{var s,n,o;t.request({advBlockId:this.getAdvBlockId(v.$H.INTERSTITIAL)}),Pe={onOpen:()=>{be(t,e.onOpen),this.onOpenAdvTs=Date.now()},onError:e=>{(0,I.qu)("[Azerion] showFullscreenAdv error",e),we("error",t,r)},onClose:()=>{const a=void 0!==this.onOpenAdvTs&&Date.now()-this.onOpenAdvTs>=5e3;this.closeWithLog(t,e.onClose,a),we("viewed",t,r),Pe=null}};try{"function"==typeof(null==(s=window.gdsdk)?void 0:s.showAd)?window.gdsdk.showAd().then((()=>{a()})).catch(Pe.onError):null==(n=Pe.onError)||n.call(Pe,new Error("Failed to show fullscreen. GameDistribution SDK is not available"))}catch(e){null==(o=Pe.onError)||o.call(Pe,e),we("error",t,r)}})),this.showRewardedVideo=e=>Ie(this,[e],(function*({callbacks:e,clickDaemon:t}){return new Promise(((a,r)=>{var s;t.request({advBlockId:this.getAdvBlockId(v.$H.REWARDED)});let n=!1;Pe={onOpen:()=>{be(t,e.onOpen),n=!0},onError:e=>{(0,I.qu)("[Azerion] showRewardedVideo error",e),we("error",t,r)},onClose:()=>{if(!n)return(0,I.qu)("[Azerion] showRewardedVideo no ads, process empty"),void we("empty",t,r);this.closeWithLog(t,e.onClose),we("viewed",t,r),Pe=null,this.preloadRewardedVideo()},onRewarded:()=>{this.rewardWithLog(t,e.onRewarded)}};try{if("function"!=typeof(null==(s=window.gdsdk)?void 0:s.showAd))throw new Error("Failed to show rewarded. GameDistribution SDK is not available");window.gdsdk.showAd(Ee.Rewarded).then((()=>{a()})).catch(Pe.onError)}catch(e){we("error",t,r)}}))})),this.loadAzerionSDKScript()}loadAzerionSDKScript(){return Ie(this,null,(function*(){const e=(0,Ae.V)("azerion_game_id");if(!e)throw new Error("No Azerion game id passed");window.GD_OPTIONS={gameId:e,onEvent:e=>{var t,a,r;switch(e.name){case Se.SDK_GAME_PAUSE:null==(t=null==Pe?void 0:Pe.onOpen)||t.call(Pe);break;case Se.SDK_GAME_START:null==(a=null==Pe?void 0:Pe.onClose)||a.call(Pe);break;case Se.SDK_REWARDED_WATCH_COMPLETE:null==(r=null==Pe?void 0:Pe.onRewarded)||r.call(Pe)}}};try{if(yield(0,fe.x)({id:"azerion-sdk",src:"https://html5.api.gamedistribution.com/main.min.js"}),!window.gdsdk)throw new Error("No window.gdsdk");this.onServiceLoaded(),this.preloadRewardedVideo()}catch(e){(0,ge.H)({block:ye.W.ADV,additional:{adv:{service:this.serviceName}}},e),this.onServiceError()}}))}getAdvBlockId(e,t){return"azerion_block_id"}preloadRewardedVideo(){var e;"function"==typeof(null==(e=window.gdsdk)?void 0:e.preloadAd)&&window.gdsdk.preloadAd(Ee.Rewarded).then((()=>{(0,I.qu)("[Azerion] preload rewarded completed")})).catch((e=>{(0,I.qu)("[Azerion] preload rewarded error",e)}))}},google_instream:vt,google_manual:class extends ce{constructor(e,t){super(e,t,he.e.GoogleManual,{showIntervalCommonMs:2*pe.yR}),this.interstitialPreload=new bt(this),this.showFullscreenAdv=e=>kt(this,[e],(function*({callbacks:e,clickDaemon:t,reason:a}){return new Promise(((r,s)=>kt(this,null,(function*(){const{isEmpty:n,clickDaemon:o,waitForShow:i}=yield this.interstitialPreload.preload({reason:a,clickDaemon:t});o&&t.bindRequest(o);const l=()=>{window.setTimeout((()=>{this.interstitialPreload.preload()}),.75*this.advManager.minIntervalBetweenAds)};if(n||!i)return l(),void s(new I.lu(ut.XO.EMPTY_SLOT,{isEmpty:!0}));r(),e.onOpen(!0),yield i(),e.onClose(!0),l()}))))})),this.showRewardedVideo=()=>kt(this,null,(function*(){return Promise.reject("Not implemented")})),this.init()}init(){return kt(this,null,(function*(){try{yield(0,ft.S$)(),yield this.initGPT(),this.onServiceLoaded(),this.interstitialPreload.preload()}catch(e){this.onServiceError(e.message)}}))}getAdvBlockId(e){if(e===v.$H.INTERSTITIAL)return this.advManager.allAdvBlocks.google.manual;throw new Error(`AdvTag ${e} not supported by this service.`)}initGPT(){return kt(this,null,(function*(){yield(0,ft.Vg)(),yield(0,ft.bT)((e=>kt(this,null,(function*(){const{advManager:t}=this,a=yield new wt.Z(window.appData.apiData).getGoogleKeyValues({appID:t.appId,platform:t.context.platform,lang:t.lang}).catch((e=>{throw(0,ge.H)({block:ye.W.GOOGLE_ADS,message:"Trouble with getting google key values"},e),e})),r=e.pubads();Object.entries(a).forEach((([e,t])=>{r.setTargeting(e,t)}))}))))}))}cancelShow(e){if(e===v.$H.INTERSTITIAL)this.interstitialPreload.cancel()}},native:class extends ce{constructor(e,t){super(e,t,he.e.Native),this.fullscreenPreloadAdStatus="not_preloaded",this.rewardedPreloadAdStatus="not_preloaded",this.fullscreenShowAdNumber=0,this.rewardedShowAdNumber=0,this.depth=0,this.showFullscreenAdv=e=>Kt(this,[e],(function*({callbacks:e,clickDaemon:t}){return new Promise(((a,r)=>Kt(this,null,(function*(){var s;const{advManager:n}=this;this.fullscreenShowAdNumber+=1;const o=a=>{var r;e.onClose(a),n.callOnAdvClose(a),"preloading"!==this.fullscreenPreloadAdStatus&&(this.preloadFullscreenAdvPromise=void 0),r=n.flags,!1!==(0,O.RM)(r,Ce.Z.enablePreloadNativeFullscreen)&&this.preloadFullscreenAdv({clickDaemon:t})};try{e.onOpen(!1),a();const r=yield Promise.race([this.preloadFullscreenAdv({clickDaemon:t}),new Promise(((e,t)=>Kt(this,null,(function*(){yield(0,Et.D)(Xt),t(new Error("Fullscreen preload timeout"))}))))]);t.bindRequest(r),yield this.nativeAdv.showFullscreenAdv({onShowCalled:()=>{t.show()}}),o(!0)}catch(a){String(a.message).includes(Yt)||String(null==(s=this.lastFullscreenError)?void 0:s.message).includes(Yt)||t.error(a.message),(0,I.g5)(this,{tag:v.$H.INTERSTITIAL,error:a,name:"Native fullscreen adv error",additional:{adNumber:this.fullscreenShowAdNumber}}),"not_preloaded"===this.fullscreenPreloadAdStatus?(0,I.g5)(this,{tag:v.$H.INTERSTITIAL,error:a,name:"ad was not preloaded",additional:{adNumber:this.fullscreenShowAdNumber}}):"preloading"===this.fullscreenPreloadAdStatus&&(0,I.g5)(this,{tag:v.$H.INTERSTITIAL,error:a,name:"ad is still preloading",additional:{adNumber:this.fullscreenShowAdNumber}}),e.onError(a),o(!1),r(a)}}))))})),this.showRewardedVideo=e=>Kt(this,[e],(function*({callbacks:e,clickDaemon:t}){return new Promise(((a,r)=>Kt(this,null,(function*(){var s;this.rewardedShowAdNumber+=1;const n=()=>{var a;e.onClose(),"preloading"!==this.rewardedPreloadAdStatus&&(this.preloadRewardedAdvPromise=void 0),a=this.advManager.flags,!1!==(0,O.RM)(a,Ce.Z.enablePreloadNativeRewarded)&&this.preloadRewardedAdv({clickDaemon:t,reason:tt.p_.PRELOAD})};try{e.onOpen(!1),a();const r=yield Promise.race([this.preloadRewardedAdv({clickDaemon:t,reason:tt.p_.ONSPOT}),new Promise(((e,t)=>Kt(this,null,(function*(){yield(0,Et.D)(Jt),t(new Error("Rewarded preload timeout"))}))))]);t.bindRequest(r),yield this.nativeAdv.showRewardedVideo({onShowCalled:()=>{t.show()}}),e.onRewarded(),n()}catch(a){String(a.message).includes(Yt)||String(null==(s=this.lastRewardedError)?void 0:s.message).includes(Yt)||t.error(a.message),String(a.message).includes("User closed ad before it's end.")&&t.close(),(0,I.g5)(this,{tag:v.$H.REWARDED,error:a,name:"Native rewarded video error",additional:{adNumber:this.rewardedShowAdNumber}}),"not_preloaded"===this.rewardedPreloadAdStatus?(0,I.g5)(this,{tag:v.$H.REWARDED,error:a,name:"ad was not preloaded",additional:{adNumber:this.rewardedShowAdNumber}}):"preloading"===this.rewardedPreloadAdStatus&&(0,I.g5)(this,{tag:v.$H.REWARDED,error:a,name:"ad is still preloading",additional:{adNumber:this.rewardedShowAdNumber}}),e.onError(a),n(),r(a)}}))))})),(0,St.x)()?this.nativeAdv=function(e){const t=window.appData.isGamesLiteApp;let a=null;function r(){return Vt(this,null,(function*(){return null!==a||(a=yield Ct({advBlocks:e.advBlocks,flags:e.flags,residenceInfo:e.residenceInfo})),a}))}function s(t,a){return _t((0,O.Qx)(e.flags)?t:void 0,a)}return{getFullscreenBlockId(){return Vt(this,null,(function*(){const{fullscreenBlock:e}=yield r();return e}))},getRewardedBlockId(){return Vt(this,null,(function*(){const{rewardedBlock:e}=yield r();return e}))},preloadFullscreenAdv(){return Vt(this,null,(function*(){const{fullscreenBlock:e}=yield r(),a=s(e,Dt);console.info("[Native adv TV] preload","fullscreen instream pageId:",a);const n=()=>{var e,t,r;return null==(r=null==(t=null==(e=window.yandex)?void 0:e.ads)?void 0:t.preloadInstreamAdv)?void 0:r.call(t,a,Rt)};return t?n():qt("preload",n)}))},preloadRewardedVideo(){return Vt(this,null,(function*(){const{rewardedBlock:e}=yield r(),a=s(e,Ot);console.info("[Native adv TV] preload","rewarded instream pageId:",a);const n=()=>{var e,t,r;return null==(r=null==(t=null==(e=window.yandex)?void 0:e.ads)?void 0:t.preloadInstreamAdv)?void 0:r.call(t,a,Rt)};return t?n():qt("preload",n)}))},showFullscreenAdv(e){return Vt(this,arguments,(function*({onShowCalled:e}){const{fullscreenBlock:a}=yield r(),n=s(a,Dt);if(console.info("[Native adv TV] show","fullscreen instream pageId:",n,a),!a&&!n)return Promise.reject(new Error("No fullscreen block for show"));const o=()=>{var t,a,r,s,o;return(null==(a=null==(t=window.yandex)?void 0:t.ads)?void 0:a.showInstreamAdv)&&e(),null==(o=null==(s=null==(r=window.yandex)?void 0:r.ads)?void 0:s.showInstreamAdv)?void 0:o.call(s,n)};return t?o():qt("show",o)}))},showRewardedVideo(e){return Vt(this,arguments,(function*({onShowCalled:e}){const{rewardedBlock:a}=yield r(),n=s(a,Ot);if(console.info("[Native adv TV] show","rewarded instream pageId:",n),!a)return Promise.reject(new Error("No rewarded block for show"));const o=()=>{var t,a,r,s,o;return(null==(a=null==(t=window.yandex)?void 0:t.ads)?void 0:a.showInstreamAdv)&&e(),null==(o=null==(s=null==(r=window.yandex)?void 0:r.ads)?void 0:s.showInstreamAdv)?void 0:o.call(s,n)};return t?o():qt("show",o)}))}}}(this.advManager):this.nativeAdv=zt(this.advManager),(0,St.x)()&&!(0,O.dx)(e.flags)||this.init()}init(){this.onServiceLoaded();const{flags:e}=this.advManager;!this.hasFullscreenAdv||this.advManager.isInterstitialAdsTurnOff||function(e){return!1===(0,O.RM)(e,Ce.Z.enablePreloadNativeFullscreenOnStart)}(e)||this.preloadFullscreenAdv({clickDaemon:new at.U({app_id:this.advManager.appId,tag:v.$H.INTERSTITIAL})}),this.hasRewarderdAdv&&this.advManager.advBlocks.rewarded&&!function(e){return!1===(0,O.RM)(e,Ce.Z.enablePreloadNativeRewardedOnStart)}(e)&&(this.preloadRewardedAdvTimer=setTimeout((()=>{this.preloadRewardedAdv({clickDaemon:new at.U({app_id:this.advManager.appId,tag:v.$H.REWARDED}),reason:tt.p_.PRELOAD}),this.preloadRewardedAdvTimer=null}),15*pe.WT))}getAdvBlockId(e){var t,a;return e===v.$H.REWARDED?null!=(t=this.rewardedBlock)?t:super.getAdvBlockId(e):null!=(a=this.fullscreenBlock)?a:super.getAdvBlockId(e)}getTimeoutExtraTime(e,t){return e===ie.QA.ShowFullscreen||e===ie.QA.ShowRewarded?5e3:super.getTimeoutExtraTime(e,t)}withFullscreenBlockId(e){this.fullscreenBlock?e(this.fullscreenBlock):this.nativeAdv.getFullscreenBlockId().then((t=>{this.fullscreenBlock=t,e(t)}))}withRewardedBlockId(e){this.rewardedBlock?e(this.rewardedBlock):this.nativeAdv.getRewardedBlockId().then((t=>{this.rewardedBlock=t,e(t)}))}preloadFullscreenAdv({clickDaemon:e}){return this.preloadFullscreenAdvPromise||(this.preloadFullscreenAdvPromise=new Promise(((t,a)=>{this.withFullscreenBlockId((r=>{this.rawPreloadFullscreenAdv({fullscreenBlock:r,clickDaemon:e}).then((e=>{t(e)})).catch(a)}))}))),this.preloadFullscreenAdvPromise}rawPreloadFullscreenAdv(e){return Kt(this,arguments,(function*({fullscreenBlock:e,clickDaemon:t}){this.lastFullscreenError=void 0,this.fullscreenPreloadAdStatus="preloading";try{if(Bt)return t.bindRequest(Bt),this.fullscreenPreloadAdStatus="preloaded",Promise.resolve(t)}catch(e){(0,I.g5)(this,{tag:v.$H.INTERSTITIAL,error:e,name:"Error while restore request from sessionStorage"})}t.request({advBlockId:e,provider:he.e.Native,reason:tt.p_.PRELOAD});try{return yield this.nativeAdv.preloadFullscreenAdv(),this.fullscreenPreloadAdStatus="preloaded",t.response(),t}catch(e){throw this.fullscreenPreloadAdStatus="not_preloaded",this.lastFullscreenError=e,t.error(e.message),(0,I.g5)(this,{tag:v.$H.INTERSTITIAL,error:e,name:"preloading failed"}),Nt("preloadFullscreenAdv",e.message),e}}))}preloadRewardedAdv({clickDaemon:e,reason:t}){return this.preloadRewardedAdvTimer&&(clearTimeout(this.preloadRewardedAdvTimer),this.preloadRewardedAdvTimer=null),this.preloadRewardedAdvPromise||(this.preloadRewardedAdvPromise=new Promise(((a,r)=>{this.withRewardedBlockId((s=>{this.rawPreloadRewardedAdv({rewardedBlock:s,clickDaemon:e,reason:t}).then((e=>{a(e)})).catch(r)}))}))),this.preloadRewardedAdvPromise}rawPreloadRewardedAdv(e){return Kt(this,arguments,(function*({rewardedBlock:e,clickDaemon:t,reason:a}){this.lastRewardedError=void 0,this.rewardedPreloadAdStatus="preloading",t.request({advBlockId:e,provider:he.e.Native,reason:a});try{return yield this.nativeAdv.preloadRewardedVideo(),this.rewardedPreloadAdStatus="preloaded",t.response(),t}catch(e){throw this.rewardedPreloadAdStatus="not_preloaded",this.lastRewardedError=e,t.error(e.message),(0,I.g5)(this,{tag:v.$H.REWARDED,error:e,name:"preloading failed"}),Nt("preloadRewardedVideo",e.message),e}}))}},onboarding_promo:class extends ta{constructor(e,t){super(e,t,he.e.OnboardingPromo),this.isNonWaterfallPromoTimeoutReady=!1,setTimeout((()=>{this.isNonWaterfallPromoTimeoutReady=!0}),aa.q)}checkCanShow(e,t){return e===v.$H.REWARDED?super.checkCanShow(e,t):this.isOnboardingPromoReady()?(0,aa.Q)()?super.checkCanShow(e,t):ie.Kc.NextRemove:ie.Kc.Next}isOnboardingPromoReady(){const{firstShowGuard:e}=this.advManager;return this.isNonWaterfallPromoTimeoutReady&&e.canShowAdv()}},parent_window:class extends ce{constructor(e,t){if(super(e,t,he.e.ParentWindow),window===window.parent)return this.parentWindowApiIsAlive=!1,void this.onServiceError(new Error("No parent window"));this.messageListener=new na,this.onServiceLoaded(),this.addStartLivenessListener()}addStartLivenessListener(){const e=oa({action:"ping",type:"liveness"}),t=this.messageListener.addListener({fn:e=>{const{action:t,payload:r,type:s}=e;switch(s){case"liveness":"pong"===t&&(window.clearTimeout(a),this.parentWindowApiIsAlive=!0);break;case"error":this.parentWindowApiIsAlive=!1,la("error",e);break;default:this.parentWindowApiIsAlive=!1,la(`[${Date.now()}] Unknown message "${s}:${t}", payload = ${JSON.stringify(r)}`)}return!0},messageId:e}),a=window.setTimeout((()=>{t(),this.parentWindowApiIsAlive=!1}),2e3)}getAdvBlockId(e,t){return"parent_window"}checkCanShow(e,t){return void 0===this.parentWindowApiIsAlive?ie.Kc.Next:this.parentWindowApiIsAlive?super.checkCanShow(e,t):ie.Kc.NextRemove}showFullscreenAdv(e){return ia(this,arguments,(function*({callbacks:e,clickDaemon:t,reason:a,depth:r}){return new Promise(((s,n)=>ia(this,null,(function*(){la.spoiler(a,r)("showFullscreenAdv",e),t.request();const o=oa({action:"showInterstitial",type:"adv"}),i=this.messageListener.addListener({fn:a=>{const{action:r,payload:o,type:i}=a;switch(i){case"adv":if("showInterstitial"===r)switch(window.clearTimeout(l),la("showInterstitial callback",a),o.status){case"close":return e.onClose(),!0;case"empty":return t.responseEmpty(),n(new I.lu(ra.qS,{isEmpty:!0})),!0;case"error":return t.error(o.error||""),n(new Error(`ParentWindow error ${o.error||""}`)),!0;case"open":case"start":break;case"show":t.response(),e.onOpen(),s();break;default:la(`Unknown payload.status = "${o.status}"`)}break;case"error":return window.clearTimeout(l),la("error",a),n(new Error(`ParentWindow error ${o.error||""}`)),!0;default:la(`[${Date.now()}] Unknown message "${i}:${r}", payload = ${JSON.stringify(o)}`)}return!1},messageId:o}),l=window.setTimeout((()=>{i(),this.parentWindowApiIsAlive=!1,n(new Error("showInterstitial is not started"))}),5e3)}))))}))}showRewardedVideo(e){return ia(this,arguments,(function*({callbacks:e,clickDaemon:t,reason:a,depth:r}){return new Promise(((s,n)=>ia(this,null,(function*(){la.spoiler(a,r)("showRewardedVideo",e),t.request();const o=oa({action:"showRewarded",type:"adv"}),i=this.messageListener.addListener({fn:a=>{const{action:r,payload:o,type:i}=a;switch(i){case"adv":if("showRewarded"===r)switch(window.clearTimeout(l),la("showRewarded callback",a),o.status){case"close":return e.onClose(),!0;case"empty":return t.responseEmpty(),n(new I.lu(ra.qS,{isEmpty:!0})),!0;case"error":return t.error(o.error||""),n(new Error(`ParentWindow error ${o.error||""}`)),!0;case"open":case"start":break;case"rewarded":e.onRewarded();break;case"show":t.response(),e.onOpen(),s();break;default:la(`Unknown payload.status = "${o.status}"`)}break;case"error":return window.clearTimeout(l),la("error",a),n(new Error(`ParentWindow error ${o.error||""}`)),!0;default:la(`[${Date.now()}] Unknown message "${i}:${r}", payload = ${JSON.stringify(o)}`)}return!1},messageId:o}),l=window.setTimeout((()=>{i(),this.parentWindowApiIsAlive=!1,n(new Error("showRewarded is not started"))}),5e3)}))))}))}},prebid_tgo:class extends ce{constructor(e,t){var a;super(e,t,he.e.PrebidTGO),this.fullscreenSlot=null,this.interstitialPreloadTimeout=$e.HF,this.useRewarded=!1,this.usePrebid=!0,this.usePreload=!1,this.waitForAuction=new y.Z,this.startPrebidAuction=(0,da.P)((()=>{if(ha("Start prebid auction"),this.isPrebidAuctionRunning)return;this.isPrebidAuctionRunning=!0;const{pbjs:e}=window;this.prebidAuctionTimeout=window.setTimeout((()=>{ha("No auction handled, call empty function."),this.prebidAuctionHandler()}),ut.XI),e.que.push((()=>Ra(this,null,(function*(){e.requestBids({adUnitCodes:[this.getAdvBlockId(v.$H.INTERSTITIAL)],bidsBackHandler:this.prebidAuctionHandler,timeout:ut.ZV})}))))}),ut.kw),this.prebidAuctionHandler=(e,t)=>{clearTimeout(this.prebidAuctionTimeout),t&&(0,ge.H)({block:ye.W.ADV},new Error("[prebid_sticky] Auction finished with bidders timed out.")),(0,wa.H)({advTag:v.$H.INTERSTITIAL,adUnitCodes:[this.getAdvBlockId(v.$H.INTERSTITIAL)],bids:e});const{pbjs:a,googletag:r}=window;r.cmd.push((()=>{a.que.push((()=>{a.setTargetingForGPTAsync([this.getAdvBlockId(v.$H.INTERSTITIAL)]),ha("End prebid auction"),this.waitForAuction.resolve(),this.isPrebidAuctionRunning=!1}))}))},this.showFullscreenAdv=e=>Ra(this,[e],(function*({callbacks:e,clickDaemon:t,reason:a,depth:r,initialTag:s}){return new Promise(((n,o)=>Ra(this,null,(function*(){this.clearPreloadInterstitialTimer(),this.usePreload||this.usePrebid&&(yield this.waitForAuction.promise),yield(0,ft.bT)((()=>Ra(this,null,(function*(){try{if(!this.usePreload){if(null===this.fullscreenSlot)return void o(new Error("Called showFullscreenAdv, while gptSlot not ready"));!function({slot:e,method:t,debugLog:a}){t===v.qb.CLEAR_BEFORE_REFRESH?e?(a("Clearing slot before refresh with googletag.pubads().clear"),googletag.pubads().clear([e])):a("No slot to clear"):t===v.qb.INNER_TEXT_BEFORE_REFRESH&&(a("Clearing slot before refresh with el.innerText"),ca())}({method:this.clearSlotMethod,slot:this.fullscreenSlot,debugLog:ha})}let i=!1;if(ha("Call fullscreen show"),l.Z.post({type:"adv-fullscreen-block",action:"show",data:{onOpen:()=>{e.onOpen(!1)},onClose:()=>{!function({slot:e,method:t,debugLog:a}){t===v.qb.CLEAR_AFTER_ONCLOSE?e?(a("Clearing slot after onClose with googletag.pubads().clear"),googletag.pubads().clear([e])):(a("Clearing slot after onClose with googletag.pubads().clear"),a("No slot to clear")):t===v.qb.INNER_TEXT_AFTER_ONCLOSE&&(a("Clearing slot after onClose with el.innerText"),ca())}({method:this.clearSlotMethod,slot:this.fullscreenSlot,debugLog:ha}),(s!==v.$H.REWARDED||i)&&(e.onClose(i),this.preloadInterstitial())}}}),this.usePreload){const{isEmpty:e,clickDaemon:s}=yield this.interstitialPreload.preload({reason:a,depth:r,clickDaemon:t});if(s&&t.bindRequest(s),e)throw new I.lu(ut.XO.EMPTY_SLOT,{isEmpty:!0});i=!0,n(),yield this.interstitialPreload.show(),t.show(),l.Z.post({type:"adv-fullscreen-block",action:"show-controls",data:{blockName:this.serviceName}})}else{const e=Date.now();this.slotRenderEndedCallback=a=>{const r=Date.now()-e;ha(`Googletag slot render time: ${r}ms`),(0,le.s4)("play_prebid_interstitial_slot_render_time",r),a.isEmpty?(t.responseEmpty(),o(new I.lu(ut.XO.EMPTY_SLOT,{isEmpty:!0}))):(i=!0,t.response(),n()),this.usePrebid&&googletag.cmd.push((()=>{this.startPrebidAuction()}))},this.slotImpressionViewableCallback=()=>{t.show()},t.request(),googletag.pubads().refresh([this.fullscreenSlot])}}catch(e){this.preloadInterstitial(),o(e)}}))))}))))})),this.showRewardedVideo=e=>Ra(this,[e],(function*({callbacks:e,clickDaemon:t,depth:a,reason:r}){return new Promise(((s,n)=>Ra(this,null,(function*(){try{const{isEmpty:n,waitForShow:o,clickDaemon:i}=yield this.rewardedPreload.preload({depth:a,clickDaemon:t,reason:r});if(i&&t.bindRequest(i),n||!o)throw new I.lu(ut.XO.EMPTY_SLOT,{isEmpty:!0});s(),e.onOpen(!0);const{wasRewarded:l,wasShown:d}=yield o((0,k.v_)({on:"adv_rewarded.prebid_tgo.delayed_on_rewarded"},(()=>{}),(()=>({onRewarded:()=>{e.onRewarded()}}))));(0,k.v_)({on:"adv_rewarded.prebid_tgo.delayed_on_rewarded"},(()=>{l&&e.onRewarded()})),e.onClose(d)}catch(e){n(e)}}))))}));const{flags:r}=e;this.isTagActive(v.$H.INTERSTITIAL)&&(0,O.Wv)(r)||(this.usePrebid=!1),this.isTagActive(v.$H.REWARDED)&&(this.useRewarded=!0,this.rewardedPreload=new ya(this)),this.usePreload=!(0,O.Ye)(r),this.usePreload&&(this.interstitialPreload=new va(this)),this.clearSlotMethod=null!=(a=(0,Be.getDomainConfig)().adv.clearSlotMethod)?a:(0,O.hs)(r),this.api=new wt.Z(window.appData.apiData),this.init()}getTimeoutExtraTime(e,t){if(e===ie.QA.ShowFullscreen&&t===tt.p_.START_FULLSCREEN)return 2e3}getAdvBlockId(e,t=tt.p_.ONSPOT){switch(e){case v.$H.INTERSTITIAL:return t===tt.p_.START_FULLSCREEN?this.advManager.allPrebidAdvBlocks.preroll:this.advManager.allPrebidAdvBlocks.interstitial;case v.$H.REWARDED:return this.advManager.allPrebidAdvBlocks.rewarded;default:throw new Error(`AdvTag ${e} not supported by this service.`)}}init(){return Ra(this,null,(function*(){var e,t;const a=(0,ba.cQ)({cdnUrl:this.advManager.context.cdnUrl,flags:this.advManager.flags,fullUrl:(0,Ge.e)().href,options:{isSlowCountry:this.advManager.context.isSlowCountry}});yield(0,ft.xq)({metrikaCounter:null==(e=(0,Be.getDomainConfig)().analytics.counters)?void 0:e.metrika,parallel:null!=(t=(0,O.RM)(this.advManager.flags,Ce.Z.prebidLoadAfterGpt))&&t,prebidScriptUrl:this.usePrebid?a:void 0}).then((e=>{e.prebid||(this.usePrebid=!1,this.waitForAuction.resolve(),e.prebidError&&(0,I.g5)(this,{error:new Error(`Failed to load Prebid.js: ${e.prebidError.message}`)})),e.gpt?window.setTimeout((()=>{this.initGPT().then((()=>this.usePrebid?this.initPrebid():void 0)).then((()=>{this.interstitialPreloadTimeout===$e.HF&&this.preloadInterstitial(),this.useRewarded&&this.hasRewarderdAdv&&this.rewardedPreload.preload().catch((e=>ha("Preload error",e)))})).catch((e=>{ha(e),this.onServiceError(e)}))}),0):(ha(e.gptError),this.onServiceError(e.gptError))}))}))}initGPT(){return Ra(this,null,(function*(){return yield(0,ft.Vg)(),(0,ft.bT)((e=>{var t,a;const r=e.pubads(),s=this.options.tags[v.$H.INTERSTITIAL]===ie.pP.Start?tt.p_.START_FULLSCREEN:tt.p_.ONSPOT;if(!this.usePreload){if(this.fullscreenSlot=null!=(a=null==(t=e.defineSlot(this.getAdvBlockId(v.$H.INTERSTITIAL,s),(0,pa.iv)(this.advManager.flags),J))?void 0:t.addService(r))?a:null,!this.fullscreenSlot)throw new Error(ut.XO.NO_SLOT);r.addEventListener("slotRenderEnded",(e=>{var t;const{slot:a}=e;a===this.fullscreenSlot&&(null==(t=this.slotRenderEndedCallback)||t.call(this,e))})).addEventListener("impressionViewable",(e=>{var t;const{slot:a}=e;a===this.fullscreenSlot&&(null==(t=this.slotImpressionViewableCallback)||t.call(this,e),l.Z.post({type:"adv-fullscreen-block",action:"show-controls"}))}))}e.enableServices(),this.onServiceLoaded()}))}))}initPrebid(){return Ra(this,null,(function*(){yield(0,ba.BA)((e=>Ra(this,null,(function*(){yield(0,ba.OH)();const t=(0,O.Ed)(this.advManager.flags)?"dsail":"default",a=((e,t)=>Sa(e,Aa(t)))(((e,t)=>{for(var a in t||(t={}))Pa.call(t,a)&&Ca(e,a,t[a]);if(Ia)for(var a of Ia(t))Ta.call(t,a)&&Ca(e,a,t[a]);return e})({},(0,ut.Vc)("desktop",t,this.advManager.flags)),{code:this.getAdvBlockId(v.$H.INTERSTITIAL)}),r=(0,O.QR)(this.advManager.flags,Ce.Z.prebidExtraBids);if((0,ka.GI)(r)){const e=r.reduce(((e,t)=>(ut.Hf[t]&&e.push(ut.Hf[t]),e)),[]);a.bids=[...a.bids,...e]}const s=(0,O.QR)(this.advManager.flags,Ce.Z.prebidDisabledBids);(0,ka.GI)(s)&&(a.bids=a.bids.filter((({bidder:e})=>!s.includes(e)))),ha("interstitial ad units react",a),e.addAdUnits(a),e.onEvent("auctionEnd",(e=>{const t=e.auctionEnd-e.timestamp;ha(`Prebid auction took: ${t}ms`),(0,le.s4)("play_prebid_interstitial_auction_time",t)})),this.usePreload||window.googletag.cmd.push((()=>{this.startPrebidAuction()}))}))))}))}clearPreloadInterstitialTimer(){clearTimeout(this.interstitialPreloadTimeout)}preloadInterstitial(){this.usePreload&&(this.clearPreloadInterstitialTimer(),this.interstitialPreloadTimeout=window.setTimeout((()=>{this.interstitialPreload.preload({beforeRequest:this.usePrebid?()=>(this.waitForAuction.resolve(),this.waitForAuction=new y.Z,this.startPrebidAuction(),this.waitForAuction.promise):void 0})}),.75*this.advManager.minIntervalBetweenAds))}cancelShow(e){switch(e){case v.$H.INTERSTITIAL:l.Z.post({type:"adv-fullscreen-block",action:"hide"});break;case v.$H.REWARDED:this.rewardedPreload.cancel()}}onShowAdvFinished({tag:e}){switch(e){case v.$H.INTERSTITIAL:break;case v.$H.REWARDED:window.setTimeout((()=>{this.rewardedPreload.preload().catch((e=>ha("Preload error",e)))}),.75*this.advManager.minIntervalBetweenAds)}}},promo:ta,transsion:class extends ce{constructor(e,t){super(e,t,he.e.Transsion),this.onScriptLoaded=e=>{var t,a;const{advManager:r}=this,{playPageData:s}=r.context;null==(a=window.h5sdk)||a.init(parseInt(s.gameInfo.appId,10),"","","","",{float:{env:"pre"},ga:{id:null==(t=(0,Be.getDomainConfig)().analytics.counters)?void 0:t.ga},adsense:{client:e.dataset.adClient,"data-ad-channel":e.dataset.adChannel,"data-ad-frequency-hint":e.dataset.adFrequencyHint,callback:()=>{var e;null==(e=window.h5sdk)||e.adConfig({preloadAdBreaks:"on",sound:"off",onReady:()=>{this.onServiceLoaded()}})}}})},this.processShowResult=({clickDaemon:e,info:t,reject:a,resolve:r})=>{if(["viewed","dismissed"].includes(t.breakStatus))return e.response(),void r();const s=!["noAdPreloaded","other","timeout"].includes(t.breakStatus);s?e.error(`${tt.Ud.ERROR}_${t.breakStatus}`):e.responseEmpty(),a(new I.lu(`Transsion AdBreak returned ${t.breakStatus} status`,{isEmpty:!s}))},this.openWithLog=e=>()=>{null==e||e(),this.api.sendAdvShow({advService:this.serviceName,googleKeyValues:this.googleKeyValues})},this.showFullscreenAdv=e=>Oa(this,[e],(function*({callbacks:e,clickDaemon:t,depth:a}){return new Promise(((r,s)=>{var n,o,i;const{advManager:l}=this,d=null!=(n=(0,O.di)(l.flags,Ce.Z.transsionFullscreenPlacementType))?n:"preroll";"preroll"===d?null==(o=window.h5sdk)||o.adBreak({adBreakDone:n=>{"viewed"!==n.breakStatus&&"dismissed"!==n.breakStatus||(this.openWithLog(e.onOpen)(),e.onClose(!0)),this.processShowResult({tag:v.$H.INTERSTITIAL,depth:a,info:n,clickDaemon:t,resolve:r,reject:s})},type:d}):null==(i=window.h5sdk)||i.adBreak({afterAd:e.onClose.bind(this,!0),adBreakDone:e=>{this.processShowResult({tag:v.$H.INTERSTITIAL,depth:a,info:e,clickDaemon:t,resolve:r,reject:s})},beforeAd:()=>{this.openWithLog(e.onOpen)},type:d})}))})),this.showRewardedVideo=e=>Oa(this,[e],(function*({callbacks:e,clickDaemon:t,depth:a}){return new Promise(((r,s)=>{var n;null==(n=window.h5sdk)||n.adBreak({adDismissed:e.onClose.bind(this,!1),afterAd:e.onClose.bind(this,!0),adBreakDone:e=>{this.processShowResult({tag:v.$H.REWARDED,depth:a,info:e,clickDaemon:t,resolve:r,reject:s})},adViewed:e.onRewarded,beforeAd:()=>{this.openWithLog(e.onOpen)},beforeReward:e=>{e()},type:"reward"})}))})),this.api=new wt.Z(window.appData.apiData),this.init()}getAdvBlockId(e){return Da}getTimeoutExtraTime(e){return e===ie.QA.ServiceInit?5e3:1e4}init(){this.loadScript(),(0,ft.N5)().then((e=>{this.googleKeyValues=e}))}loadScript(){var e,t,a;window.t3wgame=!0;const{advManager:r}=this,{playPageData:s}=r.context;let n=(0,O.di)(r.flags,Ce.Z.transsionAdChannel);if(!n){const{gameSettings:r}=s;(null==(a=null==(t=null==(e=null==r?void 0:r.advInfo)?void 0:e.adsense)?void 0:t.channel)?void 0:a.id)&&(n=r.advInfo.adsense.channel.id)}(0,fe.x)({id:"transsion-script",dataset:{adChannel:n,adClient:Da,adFrequencyHint:"50s"},src:"https://www.hippoobox.com/static/sdk/adsdk_1.4.0.0.js"}).then((e=>{this.validateH5SdkObject(window.h5sdk)&&this.onScriptLoaded(e)})).catch((e=>{this.onServiceError(e)}))}validateH5SdkObject(e){if(!e||"object"!=typeof e)throw new Error("Can not find valid window.h5sdk");if("function"!=typeof e.init)throw new Error("window.h5sdk.init method is not a function");return!0}},yandex:class extends ce{constructor(e,t){super(e,t,he.e.Yandex),this.isFullscreenShowing=!1,this.isRewardedShowing=!1,this.showAdvCallbacks={[v.$H.INTERSTITIAL]:null,[v.$H.REWARDED]:null},this.isPreloadFullscreenAdvEnabled=(0,I.un)(),this.closeAdvOnEscape=null,this.onScriptLoadedSuccessful=()=>{this.onScriptFinish((()=>{this.fullscreenPrerender||!this.isTagActive(v.$H.INTERSTITIAL)||this.isTagWaterfall(v.$H.INTERSTITIAL)||!this.hasFullscreenAdv||this.advManager.isAdvDisabled||(this.fullscreenPrerender=this.initFullscreenPrerender(this.options.tags[v.$H.INTERSTITIAL]===ie.pP.Start?tt.p_.START_FULLSCREEN:tt.p_.PRELOAD,this.getClickDaemon(v.$H.INTERSTITIAL))),this.isTagActive(v.$H.REWARDED)&&!this.isTagWaterfall(v.$H.REWARDED)&&this.hasRewarderdAdv&&this.initRewardedPrerender()})),this.onServiceLoaded()},this.onScriptLoadedWithError=e=>{Va(),this.onServiceError(e)},this.debounceNewFullscreenAdvLoad=()=>{this.isRewardedShowing||this.isPreloadFullscreenAdvEnabled||this.preloadFullscreenAdv(tt.p_.PRELOAD)},this.cssClasses=qa(),this.cssViewTypeClass=(0,I.TE)(e.viewType),this.debounceNewFullscreenAdvLoad=(0,Qr.D)(this.debounceNewFullscreenAdvLoad,1e3),this.init()}init(){this.closeOnEscape(),this.initMessaging()}initMessaging(){l.Z.onInternalMessage("yandex-adv-service",(e=>{switch(e.data.action){case"close-adv":case"bottom-button-close-adv":this.hideFullscreenAdv(!0);break;case"adv-container-mounted":this.advContainer=document.querySelector(`.${ra.kn.modal}.${(0,I.el)("yandex")}.${ra.kn.modalFullscreen}`),this.loadScript(),this.initDOMEvents()}}))}initDOMEvents(){const{advManager:{viewType:e}}=this;e===ra.xd.fullscreen&&(window.addEventListener("resize",(()=>{this.savedPageYOffset=(0,I.SW)(this.advContainer)})),_e.default.addChangeListener((()=>{this.isFullscreenShowing&&this.isPreloadFullscreenAdvEnabled?(Ua("Screen orientation was changed, set `rerenderForced = true` and hide/show."),this.hideFullscreenAdv(void 0,!0)):this.debounceNewFullscreenAdvLoad()})),(0,I.zw)())}loadScript(){Array.isArray(window.yandexContextAsyncCallbacks)||(window.yandexContextAsyncCallbacks=[]),window.yandexContextAsyncCallbacks.push(this.onScriptLoadedSuccessful),(0,fe.x)({id:"yandexads-context",src:this.advManager.context.yaAdsScript}).catch(this.onScriptLoadedWithError)}getTimeoutExtraTime(e,t){if(e===ie.QA.ShowFullscreen&&t===tt.p_.WATERFALL)return 1500}startPrerenderDelayPromise(e){this.prerenderDelayPromise=new Promise((t=>{setTimeout((()=>{null==e||e(),t()}),2e3)}))}initFullscreenPrerender(e,t){return this.fullscreenPrerender?this.fullscreenPrerender:(Ua("initFullscreenPrerender, reason =",e),Ua(`isPreloadFullscreenAdvExperimentEnabled = ${this.isPreloadFullscreenAdvEnabled}`),this.isPreloadFullscreenAdvEnabled?new Pr(this,e,t):new gr(this,e,t))}initRewardedPrerender(e=tt.p_.PRELOAD){if(this.rewardedPrerender)return;const{advBlocks:t,flags:a}=this.advManager;t.rewarded&&(this.rewardedPrerender=(0,O.lv)(a)?new Jr(this,e):new Hr(this,e),this.preloadRewardedAdv(e))}onScriptFinish(e){Va(),this.startPrerenderDelayPromise(e)}getAdvBlockId(e,t){if((0,St.x)())return e===v.$H.REWARDED?ra.EC.rewarded:ra.EC.fullscreen;const{advBlocks:a,deviceType:r}=this.advManager;return e===v.$H.REWARDED?Xa({advBlocks:a,deviceType:r}):Ka({advBlocks:a,deviceType:r,reason:t})}closeOnEscape(){this.closeAdvOnEscape=e=>{"Escape"===e.key&&this.hideFullscreenAdv(!0)},window.addEventListener("keydown",this.closeAdvOnEscape)}hideFullscreenAdv(e,t){var a,r,s,n,o;this.screenUnlock(),this.isFullscreenShowing=!1,Ua("hideFullscreenAdv, rerenderForced =",t);const{advManager:i}=this;null==(a=this.destroyAdv)||a.call(this);const d=this.getClickDaemon(v.$H.INTERSTITIAL);if(t){this.preloadFullscreenAdv();const e=null!=(s=null==(r=this.fullscreenPrerender)?void 0:r.previousReason)?s:tt.p_.PRELOAD;this.showFullscreenAdv({callbacks:this.showAdvCallbacks[v.$H.INTERSTITIAL],clickDaemon:d,reason:e,depth:0,tag:v.$H.INTERSTITIAL,initialTag:v.$H.INTERSTITIAL})}else(0,I.PS)(),this.closeAdvOnEscape&&(window.removeEventListener("keydown",this.closeAdvOnEscape),this.closeAdvOnEscape=null),i.deviceType!==$a.n.desktop&&(0,I.HH)(),l.Z.post({type:"yandex-fullscreen-render",action:"hide-fullscreen"}),window.scroll(0,this.savedPageYOffset),null==(n=this.fullscreenPrerender)||n.next(this.options.tags[v.$H.INTERSTITIAL]===ie.pP.Start?tt.p_.PRELOAD:tt.p_.PRELOAD_WATERFALL,d),e&&(null==(o=this.showAdvCallbacks[v.$H.INTERSTITIAL])||o.onClose(e),i.callOnAdvClose(e),(0,A.D)())}showAdvContainer(){const{advManager:e}=this,{flags:t}=e;this.isFullscreenShowing=!0;const{deviceType:a}=this.advManager;setTimeout((()=>{var r;window.focus(),a!==$a.n.desktop&&(0,I.xK)(),l.Z.post({type:"yandex-fullscreen-render",action:"show-fullscreen"}),this.savedPageYOffset=(0,I.SW)(this.advContainer);const s=(null==(r=this.advManager.context.uatraits)?void 0:r.OSFamily)===La.k.IOS;a===$a.n.desktop?(0,I.ss)({advElement:this.advContainer.querySelector(`.${this.cssClasses.modalWrap}`),type:"fullscreen",flags:e.flags,appId:e.appId,isIOS:s}):(0,I.ss)({advElement:this.advContainer,type:"fullscreen",flags:e.flags,appId:e.appId,isIOS:s}),t.autoclose_adv&&setTimeout((()=>{this.hideFullscreenAdv(!0)}),t.autoclose_adv)}),0)}preloadFullscreenAdv(e){var t;null==(t=this.fullscreenPrerender)||t.next(e,this.getClickDaemon(v.$H.INTERSTITIAL))}preloadRewardedAdv(e){var t;null==(t=this.rewardedPrerender)||t.next(e)}showFullscreenAdv(e){return es(this,arguments,(function*({callbacks:e,clickDaemon:t,reason:a}){return new Promise(((r,s)=>es(this,null,(function*(){try{this.showAdvCallbacks[v.$H.INTERSTITIAL]=e,Ua("showFullscreenAdv"),this.screenLock(),this.fullscreenPrerender||(this.fullscreenPrerender=this.initFullscreenPrerender(a,t));const{fullscreenPrerender:s}=this;yield this.prerenderDelayPromise;const{hasContent:n,err:o,clickDaemon:i}=yield s.ready().then((e=>e.showPrerenderedAd?e.showPrerenderedAd():e));if(i&&t.bindRequest(i),o)throw o;if(!n)throw new I.lu(ra.qS,{isEmpty:!0});e.onOpen(),(0,I.WL)(),this.showAdvContainer(),r()}catch(e){this.screenUnlock(),s(e),(0,k.v_)({on:"adv_interstitial.yandex.enable_preload_retries"})&&this.fullscreenPrerender instanceof xa&&this.fullscreenPrerender.retryPreloading(tt.p_.PRELOAD,v.$H.INTERSTITIAL)}}))))}))}showRewardedVideo(e){return es(this,arguments,(function*({callbacks:e,clickDaemon:t,reason:a,depth:r}){return new Promise(((s,n)=>es(this,null,(function*(){var o;try{const{advManager:n}=this;if(this.showAdvCallbacks[v.$H.REWARDED]=e,!this.rewardedPrerender&&n.advBlocks.rewarded&&this.initRewardedPrerender(a),yield this.prerenderDelayPromise,!n.advBlocks.rewarded)throw new Error("partnerId is not defined, no rewarded video adv block available");yield null==(o=this.rewardedPrerender)?void 0:o.showRewardedVideo({callbacks:e,clickDaemon:t,reason:a,tag:v.$H.REWARDED,initialTag:v.$H.REWARDED,depth:r}),s()}catch(e){n(e)}}))))}))}screenLock(){const{advManager:{flags:e}}=this;(0,O.F7)(e)&&_e.default.lock().catch((()=>{}))}screenUnlock(){const{advManager:{flags:e}}=this;(0,O.F7)(e)&&_e.default.unlock().catch((()=>{}))}getClickDaemon(e){const{advManager:t}=this;return new at.U({app_id:t.appId,tag:e})}},publift_zone:ns,publift_rewarded:ns},is=os,ls=["onOpen","onRewarded","onClose","onError","onOffline"];const ds=class{constructor(e,t){this.tag=e,this.clickDaemon=t,this.callbacks={},this.isOuterCallbacksMuted=!1,this.onOpen=(e=!0)=>{var t;e&&(null==(t=this.clickDaemon)||t.show()),this.safeCall("onOpen")},this.onRewarded=()=>{var e;null==(e=this.clickDaemon)||e.rewarded(),this.safeCall("onRewarded")},this.onClose=e=>{var t;e&&this.currentTag!==this.tag&&this.currentTag===v.$H.INTERSTITIAL&&this.onRewarded(),null==(t=this.clickDaemon)||t.close(),this.safeCall("onClose",void 0,e)},this.onOffline=()=>{this.safeCall("onOffline")},this.onError=e=>{this.safeCall("onError",!1,e)};for(const e of ls)this.callbacks[e]||(this.callbacks[e]=[]);this.currentTag=e}safeCall(e,t=!0,...a){if(this.isOuterCallbacksMuted)return void(0,I.qu)(`AdvCallbacks ${e} call skipped, due mute during waterfall.`);const r=this.callbacks[e];if(r)for(let s=0;s<r.length;s++){(0,I.tq)(r[s],`Error in callback ${e}: `).apply(null,a),t&&r.splice(s--,1)}}addCallbacks(e,t=!1){for(const a in e)t&&["onOpen","onRewarded"].includes(a)&&!this.callbacks[a].length?(0,I.tq)(e[a],`Error in callback ${a}`).apply(null):this.callbacks[a].push(e[a])}muteCallbacks(){this.isOuterCallbacksMuted=!0}unmuteCallbacks(){this.isOuterCallbacksMuted=!1}};var cs=a(35090);const hs=pe.yR;class us{constructor(){this.setupCanShowAdv()}setupCanShowAdv(){this.canShowAdv=()=>!0,(0,cs.FN)()&&(this.canShowAdv=()=>(console.warn(`Warning: please, try to open advertising after ${hs}ms`),!1),window.setTimeout((()=>{this.canShowAdv=()=>!0}),hs))}}var ps=a(92389),ms=a(21466);var vs=a(61224),gs=a(14228),fs=a(37918),ys=Object.defineProperty,bs=Object.defineProperties,ws=Object.getOwnPropertyDescriptors,ks=Object.getOwnPropertySymbols,Es=Object.prototype.hasOwnProperty,Ss=Object.prototype.propertyIsEnumerable,As=(e,t,a)=>t in e?ys(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Is=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const Ps=(0,se.M$)("AdvManager",se.XG.Adv,{background:"seagreen"}),Ts=Ps.tag("showAdv");class Cs{constructor(e,t){var a,r,s,n,o,i,d,c;this.context=e,this.gameControl=t,this.callbacksToSdk={[v.$H.INTERSTITIAL]:null,[v.$H.REWARDED]:null},this.guardClosedPromiseWrapper=new y.Z,this._showAdvLock={[v.$H.INTERSTITIAL]:!1,[v.$H.REWARDED]:!1},this._lastShowTime={[v.$H.INTERSTITIAL]:0,[v.$H.REWARDED]:0},this.serviceInstances=void 0,this.splashScreenPromise=new y.Z,this.middleLayerInGamePromise=new y.Z,this.servicesBlocks={[v.$H.INTERSTITIAL]:{},[v.$H.REWARDED]:{}},this.handleVisibilityChange=()=>{Ps("handleVisibilityChange",document.visibilityState);const e=(0,O.$9)(this.flags,Ce.Z.minInactivePlayTabTimeToShowAd);e&&("hidden"===document.visibilityState?this.inactiveTabTime=Date.now():this.inactiveTabTime>0&&Date.now()-this.inactiveTabTime>=e&&(Ps("show interstitial after inactive state"),this.showAdv(v.$H.INTERSTITIAL,{reason:tt.p_.ONSPOT})))},this.onAdvManagerExternalMessage=(e,t)=>{const{action:a}=e.data;"get-disabled-state"===a&&t({data:{value:this.isInterstitialAdsDisabled}})},this.onGuardMessage=e=>{const{action:t}=e.data;"set-was-showed"===t&&this.resolveGuardPromise()},this.onSplashMessage=e=>{const{action:t}=e.data;"set-was-closed"===t&&this.resolveSplashScreenPromise()},this.onMiddleLayerMessage=e=>{const{action:t}=e.data;"close"===t&&this.resolveMiddleLayerPromise()},this.onSubscriptionsMessage=e=>{const{action:t}=e.data;"changed"===t&&this.readNoAdsSubscriptionValue()},this.onFrameMessage=e=>{const{action:t}=e.data;t===f.ur.IframeLoaded&&(this.initServices(v.$H.INTERSTITIAL),this.initServices(v.$H.REWARDED),l.Z.offInternalMessage("frame",this.onFrameMessage))},this.deviceType=e.deviceType,this.allAdvBlocks=e.allAdvBlocks,this.allPrebidAdvBlocks=e.allAdvBlocks.prebid;const h=e.playPageData.gameSettings,u={advBlocks:h.advBlocks,partnerId:null!=(r=null==(a=h.advBlocks.desktop)?void 0:a.fullscreen)?r:h.advBlocks.fullscreen,rewardedVideoPartnerId:null!=(n=null==(s=h.advBlocks.desktop)?void 0:s.rewarded)?n:h.advBlocks.rewarded},{advBlocks:p={fullscreen:u.partnerId,rewarded:u.rewardedVideoPartnerId}}=u,{flags:m}=e.abt;this.flags=m,this.withWorldWideAdv=Boolean(e.withWorldWideAdv);const g=(0,cs.pN)(["a_delay","clid",It.Je,"min-interval-between-ads","utm_medium"]),b=(0,ms.k4)(g.utm_medium,g.clid);this.deviceId=g[It.Je],this.appId=e.playPageData.gameInfo.appId,this.viewType=this.deviceType===$a.n.desktop?ra.xd.desktop:ra.xd.fullscreen,this.advBlocks=(0,I.$3)(p,this.appId,m),this.residenceInfo=null==(o=h.advInfo)?void 0:o.residence_info,this.advUsedBlocks=h.advUsedBlocks,this.startTime=Date.now(),this.lang=e.playPageData.request.lang,this.minIntervalBetweenAds=(0,I.mx)(g["min-interval-between-ads"],m,this.withWorldWideAdv),this.advDelay=(0,O.$9)(m,Ce.Z.advDelay)||(0,I.dh)(g.a_delay)||fs.JV[(0,or.KT)()]||(e.isTranssion?ra.Sk:0),this.isRewardedAdsDisabled=b,this.isInterstitialAdsDisabled=b,this.isInterstitialAdsTurnOff=(0,O.Ww)(m,v.By.FULLSCREEN),this.isRewardedAdsTurnOff=(0,O.Ww)(m,v.By.REWARDED),this.isDisableAdButtonEnabled=(0,O.RM)(m,Ce.Z.disableAdButton)||!1,this.firstShowGuard=new us,this.advBlocks.fullscreen||(null==(i=this.advBlocks.desktop)?void 0:i.fullscreen)||(null==(d=this.advBlocks.mobile)?void 0:d.fullscreen)||(0,I.ey)(this.appId),void 0!==g.a_delay&&(0,I.R4)(),b&&(this.reasonForDisablingAd=v.Jm.UTM,this.sendAdvDisabledToChild(this.reasonForDisablingAd)),this.readNoAdsSubscriptionValue(),Ps("advUsedBlocks",this.advUsedBlocks),this.waterfallQueue=(0,Tr.gK)({flags:this.flags,ingameAdvData:null==(c=window.appData.advDataStore)?void 0:c.ingameAdv,withWorldWideAdv:this.withWorldWideAdv}),Ps("waterfallQueue",this.waterfallQueue),this.initMessaging(),this.showStartFullscreenAdv(),(0,gs.y)().then((e=>{e||this.resolveGuardPromise()})),e.isGamesApp&&!this.isInterstitialAdsTurnOff&&(0,Tr.sf)(this.waterfallQueue.interstitial,he.e.Native)&&Mt({advBlocks:this.advBlocks,appId:this.appId,flags:m,residenceInfo:this.residenceInfo}),this.guardClosedPromiseWrapper.promise.then((()=>{document.addEventListener("visibilitychange",this.handleVisibilityChange)})),this.logAdvDelayFlag=Boolean(window.appData.logAdvDelay)}get adOpenedType(){return this._adOpenedType}set adOpenedType(e){Ps(`Set adOpenedType to: ${e}`),this._adOpenedType=e}get showAdvLock(){return this._showAdvLock}get lastShowTime(){return this._lastShowTime}get isAllAdvDisabledByPartnersKit(){const{abt:{flags:e},referrerClid:t}=this.context;return(0,vs.VX)({flags:e,referrerClid:t,userAgent:window.navigator.userAgent})}showStartFullscreenAdv(){var e;if((0,O.Ww)(this.flags,v.By.START_FULLSCREEN))return;const t=(0,Tr.C5)({advBlocks:this.advBlocks,flags:this.flags,ingameAdvData:null==(e=window.appData.advDataStore)?void 0:e.ingameAdv,withWorldWideAdv:this.withWorldWideAdv});t&&(Ps("Show fullscreen on start (preroll)"),this.callOnAdvClose(),this.showAdv(v.$H.INTERSTITIAL,{reason:tt.p_.START_FULLSCREEN,sendToSDK:!1},t))}get isAdvDisabled(){return this.isInterstitialAdsDisabled||this.isInterstitialAdsTurnOff||!0===this.isAllAdvDisabledByPartnersKit}initServices(e,t=this.waterfallQueue[e],a=tt.p_.ONSPOT){var r;const s=(r,s)=>{if(a===tt.p_.START_FULLSCREEN&&e===s)return ie.pP.Start;switch((0,Tr.Jt)(e===s?t:this.waterfallQueue[s],r)){case-1:return ie.pP.Skip;case 0:return ie.pP.Onspot;default:return ie.pP.Waterfall}},n=new Set;if(t.forEach((e=>n.add(e.provider))),this.serviceInstances=[...n].reduce(((e,t)=>{if(e[t])return e;try{const a=is[t];e[t]=new a(this,{tags:{[v.$H.INTERSTITIAL]:s(t,v.$H.INTERSTITIAL),[v.$H.REWARDED]:s(t,v.$H.REWARDED)},serviceName:t}),e[t].initPromise.promise.catch((()=>{})),Ps(`Service ${t} inited.`)}catch(e){(0,ge.H)({block:ye.W.ADV},e)}return e}),null!=(r=this.serviceInstances)?r:{}),!t.every((({provider:t})=>this.servicesBlocks[e][t]))){Ps.spoiler(this.serviceInstances)(`Services for tag ${e}:${a} inited`);for(const{provider:a}of t)this.servicesBlocks[e][a]=!0;l.Z.post({type:"play-adv-manager",action:"update-adv-services-list",data:this.servicesBlocks})}}updateDisableAdvButtonVisibility(e){if(!this.isDisableAdButtonEnabled)return;const t=(0,ps._)("aab-adv");e?t.classList.contains(ra.Si)&&t.classList.remove(ra.Si):t.classList.contains(ra.Si)||t.classList.add(ra.Si)}sendAdvDisabledToChild(e){Ps("readNoAdsSubscriptionValue, this.isInterstitialAdsDisabled = ",this.isInterstitialAdsDisabled,", reason = ",e),l.Z.hasChild()&&l.Z.postToChild(g.fB.SetDisabledState({reason:e,value:this.isInterstitialAdsDisabled}))}readNoAdsSubscriptionValue(){l.Z.post({type:"subscriptions",action:"has",data:{key:"no_ads"}}).then((e=>{const{res:t}=e.data;this.updateDisableAdvButtonVisibility(t),this.reasonForDisablingAd!==v.Jm.UTM&&this.isInterstitialAdsDisabled!==t&&(this.isInterstitialAdsDisabled=t,this.reasonForDisablingAd=v.Jm.SUBSCRIPTION,this.sendAdvDisabledToChild(this.reasonForDisablingAd))}))}resolveGuardPromise(){this.guardClosedPromiseWrapper.resolve(void 0),l.Z.offInternalMessage("guard",this.onGuardMessage)}resolveSplashScreenPromise(){this.splashScreenPromise.resolve(void 0),l.Z.offInternalMessage("splash",this.onSplashMessage)}resolveMiddleLayerPromise(){this.middleLayerInGamePromise.resolve(void 0),l.Z.offInternalMessage("middle-layer",this.onMiddleLayerMessage)}initMessaging(){var e;l.Z.onInternalMessage("guard",this.onGuardMessage,{withHistory:!0}),l.Z.onInternalMessage("subscriptions",this.onSubscriptionsMessage,{withHistory:!0}),l.Z.onExternalMessage("adv-manager",this.onAdvManagerExternalMessage),l.Z.onInternalMessage("frame",this.onFrameMessage,{withHistory:!0}),this.context.isAdvSplashScreenEnabled?l.Z.onInternalMessage("splash",this.onSplashMessage):this.splashScreenPromise.resolve(void 0),(null==(e=this.context.middleLayerInGameData)?void 0:e.show)?l.Z.onInternalMessage("middle-layer",this.onMiddleLayerMessage):this.middleLayerInGamePromise.resolve(void 0),l.Z.onExternalMessage("adv-manager",((e,t)=>{switch(e.data.action){case"adv-show-fullscreen":this.callbacksToSdk[v.$H.INTERSTITIAL]=t,this.showAdv(v.$H.INTERSTITIAL,{reason:tt.p_.ONSPOT});break;case"adv-show-rewarded-video":this.callbacksToSdk[v.$H.REWARDED]=t,this.showAdv(v.$H.REWARDED,{reason:tt.p_.ONSPOT})}}))}callOnAdvClose(e=!1){Ps("callOnAdvClose",e),l.Z.post({type:"adv-manager",action:"on-adv-close",data:{wasShown:e}})}waitServiceInit(e,t){const{serviceName:a}=e;return e.initPromise.state!==y.W.Pending?e.initPromise.promise:Promise.race([e.initPromise.promise,(0,We.D)((0,I.uD)(this.flags,e,t)).then((()=>{throw new Error(`Ad script init timeout, serviceName: ${a}`)}))])}waitShowAdv(e,t,a){const r=(t===v.$H.INTERSTITIAL?e.showFullscreenAdv:e.showRewardedVideo).bind(e);return Promise.race([r(a),(0,We.D)((0,I.gp)(this.flags,t,e,a.reason)).then((()=>{throw new Error(`Ad showAdv(${t}) timeout, serviceName: ${e.serviceName}`)}))])}sendCallbackToSdk(e,t){var a,r;null==(r=(a=this.callbacksToSdk)[e])||r.call(a,{data:{error:t}}),this.callbacksToSdk[e]=null}showServiceAdv(e,t,a){return Is(this,arguments,(function*(e,t,a,{clickDaemon:r,depth:s,reason:n,initialTag:o}=a){var i;try{Ts(`Service ${e.serviceName} start processing ${t}:${n}`),s?r.waterfall({provider:e.serviceName,advBlockId:e.getAdvBlockId(t,n),depth:s,reason:n,tag:o}):r.demand({provider:e.serviceName,advBlockId:e.getAdvBlockId(t,n),depth:0,reason:n}),yield Promise.all([this.guardClosedPromiseWrapper.promise,this.splashScreenPromise.promise,this.middleLayerInGamePromise.promise,this.waitServiceInit(e,n)]);const i=yield this.waitShowAdv(e,t,a);if("function"==typeof i)try{yield i()}catch(e){if(e instanceof Error){const t=new I.lu(e.message,((e,t)=>bs(e,ws(t)))(((e,t)=>{for(var a in t||(t={}))Es.call(t,a)&&As(e,a,t[a]);if(ks)for(var a of ks(t))Ss.call(t,a)&&As(e,a,t[a]);return e})({},e.params),{wasShown:!0}));throw t.stack=e.stack,t}throw e}return Ts(`Service ${e.serviceName} processed ${t}:${n}`),{status:ie.mb.Ok}}catch(s){return Ts(`Service ${e.serviceName} ${t}:${n} error:`,s),a.callbacks.muteCallbacks(),s instanceof Error||(s=new Error("Unhandled undefined error (safe)")),null==(i=e.cancelShow)||i.call(e,t),(0,I.g5)(e,{additional:{adv:{advBlockId:e.getAdvBlockId(t,n)}},error:s,name:ra._u,tag:t}),s instanceof I.lu&&s.params.isEmpty||r.error(s.message||s.toString()),s instanceof I.lu&&s.params.isEmpty?{status:ie.mb.Empty,error:s}:s instanceof I.lu&&s.params.wasShown?{status:ie.mb.FailedShow,error:s}:{status:ie.mb.Failed,error:s}}}))}mergeShowAdv(e,t,a,r){let s=this.showAdvLock[e];if(s){const[n,o]=s;if(n===tt.p_.START_FULLSCREEN)return o.addCallbacks(t,!0),r&&(0,I.Sn)(o,e),Ts(`showAdv ${e}:${a} was merged with ${e}:${n}`),!0}return!1}showAdv(e,t){return Is(this,arguments,(function*(e,t,a=this.waterfallQueue[e]){Ts.spoiler(t)(`showAdv ${e}:${t.reason}`);const r=this.logAdvDelay(e);let s,{reason:n}=t,{callbacks:o={},sendToSDK:i=!0}=t;if(this.mergeShowAdv(e,o,n,i))return;this.initServices(e,a,n);let d=new at.U({tag:e,app_id:this.appId});const c=new ds(e,d);c.addCallbacks(o),(0,I.fl)(c,e,this.context.platform).catch((()=>{})),(0,I.KW)(c,this.flags),i&&(0,I.Sn)(c,e);const h=()=>this.adOpenedType=null;c.addCallbacks({onClose:h,onError:h,onOffline:h});let u=0,p=0,m=ie.mb.Failed,v=e,g=[];c.addCallbacks({onClose:()=>{var t;Ts("callOnShowAdvFinished"),l.Z.post({type:"play-adv-manager",action:"close-adv",data:{tag:e}});try{for(const r of g){const s=null==(t=this.serviceInstances)?void 0:t[r.provider];s&&s.onShowAdvFinished&&s.onShowAdvFinished({tag:r.tag||e,latestTag:v,initialTag:e,status:m,waterfallItems:a})}}catch(e){Ps("Failed to call AdvService.onShowAdvFinished, error:",e.message)}},onOpen:()=>null==r?void 0:r(p,v)});try{const t=()=>{var t,r;const s=a[u];if(!s)throw new I.lu(`No available waterfall item for tag ${e}:${n}`,{isFinal:!0});const o=null==(t=this.serviceInstances)?void 0:t[null==s?void 0:s.provider];if(!o)throw new I.lu(`No available service for tag ${e}:${n}, waterfall provider: ${null!=(r=null==s?void 0:s.provider)?r:he.e.None}`,{isFinal:!0});return[o,s]};do{c.unmuteCallbacks();const[a,r]=t();if(s)Ts(`Service ${s.serviceName} failed to show adv, go to waterfall. Next service: ${null==a?void 0:a.serviceName}`);else{d.tryOpen({reason:n,provider:a.serviceName});const t=this.advDisabledCheck(e,c,d);if(t)return void this.sendCallbackToSdk(e,t);this._showAdvLock[e]=[n,c],this._lastShowTime[e]=Date.now()}this.adOpenedType=e,this.sendCallbackToSdk(e),s=a,v=r.tag?r.tag:e,v!==c.currentTag&&(c.currentTag=v),p>0&&(n=tt.p_.WATERFALL);const o=s.checkCanShow(e,n);if(o!==ie.Kc.Ok){Ts(`Skip service ${s.serviceName} due canShowCheck: ${o}`),u++;continue}g.push(r),l.Z.post({type:"play-adv-manager",action:"show-adv",data:{tag:e,serviceName:s.serviceName}}),this.gamePauseResume(e,c);const{status:i,error:h}=yield this.showServiceAdv(s,v,{callbacks:c,clickDaemon:d,depth:p++,tag:v,initialTag:e,reason:n});if(m=i,m===ie.mb.Ok)return void s.resetShowTimer(e);if(m===ie.mb.FailedRemove)this.waterfallQueue[e].splice(u,1);else{if(m===ie.mb.FailedShow)throw h||new I.lu(`Error after ${v} showAdv (service: ${s.serviceName})`,{isFinal:!0,wasShown:!0});u++}}while(s);throw new I.lu("No adv providers left.",{isFinal:!0})}catch(t){this.sendCallbackToSdk(e),this._lastShowTime[e]=0,c.unmuteCallbacks(),c.onError(t),t instanceof I.lu&&(t.params.isFinal||t.params.wasShown)&&(m===ie.mb.Empty?d.noContent():d.fail(t.message)),c.onClose(!1),this.callOnAdvClose(!1),(0,ge.H)({prefix:"Please, send this error sdk developers: ",block:ye.W.ADV},t)}finally{this._showAdvLock[e]=!1}}))}gamePauseResume(e,t){let a;if(e===v.$H.INTERSTITIAL)a="adv_interstitial";else{if(e!==v.$H.REWARDED)return;a="adv_rewarded"}Ps("gamePause:",a),this.gameControl.gamePause(a),t.addCallbacks({onClose:()=>{Ps("gameResume:",a),this.gameControl.gameResume(a)}})}logAdvDelay(e){var t;return!this.logAdvDelayFlag||e!==v.$H.INTERSTITIAL&&e!==v.$H.REWARDED?null:(null==(t=null==Ya?void 0:Ya.Rum)||t.time(ra.Cn),(t,a)=>{var r;return null==(r=null==Ya?void 0:Ya.Rum)?void 0:r.timeEnd(ra.Cn,{"-additional":encodeURIComponent(JSON.stringify({tag:a,app_id:this.appId,depth:t,initialTag:e}))})})}advDisabledCheck(e,t,a){if(this.adOpenedType)return a.skip(v.Jm.ANOTHER_AD_OPENED),new Error("Another ad already opened");if(e===v.$H.INTERSTITIAL){if(this.isAdvDisabled){if(this.isInterstitialAdsDisabled)a.noAdv();else{let e;e=this.isInterstitialAdsTurnOff?v.Jm.INTERSTITIAL_ADS_TURN_OFF:this.isAllAdvDisabledByPartnersKit?v.Jm.ALL_ADS_DISABLED_BY_PARTNERS_KIT:v.Jm.UNKNOWN,a.skip(e)}return this.callOnAdvClose(!1),new Error("Skip interstitial.")}if(!this.firstShowGuard.canShowAdv()){const e=new Error("Cannot open the advertisement. Try again later.");return a.rateLimited("rate"),this.callOnAdvClose(!1),e}const e=this.canOpenAdv(t);if(e)return a.rateLimited("rate"),this.callOnAdvClose(!1),e}if(e===v.$H.REWARDED){const e=new Error("Skip rewarded.");if(this.isRewardedAdsTurnOff)return Ps("Skip rewarded"),this.skipRewarded({advLogger:a,callbacks:t,reason:v.Jm.REWARDED_ADS_TURN_OFF}),e;if(this.isRewardedAdsDisabled)return Ps("Skip rewarded"),this.skipRewarded({advLogger:a,callbacks:t,reason:v.Jm.UTM}),e;if(this.isAllAdvDisabledByPartnersKit)return Ps("Skip rewarded"),this.skipRewarded({advLogger:a,callbacks:t,reason:v.Jm.ALL_ADS_DISABLED_BY_PARTNERS_KIT}),e}return null}skipRewarded({advLogger:e,callbacks:t,reason:a}){["onOpen","onRewarded","onClose"].filter(Boolean).forEach(((e,a)=>{window.setTimeout((()=>{var a;return null==(a=t[e])?void 0:a.call(t)}),100*a)})),e.skip(a)}canOpenAdv(e){var t,a;const r=Date.now();if(!this.advBlocks.fullscreen&&!(null==(t=this.advBlocks.desktop)?void 0:t.fullscreen)&&!(null==(a=this.advBlocks.mobile)?void 0:a.fullscreen)){const e=`${ra._u}: can not find block id`,t=`https://games.yandex.ru/console/application/${this.appId}`;return(0,ge.H)({block:ye.W.ADV},new Error(`\nWhat you can do:\n1. Enable monetization: https://yandex.ru/dev/games/doc/dg/console/enable-monetization-docpage/\n2. Fill all fields in your draft ${t}#application-info-draft\n3. Ensure in Ads section ${t}#application-info-draft (bottom)\nthere is block id (like R-A-123456).\nIf state != work (created, for example), just wait 24 hours: block creation might take time\n`)),new Error(e)}if(this.lastShowTime[v.$H.INTERSTITIAL]&&r-this.lastShowTime[v.$H.INTERSTITIAL]<this.minIntervalBetweenAds){const e="Please, don't try to open advertising often than once per "+((s=this.minIntervalBetweenAds)<pe.WT?`${s} ms`:s%pe.WT!=0?`${Math.floor(s/pe.WT)} ${s%pe.WT} ms`:s/pe.WT+" s");return l.Z.post({action:"debug-action-guard",type:"adv-manager",data:{type:v.$H.INTERSTITIAL,minInterval:this.minIntervalBetweenAds,reason:"Called too often"}}),new Error(e)}var s;if(Math.abs(r-this.startTime)<this.advDelay){const e=`Adv was delayed on ${this.advDelay}ms`;return new Error(e)}if(!navigator.onLine&&!1===(0,O.RM)(this.context.abt.flags,Ce.Z.advShowOnOffline)){const t="Adv can't be shown offline";return e.onOffline(),new Error(t)}return null}}const Rs="GoogleInstreamBlock-module__block--UThhL",Ds="GoogleInstreamBlock-module__hidden--w4W3T",Os="advBlock_"+he.e.GoogleInstream,Ls=({tag:e})=>{const t=(0,n.useRef)(null),[a,r]=(0,n.useState)(!1),s=(0,n.useCallback)(((a,s)=>{var n,o,i,l;const{action:d,data:{tag:c}}=a.data;if(c===e)switch(d){case"show":r(!0);break;case"hide":r(!1);break;case"get-size":s({data:{width:null!=(o=null==(n=t.current)?void 0:n.clientWidth)?o:null,height:null!=(l=null==(i=t.current)?void 0:i.clientHeight)?l:null}})}}),[e]);(0,n.useEffect)((()=>(l.Z.onInternalMessage("adv-instream-render",s),()=>{l.Z.offInternalMessage("adv-instream-render",s)})),[s]);const i=[Rs,a?void 0:Ds];return o().createElement("div",{className:(0,C.E)(...i),id:Os+"_"+e,ref:t})};const _s=a(33196).Z;var xs=a(72538),Ns=a(4915),Bs=a(31085),Ms=Object.defineProperty,$s=Object.defineProperties,Fs=Object.getOwnPropertyDescriptors,Hs=Object.getOwnPropertySymbols,Ws=Object.prototype.hasOwnProperty,Gs=Object.prototype.propertyIsEnumerable,Zs=(e,t,a)=>t in e?Ms(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,js=(e,t)=>{for(var a in t||(t={}))Ws.call(t,a)&&Zs(e,a,t[a]);if(Hs)for(var a of Hs(t))Gs.call(t,a)&&Zs(e,a,t[a]);return e},Us=(e,t)=>$s(e,Fs(t));const qs=s().with("prowo-container"),zs=()=>{const e=(0,n.useRef)(null),{isLegalEmbedPartner:t}=(0,P.b)(),a=(0,n.useRef)(new Ns.Z),[r,s]=(0,n.useState)(0),[i,d]=(0,n.useState)({advTag:v.$H.INTERSTITIAL,callbacks:{},reason:tt.p_.ONSPOT,visible:!1}),c=(0,n.useCallback)(((e,a,r)=>{var s;t?null==(s=r.onClose)||s.call(r):d((()=>({advTag:e,callbacks:r,reason:a,visible:!0})))}),[t]),h=(0,n.useCallback)((()=>{var e,t;(0,Ma.NF)({},ka.Ji.GAME_PROMO_OPEN),a.current.updateShowData(Bs.Wp.GamePromo),null==(t=(e=i.callbacks).onOpen)||t.call(e)}),[i]),u=(0,n.useCallback)((()=>{var e,t,a,r;null==(t=(e=i.callbacks).onRewarded)||t.call(e),null==(r=(a=i.callbacks).onClose)||r.call(a),d(Us(js({},i),{visible:!1}))}),[i]),p=(0,n.useCallback)((e=>{var t,a,r,s;null==(a=(t=i.callbacks).onClose)||a.call(t),null==(s=(r=i.callbacks).onError)||s.call(r,e),d(Us(js({},i),{visible:!1}))}),[i]),m=(0,n.useCallback)(((e,t)=>{const{action:a,data:r}=e.data;if("show"!==a);else{const{advTag:e,reason:t,onOpen:a,onRewarded:s,onClose:n,onError:o}=r;c(e,t,{onError:o,onOpen:a,onRewarded:s,onClose:n})}}),[c]),g=(0,n.useCallback)(((e,t)=>{t.height!==r&&s(t.height)}),[r]);(0,n.useEffect)((()=>(l.Z.onInternalMessage("adv-promo-block",m),xs.Z.addResizeBlockListener("game",g,!0),()=>{l.Z.offInternalMessage("adv-promo-block",m),xs.Z.removeResizeBlockListener("game",g)})),[g,m]);const{advTag:f,reason:y,visible:b}=i;return b?o().createElement("div",{className:qs({advType:f,"with-blur":!0}),ref:e,style:{height:r?`calc(100% + ${r}px)`:void 0}},o().createElement(_s,{advTag:f,auto:void 0,containerRef:e,errorProps:{onError:p},hide:u,reason:y,onShow:h})):null};var Vs=a(61533),Ks=Object.defineProperty,Ys=Object.defineProperties,Xs=Object.getOwnPropertyDescriptors,Js=Object.getOwnPropertySymbols,Qs=Object.prototype.hasOwnProperty,en=Object.prototype.propertyIsEnumerable,tn=(e,t,a)=>t in e?Ks(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,an=(e,t)=>{for(var a in t||(t={}))Qs.call(t,a)&&tn(e,a,t[a]);if(Js)for(var a of Js(t))en.call(t,a)&&tn(e,a,t[a]);return e},rn=(e,t)=>Ys(e,Xs(t));const sn=s().with("instream-renderer"),nn=({advManager:e})=>{const[t,a]=(0,n.useState)({isVisible:!1,blockId:"",isHeaderEnabled:!(0,I.Ij)(),width:0,height:0}),r=(0,n.useCallback)(((e,t)=>{const{action:r}=e.data;switch(r){case"show":a((e=>rn(an({},e),{isVisible:!0})));break;case"hide":a((e=>rn(an({},e),{isVisible:!1})));break;case"set-size":{const{width:t,height:r}=e.data.data;a((e=>rn(an({},e),{width:t,height:r})));break}case"update-block-id":{const{blockId:r}=e.data.data;(0,Vs.flushSync)((()=>a((e=>rn(an({},e),{blockId:r}))))),t({data:{blockId:r}});break}}}),[]);(0,n.useEffect)((()=>(l.Z.onInternalMessage("instream-fullscreen-render",r),()=>{l.Z.offInternalMessage("instream-fullscreen-render",r)})),[r]);const{viewType:s}=e,i=[ra.kn.modal,ra.kn.modalFullscreen,ra.kn.modalWithBlur,(0,I.TE)(s),t.isVisible?ra.kn.modalVisible:void 0,t.isHeaderEnabled?ra.kn.modalWithHeader:void 0,t.isHeaderEnabled?ra.kn.headerFix:void 0];return o().createElement("div",{className:(0,C.E)(...i)},o().createElement("div",{className:sn("content"),style:{width:t.width,height:t.height}},o().createElement("div",{id:t.blockId})))};var on=a(45112),ln=a(62011),dn=a(28705);const cn=(0,se.M$)("AdvStickyParentWindow",void 0,{background:"#0c6c09"}),hn=(0,ln.Z)((({appId:e,features:t,flags:a,settings:r})=>{const s=(0,n.useMemo)((()=>new na),[]),[o,i]=(0,n.useState)(!0),[d,c]=(0,n.useState)(!1),{adv:h}=(0,dn.Lf)(r),u=(0,n.useMemo)((()=>!(0,O.Ww)(a,v.By.STICKY)&&(0,dn.uk)({adv:h,appId:e,isDesktop:!0,flags:a,orientation:null==t?void 0:t.orientation})),[h,e,t,a]);return(0,n.useEffect)((()=>{const e=(e,t)=>{return a=void 0,r=null,n=function*(){const{action:a}=e.data;switch(a){case"adv-show-sticky-banner":{if(cn(`onExternalMessage: action: "${a}"`),!u)return void t({data:{reason:v.$R.ADV_IS_NOT_CONNECTED,stickyAdvIsShowing:!1}});const e=oa({action:"setBannerAdvStatus",type:"adv",payload:{stickyAdvIsShowing:!0}});s.addListener({fn:e=>{var a;const{payload:r}=e,s=null==(a=r.stickyAdvIsShowing)||a;return c(!s),t({data:{reason:r.reason,stickyAdvIsShowing:s}}),!0},messageId:e});break}case"adv-hide-sticky-banner":{cn(`onExternalMessage: action: "${a}"`);const e=oa({action:"setBannerAdvStatus",type:"adv",payload:{stickyAdvIsShowing:!1}});s.addListener({fn:e=>{var a;const{payload:r}=e,s=null!=(a=r.stickyAdvIsShowing)&&a;return c(!s),t({data:{reason:r.reason,stickyAdvIsShowing:s}}),!0},messageId:e});break}case"adv-status-sticky-banner":if(cn(`onExternalMessage: action: "${a}"`),!u)return void t({data:{reason:v.$R.ADV_IS_NOT_CONNECTED,stickyAdvIsShowing:!1}});cn(`Get stickyAdvIsShowing: ${!d}`),t({data:{stickyAdvIsShowing:!d}})}},new Promise(((e,t)=>{var s=e=>{try{i(n.next(e))}catch(e){t(e)}},o=e=>{try{i(n.throw(e))}catch(e){t(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(s,o);i((n=n.apply(a,r)).next())}));var a,r,n};return cn("ParentWindowStickyAdvService init"),l.Z.onAllMessages("adv-manager",e),()=>{l.Z.offAllMessages("adv-manager",e)}}),[u,d,s]),(0,on.qR)((()=>{const r=(0,dn.jx)({adv:h,appId:e,flags:a,orientation:null==t?void 0:t.orientation}),n={desktop:{landscape:r.desktop,portrait:r.desktop},mobile:{landscape:r.mobileLandscape,portrait:r.mobilePortrait}};oa({action:"setBannerAdvSettings",type:"adv",payload:{enabled:u,locations:n}});const o=oa({action:"ping",type:"liveness"}),l=s.addListener({fn:e=>{const{action:t,type:a}=e;switch(a){case"liveness":"pong"===t&&(window.clearTimeout(d),i(!0));break;case"error":i(!1),cn("error",e)}return!0},messageId:o}),d=window.setTimeout((()=>{l(),i(!1)}),2e3)})),null}),i.Z,{appId:e=>e.playPageData.gameInfo.appId,features:e=>e.playPageData.gameSettings.features,flags:e=>e.abt.flags,settings:e=>e.playPageData.gameSettings.settings});var un=a(53726),pn=a(59453),mn=a(86880);class vn extends n.Component{constructor(e){super(e),this.additionalClasses="",this.closeButtonDeferredTime=0,this.onYandexFullscreenRenderMessage=(e,t)=>{const{action:a}=e.data;switch(a){case"update-block-id":this.setState({advBlockId:e.data.data.blockId,pageNumber:e.data.data.pageNumber},(()=>{t({data:{blockId:this.getBlockId()}})}));break;case"show-fullscreen":this.setState({isVisible:!0,seconds:0,withTimer:!1});break;case"hide-fullscreen":this.setState({isVisible:!1})}},this.onYandexFullscreenRenderMessageGames27265=(e,t)=>{const{action:a}=e.data;switch(a){case"update-block-id":this.setState({advBlockId:e.data.data.blockId,pageNumber:e.data.data.pageNumber},(()=>{t({data:{blockId:this.getBlockId()}})}));break;case"show-fullscreen":this.setState({isVisible:!0,seconds:0,withTimer:!1}),this.hideCloseButton(),this.setIsCloseButtonHiddenTimeout();break;case"hide-fullscreen":this.clearIsCloseButtonHiddenTimeout(),this.showCloseButton(),this.setState({isVisible:!1})}},this.handleClose=()=>{(0,R.D)((()=>{l.Z.post({type:"yandex-adv-service",action:"close-adv"})}))},this.handleBottomButtonClose=()=>{this.state.isCloseButtonHidden||(0,R.D)((()=>{l.Z.post({type:"yandex-adv-service",action:"bottom-button-close-adv"})}))},this.handleTouchMove=e=>{e.stopPropagation(),e.preventDefault()},this.handleButtonDisableAdvClick=()=>{(0,D.Z)()},this.setModalRef=()=>{l.Z.post({type:"yandex-adv-service",action:"adv-container-mounted"})},this.isYandexSearchApp=(0,Cr.qo)(),this.state={advBlockId:"",pageNumber:1,isCloseButtonHidden:!1,isVisible:!1,inited:!1,seconds:0,withTimer:!1,isHeaderEnabled:!(0,I.Ij)()}}componentDidMount(){this.init(),this.initMessaging()}init(){var e;const{flags:t}=this.context.abt,{viewType:a}=this.props.advManager;this.closeButtonDeferredTime=Math.max(0,Math.min(5e3,null!=(e=(0,O.$9)(t,Ce.Z.advCloseButtonDeferredTime))?e:0)),this.cssClasses=qa();const r=[];a===ra.xd.fullscreen&&t.new_adv_block&&r.push(`new_adv_block-${t.new_adv_block}`),this.additionalClasses=r.join(" "),this.setState({inited:!0,isCloseButtonHidden:Boolean(this.closeButtonDeferredTime)})}initMessaging(){this.closeButtonDeferredTime?l.Z.onInternalMessage("yandex-fullscreen-render",this.onYandexFullscreenRenderMessageGames27265):l.Z.onInternalMessage("yandex-fullscreen-render",this.onYandexFullscreenRenderMessage)}setIsCloseButtonHiddenTimeout(){this.clearIsCloseButtonHiddenTimeout(),this.isCloseButtonHiddenTimeout=window.setTimeout((()=>{this.showCloseButton()}),this.closeButtonDeferredTime)}clearIsCloseButtonHiddenTimeout(){this.isCloseButtonHiddenTimeout&&(window.clearTimeout(this.isCloseButtonHiddenTimeout),this.isCloseButtonHiddenTimeout=void 0)}hideCloseButton(){this.setState({isCloseButtonHidden:!0}),document.documentElement.dataset.pcodeCloseButtonHidden="true"}showCloseButton(){this.setState({isCloseButtonHidden:!1}),document.documentElement.dataset.pcodeCloseButtonHidden="false"}getBlockId(){const{advBlockId:e,pageNumber:t}=this.state;return`yandex_rtb_${e}_${t}`}renderModalContent(){const{cssClasses:e}=this,{advBlockId:t,isCloseButtonHidden:a,isVisible:r,withTimer:s}=this.state;if(!t||!e)return null;const{deviceType:n,isDisableAdButtonEnabled:i}=this.props.advManager,l=Boolean(this.isYandexSearchApp),{abt:{flags:d}}=this.context,{getText:c}=this.props,h=(0,O.qf)(d)||(0,I.un)(),u=o().createElement("span",{"aria-hidden":"true",className:`${za(e,"modalBottom",l)}`},o().createElement("span",{className:`${e.modalButton} ${e.modalButtonDisableAdv}`,onClick:this.handleButtonDisableAdvClick},c("header.popup.disable.ads")),o().createElement("span",{className:`${e.modalButton} ${e.modalButtonClose}`,onClick:this.handleBottomButtonClose},c("adv.close")));return n===$a.n.desktop?h?o().createElement("div",{className:`${ra.kn.modalInner}`},o().createElement("div",{className:`${e.modalWrap} with-native-close`},o().createElement("div",{className:`${e.modalContent} ${e.yandexAdaptive} with-native-close`,id:this.getBlockId()}))):o().createElement("div",{className:`${ra.kn.modalInner}`},o().createElement("div",{className:`${e.modalWrap}`},r&&s&&o().createElement("div",{className:ra.kn.countdown},o().createElement(mn.Z,{seconds:this.state.seconds,text:c("adv.timed.allow.skip.text"),onClose:this.handleClose})),o().createElement("div",{className:`${e.modalContent} ${e.yandexAdaptive}`,id:this.getBlockId()}),!s&&!a&&o().createElement(pn.Z,{"data-testid":"YandexFullscreenRender-Button",source:It.h0.REWARDED_COUNTER,type:"adv-fullscreen",onClick:this.handleClose}),i?u:"")):h?o().createElement("div",{className:`${ra.kn.modalInner}`},o().createElement("div",{className:`${za(e,"modalContent",l)} ${e.yandexAdaptive} with-native-close`,id:this.getBlockId()})):o().createElement("div",{className:`${ra.kn.modalInner}`},o().createElement("div",{className:`${za(e,"modalContent",l)} ${e.yandexAdaptive}`,id:this.getBlockId()}),!(0,St.x)()&&!a&&o().createElement("span",{"aria-hidden":"true",className:`${za(e,"modalClose",l)}`},o().createElement(E.z,{className:e.mobileCloseButton,"data-testid":"YandexFullscreenRender-Button",size:40,view:"primary",width:"max",onClick:this.handleClose},c("adv.close"))),i?u:null)}render(){const{additionalClasses:e,cssClasses:t}=this,{isVisible:a,inited:r,isHeaderEnabled:s}=this.state,{viewType:n}=this.props.advManager;if(!r)return null;const i=a?`${t.modalVisible} ${ra.kn.modalVisible}`:"",l=[ra.kn.modal,(0,I.el)("yandex"),ra.kn.modalFullscreen,(0,I.TE)(n),t.modalMedia,i,e,ra.kn.modalWithBlur,s?ra.kn.modalWithHeader:void 0,s?ra.kn.headerFix:void 0].join(" ").trim();return o().createElement("div",{className:l,ref:this.setModalRef,onTouchMove:this.handleTouchMove},this.renderModalContent())}}vn.contextType=i.Z;const gn=(0,un.$j)((function(e){return{getText:e.getText}}))(vn);var fn=a(6893);class yn extends i.P{constructor(e){super(e),this.isYaBroChromeLower79=window.appData.isYaBroOrSearchApp&&!(0,fn.LR)(window.navigator.userAgent,fn.t_,{major:79,minor:0}),this.onYandexRewardedRenderMessage=(e,t)=>{var a;const{action:r}=e.data;switch(r){case"update-block-id":this.setState({advBlockId:e.data.data.blockId},(()=>{t({data:{blockId:this.getBlockId()}})}));break;case"show-rewarded":this.setState({isVisible:!0,seconds:(null==(a=e.data.data)?void 0:a.seconds)||0}),this.onAdvCloseMessagingCallback=t;break;case"on-rewarded":this.onRewardedMessagingCallback=t;break;case"hide-rewarded":this.setState({isVisible:!1})}},this.handleAdvClose=()=>{var e;null==(e=this.onAdvCloseMessagingCallback)||e.call(this)},this.handleRewardedDone=()=>{var e;null==(e=this.onRewardedMessagingCallback)||e.call(this)},this.handleTouchMove=e=>{e.stopPropagation(),e.preventDefault()},this.setModalRef=()=>{l.Z.post({type:"yandex-adv-service",action:"adv-container-mounted"})},this.isYandexSearchApp=(0,Cr.qo)(),this.state={advBlockId:"",inited:!1,isVisible:!1,seconds:0,isHeaderEnabled:!(0,I.Ij)()}}componentDidMount(){this.init(),this.initMessaging()}init(){this.isPCodeModal=(0,O.lv)(this.context.abt.flags),this.cssClasses=qa(),this.setState({inited:!0})}initMessaging(){l.Z.onInternalMessage("yandex-rewarded-render",this.onYandexRewardedRenderMessage)}getBlockId(){const{advBlockId:e}=this.state;return`yandex_rtb_rewarded_${e}`}renderModalContent(){const{cssClasses:e}=this,{isVisible:t,seconds:a}=this.state,{advManager:{deviceType:r}}=this.props;return r===$a.n.desktop?o().createElement("div",{className:`${e.modalWrap}`},t&&o().createElement("div",{className:ra.kn.countdown},o().createElement(mn.Z,{seconds:a,onClose:this.handleAdvClose,onDone:this.handleRewardedDone})),o().createElement("div",{className:`${e.modalContent}`,id:this.getBlockId()})):o().createElement(o().Fragment,null,o().createElement("div",{className:za(e,"modalContent",Boolean(this.isYandexSearchApp)),id:this.getBlockId()}),t&&!(0,St.x)()&&o().createElement(mn.Z,{seconds:a,onClose:this.handleAdvClose,onDone:this.handleRewardedDone}))}renderModal(){const{advManager:e}=this.props,{cssClasses:t}=this,{isVisible:a,isHeaderEnabled:r}=this.state,s=a?`${t.modalVisible} ${ra.kn.modalVisible}`:"",n=[ra.kn.modal,t.rewardedVideo,t.yandexAdaptive,(0,I.TE)(e.viewType),t.modalMedia,s,ra.kn.modalWithBlur,r?ra.kn.modalWithHeader:void 0,r?ra.kn.headerFix:void 0,this.isYaBroChromeLower79?ra.kn.yabroChromeLower79:void 0].join(" ").trim();return o().createElement("div",{className:n,ref:this.setModalRef,onTouchMove:this.handleTouchMove},this.renderModalContent())}renderPCodeModal(){const{cssClasses:e}=this,{isVisible:t}=this.state,a=t?`${ra.kn.modalVisible}`:"",r=[ra.kn.modal,e.rewardedVideo,a,ra.kn.modalWithBlur].join(" ").trim();return o().createElement("div",{className:r})}render(){const{inited:e}=this.state;return e?this.isPCodeModal?this.renderPCodeModal():this.renderModal():null}}var bn=a(53603),wn=a(75217),kn=a(37341),En=Object.defineProperty,Sn=Object.getOwnPropertySymbols,An=Object.prototype.hasOwnProperty,In=Object.prototype.propertyIsEnumerable,Pn=(e,t,a)=>t in e?En(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const Tn=s().with("aab-adv"),Cn=(0,se.M$)("PlayAdvManager",se.XG.Adv),Rn=()=>{const e=(0,P.b)(),{isReady:t}=(0,bn.s)(),{abt:{flags:a},location:r,withWorldWideAdv:s}=e,[i,d]=(0,n.useState)(null),c=(0,n.useRef)(null),h=(0,kn.ff)();(0,n.useEffect)((()=>{const t=e=>{"update-adv-services-list"===e.data.action&&d(((e,t)=>{for(var a in t||(t={}))An.call(t,a)&&Pn(e,a,t[a]);if(Sn)for(var a of Sn(t))In.call(t,a)&&Pn(e,a,t[a]);return e})({},e.data.data))};return l.Z.onInternalMessage("play-adv-manager",t),Cn("Create AdvManager instance"),c.current=new Cs(e,h),()=>{l.Z.offInternalMessage("play-adv-manager",t),Cn("Destroy AdvManager instance")}}),[e,h]);const u=(0,n.useMemo)((()=>(0,wn.O)(r)),[r]),g=c.current,f=(0,n.useMemo)((()=>{var e;if(!g||!i)return null;const t=(0,Tr.gK)({flags:a,ingameAdvData:null==(e=window.appData.advDataStore)?void 0:e.ingameAdv,withWorldWideAdv:s}),r=i[v.$H.INTERSTITIAL],n=i[v.$H.REWARDED],l=r[he.e.PrebidTGO]||r[he.e.Adsense]||r[he.e.PubliftZone]||r[he.e.AdsenseResponsive]||r[he.e.AnymindBlock],d=Boolean(n[he.e.GoogleInstream]&&t.rewarded.find((e=>e.provider===he.e.GoogleInstream&&e.tag===v.$H.INTERSTITIAL)));return o().createElement(o().Fragment,null,r[he.e.Yandex]&&o().createElement(gn,{advManager:g}),i[v.$H.REWARDED][he.e.Yandex]&&o().createElement(yn,{advManager:g}),l&&o().createElement(re,{advManager:g}),(r[he.e.GoogleInstream]||d)&&((0,m.vV)(a)||Re(a)?o().createElement(Ls,{advManager:g,tag:v.$H.INTERSTITIAL}):o().createElement(nn,{advManager:g})),i[v.$H.REWARDED][he.e.GoogleInstream]&&o().createElement(Ls,{advManager:g,tag:v.$H.REWARDED}),o().createElement(zs,null),u&&o().createElement(hn,null))}),[g,a,u,i,s]);return(0,O.V)(a)&&!t?null:g?o().createElement("div",{className:Tn()},o().createElement(p,{appId:g.appId,isDevFeaturesEnabled:!1}),f):null}},29011:(e,t,a)=>{a.d(t,{q:()=>p,Q:()=>y});var r=a(50042),s=a(48810);const n="count_of_user_visits";function o(){return!(0,s.dq)(n).wasError}var i=a(35090),l=a(82027),d=a(31261),c=a(4915),h=a(31085),u=a(39449);const p=15e3,m=1,v=1,g=5;function f(e){return!(e||(0,r.VP)()||(0,l.PK)()||!o()||function(){let e,t=(0,s.dq)(n);return o()?(t.value&&(e=Number(t.value)),(!e||e<0)&&(e=0),e):0}()>=g||!(0,d.uP)())}function y(){if((0,i.Oo)()||!f(null==(e=window.YandexGamesSDK)?void 0:e.game.info.hasWebAppsCategory))return!1;var e;return(new c.Z).checkShowCapability(h.Wp.GamePromo,{waitingPeriod:m*u.E$,maxShowCount:v,considerInstallation:!0})}},40174:(e,t,a)=>{a.d(t,{uy:()=>k,xn:()=>w,Q$:()=>S});var r=a(90403),s=a(10739),n=a(23617),o=a(59303),i=a(40656);class l extends Error{constructor(e,t){super(e),this.name=this.constructor.name,this.code=t,Object.setPrototypeOf(this,l.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,l)}}const d=l;var c=a(15771),h=a(90380),u=Object.defineProperty,p=Object.defineProperties,m=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,y=(e,t,a)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,b=(e,t)=>{for(var a in t||(t={}))g.call(t,a)&&y(e,a,t[a]);if(v)for(var a of v(t))f.call(t,a)&&y(e,a,t[a]);return e},w=(e=>(e.PRELOAD="preload",e.RENDER="render",e))(w||{}),k=(e=>(e.NO_CONTENT="NO_CONTENT",e.NO_SUCH_METHOD="NO_SUCH_METHOD",e.TIMEOUT="TIMEOUT",e.UNKNOWN="UNKNOWN",e))(k||{});const E=20*i.WT;const S=({abtFlags:e,adOptions:t,methodName:a,onAdLoadFailed:i,timeoutMs:l})=>{var u,v;const g=(0,r.Z)(i),f=(e=>{var t,a,r;const n=null==(a=null==(t=null==window?void 0:window.Ya)?void 0:t.Context)?void 0:a.AdvManager;if(n&&"object"==typeof n)return e in n||(0,s.qu)(`[adv.safeGuard] AdvManager method ${e} is undefined`),null==(r=n[e])?void 0:r.bind(n);(0,s.qu)("[adv.safeGuard] AdvManager is undefined")})(a);if(!f)return void g(new d("No such method","NO_SUCH_METHOD"));void 0===l&&(l=null!=(u=(0,c.$9)(e,h.Z.rsyaDefaultLoadTimeout))?u:E);const y=setTimeout((()=>{const e=`No events were raised after Ya.Context.AdvManager.${a} in ${l} ms.`;(0,s.qu)(`[adv.safeGuard] Error: ${e}`,{blockId:t.blockId}),g(new d(e,"TIMEOUT"))}),l),w=e=>(...a)=>(clearTimeout(y),(0,s.qu)("[adv.safeGuard] Timer cleared",{blockId:t.blockId}),null==e?void 0:e(...a)),k=(S=b(b({},t),(0,n.x)()?{onRewarded:w(t.onRewarded)}:{}),A={onError:w(t.onError),onRender:w(t.onRender),onPreload:w(t.onPreload),onClose:w(t.onClose)},p(S,m(A)));var S,A;void 0!==t.darkTheme?k.darkTheme=t.darkTheme:(0,c.ZK)(e)&&(k.darkTheme=((null==(v=null==window?void 0:window.appData)?void 0:v.themeColor)||o.aN.LIGHT)===o.aN.DARK),(0,s.qu)(`[adv.safeGuard] call "${a}" with options = `,function(e){return{blockId:e.blockId,darkTheme:e.darkTheme,extParams:e.extParams}}(k)),f(k,w((()=>g(new d("No content","NO_CONTENT")))))}},54814:(e,t,a)=>{a.d(t,{Kc:()=>o,QA:()=>l,hk:()=>s,mb:()=>i,pP:()=>n});var r=a(5e4);function s(e){return(null==e?void 0:e.provider)===r.e.AdsenseResponsive&&"slotId"in e}var n=(e=>(e.Onspot="onspot",e.Skip="skip",e.Start="start",e.Waterfall="waterfall",e))(n||{}),o=(e=>(e.Next="next",e.NextRemove="next_remove",e.Ok="ok",e))(o||{}),i=(e=>(e.Empty="empty",e.Failed="failed",e.FailedRemove="failed_remove",e.FailedShow="failed_show",e.Ok="ok",e))(i||{}),l=(e=>(e.ServiceInit="serviceInit",e.ShowFullscreen="showFullscreen",e.ShowRewarded="showRewarded",e))(l||{})},95025:(e,t,a)=>{a.d(t,{C5:()=>F,Cj:()=>P,Jt:()=>C,gK:()=>S,sf:()=>T});var r=a(38096),s=a(26667),n=a(14408),o=a(29011),i=a(50042),l=a(98816),d=a(5e4),c=a(75217),h=a(58432),u=a(23617),p=a(17061),m=a(31261),v=a(41811),g=a(15771),f=a(90380),y=a(49659),b=a(15513),w=a(23404);const k=!0,E=["2753282","2753277",v.Gc];function S({flags:e,ingameAdvData:t,withWorldWideAdv:a}){if((0,c.O)()){return{[l.$H.INTERSTITIAL]:[{provider:d.e.ParentWindow}],[l.$H.REWARDED]:[{provider:d.e.ParentWindow}]}}const n={[l.$H.INTERSTITIAL]:B(l.$H.INTERSTITIAL,t,e),[l.$H.REWARDED]:B(l.$H.REWARDED,t,e)},i={[l.$H.INTERSTITIAL]:n[l.$H.INTERSTITIAL]||x(l.$H.INTERSTITIAL,{flags:e,withWorldWideAdv:a}),[l.$H.REWARDED]:n[l.$H.REWARDED]||x(l.$H.REWARDED,{flags:e,withWorldWideAdv:a})};return n[l.$H.INTERSTITIAL]&&function(e){const t=window.firstSeen;if(!t||!t.utm_source||!v.os.includes(t.utm_source))return;const a=C(e,d.e.GoogleManual);-1!==a&&e.splice(a,1)}(i[l.$H.INTERSTITIAL]),L(e)?i:(n[l.$H.INTERSTITIAL]||(R(i[l.$H.INTERSTITIAL],l.$H.INTERSTITIAL,{flags:e,withWorldWideAdv:a}),function(e){const{adv:{interstitial:{promo:t}}}=(0,r.getDomainConfig)();if(!(null==t?void 0:t.onboardingEnabled))return;if(!(0,o.Q)())return;e[l.$H.INTERSTITIAL].unshift({provider:d.e.OnboardingPromo})}(i),D(i[l.$H.INTERSTITIAL],{flags:e}),O(i[l.$H.INTERSTITIAL])),n[l.$H.REWARDED]||(R(i[l.$H.REWARDED],l.$H.REWARDED,{flags:e,withWorldWideAdv:a}),function(e,{flags:t}){if(!(0,g.dA)(t))return;const a=C(e,d.e.PrebidTGO);if(-1===a)return;e.splice(a+1,0,{provider:d.e.PrebidTGO,tag:l.$H.INTERSTITIAL})}(i[l.$H.REWARDED],{flags:e}),function(e,{withWorldWideAdv:t}){0;if(_(t))return;e.push({provider:d.e.GoogleInstream,tag:l.$H.INTERSTITIAL})}(i[l.$H.REWARDED],{withWorldWideAdv:a}),D(i[l.$H.REWARDED],{flags:e}),O(i[l.$H.REWARDED])),$(i[l.$H.INTERSTITIAL],e),$(i[l.$H.REWARDED],e),A(i[l.$H.INTERSTITIAL],l.$H.INTERSTITIAL,{flags:e}),A(i[l.$H.REWARDED],l.$H.REWARDED,{flags:e}),I(i[l.$H.INTERSTITIAL],l.$H.INTERSTITIAL,{flags:e}),I(i[l.$H.REWARDED],l.$H.REWARDED,{flags:e}),function(e){const t=(0,h.KT)();if(!s.RQ.includes(t))return;e.length=0,e.push({provider:d.e.AdsenseResponsive,clientId:"ca-pub-8160201538288120",slotId:"3182579723"})}(i[l.$H.INTERSTITIAL]),{[l.$H.INTERSTITIAL]:i[l.$H.INTERSTITIAL],[l.$H.REWARDED]:i[l.$H.REWARDED]})}function A(e,t,{flags:a}){void 0!==(t===l.$H.INTERSTITIAL?(0,n.vy)(a):(0,n.P2)(a))&&(e.length=0,e.push({provider:d.e.AdsenseResponsive}))}function I(e,t,{flags:a}){const r=(0,h.KT)();s.Y8.includes(r)&&(t===l.$H.REWARDED&&(0,n.xP)(a)||(e.length=0,e.push({provider:d.e.AdsenseResponsive})))}function P(e,t){const a=e[e.length-1];return(null==a?void 0:a.provider)===t}function T(e,t){return e.some((e=>e.provider===t))}function C(e,t){return e.findIndex((e=>e.provider===t))}function R(e,t,{flags:a,withWorldWideAdv:r}){var s,o,i;if(_(r))return;const c=null==(o=null==(s=window.appData.allAdvBlocks)?void 0:s.instream)?void 0:o[t];if(!c)return;(t===l.$H.INTERSTITIAL?null==(i=(0,g.oO)(a))||i:(0,n.CE)(a))&&c&&e.unshift({provider:d.e.GoogleInstream})}function D(e,{flags:t}){const a=(0,g.RM)(t,f.Z.disableYandexWaterfall)||!1,r=(0,h.KT)();a||E.includes(r)||P(e,d.e.Yandex)||e.push({provider:d.e.Yandex})}function O(e){const{adv:{interstitial:{promo:t}}}=(0,r.getDomainConfig)();(0,m.uP)()&&(null==t?void 0:t.waterfallEnabled)&&e.push({provider:d.e.Promo})}function L(e){var t;if((0,g.RM)(e,f.Z.disableNativeAdv)||!1)return!1;return!!((null==(t=window.yandex)?void 0:t.ads)&&(0,i.zg)("21.9.0.1638")&&(0,i.VP)())}function _(e){var t;return!e||(null==(t=window.clientMetadata)?void 0:t.isOnlyRsyaAd)}function x(e,{flags:t,withWorldWideAdv:a}){if(L(t)){return(0,u.x)()&&(0,g.LI)(t)?[{provider:d.e.Yandex}]:[{provider:d.e.Native}]}const r=(0,p.V)("utm_source");return r===d.e.Transsion?[{provider:d.e.Transsion}]:r===d.e.CrazyGames?[{provider:d.e.CrazyGames}]:r===d.e.Azerion?[{provider:d.e.Azerion}]:_(a)?[{provider:d.e.Yandex}]:[{provider:d.e.PrebidTGO}]}function N(e){return e&&"object"==typeof e&&e.provider&&"string"==typeof e.provider}function B(e,t,a){var r;if(l.$H.INTERSTITIAL===e||l.$H.REWARDED===e){const a=null==(r=null==t?void 0:t[e])?void 0:r.waterfall;if(a)return a}const s=(0,g.QR)(a,`adv_${e}_waterfall`);return s&&s.every(N)?s:null}function M({flagName:e,flags:t,provider:a}){if(k)return null;const r=(0,g.QR)(t,e);if(!r)return null;const s=(0,h.KT)();return s&&(n=s,r.some((e=>n===String(e))))?[{provider:a}]:null;var n}function $(e,t){if("undefined"==typeof window)return e;const{pathname:a}=(0,y.e)(),r=(0,b.eT)(window.appData,a),s=(0,b.Fg)(window.appData,a)&&(0,g.bV)(t);return!r&&!s||(0,g.VG)(t)||[...e].forEach((t=>{if(!w.wt.includes(t.provider)){const a=e.indexOf(t);-1!==a&&e.splice(a,1)}})),e}function F({advBlocks:e,ingameAdvData:t,flags:a,withWorldWideAdv:r}){var s;const n=B(l.$H.START_FULLSCREEN,t,a);if(n)return $(n,a);const o=M({flags:a,flagName:f.Z.advPrerollPerClidAdsense,provider:d.e.AdsenseResponsive});if(o)return $([...o],a);const i=M({flags:a,flagName:f.Z.advPrerollPerClid,provider:d.e.PrebidTGO});return i?$([...i],a):e.start_fullscreen?L(a)?[{provider:d.e.Native}]:!r||(null==(s=window.clientMetadata)?void 0:s.isOnlyRsyaAd)?[{provider:d.e.Yandex},{provider:d.e.Promo}]:null:null}},40532:(e,t,a)=>{a.d(t,{Z:()=>g});var r=a(87363),s=a.n(r),n=a(53726),o=a(17431),i=a(65453),l=a(97808),d=a(71522),c=a(37705),h=a(93298);const u="fetch-limits";var p=(e=>(e.LIMIT_EXCEEDING="limit-exceeding",e))(p||{});const m=(0,h.M$)("PlayFetchLimits",h.XG.Popup);class v extends r.Component{constructor(e){super(e),this.actionToMethodMap={"leaderboard/entries":"leaderboard.getLeaderboardEntries()","leaderboard/score":"leaderboard.setLeaderboardScore()","player-info/get-data":"player.getData()","player-info/set-data":"player.setData()","player-info/increment-stats":"player.incrementStats()","player-info/stats":"player.getStats()","player-info/set-stats":"player.setStats()"},this.onFetchInternalMessage=e=>{const{action:t}=e.data;if(t!==p.LIMIT_EXCEEDING)return;const{data:{url:a,method:r}}=e.data;this.onLimitExceeding({method:r,url:a})},this.onMessageBoxClick=()=>{const{warningMessage:e}=this.state;if(e)try{navigator.clipboard.writeText(e)}catch(e){}},this.onMessageBoxClose=()=>{this.setState({warningMessage:void 0})},this.onMessageBoxSnooze=()=>{this.onMessageBoxClose(),this.setState({snooze:!0})},this.state={snooze:!1,warningMessage:void 0}}componentDidMount(){l.Z.onInternalMessage(u,this.onFetchInternalMessage)}componentWillUnmount(){l.Z.offInternalMessage(u,this.onFetchInternalMessage)}onLimitExceeding(e){const t=this.getLimitErrorText(e);(0,c.H)({message:"Fetch limit exceeding",type:"fetch"},new Error(t)),((0,d.m)()||h.HQ)&&this.setState({warningMessage:t})}getLimitErrorText({method:e,url:t}){var a;if(t){let e=t;try{e=new URL(t).pathname}catch(e){}return m(`onLimitExceeding, url = ${t}`),this.props.getText("game-sdk.fetch-limits.warn.text",{params:{url:e}})}return e=null!=(a=this.actionToMethodMap[e])?a:e,m(`onLimitExceeding, method = ${e}`),this.props.getText("game-sdk.fetch-limits.warn.method.text",{params:{method:e}})}render(){const{snooze:e,warningMessage:t}=this.state;return e||!t?null:s().createElement(o.Z,{autohide:!1,level:i.XB.ERROR,withCloseButton:!0,onClick:this.onMessageBoxClick,onClose:this.onMessageBoxClose,onSnooze:this.onMessageBoxSnooze},t)}}const g=(0,n.$j)((function(e){return{getText:e.getText}}))(v)},36037:(e,t,a)=>{a.d(t,{Z:()=>ae});var r=a(81517),s=a(10719),n=a(85383),o=a(58904),i=a(63904),l=a.n(i),d=a(87363),c=a.n(d),h=a(53726),u=a(45331),p=a(14678),m=a(4463),v=a(15201),g=a(40184),f=a(85467),y=a(15771);const b=l().with("exit-button"),w=({iconClass:e,onClick:t,mix:a,onEnable:r})=>{const s=(0,f.T)(),n=(0,m.TH)(),{abt:{flags:o},isPWA:i,isGamesApp:l,deviceType:h}=(0,g.b)();return(0,d.useMemo)((()=>{const e="mobile"===h&&i&&(0,y.Xd)(o),t=new URLSearchParams(n.search);return e||l||"1"===t.get("exit-button")}),[h,o,l,i,n.search])?(r(),c().createElement(c().Fragment,null,c().createElement("div",{className:`${b()} ${a}`,title:s("header.button.exit.text"),onClick:t},c().createElement(v.Z,{alt:s("common.close"),className:`b('icon') ${e}`,type:"exit"})))):null};var k=a(18455);const E=a(11775).Z;var S=a(96349),A=a(65044),I=a(3462),P=a(50206),T=a(82027),C=a(69838);const R=l().with("play-game-header-logo"),D=()=>{const e=(0,g.b)(),t=(0,m.TH)(),{abt:a,isPWA:r,oneTabPWA:s,reqUrl:n,pathLang:o}=e,i=(0,f.T)(),l=(0,P.l)({url:"/",source:{utm_source:"game_header_logo"},location:t,lang:o,context:e});let d=c().createElement(I.Z,{type:C.q7.HEADER});return c().createElement(k.Kk,{className:`${R("link",{pwa:false})} pointer`,currentLocation:n,href:l,tabIndex:-1,target:(0,T.AO)({oneTabPWA:s}),title:i("common.service.name")},d)};var O=a(58097),L=a(36172),_=a(97808),x=a(91521),N=a(28705),B=a(42126),M=a(17061);var $=a(73285),F=a(81442),H=a(35090),W=a(34967),G=a(68108),Z=a(48810),j=a(30448),U=a(41952),q=a(41811),z=a(93298),V=a(68606),K=a(57681);const Y=l().with("play-game-header"),X=(0,z.M$)("PlayGameHeader",z.XG.Dev);let J,Q=0;const ee=({context:e})=>{const t=(0,f.T)(),a=(0,d.useCallback)((()=>{e.handleEvent(new CustomEvent("auth"))}),[e]);return c().createElement(o.z,{className:Y("middle-layer-login-button"),"data-guard-auth":"true",size:24,view:"secondary",onClick:a},c().createElement("span",null,t("authpopup.button.login"))," ",c().createElement("span",{className:Y("middle-layer-login-button_secondary-caption")},t("authpopup.button.caption")))};class te extends u.P{constructor(e){super(e),this.menuAnchorRef=c().createRef(),this.backButtonListenerInGame=!1,this.isExitEnabled=!1,this.onPlayGameHeaderMessage=e=>{if(!this.props.isVisible)return;const{action:t}=e.data;"show"!==t?"hide"===t&&this.setState({visible:!1}):this.setState({visible:!0})},this.onAppInfoClick=e=>{e.preventDefault(),_.Z.post({type:"document-events",action:"show-info"}),this.sendParams("app-page")},this.onExitButtonClick=()=>{this.sendParams("exit"),this.onExit(!0)},this.onFullscreenButtonClick=()=>{this.sendParams("fullscreen"),this.toggleFullscreen()},this.onHeaderLogoClick=()=>{this.sendParams("logo")},this.onMenuIconClick=()=>{const e=(0,V.hY)(V.jF.GUARD);e?(0,V.Vy)(e.children):(this.sendParams("menu"),this.setState({menuDotted:!1,menuVisible:!this.state.menuVisible}))},this.onBackButtonClick=()=>{this.sendParams("hide-menu-back"),this.closeMenu({isMenuItem:!1,isBackLink:!0})},this.handleMenuClose=e=>{this.closeMenu({isMenuItem:Boolean(null==e?void 0:e.isMenuItem),isBackLink:!1})},this.closeMenu=e=>{e.isMenuItem||e.isBackLink||window.history.back(),this.setState({menuVisible:!1})},this.isEnableExitButton=()=>{this.isExitEnabled=!0},this.state={isFullscreen:!1,menuDotted:!1,menuVisible:!1,visible:e.isVisible}}get isAdvStickyBannerEnabled(){return(0,N.xm)(this.context.playPageData)}get isMiddleLayerShown(){var e;return this.context.isMiddleLayerInGameExp&&null!=(e=this.props.isMiddleLayerShownInGame)&&e}componentDidMount(){X("componentDidMount"),this.setMenuDotMarker(),this.checkExitEnabled(),this.setExitButtonAvalibility(),this.setBackButtonGameHandler(),this.initMessaging()}componentWillUnmount(){X("componentWillUnmount"),_.Z.offInternalMessage("play-game-header",this.onPlayGameHeaderMessage),this.removeBackButtonListener()}initMessaging(){_.Z.onInternalMessage("play-game-header",this.onPlayGameHeaderMessage)}sendParams(e){(0,W.U4)({},{borrowParams:{header:{action:e}}})}setMenuDotMarker(){var e,t,a;const r=!0===(null==(a=null==(t=null==(e=window.YandexGamesSDK)?void 0:e.game.settings)?void 0:t.extraFeatures)?void 0:a.leaderboards)&&!(0,Z.dq)(x.b).value,s=!(0,Z.dq)(x.Z).value&&!this.props.advDisabledByPartnersKit;this.setState({menuDotted:r||s})}setExitButtonAvalibility(){this.isExitEnabled&&(0,j.c)((()=>{window.setTimeout((()=>this.handleHistoryBack()))}),{once:!0})}setBackButtonGameHandler(){}get isEmbeddedWindow(){return Boolean("object"==typeof window&&window.parent!==window)}isFullscreenButtonAvailable(){return!this.context.isIpad&&(!(this.isEmbeddedWindow&&!(0,F.r)())&&(!this.isExitEnabled&&this.props.isFullscreenEnabled))}handleHistoryBack(){window.history.pushState("root",""),window.history.pushState("main-page",""),window.addEventListener("popstate",(e=>{if(this.clearingHistoryAndGoToCatalog)null===e.state?function(e){const t=["utm_medium","utm_source"].reduce(((e,a)=>{const r=(0,M.V)(a);return r&&(t[a]=r),e}),{}),a=(0,B.Z)({url:`${e}/`,params:t});window.location.replace(a)}(this.context.baseUrl):setTimeout((()=>{window.history.back()}),0);else if("root"===e.state){if(window.history.pushState("main-page",""),this.backButtonListenerInGame)return _.Z.postToChild((0,r.TI)(s.q1.HISTORY_BACK)),Q>0&&clearTimeout(J),Q++,void(J=setTimeout((()=>{var e,t;null==(t=null==(e=null==window?void 0:window.Ya)?void 0:e.Rum)||t.logEventString("history_back","",{additional:{backHandleCount:Q}}),Q=0}),2e3));this.onExit()}}),!0)}toggleFullscreen(){_.Z.post({type:"screen-manager",action:"toggle-fullscreen"})}exitToCatalog(){const{reqUrl:e}=this.context,t=(0,P.l)({url:"/",source:{utm_source:"game_header_x_close"},location:this.props.location,lang:this.props.lang,context:this.context}),a=(0,k.ky)(t,{currentLocation:e});window.open(a,"_self")}onExit(e){e&&this.exitToCatalog()}componentDidUpdate(e,t){t.menuVisible!==this.state.menuVisible&&(this.state.menuVisible?this.addBackButtonListener():this.removeBackButtonListener())}addBackButtonListener(){setTimeout((()=>window.history.pushState("menu","","#menu")),0),window.addEventListener("popstate",this.onBackButtonClick,!1)}removeBackButtonListener(){window.removeEventListener("popstate",this.onBackButtonClick)}renderLogo(){return c().createElement("span",{className:Y("logo"),onClick:this.onHeaderLogoClick},c().createElement(D,null))}renderHeaderInfo(){const{baseUrlWithLangPath:e,referrer:t,hidePaymentsAndCurrency:a}=this.context;if(this.isMiddleLayerShown)return null;const{appId:r,title:s}=this.context.playPageData.gameInfo,n=(0,H.Px)({search:"?utm_source=game_header_title&info=true",params:{[q.o1]:a?"1":"",[q.om]:(0,M.V)(q.om,this.context.location)||"",[q.Vw]:(0,G.sD)(t)?t:""}}),o=`${e}${(0,K.TI)(this.context,{appID:r})}${n}`;return c().createElement("span",{className:Y("info")},c().createElement("span",{className:Y("middle")},c().createElement("a",{className:`${Y("link")} hover pointer app-page`,href:o,target:"_blank",title:(0,$.T)(s),onClick:this.onAppInfoClick},c().createElement("span",{className:Y("title")},(0,$.T)(s)))))}renderFullscreenIcon(){const{isFullscreenActive:e,getText:t}=this.props,a=!e;return c().createElement(v.Z,{alt:t("common.open-fullscreen"),className:Y("fullscreen-icon",{enable:a}),modifiers:{enable:a,env:"desktop"},type:"fullscreen"})}renderBalance(){const{abt:e,hidePortalCurrency:t}=this.context,{getText:a}=this.props;return t||(0,y.Sn)(e.flags)?null:c().createElement("div",{className:`${Y("action",{balance:!0})} ${Y("menu")} menu hover pointer`,ref:this.menuAnchorRef,title:a("header.button.balance.text")},c().createElement(p.Z,{type:"game"}))}renderMiddleLayerLoginButton(){return!this.isMiddleLayerShown||this.props.hasAuth?null:c().createElement(S.Z,null,c().createElement(A.u.Consumer,null,(e=>c().createElement(ee,{context:e}))))}renderActions(){const{getText:e,isFullscreenActive:t,darkTheme:a}=this.props;let r=(0,P.l)({url:"/",source:{utm_source:"game_header_tickets",tab_profile:"timeline"},context:this.context,location:this.props.location,lang:this.props.lang});return c().createElement("div",{className:Y("actions"),"data-nosnippet":"true"},this.renderMiddleLayerLoginButton(),this.renderBalance(),this.isPlayToEarn&&c().createElement(O.c,{passportOrigin:U._4.GamesHeader,small:!0,url:r}),c().createElement("div",{className:`${Y("action")} ${Y("menu")} menu hover pointer`,ref:this.menuAnchorRef,title:e("header.button.menu.text"),onClick:this.onMenuIconClick},c().createElement("div",{className:Y("menu-icon-wrapper",{dotted:this.state.menuDotted})},c().createElement(v.Z,{alt:e("common.menu"),className:Y("menu-icon"),type:this.isMiddleLayerShown&&!a?"game-menu-black":"game-menu-white"})),this.state.menuVisible&&c().createElement(E,{anchorRef:this.menuAnchorRef,onClose:this.handleMenuClose})),this.isFullscreenButtonAvailable()&&c().createElement("div",{className:`${Y("action")} ${Y("fullscreen")} hover pointer`,title:e(`header.button.${t?"exit":"enter"}-fullscreen.text`),onClick:this.onFullscreenButtonClick},this.renderFullscreenIcon()),c().createElement(w,{iconClass:Y("exit"),mix:`${Y("action")} ${Y("exit")} hover pointer`,onClick:this.onExitButtonClick,onEnable:this.isEnableExitButton}))}checkExitEnabled(){const e=new URLSearchParams(this.props.location.search);this.isExitEnabled="1"===e.get("exit-button")}render(){return this.isPlayToEarn=(0,y.XP)(this.context.abt.flags),this.checkExitEnabled(),c().createElement("div",{className:Y({"catalog-enabled":!1,"exit-enabled":this.isExitEnabled,"fullscreen-enabled":this.props.isFullscreenEnabled,"menu-enabled":!0,"with-adv":this.isAdvStickyBannerEnabled,"middle-layer-enabled":this.isMiddleLayerShown,"middle-layer-light":this.isMiddleLayerShown&&!this.props.darkTheme,p2e:this.isPlayToEarn,hide:!this.state.visible})},this.state.visible&&c().createElement(c().Fragment,null,this.renderLogo(),this.renderHeaderInfo(),this.renderActions()))}}const ae=(0,n.E)((0,h.$j)((function(e){var t;return{advDisabledByPartnersKit:e.advDisabledByPartnersKit,darkTheme:(0,L.Up)(e),getText:e.getText,hasAuth:Boolean(e.userData.login),isFullscreenActive:e.ui.isFullscreenActive,isFullscreenEnabled:e.ui.isFullscreenEnabled,lang:e.lang,isMiddleLayerShownInGame:null==(t=e.middleLayerInGameData)?void 0:t.show,userData:e.userData}}))(te))},3462:(e,t,a)=>{a.d(t,{Z:()=>E});var r=a(38096),s=a(87363),n=a.n(s),o=a(40562),i=a(63904),l=a.n(i),d=a(53726),c=a(45331),h=a(85467),u=a(5825),p=a(36172),m=a(68108),v=a(15771),g=a(69838),f=a(44865);const y=l().with("play-game-logo"),b=({type:e})=>{const t=(0,u.C)(p.Up),{lang:a,referrer:r,abt:i,cdnUrl:l,playPageData:{gameInfo:{categoryNames:b}},rtl:w,isMiddleLayerInGameExp:k}=(0,s.useContext)(c.Z),E=(0,d.v9)((e=>e.middleLayerInGameData)),S=(0,h.T)(),A=S("common.company.name"),I=S("common.service.short_name"),P=(0,v.XP)(i.flags),T=(0,g._B)({cdnUrl:l,darkTheme:t,fullLogo:e!==g.q7.GUARD&&e!==g.q7.AVATAR,text:A,type:e,lang:a,rtl:w}),C=(0,o.K)(a),R=(0,s.useMemo)((()=>(0,m.sD)(r)),[r]);if(e===g.q7.GUARD){const{serviceType:r}=(0,f.Vk)(b),s=(r===g.CF.WEBAPPS_CATEGORY_SERVICE_NAME?S("common.service.app_name"):S("common.service.short_name")).replace(/\s/g,"%20"),o=(0,g._B)({cdnUrl:l,darkTheme:t,isWhiteLabelPartner:R,text:s,type:e,lang:a,rtl:w});return n().createElement("span",{className:y()},n().createElement("img",{alt:A,className:y("service",{type:e,lang_ru:C}),crossOrigin:"anonymous",loading:"lazy",src:o,title:A}))}if(e===g.q7.AVATAR)return R?null:n().createElement("div",{className:y()},n().createElement("img",{alt:A,className:y("company",{type:e,lang_ru:C}),crossOrigin:"anonymous",src:T,title:A}));const D=(0,g._B)({cdnUrl:l,darkTheme:t,isMiddleLayer:k&&(null==E?void 0:E.show),isWhiteLabelPartner:R,text:I,type:e,lang:a,rtl:w});return n().createElement(n().Fragment,null,n().createElement("img",{alt:A,className:y("service",{type:e,lang_ru:C,small:P,whitelabel:R}),crossOrigin:"anonymous",src:D,title:A}))};var w=a(20523);const k=({type:e})=>{switch(e){case g.q7.MENU:return n().createElement(w.Z,{showImage:!1,textSize:"m"});case g.q7.HEADER:return n().createElement(w.Z,{showImage:!1,textColor:"light",textSize:"s",type:e});case g.q7.GUARD:return n().createElement(w.Z,{imageSize:"s",textSize:"m"});case g.q7.AVATAR:return n().createElement(w.Z,{imageSize:"m",showText:!1});default:return n().createElement(w.Z,{showImage:!1,textSize:"m"})}},E=({type:e})=>{const{hostname:t}=(0,r.getDomainConfig)();return t!==r.EDomain.Yandex?n().createElement(k,{type:e}):n().createElement(b,{type:e})}},31635:(e,t,a)=>{a.d(t,{Z:()=>V});var r=a(63904),s=a.n(r),n=a(87363),o=a.n(n),i=a(4463),l=a(81517),d=a(94199),c=a(90366),h=a(53726),u=a(19146),p=a(45331),m=a(97808),v=a(58432),g=a(41811),f=a(93298);const y=s().with("screen-manager-cover"),b=(0,f.M$)("ScreenManagerCover",f.XG.Popup);class w extends n.Component{constructor(){super(...arguments),this.state={visible:!0,playit:!1},this.onVisibilityChange=()=>{document.hidden&&this.setState({visible:!0})},this.onClick=()=>{this.setState({visible:!1}),m.Z.post({type:"screen-manager",action:"request-fullscreen"})}}componentDidMount(){if(b("componentDidMount"),c.w.available)return void this.setState({visible:!1});const e=(0,v.KT)();g.AY.includes(e)&&"landscape"===this.gameOrientation&&this.setState({playit:!0}),this.addListeners()}get gameOrientation(){var e;return null==(e=this.context.playPageData.gameSettings.features)?void 0:e.orientation}componentDidUpdate(e){!e.isFullscreenActive&&this.props.isFullscreenActive&&this.setState({visible:!0})}componentWillUnmount(){b("componentWillUnmount"),this.removeListeners()}addListeners(){document.addEventListener("visibilitychange",this.onVisibilityChange)}removeListeners(){document.removeEventListener("visibilitychange",this.onVisibilityChange)}render(){return this.state.visible&&!this.props.isFullscreenActive?o().createElement("div",{className:y({playit:this.state.playit}),onClick:this.onClick,onTouchEnd:this.onClick}):null}}w.contextType=p.Z;const k=(0,h.$j)((function(e){return{isFullscreenActive:e.ui.isFullscreenActive}}))(w);var E=a(95968),S=a(90043),A=a(35090),I=a(34967),P=a(77901),T=a(37705),C=a(40656),R=a(15771);const D=(0,f.M$)("ScreenManager",f.XG.Dev);class O extends n.Component{constructor(e){super(e),this.onMessage=(e,t)=>{switch(e.data.action){case"request-fullscreen":this.requestFullscreen({force:!0}).then((()=>{t()})).catch((e=>{t({error:e})}));break;case"exit-fullscreen":this.exitFullscreen().then((()=>{this.unlockScreenOrientation(),t()})).catch((e=>{t({error:e})}));break;case"toggle-fullscreen":this.toggleFullscreen().then((()=>{this.unlockScreenOrientation(),t()})).catch((e=>{t({error:e})}));break;case"rotate-banner-add":this.addScreenOrientationBanner();break;case"rotate-banner-remove":this.removeScreenOrientationBanner();break;case"get-state":this.isFullscreen().then((e=>{t({data:{isFullscreen:e,screenOrientationWasLocked:this.state.screenOrientationWasLocked}})})).catch((()=>{t({data:{isFullscreen:!1,screenOrientationWasLocked:this.state.screenOrientationWasLocked}})}));break;case"fullscreen-supported":t({data:{isFullscreenSupported:this.isFullscreenSupported}})}},this.updateFullscreenState=()=>{this.isFullscreen().then((e=>this.props.setIsFullscreenActive(e)))},this.state={screenOrientationWasLocked:!1,withCover:!1}}get gameFeatures(){return this.context.playPageData.gameSettings.features||{}}get fullScreenValue(){const{fullscreen:e}=this.gameFeatures;return"boolean"==typeof e?e:"desktop"!==this.context.deviceType}get gameOrientation(){const{orientation:e}=this.gameFeatures;if("landscape"===e||"portrait"===e)return e}componentDidMount(){D("componentDidMount"),this.props.setIsFullscreenEnabled(this.isFullscreenSupported()),this.addFullscreenListener(),this.updateFullscreenState(),this.initMessaging(),this.initCover(),this.initFullscreen(),this.initScreenOrientation()}componentWillUnmount(){D("componentWillUnmount"),this.removeFullscreenListener(),this.destroyMessaging()}addFullscreenListener(){var e;c.w.available?null==(e=(0,c.u)())||e.addEventListener("fullscreenchange",this):document.addEventListener(E.Z.fullscreenchange,this)}removeFullscreenListener(){var e;c.w.available?null==(e=(0,c.u)())||e.removeEventListener("fullscreenchange",this):document.removeEventListener(E.Z.fullscreenchange,this)}initMessaging(){m.Z.onExternalMessage("screen-manager",this.onMessage),m.Z.onInternalMessage("screen-manager",this.onMessage)}destroyMessaging(){m.Z.offExternalMessage("screen-manager",this.onMessage),m.Z.offInternalMessage("screen-manager",this.onMessage)}initCover(){this.isFullscreenEnabled()&&(c.w.available||(this.setState({withCover:!0}),(0,A.g)()||this.requestFullscreen().catch((()=>{}))))}initFullscreen(){this.isFullscreenEnabled()&&((0,A.g)()||this.requestFullscreenForYandexPlatforms(),window.addEventListener("blur",this))}initScreenOrientation(){this.updateScreenOrientationBanner(),d.default.isSupported&&d.default.addChangeListener(this)}handleEvent(e){const{type:t}=e;t===d.default.changeEventName?this.handleScreenOrientationChange():t===E.Z.fullscreenchange?(this.updateFullscreenState(),this.handleFullscreenChange()):"blur"===t?(window.removeEventListener("blur",this),window.setTimeout((()=>{var e,t,a;!(null==(e=document.activeElement)?void 0:e.toString().includes("HTMLIFrameElement"))&&"IFRAME"!==(null==(a=null==(t=document.activeElement)?void 0:t.tagName)?void 0:a.toUpperCase())||(0,A.g)()||this.requestFullscreen().catch((()=>{}))}),0)):(0,T.H)({prefix:"[ScreenManager]",sourceMethod:"handleEvent"},new Error(`Unknown event '${t}'`))}handleScreenOrientationChange(){!1===this.updateScreenOrientationBanner()&&this.requestFullscreen().catch((()=>{}))}handleFullscreenChange(){this.isFullscreen().then((e=>{m.Z.hasChild()&&m.Z.postToChild(l.vP.Fullscreenchange({isFullscreen:e})),m.Z.post({type:"screen-manager",action:"fullscreenchange",data:{isFullscreen:e}}),window.setTimeout((()=>{e&&this.lockScreenOrientation()}),C.WT)})).catch((e=>{(0,T.H)({prefix:"[ScreenManager]",sourceMethod:"handleFullscreenChange"},e)}))}isFullscreenSupported(){return c.w.available||Boolean(document[E.Z.fullscreenEnabled])}needScreenCover(){const e=(0,v.KT)();return g.AY.includes(e)&&"landscape"===this.gameOrientation}isFullscreenEnabled(){const{abt:{flags:e},playPageData:{gameInfo:t}}=this.context,{appId:a}=t;if((0,R.Nm)(e))return!1;if(function(e){return["100714"].includes(e)}(a))return!1;if(window.parent!==window)return!1;const r=(0,v.KT)();return!g.XL.includes(r)&&((!g.AY.includes(r)||"portrait"!==this.gameOrientation)&&Boolean(this.fullScreenValue&&this.isFullscreenSupported()))}get fullscreenElement(){return document[E.Z.fullscreenElement]}isFullscreen(){return c.w.available?c.w.isFullscreen():Promise.resolve(Boolean(this.fullscreenElement))}requestFullscreen({force:e}={}){return e||this.isFullscreenEnabled()?new Promise(((e,t)=>{this.isFullscreen().then((a=>{a?e():this.fullscreenMethodCallWrapper("requestFullscreen").then(e).catch(t)})).catch(t)})):Promise.resolve()}requestFullscreenForYandexPlatforms(){((0,P.RY)()||(0,P.XQ)()||(0,P.V5)())&&this.requestFullscreen().catch((()=>{}))}exitFullscreen(){return this.fullscreenMethodCallWrapper("exitFullscreen")}toggleFullscreen(){return this.isFullscreen().then((e=>e?this.exitFullscreen().then((()=>{this.needScreenCover()||this.setState({withCover:!1}),this.unlockScreenOrientation()})):this.requestFullscreen({force:!0})))}fullscreenMethodCallWrapper(e){return new Promise(((t,a)=>{if(c.w.available)return void c.w[e]().then(t).catch(a);let r,s;if("exitFullscreen"===e?(r=document,s=document[E.Z.exitFullscreen]):(r=document.documentElement,s=r[E.Z[e]]),s)try{Promise.resolve(s.call(r,{navigationUI:"hide"})).then((()=>t())).catch((e=>a(e)))}catch(e){a(e)}else a(new Error("Fullscreen is not supported"))}))}isScreenOrientationSupported(){const{deviceType:e}=this.context;return"desktop"!==e&&"tv"!==e&&d.default.isSupported}isScreenOrientationEnabled(){return Boolean(this.gameOrientation&&this.isScreenOrientationSupported()&&!(0,R.t7)(this.context.abt.flags))}addScreenOrientationBanner(){(0,I.U4)({},{orientationBanner:{show:!0,correctOrientation:this.gameOrientation,currentOrientation:d.default.isSupported?(0,d.a)(d.default.type):void 0}}),this.props.setIsOrientationBannerVisible(Boolean(this.gameOrientation))}removeScreenOrientationBanner(){(0,I.U4)({},{orientationBanner:{show:!1,isLockedForcefully:this.state.screenOrientationWasLocked,correctOrientation:this.gameOrientation,currentOrientation:d.default.isSupported?(0,d.a)(d.default.type):void 0}}),this.props.setIsOrientationBannerVisible(!1)}updateScreenOrientationBanner(){if(this.isScreenOrientationEnabled())return d.default.type.startsWith(String(this.gameOrientation))?(this.removeScreenOrientationBanner(),!1):(this.addScreenOrientationBanner(),!0)}screenOrientationIsLockable(){return d.default.isLockable&&this.fullscreenElement&&this.isScreenOrientationEnabled()}lockScreenOrientation(){this.screenOrientationIsLockable()&&d.default.lock(this.gameOrientation).then((()=>{this.setState({screenOrientationWasLocked:!0}),this.props.setScreenOrientationLocked(!0)})).catch((e=>{console.debug(e),this.updateScreenOrientationBanner()}))}unlockScreenOrientation(){this.state.screenOrientationWasLocked&&d.default.unlock().then((()=>{this.setState({screenOrientationWasLocked:!1}),this.props.setScreenOrientationLocked(!1)})).catch((e=>{console.debug(e)}))}render(){const{withCover:e}=this.state;return[e&&o().createElement(k,{key:"screen-manager-cover"})]}}O.contextType=p.Z;const L=(0,h.$j)(null,(function(e){return(0,u.DE)({setIsFullscreenActive:S.hu,setIsFullscreenEnabled:S.rV,setScreenOrientationLocked:S.ht,setIsOrientationBannerVisible:S.f_},e)}))(O);var _=a(40184),x=a(85467),N=a(26891),B=a(52260),M=a(65562);function $({abt:e,appId:t,baseHost:a,baseUrl:r,deviceType:s,gameSrc:n,hasExternalURL:o,s3PreloaderHelperPath:i,sdkHash:l,search:d,uatraits:c}){var h;const u=new Set(["draft"]),p=new Set([B.fP]),m=new URL(n),v=new URLSearchParams(m.hash.slice(1));Array.from(new URLSearchParams(d.slice(1)).entries()).forEach((([e,t])=>{p.has(e)||(u.has(e)&&null!==t?v.append(e,t):m.searchParams.has(e)||m.searchParams.append(e,t))})),o?(m.searchParams.set("sdk",`https://games.s3.yandex.net/sdk/_/v2.${l}.js`),m.searchParams.set("sdk_origin","sdk.games.s3.yandex.net")):m.searchParams.set("sdk",`/sdk/_/v2.${l}.js`),v.has("app-id")||v.append("app-id",t),v.append("device-type",s),m.hash=v.toString(),/[?&]csp_test=true/.test(d)&&(m.pathname=m.pathname.replace("index.html","index-csp.html"));const g=m.toString();let f=g;if((0,M.G)(c)||(0,M.g)(c)){const e=(0,N.V)(f);if(e){f=e+(i.startsWith("/")?i.substring(1):i)+"?retpath="+encodeURIComponent(g)}}return f=(null==(h=null==e?void 0:e.flags)?void 0:h.clear_iframe_utm)?(e=>{const t=new URL(e);return Array.from(t.searchParams.keys()).forEach((e=>{0===e.indexOf("utm_")&&t.searchParams.delete(e)})),t.href})(f):f,{frameSrc:f,originSrc:g}}var F=Object.defineProperty,H=Object.defineProperties,W=Object.getOwnPropertyDescriptors,G=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,U=(e,t,a)=>t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const q=s().with("game"),z=({showDragOverlay:e})=>{var t;const a=(0,_.b)(),r=(0,i.TH)(),{abt:s,playPageData:l,baseHost:d,baseUrl:c,requestId:h,uatraits:u,isAndroidTV:p,deviceType:m,isMiddleLayerInGameExp:v,isTranssion:g}=a,{gameSrcDocument:f}=l;let y,b=l.iframeAllow+"accelerometer; gyroscope;";const w=(0,x.T)(),k=(0,n.useMemo)((()=>(0,R.MA)(s.flags)||g||v),[s.flags,v,g]);let E=(0,n.useMemo)((()=>r.search),[]),S=(0,n.useMemo)((()=>{var e;const{frameSrc:t}=$({abt:s,appId:l.gameInfo.appId,baseHost:d,baseUrl:c,deviceType:m,gameSrc:l.gameSrc,hasExternalURL:Boolean(null==(e=l.gameData)?void 0:e.hasExternalURL),s3PreloaderHelperPath:l.s3PreloaderHelperPath,sdkHash:l.sdkHash,search:k?E:r.search,uatraits:u});return t}),[s,d,c,m,r.search,null==(t=l.gameData)?void 0:t.hasExternalURL,l.gameInfo.appId,l.gameSrc,l.s3PreloaderHelperPath,l.sdkHash,E,k,u]);const A=(0,n.useCallback)((()=>{var e;"undefined"!=typeof window&&(null==(e=window.onGameFrameLoad)||e.call(window))}),[]),I=(0,n.useCallback)((e=>{var t;"undefined"!=typeof window&&(null==(t=window.onGameFrameError)||t.call(window,e))}),[]);let P=S;if(f){const e=new URL(S),t=new URL(f);t.hash=e.hash,P=t.toString()}return o().createElement("div",{className:q()},o().createElement(L,null),o().createElement("iframe",(T=((e,t)=>{for(var a in t||(t={}))Z.call(t,a)&&U(e,a,t[a]);if(G)for(var a of G(t))j.call(t,a)&&U(e,a,t[a]);return e})({},(0,R.B7)((null==s?void 0:s.flags)||{})&&{"referrer-policy":"no-referrer"}),C={allow:b,"data-allowed-origins":JSON.stringify([l.gameOrigin,d]),"data-origin-src":S,id:"game-frame",name:h,sandbox:y,src:P,style:{},onError:I,onLoad:A},H(T,W(C)))),e&&o().createElement("div",{className:q("swipe-to-fs")},o().createElement("div",{className:q("swipe-to-fs-bg")}),o().createElement("div",{className:q("swipe-to-fs-content")},o().createElement("span",null,w("game.swipe-to-fs")),o().createElement("div",{className:q("swipe-to-fs-hint")}))));var T,C},V=z},65044:(e,t,a)=>{a.d(t,{u:()=>s});var r=a(87363);const s=(0,r.createContext)({handleEvent:e=>{throw new Error("PlayGuardContext is not initialized")},isHidden:!1,isNeedToShow:!1,withPurchasesPermissions:!1})},96349:(e,t,a)=>{a.d(t,{Z:()=>k});var r=a(26108),s=a(10576),n=a(85383),o=a(87363),i=a.n(o),l=a(53726),d=a(14375),c=a(45331),h=a(65044),u=a(90043),p=a(97808),m=a(32054),v=a(34967),g=a(31136),f=a(93298),y=a(89592);const b=(0,f.M$)("PlayGuard",f.XG.Popup);class w extends c.P{constructor(){super(...arguments),this.state={show:this.isNeedToShow(),hidden:!0},this.wasShowed=!this.state.show,this.permissionsPromiseWrapper=new r.Z,this.onGuardMessage=(e,t)=>{var a;if("play-guard"!==(null==(a=e.data.data)?void 0:a.source))switch(e.data.action){case"is-guard-enabled":t({data:{result:this.isGuardEnabled}});break;case"get-show-state":t({data:{result:!this.wasShowed}});break;case"get-was-showed":t({data:{result:this.wasShowed}});break;case"apply":if(this.wasShowed)this.permissionsPromiseWrapper.reject();else{const{actionSource:t,permission:a}=e.data.data;this.apply({actionSource:t,permission:a})}break;case"show":p.Z.post({type:"promo-bar",action:"show"}),p.Z.post({type:"guard",action:"state-changed",data:{state:"up"}});break;case"focus":this.wasShowed?(0,d.D)():window.focus();break;case"get-permission-promise":this.responseGetPermissionsPromise(t)}},this.onExternalGuardMessage=(e,t)=>{if("get-permission-promise"===e.data.action)this.responseGetPermissionsPromise(t)},this.onScopesMessage=(e,t)=>{"open-scopes-dialog"!==e.data.action||this.wasShowed||(this.openScopesCallback=t)},this.handleEvent=e=>{switch(e.type){case"apply":{const{actionSource:t,permission:a}=e.detail;this.apply({actionSource:t,permission:a});break}case"auth":this.auth();break;case"cancel":this.cancel();break;case"info":this.info()}}}componentDidMount(){b("componentDidMount",this.state),p.Z.onExternalMessage("guard",this.onExternalGuardMessage),p.Z.onInternalMessage("guard",this.onGuardMessage,{withHistory:!0}),p.Z.onInternalMessage("scopes",this.onScopesMessage),this.permissionsPromiseWrapper.promise.catch((()=>{}));const e=this.isNeedToShow();this.setIsGuardOpened(e),this.wasShowed=!e;const t=e?"show":"hide";this.setState({hidden:this.context.isAdvSplashScreenEnabled,show:e},(()=>{this.wasShowed&&this.postSetWasShowedAction()})),e&&(p.Z.post({type:"promo-bar",action:"show"}),this.sendParamsWrapper({show:!0})),this.sendParamsWrapper({initialStatus:t}),p.Z.post({type:"guard",action:"init"}),p.Z.post({type:"guard",action:"state-changed",data:{state:"show"===t?"up":"play"}})}componentWillUnmount(){b("componentWillUnmount"),p.Z.offExternalMessage("guard",this.onExternalGuardMessage),p.Z.offInternalMessage("guard",this.onGuardMessage),p.Z.offInternalMessage("scopes",this.onScopesMessage)}responseGetPermissionsPromise(e){this.wasShowed&&this.permissionsPromiseWrapper.reject(),this.permissionsPromiseWrapper.promise.then((t=>{e({data:{result:t}})})).catch((()=>{e({data:{result:void 0}})}))}setIsGuardOpened(e){this.props.dispatch((0,u.lt)(e))}get isPurchasesPermissionNeed(){const{playPageData:e,userRegionData:t}=this.context,{gameData:a}=e;return(0,m.CU)({gameData:a,userRegionData:t})}get isGuardEnabled(){const{location:e}=this.props,{abt:t,playPageData:a,referrerClid:r,userRegionData:s}=this.context,{gameData:n}=a,{flags:o}=t,i=(0,m.pr)({gameData:n,userRegionData:s});return(0,m.ZY)({clid:r,flags:o,isConfirmedGuard:i,location:e})}isNeedToShow(){return this.isGuardEnabled}apply({actionSource:e,permission:t}){if(this.applyPromise)return;this.applyPromise=Promise.race([(0,g.D)(5e3).then((()=>this.permissionsPromiseWrapper.reject())),new Promise(((a,r)=>{const{appId:n}=this.context.playPageData.gameInfo;this.sendScope({appId:n,permission:t,withPurchasesPermissions:this.isPurchasesPermissionNeed,isGuardEnabled:!0}).then((()=>{void 0!==t?(this.permissionsPromiseWrapper.resolve(t),(0,v.U4)({},{borrowParams:{personal:{showed:!0,value:t===s.aR.ALLOW}}})):(this.permissionsPromiseWrapper.reject(),(0,v.U4)({},{borrowParams:{personal:{showed:!1,value:!1}}})),(0,v.NF)({},y.Ji.GUARD_APPLY),n&&(0,v.SX)("view_item",{send_to:"AW-10952943694",value:0,items:[{id:n,location_id:0,google_business_vertical:"custom"}]}),p.Z.post({type:"guard",action:"apply",data:{source:"play-guard"}}),p.Z.post({type:"guard",action:"state-changed",data:{state:"play"}}),this.sendParamsWrapper({apply:e}),p.Z.post({type:"promo-bar",action:"remove"}),a(void 0)}))}))]).then((()=>this.close())).finally((()=>this.applyPromise=void 0))}auth(){this.sendParamsWrapper({auth:!0}),p.Z.post({type:"auth",action:"auth-dialog-open",data:{initializer:"guard"}})}cancel(){const{referrer:e}=this.context;this.sendParamsWrapper({cancel:!0}),this.openScopesCallback&&(this.openScopesCallback({data:{result:!1}}),this.openScopesCallback=void 0),p.Z.post({type:"guard",action:"cancel",data:e?{referrer:e}:{}})}close(){this.wasShowed=!0,this.setIsGuardOpened(!1),this.setState({show:!1},(()=>this.postSetWasShowedAction())),(0,d.D)(),p.Z.post({type:"guard",action:"closed"})}info(){this.sendParamsWrapper({info:!0}),p.Z.post({type:"guard",action:"info"}),p.Z.post({type:"guard",action:"state-changed",data:{state:"info"}}),p.Z.post({type:"promo-bar",action:"hide"})}sendScope(e){return t=this,a=arguments,r=function*({appId:e,isGuardEnabled:t,withPurchasesPermissions:a,permission:r}){const s=yield p.Z.post({type:"scopes",action:"apply-guard",data:{permission:r,appId:e,isGuardEnabled:t,withPurchasesPermissions:a}});this.openScopesCallback&&(this.openScopesCallback({data:{result:s}}),this.openScopesCallback=void 0)},new Promise(((e,s)=>{var n=e=>{try{i(r.next(e))}catch(e){s(e)}},o=e=>{try{i(r.throw(e))}catch(e){s(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);i((r=r.apply(t,a)).next())}));var t,a,r}sendParamsWrapper(e){(0,v.U4)({},{borrowParams:{guard:e}})}postSetWasShowedAction(){p.Z.post({type:"guard",action:"set-was-showed",data:{result:!0}})}render(){return i().createElement(h.u.Provider,{value:{handleEvent:this.handleEvent,isHidden:this.state.hidden,withPurchasesPermissions:this.isPurchasesPermissionNeed,isNeedToShow:this.state.show}},this.props.children)}}const k=(0,n.E)((0,l.$j)(null)(w))},82346:(e,t,a)=>{a.d(t,{G0:()=>S,GP:()=>A,IR:()=>I,QU:()=>T,WM:()=>C,Xp:()=>y,Zn:()=>P,qj:()=>k,wv:()=>b});var r=a(37643),s=a(75856),n=a(59986),o=a(11815),i=a(42126),l=a(34711),d=a(76488),c=a(37705),h=a(40656),u=a(93298),p=a(13377),m=a(89592);const v=60*h.WT;let g={time:0,data:{products:[]}};const f=(0,u.M$)("Payments",u.XG.Dev);function y(e){const{lang:t}=e;return new Promise(((e,a)=>{Math.abs(g.time-Date.now())<v&&g.lang===t?e({products:g.data.products}):(0,n.ix)(`products?lang=${encodeURIComponent(t)}`).then((a=>{g={data:a,lang:t,time:Date.now()},e({products:g.data.products})})).catch((e=>{(0,c.H)({block:p.W.PAYMENT,sourceMethod:"getProducts",message:`${m.EW} getProducts error`,type:"fetch"},e),a(e)}))}))}const b=(0,s.Z)((function({id:e,lang:t}){return new Promise(((a,r)=>{(0,n.ix)(`products?id=${encodeURIComponent(e)}&lang=${encodeURIComponent(t)}`).then((e=>{var t,r;if(!d.XK){const a=null==(t=window.YandexGamesSDK)?void 0:t.request.experiments.new_payments_balance;void 0!==a&&""!==a&&(e.balance=parseInt(a,10)||0);const s=null==(r=window.YandexGamesSDK)?void 0:r.request.experiments.new_payments_mockable;void 0!==s&&(e.mockable=s||!1)}f("getProduct responseData",e),a(e)})).catch((e=>{(0,c.H)({block:p.W.PAYMENT,sourceMethod:"getProduct",message:`${m.EW} getProduct error`,type:"fetch"},e),r(e)}))}))}));function w(e){const t=String((0,l.X)()||"");return t?(0,i.Z)({url:e,params:{clid:t}}):e}const k=(0,s.Z)((function({developer_payload:e,id:t,mock:a,signed:r=!1}){return new Promise(((s,o)=>{(0,n.hB)(w("buy"+(r?"-signed":"")),{id:t,mock:a,developer_payload:e}).then((e=>{"error"in e?o(new Error(e.error)):s(e)})).catch((e=>{(0,c.H)({block:p.W.PAYMENT,sourceMethod:"buyProduct",message:`${m.EW} buyProduct error`,type:"fetch"},e),o(e)}))}))})),E=Object.create(null),S=(0,s.Z)((function({token:e}){return f("consumePurchase",e),e in E||(E[e]=new Promise(((t,a)=>{(0,n.hB)("consume",{token:e}).then((r=>{delete E[e],f("consumePurchase responseData",r),r.token?t(r.token):a(new o.Z({code:"CANNOT_CONSUME_PURCHASE",message:"Can not consume purchase."}))})).catch((t=>{delete E[e],(0,c.H)({block:p.W.PAYMENT,sourceMethod:"consumePurchase",message:`${m.EW} consumePurchase error`,type:"fetch"},t),a(t)}))}))),E[e]}));function A({paymentsConfig:e,defaultLang:t}){return new Promise(((a,s)=>{(0,n.ix)(`purchased${e.signed?"-signed":""}?lang=${encodeURIComponent(e.lang||t)}`).then((e=>{const{data:t,signature:s}=(0,r.c)(e,c.H);a({data:t,signature:s})})).catch((e=>{(0,c.H)({block:p.W.PAYMENT,sourceMethod:"getPurchases",message:`${m.EW} getPurchases error`,type:"fetch"},e),s(e)}))}))}function I({lang:e}){return new Promise(((t,a)=>{(0,n.w$)(`products?lang=${encodeURIComponent(e)}`).then((({data:e})=>{f("fetchCurrencyData response",e),t(e)})).catch((e=>{(0,c.H)({block:p.W.PAYMENT,sourceMethod:"getCurrencyProducts",message:`${m.EW} getCurrencyProducts error`,type:"fetch"},e),a(e)}))}))}function P({id:e,lang:t,getText:a,cdnUrl:r}){return new Promise(((s,o)=>{(0,n.lB)(`products?lang=${encodeURIComponent(t)}`).then((t=>{var i,l,h,u,v;const g=t.data.find((t=>t.id===e));if(!g)return void o(new Error(`Product with id "${e}" not found.`));const f=g.info.price,y=g.info.pricePlus,b=Boolean(null==(h=null==(l=null==(i=window.YandexGamesSDK)?void 0:i.game)?void 0:l.player)?void 0:h.hasYaPlus)&&"number"==typeof y&&y<f&&y>=0?y:f,w={balance:-1,product:{description:a(`purchase.description.${e}`),id:e,image:{url_prefix:`${r}/games-static/static-data/images/payments/subscriptions/${e}.svg`},price:b,pricePlus:y,priceRegular:f,title:a(`purchase.title.${e}`)}};if(!d.XK){const{experiments:e={}}=null==(u=window.YandexGamesSDK)?void 0:u.request,t=e.new_payments_balance;void 0!==t&&""!==t&&(w.balance=parseInt(t,10)||0);const a=e.new_payments_mockable;void 0!==a&&(w.mockable=a||!1)}(null==(v=window.YandexGamesSDK)?void 0:v.isSearchCrawler)||new Promise(((e,t)=>{(0,n.EG)().then((t=>{e(t.value)})).catch((e=>{(0,c.H)({block:p.W.PAYMENT,sourceMethod:"getBalance",message:`${m.EW} getBalance error`,type:"fetch"},e),t(e)}))})).then((e=>{w.balance=e,s(w)})).catch(o)})).catch((e=>{(0,c.H)({block:p.W.PAYMENT,sourceMethod:"getPlatformProduct",message:`${m.EW} getPlatformProduct error`,type:"fetch"},e),o(e)}))}))}const T=(0,s.Z)((function({developer_payload:e,id:t,mock:a}){return new Promise(((r,s)=>{(0,n.$)(w("buy"),{id:t,mock:a,developer_payload:e}).then((e=>{"failure"===e.status?s(new Error(e.message)):r(e)})).catch((e=>{(0,c.H)({block:p.W.PAYMENT,sourceMethod:"buyPlatformProduct",message:`${m.EW} buyPlatformProduct error`,type:"fetch"},e),s(e)}))}))}));function C(){return new Promise(((e,t)=>{(0,n.KL)().then((t=>{e(t.code)})).catch((e=>{(0,c.H)({block:p.W.PAYMENT,sourceMethod:"getRecoveryCode",message:`${m.EW} getRecoveryCode error`,type:"fetch"},e),t(e)}))}))}},75856:(e,t,a)=>{a.d(t,{Z:()=>v});var r=a(96452),s=a(97808),n=Object.defineProperty,o=Object.defineProperties,i=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,h=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,u=(e,t)=>{for(var a in t||(t={}))d.call(t,a)&&h(e,a,t[a]);if(l)for(var a of l(t))c.call(t,a)&&h(e,a,t[a]);return e},p=(e,t)=>o(e,i(t));function m(e,t={}){return s.Z.post({type:"auth",action:e,data:p(u({},t),{initializer:"auth-fetch-wrapper"})})}function v(e){return function(...t){return new Promise(((a,s)=>{e(...t).then(((...e)=>{a(...e)})).catch((n=>{(0,r.ZR)(n)?(m("set-auth",{hasAuth:!1}),m("auth-dialog-open").then((({errorInstance:r})=>{if(r)throw r;e(...t).then(a).catch(s)})).catch(s)):s(n)}))}))}}},59986:(e,t,a)=>{a.d(t,{$:()=>O,EG:()=>I,KL:()=>D,U:()=>C,hB:()=>P,ix:()=>A,lB:()=>R,w$:()=>T});var r=a(31320),s=a(75856),n=a(43876),o=a(40656),i=a(93298),l=a(90295),d=Object.defineProperty,c=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,a)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,m=(e,t)=>{for(var a in t||(t={}))h.call(t,a)&&p(e,a,t[a]);if(c)for(var a of c(t))u.call(t,a)&&p(e,a,t[a]);return e};const v="/purchases/app",g="/purchases/platform",f="/purchases/currency",y=2*o.yR,b=()=>y*(0,r.n)(),w="/currency/balance",k=3*o.WT,E=()=>k*(0,r.n)(),S=(0,i.M$)("Payments fetch",i.XG.Dev);function A(e){return(0,n.rQ)({apiPath:`${v}/${e}`,timeout:b(),options:{credentials:"include",headers:{Accept:"application/json"},method:"GET",referrerPolicy:"no-referrer-when-downgrade"}})}function I(){return(0,n.rQ)({apiPath:w,timeout:E(),options:{credentials:"include",headers:{Accept:"application/json"},method:"GET",referrerPolicy:"no-referrer-when-downgrade"}})}const P=(0,s.Z)((function(e,t){return(0,n.rQ)({apiPath:`${v}/${e}`,timeout:b(),options:{body:JSON.stringify(t),credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",referrerPolicy:"no-referrer-when-downgrade"}})}));function T(e){return(0,n.rQ)({apiPath:`${f}/${e}`,timeout:b(),options:{credentials:"include",headers:{Accept:"application/json"},method:"GET",referrerPolicy:"no-referrer-when-downgrade"}})}const C=(0,s.Z)((function(e,t,a={}){return S("postCurrencyData",JSON.stringify(t,null,"\t")),(0,n.rQ)({apiPath:`${f}/${e}`,timeout:b(),options:{body:JSON.stringify(t),credentials:"include",headers:m({Accept:"application/json","Content-Type":"application/json"},a),method:"POST",referrerPolicy:"no-referrer-when-downgrade"}})}));function R(e){return(0,n.rQ)({apiPath:`${g}/${e}`,timeout:b(),options:{credentials:"include",headers:{Accept:"application/json"},method:"GET",referrerPolicy:"no-referrer-when-downgrade"}})}function D(){return(0,n.rQ)({apiPath:`/${l.tw}`,timeout:b(),options:{credentials:"include",headers:{Accept:"application/json"},method:"GET",referrerPolicy:"no-referrer-when-downgrade"}})}const O=(0,s.Z)((function(e,t){return(0,n.rQ)({apiPath:`${g}/${e}`,timeout:b(),options:{body:JSON.stringify(t),credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",referrerPolicy:"no-referrer-when-downgrade"}})}))},58e3:(e,t,a)=>{a.d(t,{E:()=>s});var r=a(96452);function s(e){return(0,r.f1)(e)?new r.ZP.AuthError({code:"UNAUTHORIZED",message:"Unauthorized"}):new r.ZP.PaymentsError({code:"PAYMENT_FAILURE",message:"Payment failure"})}},71784:(e,t,a)=>{a.d(t,{Z:()=>m});var r=a(11815),s=a(97808),n=a(34967),o=a(89592),i=Object.defineProperty,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,h=(e,t,a)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,u=(e,t)=>{for(var a in t||(t={}))d.call(t,a)&&h(e,a,t[a]);if(l)for(var a of l(t))c.call(t,a)&&h(e,a,t[a]);return e};const p=[0,5,10,20,40,60,90,120,200,300,400,1/0];class m{constructor(e){this.isDestroyed=!1,this.onInternalAuthMessage=e=>{const{action:t,data:a}=e.data;if(!a||"auth-fetch-wrapper"===a.initializer)switch(t){case"auth-dialog-open":this.authStates.authOpen=Date.now();break;case"auth-dialog-success":this.authStates.authSuccess=Date.now();break;case"auth-dialog-cancel":this.authStates.authCancel=Date.now()}},this.productStatData=e.productStatData,this.startTime=Date.now(),this.appId=e.appId,this.authStates={},this.basicSupportPaymentRequest=e.basicSupportPaymentRequest,this.supportPaymentRequest=e.supportPaymentRequest,this.dialogType=e.dialogType,s.Z.onInternalMessage("auth",this.onInternalAuthMessage)}destroy(){s.Z.offInternalMessage("auth",this.onInternalAuthMessage),delete this.productStatData,this.isDestroyed=!0}log(e,t={}){if(!this.productStatData||this.isDestroyed)return void this.warnAboutDestroyed("log");const a=Object.assign({state:e,appId:this.appId,productId:this.productStatData.id,title:this.productStatData.title,price:this.productStatData.price,basicSupportPaymentRequest:this.basicSupportPaymentRequest,v:2},t);"success"===e&&this.authStates.authSuccess&&(this.authStates.authSuccessPurchase=Date.now()),!t.preventDestroy&&["success","cancel","fail"].includes(e)&&(a.timeInterval=function(e){for(let t=0;t<p.length-1;t+=1)if(e>=p[t]&&e<p[t+1])return p[t+1]===1/0?`${p[t]}+`:`${p[t]}-${p[t+1]}`;return`${p[p.length-1]}+`}(Math.abs(Date.now()-this.startTime)/1e3),this.logAuthStates(),this.destroy()),(0,n.U4)({},{borrowParams:{purchase:a}})}logAuthStates(){Object.keys(this.authStates).forEach((e=>this.log(e)),this),this.authStates={}}error(e,t={}){if(this.isDestroyed)return void this.warnAboutDestroyed("error");const a=e instanceof r.Z&&"PAYMENT_USER_CANCELED"===e.code?"cancel":"fail";this.log(a,u({reason:e.message,basicSupportPaymentRequest:this.basicSupportPaymentRequest,supportPaymentRequest:this.supportPaymentRequest},t))}reachGoals(e={}){this.productStatData?s.Z.post({type:"auth",action:"has-auth"}).then((({data:t})=>{var a,r,s,i;const{hasAuth:l}=t;(0,n.NF)({},o.Ji.SUCCESS_PURCHASE.replace("%app_id%",this.appId),{amount:null==(a=this.productStatData)?void 0:a.price,auth:l,dialog_type:this.dialogType,order_price:null==(r=this.productStatData)?void 0:r.price}),(0,n.NF)({withClickDaemon:!0},o.Ji.SUCCESS_PURCHASE_TRANSACTION,u({appId:this.appId,amount:null==(s=this.productStatData)?void 0:s.price,auth:l,dialog_type:this.dialogType,order_price:null==(i=this.productStatData)?void 0:i.price},e.provider&&{payment_system:e.provider}))})):this.warnAboutDestroyed("reachGoals")}warnAboutDestroyed(e){console.warn(`No data in the MetrikaStatesLogger when call '${e}'. Maybe already destroyed.`)}}},97975:(e,t,a)=>{a.d(t,{Z:()=>E});var r=a(84819),s=a(63904),n=a.n(s),o=a(87363),i=a.n(o),l=a(53726),d=a(45331),c=a(32922),h=a(82346),u=a(58e3);const p=a(69833).Z;var m=a(83388),v=a(83326),g=a(97808),f=a(76488),y=a(11744),b=a(41952);const w=n().with("play-payments");class k extends d.P{constructor(e,t){super(e),this.paymentsRootRef=i().createRef(),this.onExternalPaymentsMessage=(e,t)=>{const{action:a,data:s}=e.data;switch(a){case"get-env":t({data:{paymentMode:(0,y.Z)()?"":void 0}});break;case"get-catalog":const{lang:e}=s;(0,h.Xp)({lang:e||this.state.defaultLang}).then((e=>{t({data:e})})).catch((e=>{t({error:(0,u.E)(e)})}));break;case"purchase-start":{if((0,r.v_)({on:"payments_improvements.inapp"}))return;if(this.state.purchaseDialog||this.state.balanceDialog)return void this.trembleDialog();const{paymentsConfig:e,purchaseConfig:a}=s;this.purchaseStartMessagingCallback=t,this.setState({dialogType:m.Z.PURCHASE,balanceDialog:null,purchaseDialog:{basicSupportPaymentRequest:this.state.basicSupportPaymentRequest,isPlatformPurchase:!1,paymentsConfig:e,purchaseConfig:a}});break}case"get-purchases":{const{paymentsConfig:e}=s;(0,h.GP)({paymentsConfig:e,defaultLang:this.state.defaultLang}).then((({data:e,signature:a})=>{t({data:{data:e,signature:a}})})).catch((e=>{t({error:(0,u.E)(e)})}));break}case"purchase-consume":{const{token:e}=s;(0,h.G0)({token:e}).then((e=>{t({data:{token:e}})})).catch((e=>{t({error:(0,u.E)(e)})}));break}}},this.onInternalPaymentsMessage=(e,t)=>{const{action:a,data:r}=e.data;switch(a){case"balance-refill":{const{paymentsConfig:e}=r;this.openBalanceDialog(e);break}case"purchase-start":this.onExternalPaymentsMessage(e,t);break;case"platform-purchase-start":this.startPlatformPurchase(r,t)}},this.onBalanceSuccess=()=>{this.setState({balanceDialog:null})},this.onBalanceError=e=>{f.XK||console.warn(e),this.setState({balanceDialog:null})},this.onPurchaseSuccess=e=>{var t;null==(t=this.purchaseStartMessagingCallback)||t.call(this,{data:e}),this.setState({purchaseDialog:null})},this.onPurchaseError=e=>{var t;null==(t=this.purchaseStartMessagingCallback)||t.call(this,e),this.setState({purchaseDialog:null})},this.onPlatformPurchaseSuccess=e=>{var t;null==(t=this.startPlatformMessagingCallback)||t.call(this,{data:e}),this.setState({purchaseDialog:null}),g.Z.post({type:"payments",action:"platform-purchase-success",data:e})},this.onPlatformPurchaseError=e=>{var t;null==(t=this.startPlatformMessagingCallback)||t.call(this,e),this.setState({purchaseDialog:null})},this.trembleDialog=()=>{this.setState({isTrembling:!1},(()=>{requestAnimationFrame((()=>{this.setState({isTrembling:!0}),window.setTimeout((()=>{this.setState({isTrembling:!1})}),2e3)}))}))},this.handleCreateBalanceRefilled=e=>{this.setState({balanceRefilled:e})},this.handleBalanceRefilledClose=()=>{var e,t;null==(t=null==(e=this.state.balanceRefilled)?void 0:e.onClose)||t.call(e),this.setState({balanceRefilled:null})},this.handleBalanceRefilledBuyMore=()=>{g.Z.post({type:"payments",action:"balance-refill",data:{paymentsConfig:{lang:this.context.lang}}}),this.handleBalanceRefilledClose()},this.renderContent=()=>i().createElement(i().Fragment,null,this.renderBalanceRefilled(),this.renderDialog()),this.state={balanceDialog:null,balanceRefilled:null,dialogType:m.Z.BALANCE,purchaseDialog:null,basicSupportPaymentRequest:!1,isTrembling:!1,defaultLang:t.lang,hasMounted:!1}}componentDidMount(){this.setState({basicSupportPaymentRequest:(0,y.Z)(),hasMounted:!0}),this.initMessaging()}componentDidUpdate(e,t){var a,r;(null===t.balanceDialog&&null!==this.state.balanceDialog||null!==t.balanceDialog&&null===this.state.balanceDialog)&&(null==(r=(a=this.props).onDialogChange)||r.call(a,Boolean(this.state.balanceDialog)))}initMessaging(){g.Z.onExternalMessage("payments",this.onExternalPaymentsMessage),g.Z.onInternalMessage("payments",this.onInternalPaymentsMessage)}startPlatformPurchase(e,t){if(this.props.disablePlatformPurchase)return;if(this.state.purchaseDialog||this.state.balanceDialog)return void this.trembleDialog();const{paymentsConfig:a,purchaseConfig:r}=e;this.startPlatformMessagingCallback=t,this.setState({dialogType:m.Z.PURCHASE,balanceDialog:null,purchaseDialog:{basicSupportPaymentRequest:this.state.basicSupportPaymentRequest,paymentsConfig:a,purchaseConfig:r,isPlatformPurchase:!0}})}openBalanceDialog(e){this.state.purchaseDialog||this.state.balanceDialog?this.trembleDialog():this.setState({dialogType:m.Z.BALANCE,purchaseDialog:null,balanceDialog:{basicSupportPaymentRequest:this.state.basicSupportPaymentRequest,paymentsConfig:e}})}renderBalanceRefilled(){const{balanceRefilled:e,purchaseDialog:t}=this.state,{balance:a}=this.props;if(e){const r=t?"balance-refilled.ok":"balance-refilled.return-to-game";return i().createElement(c.Z,{appId:this.context.playPageData.gameInfo.appId,balance:"number"==typeof a?a:void 0,diff:Number(e.diff),imgSrc:e.img,isPurchase:Boolean(t),isRetpathUser:!0,orderPrice:e.orderPrice,passportOrigin:b._4.GamesBalanceRefilled,playRecoveryCode:e.recoveryCode,returnButtonText:this.props.getText(r),onBuyMore:this.handleBalanceRefilledBuyMore,onClose:this.handleBalanceRefilledClose})}return null}renderDialog(){const{hideAuthDialog:e}=this.props,{balanceDialog:t,purchaseDialog:a,isTrembling:r,dialogType:s}=this.state;return t?i().createElement(p,{basicSupportPaymentRequest:t.basicSupportPaymentRequest,dialogType:s,hideAuthDialog:e,isTrembling:r,paymentsConfig:t.paymentsConfig,rootRef:this.paymentsRootRef,onBalanceError:this.onBalanceError,onBalanceSuccess:this.onBalanceSuccess,onCreateBalanceRefilled:this.handleCreateBalanceRefilled}):a?i().createElement(p,{basicSupportPaymentRequest:a.basicSupportPaymentRequest,dialogType:s,hideAuthDialog:e,isPlatformPurchase:a.isPlatformPurchase,isTrembling:r,paymentsConfig:a.paymentsConfig,purchaseConfig:a.purchaseConfig,rootRef:this.paymentsRootRef,onCreateBalanceRefilled:this.handleCreateBalanceRefilled,onPlatformPurchaseError:this.onPlatformPurchaseError,onPlatformPurchaseSuccess:this.onPlatformPurchaseSuccess,onPurchaseError:this.onPurchaseError,onPurchaseSuccess:this.onPurchaseSuccess}):null}render(){return this.state.hasMounted?i().createElement("div",{className:w(),ref:this.paymentsRootRef},this.renderContent()):null}}const E=(0,l.$j)((function(e){return{balance:(0,v.n)(e),getText:e.getText,payCurrency:e.user.payCurrency}}))(k)},68153:(e,t,a)=>{a.d(t,{Z:()=>y});var r=a(87363),s=a.n(r),n=a(45331),o=a(95207),i=a(11815),l=a(37705),d=a(13377),c=a(10592),h=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,f=(e,t,a)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;class y extends n.P{constructor(){super(...arguments),this.handleEvent=(e,t,a)=>{const{type:r,data:s={}}=e.data,{shouldWaitIframeButtonClick:n=!0,onStarted:c}=this.props,h=(e,r)=>{(0,l.H)({block:d.W.TRUST,message:`[Payment Trust] ${r||e}`}),a.rejectPromise(t,new i.Z({code:"PAYMENT_FAILURE",message:e}))};switch((0,o.qu)(`Handle trust event '${r}'`,JSON.stringify(e.data,null,"\t")),r){case"on_resize":a.setHeight(t,e.data.data.height);break;case"form-submit":null==c||c();break;case"trust-challenge-end":if(n)return;s.success?a.resolvePromise(t):h("Payment fail.","Fail");break;case"before_submit":a.startPurchase();break;case"payment-loaded":a.setReadyState(t,!0,150);break;case"frame-error":h("Frame error.");break;case"payment-status":"success"===s.value&&a.resolvePromise(t);break;case"payment-complete":"success"===s.status&&a.resolvePromise(t);break;case"payment-check-failure":h("Payment check failure.","Check failure");break;case"payment-update-failure":h("Payment update failure.","Update failure");break;case"payment-fail":h("Payment fail.","Fail");break;case"payment-timeout":{const e=new i.Z({code:"PAYMENT_TIMEOUT",message:"Payment timeout."});a.rejectPromise(t,e);break}case"3ds-status":"3ds-success"===s?a.resolvePromise(t):"3ds-failure"===s&&h("Payment 3ds failure.","3ds failure");break;case"redirect-callback":a.resolvePromise(t);break;case"sbp-bank-selected":window.open(s,"_self")}}}isValidEvent(e){return t=e.origin,!!/^https:\/\/(.+\.){0,7}yandex\.(ru|by|kz|uk|uz|com|com\.tr)(:\d+)?$/.test(t)&&!(!e.data||"YandexTrustPaymentForm"!==e.data.source);var t}render(){const{props:e}=this;return s().createElement(o.ZP,(t=((e,t)=>{for(var a in t||(t={}))v.call(t,a)&&f(e,a,t[a]);if(m)for(var a of m(t))g.call(t,a)&&f(e,a,t[a]);return e})({},e),a={handleEvent:this.handleEvent,isValidEvent:this.isValidEvent,provider:c.qY.TRUST},u(t,p(a))));var t,a}}},29067:(e,t,a)=>{a.d(t,{Z:()=>b});var r=a(87363),s=a.n(r),n=a(45331),o=a(95207),i=a(11815),l=a(37705),d=a(48136),c=a(13377),h=a(10592),u=Object.defineProperty,p=Object.defineProperties,m=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,y=(e,t,a)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;class b extends n.P{constructor(){super(...arguments),this.handleEvent=(e,t,a)=>{let r;try{r=JSON.parse(e.data)}catch(t){return void(0,l.H)({block:c.W.XSOLLA,message:"[Payment Xsolla] Error while attempting to parse Xsolla data",additional:{data:e.data}},t)}switch(null==r?void 0:r.action){case"resize":return void a.setHeight(t,r.height);case"finish":const e=new i.Z({code:"PAYMENT_FAILURE",message:"Payment cancelled."});return(0,l.H)({block:c.W.XSOLLA,message:"[Payment Xsolla] Cancelled"}),void a.rejectPromise(t,e)}switch(null==r?void 0:r.command){case"open-paystation":return void a.setReadyState(t,!0,150);case"resize":return void a.setHeight(t,r.data.dimensions.height);case"change-status":switch(r.data.value){case"done":return void(this.resolveTimeoutId=window.setTimeout((()=>{delete this.resolveTimeoutId,a.resolvePromise(t)}),2e3));case"processing":return void a.startPurchase();case"canceled":return(0,l.H)({block:c.W.XSOLLA,message:"[Payment Xsolla] Declined"}),void a.afterPurchase()}}}}isValidEvent(e){return(0,d.W)(e.origin)}render(){const{props:e}=this;return s().createElement(o.ZP,(t=((e,t)=>{for(var a in t||(t={}))g.call(t,a)&&y(e,a,t[a]);if(v)for(var a of v(t))f.call(t,a)&&y(e,a,t[a]);return e})({},e),a={handleEvent:this.handleEvent,isValidEvent:this.isValidEvent,provider:h.qY.XSOLLA},p(t,m(a))));var t,a}}},95207:(e,t,a)=>{a.d(t,{qu:()=>G,ZP:()=>z});var r=a(6893),s=a(90366),n=a(73694),o=a(63904),i=a.n(o),l=a(87363),d=a.n(l),c=a(53726),h=a(19146),u=a(38699),p=a(45331),m=a(59986),v=a(46986),g=a(36172),f=a(96452),y=a(11815),b=a(97808),w=a(21466),k=a(34711),E=a(7991),S=a(34967),A=a(81941),I=a(41811),P=a(40656),T=a(93298),C=a(49659),R=a(10592),D=a(89592),O=a(29008),L=Object.defineProperty,_=Object.defineProperties,x=Object.getOwnPropertyDescriptors,N=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,$=Math.pow,F=(e,t,a)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,H=(e,t)=>{for(var a in t||(t={}))B.call(t,a)&&F(e,a,t[a]);if(N)for(var a of N(t))M.call(t,a)&&F(e,a,t[a]);return e},W=(e,t)=>_(e,x(t));const G=(0,T.M$)("PurchaseIframeTemplate",T.XG.Dev),Z=i().with("play-purchase-iframe"),j=()=>{let e=`${(0,C.e)().origin}${window.YandexGamesSDK.baseUrl}/sdk/payments/trust-redirect.html`;return e=(0,w.EP)(e),e};const U=20*P.yR;class q extends p.P{constructor(e){super(e),this.isIOSVersionLessThan14=!(0,r.LR)(window.navigator.userAgent,r.jj,{major:14,minor:0,patch:0}),this.removeIframeID=e=>{const t=this.state.iframeIDs;delete t[e],this.setState({iframeIDs:H({},t)})},this.setIframeError=(e,t)=>{const a=this.state.iframeIDs[e];this.setState((r=>({iframeIDs:W(H({},r.iframeIDs),{[e]:W(H({},a),{error:t||"UNKNOWN"})})})))},this.setIframeRef=e=>t=>{const a=this.state.iframeIDs[e];a&&!a.iframeElement&&this.setState((r=>({iframeIDs:W(H({},r.iframeIDs),{[e]:W(H({},a),{iframeElement:t})})})))},this.state={iframeIDs:{},activeFrameID:""}}componentDidMount(){window.addEventListener("message",this),this.create()}componentWillUnmount(){window.removeEventListener("message",this)}componentDidUpdate(e){const{amount:t,packId:a,price:r}=this.props;`${t}_${a}_${r}`!==`${e.amount}_${e.packId}_${e.price}`&&this.create()}handleEvent(e){if(!this.props.isValidEvent(e))return;const t=e.source,a=Object.values(this.state.iframeIDs).filter((e=>{var a;return(null==(a=e.iframeElement)?void 0:a.contentWindow)===t}))[0],r=null==a?void 0:a.id;r?this.props.handleEvent(e,r,this):console.warn("Can not find promiseId for frame",Object.keys(this.state.iframeIDs),H({},this.state.iframeIDs))}setHeight(e,t){const a=this.state.iframeIDs[e];this.setState((r=>({iframeIDs:W(H({},r.iframeIDs),{[e]:W(H({},a),{height:t})})}))),b.Z.post({type:"purchase-form",action:"on_resize"})}startPurchase(){b.Z.post({type:"purchase-form",action:"before_submit"})}afterPurchase(){b.Z.post({type:"purchase-form",action:"after_submit"})}setReadyState(e,t,a=0){const r=this.state.iframeIDs[e];r.setReadyStateTimeout&&window.clearTimeout(r.setReadyStateTimeout),r.setReadyStateTimeout=window.setTimeout((()=>{const a=this.state.iframeIDs[e];this.setState((r=>({iframeIDs:W(H({},r.iframeIDs),{[e]:W(H({},a),{isReady:t})})})))}),a)}resolvePromise(e){const t=this.state.iframeIDs[e],{paymentService:a}=this.props;if(!t)return void Promise.reject(new Error("Can not find promise"));const{payCurrency:r,price:n,token:o}=t;if(t.inProgress)return void G(`resolve promise with ${o} already started`);const i=this.state.iframeIDs[e];if(this.setState((t=>({iframeIDs:W(H({},t.iframeIDs),{[e]:W(H({},i),{inProgress:!0})})}))),G("resolve promise with token",o),!o){const a=new y.Z({code:"PAYMENT_FAILURE",message:"No trust token."});return this.setIframeError(t.id,null==a?void 0:a.code),void this.props.onReject(e,a)}b.Z.post({type:"auth",action:"has-auth"}).then((({data:e})=>{const{hasAuth:t}=e;a!==R.ob.XSOLLA&&(0,S.NF)({withClickDaemon:!0},D.Ji.PURCHASES_PURCHASE_SUCCESS,{amount:this.props.value,auth:t,dialog_type:this.props.dialogType,order_price:this.props.price,appId:this.context.playPageData.gameInfo.appId,payment_system:this.props.provider})})),this.setReadyState(e,!1),this.props.setUserBalanceFetchingStatus(),function(e){const t=P.WT;let a=0;return new Promise(((r,s)=>{function n(){G("checkPurchaseStatus"),(0,m.w$)(`get-status?token=${encodeURIComponent(e)}`).then((e=>{"success"===e.status?r(e):"failure"===e.status?s(new y.Z({code:"PAYMENT_FAILURE",message:"Failure payment status."})):o()})).catch(o)}function o(){a+=1;const e=t*Math.ceil($(1.4,Math.ceil(a/10)));a<100?setTimeout(n,e):s(new y.Z({code:"PAYMENT_FAILURE",message:"Can not get payment status."}))}n()}))}(o).then((t=>{G("checkPurchaseStatus resolve with response",JSON.stringify(t,null,"\t")),this.props.onResolve(e,t,{balanceDiff:this.props.balanceDiff,price:this.state.iframeIDs[e].price}),t.status===R.mv.SUCCESS&&(0,A.i)({payCurrency:r,price:n},(0,s.u)()),this.removeIframeID(e)})).catch((t=>{this.setReadyState(e,!0),this.setIframeError(e,t.code),this.props.onReject(e,t),this.removeIframeID(e)}))}rejectPromise(e,t){this.state.iframeIDs[e]?(this.setIframeError(e,null==t?void 0:t.code),this.props.onReject(e,t),this.removeIframeID(e)):Promise.reject(new Error("Can not find promise"))}create(){const{context:e}=this,t=e.playPageData.gameInfo,{tld:a}=e,{amount:r,dialogType:s,email:n,packId:o,payCurrency:i,price:l,reason:d,paymentService:c}=this.props;G("BaseManager.create; packId, amount: ",o,r);const h=`${r}_${o}_${l}`,p=this.state.iframeIDs[h];if(p)return this.setState({activeFrameID:h}),void(Math.abs(Date.now()-p.timestamp)>=U&&(this.props.onReject(h,new y.Z({code:"PAYMENT_FAILURE",message:"Purchase frame was expired"})),this.removeIframeID(h)));this.setState((e=>({activeFrameID:h,iframeIDs:W(H({},e.iframeIDs),{[h]:{payCurrency:i,price:l,inProgress:!1,id:h,src:"about:blank",token:"",dataAuth:"",timestamp:Date.now()}})})));const v={devParams:{developer_payload:JSON.stringify({"css-theme":this.props.darkTheme?"blackAndWhite":"transparentAndWhite",template:"checkout"})},clid:(0,k.X)(),lang:e.lang,payCurrency:i,paymentService:c,platform:"desktop",reason:d,redirect:j()};if(c===R.ob.XSOLLA){const e=this.props.darkTheme?"default_dark":"default";v.paymentFormUiSettings={theme:e}}if(o)v.productId=o;else{if(!r)return void console.error("No pack or amount.");v.amount=r}if(n&&(v.iGamesUserEmail=n),d===R.YC.PURCHASE){parseInt(t.appId,10)&&(v.appId=parseInt(t.appId,10))}const g=(0,E.W5)(),w=g?{[I.G6]:g}:void 0;(0,m.U)("create",v,w).then((e=>{var t,r;if(e&&e.url&&e.token){const s=new URL(e.url);if(c===R.ob.TRUST&&!/^(.+\.){0,7}yandex\.(ru|by|kz|uk|uz|com|com\.tr)$/.test(s.host)){console.error("Bad Trust url",s.href);const t=u.A.includes(a)?a:"ru";s.host=`trust.yandex.${t}`,e.url=s.href}this.setState((t=>({iframeIDs:W(H({},t.iframeIDs),{[h]:{payCurrency:i,price:l,inProgress:!1,id:h,src:e.url,token:e.token,dataAuth:e.email?"false":"true",timestamp:Date.now()}})})));const{userData:n}=this.props;!e.email||n.uid&&n.email?b.Z.post({type:"purchase-form",action:"auth"}):(b.Z.post({type:"purchase-form",action:"lock_email",data:{email:e.email}}),null==(r=(t=this.props).onCreateIFrame)||r.call(t,e.email))}else this.setIframeError(h,"REQUEST_FAILURE"),this.props.onReject(h,new y.Z({code:"PAYMENT_FAILURE",message:"Can not get payment URL."})),this.removeIframeID(h)})).catch((e=>{b.Z.post({type:"auth",action:"has-auth"}).then((({data:t})=>{const{hasAuth:a}=t;(0,S.NF)({withClickDaemon:!0},D.Ji.PURCHASES_PURCHASE_PAYMENT_SYSTEM_LOAD_ERROR,{auth:a,dialog_type:s,message:e.message,appId:this.context.playPageData.gameInfo.appId,payment_system:this.props.provider})})),(0,f.f1)(e)?this.setIframeError(h,"UNAUTHORIZED"):this.setIframeError(h,"REQUEST_FAILURE"),this.props.onReject(h,e),this.removeIframeID(h)}))}render(){const{iframeIDs:e,activeFrameID:t}=this.state,{isInvisible:a,fullScreen:r}=this.props,s=Object.values(e),{isIOS:o}=(0,O.AK)(this.context.platform);return s.map((e=>{const s=e.isReady;return d().createElement("div",{className:Z({"state-ready":e.isReady,"full-screen":Boolean(r),hidden:e.id!==t||a,"ios-safari":this.context.isSafari&&o,"ios-less-14":o&&this.isIOSVersionLessThan14}),key:e.id,style:{height:e.height?`${e.height}px`:"auto"}},d().createElement("div",{className:Z("holder")},d().createElement("iframe",{className:Z("frame"),"data-auth":e.dataAuth,"data-token":e.token,ref:this.setIframeRef(e.id),sandbox:"allow-popups allow-forms allow-scripts allow-same-origin allow-top-navigation-by-user-activation",src:e.src})),!s&&d().createElement("div",{className:Z("spin-wrapper")},d().createElement(n.y,{size:76,spinning:!0,thickness:"bold",view:"default"})))}))}}const z=(0,c.$j)((function(e){return{darkTheme:(0,g.Up)(e),userData:e.userData}}),(function(e){return(0,h.DE)({setUserBalanceFetchingStatus:v.k1},e)}))(q)},89144:(e,t,a)=>{a.d(t,{Z:()=>l});var r=a(78422);const s={gameSessionUID:"",init(){},sendOnceDeprecatedUsage(e){},params(e){},reachGoal(e,t,a){}};function n(){var e,t;return`//yastatic.net/s3/games-static/static-data/images/payments/sdk${(null==(e=window.YandexGamesSDKEnvironment)?void 0:e.moneyCodeSymbol)?`/${null==(t=window.YandexGamesSDKEnvironment)?void 0:t.moneyCodeSymbol.toLowerCase()}`:""}`}let o=function(){o=()=>{},s.params({borrowParams:{payments:{appId:a(41576).r(),productCurrencyCodeGet:!0}}})};class i{constructor(e){this._productData=e}get id(){return this._productData.id}get title(){return(0,r.Z)(this._productData.title)}get description(){return(0,r.Z)(this._productData.description)}get imageURI(){const{image:e}=this._productData;if(e&&"object"==typeof e&&"url_prefix"in e){const t=String(e.url_prefix);return/\.(png|jpg|svg)$/.test(t)?t:`${t}/default256x256`}return"https://yastatic.net/s3/games-static/static-data/images/payments/default-product-image.png"}get price(){const{price:e}=this._productData;return`${e} ${this.priceCurrencyCode}`}get priceValue(){return String(this._productData.price)}get priceCurrencyCode(){var e;return o(),null==(e=window.YandexGamesSDKEnvironment)?void 0:e.moneyCodeSymbol}getPriceCurrencyImage(e="small"){if("svg"===e)return`${n()}/currency-icon-m.svg`;let t="s";switch(e){case"medium":case"small":t=e.charAt(0);break;default:console.warn(`Unknown size value ('${e}')`)}const a=window.devicePixelRatio>=2;return`${n()}/currency-icon-${t}${a?"@2x":""}.png`}toJSON(){return{id:this.id,title:this.title,description:this.description,imageURI:this.imageURI,price:this.price,priceValue:this.priceValue,priceCurrencyCode:this.priceCurrencyCode}}}class l extends i{constructor(e){super(e),this._productData=e}isDiscounted(){const{price:e,priceRegular:t}=this._productData;return e<t}get pricePlusValue(){return String(this._productData.pricePlus||"")}get priceRegularValue(){return String(this._productData.priceRegular)}toJSON(){return{id:this.id,title:this.title,description:this.description,imageURI:this.imageURI,price:this.price,pricePlusValue:this.pricePlusValue,priceRegularValue:this.priceRegularValue,priceValue:this.priceValue,priceCurrencyCode:this.priceCurrencyCode}}}},83388:(e,t,a)=>{a.d(t,{Z:()=>r});var r=(e=>(e.BALANCE="balance",e.PURCHASE="purchase",e))(r||{})},4230:(e,t,a)=>{a.d(t,{_Z:()=>S,ii:()=>A,kr:()=>k,xG:()=>w});var r=a(67748),s=a.n(r),n=a(34711),o=a(35090),i=a(48810),l=a(78740),d=Object.defineProperty,c=Object.defineProperties,h=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,v=(e,t,a)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,g=(e,t)=>{for(var a in t||(t={}))p.call(t,a)&&v(e,a,t[a]);if(u)for(var a of u(t))m.call(t,a)&&v(e,a,t[a]);return e},f=(e,t)=>c(e,h(t));const y=e=>{let t;try{t=JSON.parse(e)}catch(e){t=[]}return Array.isArray(t)?t:[]},b=(e,t)=>{const a=Array.isArray(e)?e:y(e);t&&a.push(t),(0,i.Ur)(l.VM,JSON.stringify(a))};function w(e){const t=(0,i.dq)(l.VM);t.wasError||!t.value?(0,i.Ur)(l.VM,JSON.stringify([e])):b(t.value,e)}function k(e,t){return 0===t.length?t:t.length>e?t=t.slice(0,e):(t.length<e&&(t=[...Array(Math.ceil(e/t.length))].reduce(((e,a,r)=>e.concat(t.map(((e,a)=>f(g({},e),{appID:e.appID+r,title:e.title+` (${r*t.length+a+1})`}))))),[]).slice(0,e)),t)}const E=["played","user_profile_recent_games"];function S({appId:e,hasMounted:t,inGamePage:a,isDistGame:r,locationHash:d,locationSearch:c,showExceptNavigationFromPlayedGames:h,showOnRedirectFromCatalog:u}){if(r)return!1;const p=new URLSearchParams(c);if("distrib"===p.get("utm_source")||p.has("clid"))return!1;if(a)return!0;if(!t)return!0;if((0,n.X)())return!1;if(h){const e=s().parse(d);if(e.pos&&"string"==typeof e.pos)try{if(E.includes(JSON.parse(e.pos).listType))return!1}catch(e){}}else if(!u&&(0,o.Oo)())return!1;const m=(0,i.dq)(l.VM);if(!m.wasError&&m.value){if(y(m.value).includes(e))return!1}return!0}function A(){"undefined"!=typeof document&&document.body.classList.contains("with-similar-games")&&document.body.classList.remove("with-similar-games")}},1481:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(87363);const s=({onError:e})=>((0,r.useEffect)((()=>{null==e||e(new Error("Promo chunk wasnt loaded"))}),[e]),null)},86880:(e,t,a)=>{a.d(t,{Z:()=>w});var r=a(46210),s=(a(58904),a(63904)),n=a.n(s),o=a(87363),i=a.n(o),l=a(45112),d=a(59453);const c=n().with("progress-ring");class h extends o.Component{render(){const e=100-Math.min(100,((this.props.current||0)-1)/(this.props.total-1)*100),t=24,a=42*Math.PI,r=a-e/100*a;return i().createElement("div",{className:c()},i().createElement("svg",{height:48,width:48},i().createElement("circle",{className:c("circle-background"),cx:t,cy:t,fill:"transparent",r:21,strokeDasharray:`${a} ${a}`,strokeWidth:3}),i().createElement("circle",{className:c("circle"),cx:t,cy:t,fill:"transparent",r:21,strokeDasharray:`${a} ${a}`,strokeDashoffset:r,strokeWidth:3})),i().createElement("span",{className:c("countdown")},this.props.current))}}var u=a(40184),p=a(85467),m=a(41811),v=a(40656),g=a(15771),f=a(90380),y=a(49659);const b=n().with("rewarded-counter"),w=({onClose:e,onDone:t,paused:a=!1,seconds:s,text:n})=>{const c=(0,p.T)(),{abt:{flags:w}}=(0,u.b)(),{current:k}=(0,o.useRef)(null!==(0,r.mm)((0,y.e)().href)),[E,S]=(0,o.useState)(k?1:Math.floor(s)),A=E>0;return(0,l.Yz)((()=>{(!0!==(0,g.RM)(w,f.Z.advStopRewardedCounterOnLeave)||!document.hidden&&document.hasFocus())&&S((e=>e-1))}),A&&!a?v.WT:null),(0,o.useEffect)((()=>{A||null==t||t()}),[A,t]),A?i().createElement("div",{className:b()},i().createElement("span",{className:b("text")},n||c("adv.rewarded.countdown.text")),i().createElement(h,{current:Math.max(0,E),total:s})):i().createElement("div",{className:b()},i().createElement(d.Z,{source:m.h0.REWARDED_COUNTER,type:"rewarded",onClick:e}))}},95968:(e,t,a)=>{a.d(t,{Z:()=>s});var r=a(56099);const s={fullscreenEnabled:(0,r.Z)("fullscreenEnabled"),fullscreenElement:(0,r.Z)("fullscreenElement"),requestFullscreen:(0,r.Z)("requestFullscreen"),exitFullscreen:(0,r.Z)("exitFullscreen"),fullscreenchange:(0,r.Z)("fullscreenchange")}},71852:(e,t,a)=>{a.d(t,{Z:()=>m});var r=a(63904),s=a.n(r),n=a(87363),o=a.n(n),i=a(53726),l=a(45331),d=a(64264),c=a(15201),h=a(36172);const u=s().with("section-header");class p extends n.Component{renderText(){const{icon:e,iconMix:t,title:a,darkTheme:r}=this.props,s=!r,n=r;return o().createElement("span",{className:u("text")},e&&("string"==typeof e?o().createElement(c.Z,{className:`${u("icon",{light:s,dark:n})} ${t}`,type:e}):e),a)}renderLink(){const{categoryName:e,hideShowAllLink:t,titleLink:a}=this.props;return e?t?this.renderText():o().createElement(d.Z,{categoryName:e,mix:u("category-link"),pathname:a},this.renderText()):null}renderCustomLink(){const{customLink:e}=this.props;return e?o().createElement("span",{className:u("all-link"),onClick:e.onClick},e.content):null}renderShowAllLink(){const{categoryName:e,hideShowAllLink:t,getText:a}=this.props;return!e||t?null:o().createElement(d.Z,{categoryName:e,mix:u("all-link")},a("category-link.all.text"))}render(){const{categoryName:e,customLink:t,headLevel:a,mix:r}=this.props,s=`h${a||2}`;return o().createElement("div",{className:`${u()} centered-content ${r}`},o().createElement(s,{className:`${u("header")}`},e?this.renderLink():this.renderText()),t?this.renderCustomLink():this.renderShowAllLink())}}p.defaultProps={hideShowAllLink:!1,mix:""},p.contextType=l.Z;const m=(0,i.$j)((function(e){return{darkTheme:(0,h.Up)(e),getText:e.getText}}))(p)},15987:(e,t,a)=>{a.d(t,{w:()=>r});var r=(e=>(e.MENU="menu",e.TIMER="timer",e))(r||{})},29810:(e,t,a)=>{a.d(t,{Z:()=>d});var r=a(87363),s=a(53726),n=a(19146),o=a(46986),i=a(96821),l=a(69136);const d=(0,s.$j)((function(e){return{appState:e}}),(function(e){return(0,n.DE)({fetchUserBalance:o.Zc,setUserBalance:o.v},e)}))((e=>{const{fetchUserBalance:t,setUserBalance:a}=e,s="undefined"!=typeof window,{appState:n}=e,o=n.userData.uid,d=(0,r.useRef)(o),c=(0,r.useMemo)((()=>{if(!s)return!1;return(0,i.Z)((()=>n)).sse||!1}),[n,s]);return(0,r.useEffect)((()=>{c&&d.current!==o&&(d.current=o,c.changeAuth(o))}),[c,o]),(0,r.useEffect)((()=>{if(!c)return;const e=[],r=c.subscribe(l.Xn.BALANCE_CHANGED,(()=>{n.user.balance.ignoreBalanceEvents||t({forceFetch:!0})})),s=c.subscribe(l.Xn.BALANCE_UPDATE,(e=>{n.user.balance.ignoreBalanceEvents||a(e.value)}));return e.push(r),e.push(s),()=>{e.forEach((e=>e()))}}),[t,a,c,n.user.balance.ignoreBalanceEvents]),null}))},68316:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a(89775).Z},53603:(e,t,a)=>{a.d(t,{I:()=>i,s:()=>l});var r=a(87363),s=a.n(r),n=a(78675);const o=(0,r.createContext)(null),i=e=>{const[t,a]=(0,r.useState)(!1);return s().createElement(o.Provider,{value:{isReady:t,setIsReady:a}},e.children)},l=()=>(0,n.C)({context:o,hookName:"useWithReady",contextName:"WithReadyContext"})},63662:(e,t,a)=>{a.d(t,{b:()=>h});var r=a(87363),s=a(1338),n=Object.defineProperty,o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,c=(e,t)=>{for(var a in t||(t={}))i.call(t,a)&&d(e,a,t[a]);if(o)for(var a of o(t))l.call(t,a)&&d(e,a,t[a]);return e};function h(e){const t=(0,r.useContext)(s.O);return{metrikaParams:(0,r.useMemo)((()=>(null==e?void 0:e.metrikaParams)?c(c({},t.metrikaParams),null==e?void 0:e.metrikaParams):t.metrikaParams),[t.metrikaParams,null==e?void 0:e.metrikaParams]),clickDaemonParams:(0,r.useMemo)((()=>(null==e?void 0:e.clickDaemonParams)?c(c({},t.clickDaemonParams),null==e?void 0:e.clickDaemonParams):t.clickDaemonParams),[t.clickDaemonParams,null==e?void 0:e.clickDaemonParams])}}},70776:(e,t,a)=>{a.d(t,{h:()=>n});var r=a(87363),s=a(60295);function n(e,t){const[a,n]=(0,r.useState)(!1),o=()=>{n(!0)};return(0,r.useEffect)((()=>{var r,n;!a&&(null==(r=null==e?void 0:e.current)?void 0:r.complete)&&(t&&(0,s.bS)(t,null==(n=null==e?void 0:e.current)?void 0:n.src),o())})),[o,a]}},482:(e,t,a)=>{a.d(t,{V:()=>b});var r=a(87363),s=a(83950),n=a(82027),o=Object.defineProperty,i=Object.defineProperties,l=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,u=(e,t,a)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,p=(e,t)=>{for(var a in t||(t={}))c.call(t,a)&&u(e,a,t[a]);if(d)for(var a of d(t))h.call(t,a)&&u(e,a,t[a]);return e},m=(e,t)=>i(e,l(t));const v=n.fl.show,g=.5,f=800,y="useOnShow";function b({ref:e,onShow:t,threshold:a=g,actionName:n=v,delay:o=f,observerId:i=y,ready:l=!0,checkIsShowing:d}){var c,h,u,b;const w=(0,r.useRef)(),k=(0,r.useRef)(!0),[E,S]=(0,r.useState)({action:{name:n},blockSize:{height:null!=(h=null==(c=null==e?void 0:e.current)?void 0:c.scrollHeight)?h:0,width:null!=(b=null==(u=null==e?void 0:e.current)?void 0:u.scrollWidth)?b:0},firstScreen:k.current}),A=(0,r.useCallback)((a=>{(null==e?void 0:e.current)&&t(a)}),[t,e]);return(0,r.useEffect)((()=>{const t=null==e?void 0:e.current;if(!t||!l)return;const r=(0,s.V)(i,{threshold:a});return r.observe(t,(e=>{if(!d||e.boundingClientRect.height>=1&&e.boundingClientRect.width>=1)return e.intersectionRatio<a?(k.current=!1,window.clearTimeout(w.current),void(w.current=void 0)):void(w.current||(w.current=window.setTimeout((()=>{const e=m(p({},E),{blockSize:{height:t.scrollHeight,width:t.scrollWidth},firstScreen:k.current});S(e),A(e),r.unobserve(t)}),o)))})),()=>r.unobserve(t)}),[l]),E}},99213:(e,t,a)=>{a.d(t,{b:()=>s});var r=a(87363);const s=(e,t)=>{const a=(0,r.useRef)(!1);(0,r.useEffect)((()=>{!a.current&&t&&(a.current=!0,e())}),[t,e])}},77976:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(87363),s=a.n(r),n=a(17978);const o=()=>s().createElement(n.Z,{isFullscreen:!0})},90043:(e,t,a)=>{a.d(t,{f_:()=>o,ht:()=>s,hu:()=>n,ls:()=>l,lt:()=>d,rV:()=>i});var r=a(2203);const s=e=>({type:r.esH,payload:{value:e}}),n=e=>({type:r.iZl,payload:{value:e}}),o=e=>({type:r.OSx,payload:{value:e}}),i=e=>({type:r.E_7,payload:{value:e}}),l=e=>({type:r.WjI,payload:{value:e}}),d=e=>({type:r.Die,payload:{value:e}})},22355:(e,t,a)=>{a.d(t,{b:()=>r,y:()=>s});const r=e=>e.ui.isFullscreenActive,s=e=>e.ui.isFullscreenEnabled},37557:(e,t,a)=>{a.d(t,{C:()=>r});const r=a(53726).v9},92389:(e,t,a)=>{function r(e){var t;let a=document.querySelector(`.stack .${e}`);return a||(a=document.createElement("div"),a.setAttribute("class",e),null==(t=document.querySelector(".stack"))||t.appendChild(a)),a}a.d(t,{_:()=>r})},91521:(e,t,a)=>{a.d(t,{Z:()=>s,b:()=>r});const r="yandexGames_leaderboard_clicked",s="yandexGames_no_ads_clicked"},18546:(e,t,a)=>{a.d(t,{Z:()=>r});const r=(()=>{let e=Promise.resolve();const t=(t,a)=>{return r=void 0,s=null,n=function*(){try{yield e}catch(e){console.error(e)}finally{yield fetch(t,a)}},new Promise(((e,t)=>{var a=e=>{try{i(n.next(e))}catch(e){t(e)}},o=e=>{try{i(n.throw(e))}catch(e){t(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,o);i((n=n.apply(r,s)).next())}));var r,s,n};return(a,r)=>e=t(a,r)})()},37930:(e,t,a)=>{a.d(t,{F:()=>i,v:()=>l});var r=a(15771),s=a(90380);const n=8,o=40;function i(){const e={};for(const[t,a]of Object.entries(l()))e[t]=a.join(",");return e}function l(){if(!0!==(0,r.RM)(window.appData.abt.flags,s.Z.advGoogleTestidsTargeting))return{};let e=0,t=0;function a(){t=0,e++}return window.appData.abt.testIds.sort(((e,t)=>(Number(e)||0)-(Number(t)||0))).reduce(((r,s,i)=>{t+=s.length,0!==i&&t>o&&a();const l=`testIds_${e}`;return r[l]||(r[l]=[]),r[l].push(s)>=n&&a(),r}),{})}},80346:(e,t,a)=>{a.d(t,{b:()=>l});var r=a(61224),s=a(40656),n=a(93298),o=a(15771);const i=(0,n.M$)("googlefc",n.XG.Adv,{background:"#123896",text:"white"}),l=()=>{window.googlefc=window.googlefc||{callbackQueue:[]};const{googlefc:e}=window;e.controlledMessagingFunction||(e.controlledMessagingFunction=e=>{return t=void 0,a=null,n=function*(){var t,a;return window.appData.isGamesLiteApp?(e.proceed(!1),void i("googlefc.controlledMessagingFunction message.proceed(false).\n(window.appData.isGamesLiteApp === true)")):(0,r.GH)({flags:window.appData.abt.flags,userAgent:navigator.userAgent,referrerClid:window.appData.referrerClid})?(e.proceed(!1),void i("googlefc.controlledMessagingFunction message.proceed(false).\n(isDisabledByPartnerRestriction)")):((0,o.c6)((null==(a=null==(t=window.appData)?void 0:t.abt)?void 0:a.flags)||{})&&(i("googlefc.controlledMessagingFunction delay"),yield new Promise((e=>{var t;null==(t=window.tti)||t.ready((()=>{e()})),setTimeout((()=>{e()}),15*s.WT)}))),e.proceed(!0),void i("googlefc.controlledMessagingFunction default behaviour."))},new Promise(((e,r)=>{var s=e=>{try{i(n.next(e))}catch(e){r(e)}},o=e=>{try{i(n.throw(e))}catch(e){r(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(s,o);i((n=n.apply(t,a)).next())}));var t,a,n})}},85623:(e,t,a)=>{a.d(t,{CX:()=>S,N5:()=>L,S$:()=>P,Vg:()=>D,bT:()=>C,xq:()=>T});var r=a(46210),s=(a(10719),a(84819)),n=a(78308),o=a(80346),i=a(99102),l=a(37930),d=a(37705),c=a(79049),h=a(40656),u=a(93298),p=a(13377),m=a(49659),v=Object.defineProperty,g=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,b=(e,t,a)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,w=(e,t)=>{for(var a in t||(t={}))f.call(t,a)&&b(e,a,t[a]);if(g)for(var a of g(t))y.call(t,a)&&b(e,a,t[a]);return e},k=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const E=(0,u.M$)("GoogleTagUtils",u.XG.Adv,{background:"#0c6c09",text:"#ccc"}),S=8*h.WT,A=()=>Boolean(window.appData&&window.playPageData)?(0,s.v_)({on:"adv_interstitial.publift.enabled"})||(0,s.v_)({on:"adv_interstitial.instream_publift.enabled"}):(0,s.v_)({on:"adv_feed.publift.enabled"});let I;const P=()=>{if(A())return Promise.reject("Cannot load gpt script because publift provider is enabled");if(I)return I;(0,o.b)();const e=(0,r.gw)((0,m.e)().href);return I=(0,c.x)({id:"gpt-script",loadTest:()=>{var e;return Boolean(null==(e=window.googletag)?void 0:e.apiReady)},src:e?(0,r.DL)(e):"https://securepubads.g.doubleclick.net/tag/js/gpt.js"}),I},T=({metrikaCounter:e,parallel:t,prebidScriptUrl:a})=>{if(A())return Promise.reject("Cannot load gpt script because publift provider is enabled");const r={gpt:!1,prebid:!1},s=a?(0,c.x)({attributes:{ym:e},crossOrigin:"anonymous",id:"prebid_tgo",src:a}):null;return t?Promise.all([P().then((()=>r.gpt=!0)).catch((e=>r.gptError=e)),null==s?void 0:s.then((()=>r.prebid=!0)).catch((e=>r.prebidError=e))]).then((()=>r)).catch((()=>r)):P().then((()=>{r.gpt=!0})).catch((e=>r.gptError=e)).then((()=>{if(!r.gptError)return null==s?void 0:s.then((()=>r.prebid=!0)).catch((e=>r.prebidError=e))})).then((()=>r)).catch((()=>r))},C=e=>k(void 0,null,(function*(){return new Promise(((t,a)=>{window.googletag=window.googletag||{cmd:[]};const{googletag:r}=window;r.cmd||(r.cmd=[]),r.cmd.push((()=>k(void 0,null,(function*(){try{t(yield e(window.googletag))}catch(e){a(e)}}))))}))}));let R;const D=()=>k(void 0,null,(function*(){return R||(!0===(null==googletag?void 0:googletag.pubadsReady)&&E("googletagSetBaseConfig was called after googletag.enableServices()"),R=C((e=>{const t=e.pubads();(0,i.c)(t),t.enableSingleRequest(),t.disableInitialLoad(),u.HQ&&googletag.pubads().addEventListener("impressionViewable",(()=>{E('pubads event "impressionViewable" called')})).addEventListener("slotOnload",(()=>{E('pubads event "slotOnload" called')})).addEventListener("slotRenderEnded",(()=>{E('pubads event "slotRenderEnded" called')})).addEventListener("slotRequested",(()=>{E('pubads event "slotRequested" called')})).addEventListener("slotResponseReceived",(()=>{E('pubads event "slotResponseReceived" called')})).addEventListener("rewardedSlotReady",(()=>{E('pubads event "rewardedSlotReady" called')})).addEventListener("rewardedSlotGranted",(()=>{E('pubads event "rewardedSlotGranted" called')})).addEventListener("rewardedSlotClosed",(()=>{E('pubads event "rewardedSlotClosed" called')})),function(){return k(this,null,(function*(){const e=yield L(),t=googletag.pubads();E("setGoogleKeysForTargeting",e),Object.entries(e).forEach((([e,a])=>{t.setTargeting(e,a)}))}))}().then((()=>{R=Promise.resolve(),E("googletagSetBaseConfig"),!0===e.pubadsReady&&(0,d.H)({block:p.W.MONETIZATION,level:"error",message:"setGoogleKeysForTargeting finished after googletag.enableServices()"})}))}))),R}));let O;function L(){return O||(O=new n.Z(window.appData.apiData).getGoogleKeyValues({appID:window.clientMetadata.appId,lang:window.clientMetadata.lang,platform:window.clientMetadata.platform}).catch((e=>((0,d.H)({block:p.W.GOOGLE_ADS,message:"Trouble with getting google key values"},e),{}))).then((e=>(E("getGoogleKeysForTargeting",e),w(w({},(0,l.v)()),e))))),O}},99102:(e,t,a)=>{a.d(t,{c:()=>d});var r=a(14408),s=a(38096),n=a(49659);const o={hostname:()=>(0,n.e)().hostname,pathname:()=>(0,n.e)().pathname,protocol:()=>(0,n.e)().protocol,rootHostname:()=>{const{hostname:e}=(0,s.getDomainConfig)()||{},{tld:t}=window.appData||{};return e&&t?`${e}.${t}`:(0,n.e)().hostname}},i=e=>e.replace(/{(\w+)}/g,((e,t)=>{var a,r;return null!=(r=null==(a=o[t])?void 0:a.call(o))?r:""}));var l=a(76488);const d=e=>{var t;if(!window.appData)return;const a=(0,r.om)(window.appData.abt.flags);if(void 0!==a&&!a.length)return;if(void 0===a){const e="stand"===window.appData.env.CROWD_TYPE;if(l.XK&&!e&&!(null==(t=window.appData.clientFeatures)?void 0:t.isDistrib))return}const s=i(null!=a?a:"{rootHostname}");e.set("page_url",s)}},55231:(e,t,a)=>{a.d(t,{TE:()=>h,k_:()=>p});var r=a(40656),s=Object.defineProperty,n=Object.defineProperties,o=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,c=(e,t,a)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;r.WT;const h=r.WT;u=((e,t)=>{for(var a in t||(t={}))l.call(t,a)&&c(e,a,t[a]);if(i)for(var a of i(t))d.call(t,a)&&c(e,a,t[a]);return e})({},{default:[[300,250],[300,300]],wide:[[728,90],[750,200],[970,90],[970,250],[980,90],[980,120]]}),n(u,o({wide:[[728,90],[970,90],[970,250]]}));var u;const p={filterSettings:{iframe:{bidders:"*",filter:"include"}},iframeEnabled:!0,syncEnabled:!0}},38508:(e,t,a)=>{a.d(t,{M:()=>n});a(38096);var r=a(29483),s=a(41811);function n(e,t){const{blockId:a,pageId:s}=t;let n="__getTextFromYandexAdvError_EMPTY_ERROR_TEXT__";if(e.text){const t=new RegExp((0,r.h)(a),"g");if(n=e.text.replace(t,"{see additional}"),"number"==typeof s){const e=new RegExp(`{see additional}_${s}`,"g");n=n.replace(e,"{see additional}_{see additional}")}}return n}s.bS},25562:(e,t,a)=>{a.d(t,{TG:()=>o,iv:()=>s});a(15771),a(90380);const r=[[300,250],[300,300],[300,500],[300,600],[320,480],[336,280],[480,320]],s=e=>{const t=n(e);return i(r,t,140)},n=e=>120,o=e=>{const{canReturnEmptyArray:t,maxAdvHeight:a,maxAdvWidth:r,sizes:s}=e,n=s.filter((e=>!(!Array.isArray(e)||"fluid"!==e[0])||e[0]<=r&&e[1]<=a));return 0!==n.length||t?n:[s[0]]},i=(e,t=0,a=0)=>{if("undefined"==typeof window)return e;const r=window.innerWidth-t,s=window.innerHeight-a;return o({sizes:e,maxAdvWidth:r,maxAdvHeight:s})}},42873:(e,t,a)=>{a.d(t,{U:()=>n});const r=[{bidder:"cpmstar",params:{placementId:86543}},{bidder:"between",params:{s:4711702}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337827",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872330,formatId:125925}},{bidder:"yandex",params:{impId:1,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],s=[{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5447199"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1891309,formatId:125927}},{bidder:"between",params:{s:4718353,cur:"EUR"}},{bidder:"cpmstar",params:{placementId:88076}},{bidder:"yandex",params:{impId:1,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],n={playhop:{default:{catalog:{desktop:[{bidder:"cpmstar",params:{placementId:89042}},{bidder:"between",params:{s:4711945}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5342202",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:125929}},{bidder:"yandex",params:{impId:7,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}},{bidder:"pubrise",params:{placementId:"6"}}],mobile:[{bidder:"cpmstar",params:{placementId:89042}},{bidder:"between",params:{s:4711749}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337846",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:125925}},{bidder:"yandex",params:{impId:8,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}]},interstitial:{desktop:[{bidder:"cpmstar",params:{placementId:89042}},{bidder:"between",params:{s:4711743}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337842",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:125927}},{bidder:"yandex",params:{impId:1,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],mobile:[{bidder:"cpmstar",params:{placementId:89042}},{bidder:"between",params:{s:4711752}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337847",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:126085}},{bidder:"yandex",params:{impId:1,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}]},sticky:{desktop:{sidebar_main:[{bidder:"cpmstar",params:{placementId:89042}},{bidder:"between",params:{s:4711743}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337842",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:125936}},{bidder:"yandex",params:{impId:5,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],sidebar_small:[{bidder:"cpmstar",params:{placementId:89042}},{bidder:"between",params:{s:4711915}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5338845",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:126099}},{bidder:"yandex",params:{impId:6,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}]},mobile:{landscape_bottom:[{bidder:"cpmstar",params:{placementId:89042}},{bidder:"between",params:{s:4711751}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337848",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:126096}},{bidder:"yandex",params:{impId:2,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],portrait:[{bidder:"cpmstar",params:{placementId:89042}},{bidder:"between",params:{s:4711754}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337850",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:126097}},{bidder:"yandex",params:{impId:3,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],portrait_high:[{bidder:"cpmstar",params:{placementId:89042}},{bidder:"between",params:{s:4711753}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337849",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:126089}},{bidder:"yandex",params:{impId:4,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}]}}},dsail:{catalog:{desktop:[{bidder:"adform",params:{adxDomain:"adx.adform.net",mid:1978547,priceType:"net"}},{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5342202"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:125929}},{bidder:"between",params:{s:4711945,cur:"EUR"}},{bidder:"cpmstar",params:{placementId:89042}},{bidder:"yandex",params:{impId:7,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}},{bidder:"pubrise",params:{placementId:"6"}}],mobile:[{bidder:"adform",params:{adxDomain:"adx.adform.net",mid:1978552,priceType:"net"}},{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5337846"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:125925}},{bidder:"between",params:{s:4711749,cur:"EUR"}},{bidder:"cpmstar",params:{placementId:89042}},{bidder:"yandex",params:{impId:8,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}},{bidder:"pubrise",params:{placementId:"14"}}]},interstitial:{desktop:[{bidder:"adform",params:{adxDomain:"adx.adform.net",mid:1978548,priceType:"net"}},{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5337843"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:125927}},{bidder:"between",params:{s:4711743,cur:"EUR"}},{bidder:"cpmstar",params:{placementId:89042}},{bidder:"yandex",params:{impId:1,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}},{bidder:"pubrise",params:{placementId:"10"}}],mobile:[{bidder:"adform",params:{adxDomain:"adx.adform.net",mid:1978554,priceType:"net"}},{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5337847"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:126085}},{bidder:"between",params:{s:4711752,cur:"EUR"}},{bidder:"cpmstar",params:{placementId:89042}},{bidder:"yandex",params:{impId:1,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}},{bidder:"pubrise",params:{placementId:"15"}}]},sticky:{desktop:{sidebar_main:[{bidder:"adform",params:{adxDomain:"adx.adform.net",mid:1978549,priceType:"net"}},{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5337844"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:125936}},{bidder:"between",params:{s:4711747,cur:"EUR"}},{bidder:"cpmstar",params:{placementId:89042}},{bidder:"yandex",params:{impId:5,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}},{bidder:"pubrise",params:{placementId:"11"}}],sidebar_small:[{bidder:"adform",params:{adxDomain:"adx.adform.net",mid:1978551,priceType:"net"}},{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5338845"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:126099}},{bidder:"between",params:{s:4711915,cur:"EUR"}},{bidder:"cpmstar",params:{placementId:89042}},{bidder:"yandex",params:{impId:6,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}},{bidder:"pubrise",params:{placementId:"13"}}]},mobile:{landscape_bottom:[{bidder:"adform",params:{adxDomain:"adx.adform.net",mid:1978563,priceType:"net"}},{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5337848"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:126096}},{bidder:"between",params:{s:4711751,cur:"EUR"}},{bidder:"cpmstar",params:{placementId:89042}},{bidder:"yandex",params:{impId:2,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}},{bidder:"pubrise",params:{placementId:"16"}}],portrait:[{bidder:"adform",params:{adxDomain:"adx.adform.net",mid:1978564,priceType:"net"}},{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5337850"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:126097}},{bidder:"between",params:{s:4711754,cur:"EUR"}},{bidder:"cpmstar",params:{placementId:89042}},{bidder:"yandex",params:{impId:3,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}},{bidder:"pubrise",params:{placementId:"18"}}],portrait_high:[{bidder:"adform",params:{adxDomain:"adx.adform.net",mid:1978565,priceType:"net"}},{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5337849"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872333,formatId:126089}},{bidder:"between",params:{s:4711753,cur:"EUR"}},{bidder:"cpmstar",params:{placementId:89042}},{bidder:"yandex",params:{impId:4,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}},{bidder:"pubrise",params:{placementId:"17"}}]}}}},yandex:{default:{catalog:{desktop:[{bidder:"cpmstar",params:{placementId:86541}},{bidder:"between",params:{s:4711728}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337831",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872330,formatId:125929}},{bidder:"yandex",params:{impId:7,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],mobile:[{bidder:"cpmstar",params:{placementId:86543}},{bidder:"between",params:{s:4711793}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5337837"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872330,formatId:125924}},{bidder:"yandex",params:{impId:8,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}]},interstitial:{desktop:r,mobile:r},sticky:{desktop:{sidebar_main:[{bidder:"cpmstar",params:{placementId:87338}},{bidder:"between",params:{s:4711730}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337833",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872330,formatId:125927}},{bidder:"yandex",params:{impId:5,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],sidebar_small:[{bidder:"cpmstar",params:{placementId:87337}},{bidder:"between",params:{s:4711731}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337834",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872330,formatId:126087}},{bidder:"yandex",params:{impId:6,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}]},mobile:{landscape_bottom:[{bidder:"cpmstar",params:{placementId:87339}},{bidder:"between",params:{s:4711725}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337836",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872330,formatId:126096}},{bidder:"yandex",params:{impId:2,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],portrait:[{bidder:"cpmstar",params:{placementId:87339}},{bidder:"between",params:{s:4711726}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337829",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872330,formatId:126097}},{bidder:"yandex",params:{impId:3,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],portrait_high:[{bidder:"cpmstar",params:{placementId:87339}},{bidder:"between",params:{s:4711727}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"pubmatic",params:{adSlot:"5337830",publisherId:"161759"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1872330,formatId:126089}},{bidder:"yandex",params:{impId:4,pageId:3907938}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}]}}},dsail:{catalog:{desktop:[{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5447203"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1891309,formatId:125929}},{bidder:"between",params:{s:4718358,cur:"EUR"}},{bidder:"cpmstar",params:{placementId:86544}},{bidder:"yandex",params:{impId:7,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],mobile:[{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5447198"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1891309,formatId:125924}},{bidder:"between",params:{s:4718363,cur:"EUR"}},{bidder:"cpmstar",params:{placementId:86543}},{bidder:"yandex",params:{impId:8,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}]},interstitial:{desktop:s,mobile:s},sticky:{desktop:{sidebar_main:[{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5447206"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1891309,formatId:126086}},{bidder:"between",params:{s:4718360,cur:"EUR"}},{bidder:"cpmstar",params:{placementId:87419}},{bidder:"yandex",params:{impId:5,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],sidebar_small:[{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5447207"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1891309,formatId:126087}},{bidder:"between",params:{s:4718361,cur:"EUR"}},{bidder:"cpmstar",params:{placementId:87420}},{bidder:"yandex",params:{impId:6,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}]},mobile:{landscape_bottom:[{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5447200"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1891309,formatId:126096}},{bidder:"between",params:{s:4718355,cur:"EUR"}},{bidder:"cpmstar",params:{placementId:87339}},{bidder:"yandex",params:{impId:2,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],portrait:[{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5447201"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1891309,formatId:126097}},{bidder:"between",params:{s:4718356,cur:"EUR"}},{bidder:"cpmstar",params:{placementId:87339}},{bidder:"yandex",params:{impId:3,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}],portrait_high:[{bidder:"pubmatic",params:{publisherId:"161759",adSlot:"5447202"}},{bidder:"rtbhouse",params:{publisherId:"v4GnkHMXFvfW0XWFA4bn",region:"prebid-eu"}},{bidder:"smartadserver",params:{domain:"https://prg.smartadserver.com",networkId:4170,siteId:614659,pageId:1891309,formatId:126089}},{bidder:"between",params:{s:4718357,cur:"EUR"}},{bidder:"cpmstar",params:{placementId:87339}},{bidder:"yandex",params:{impId:4,pageId:3907938}},{bidder:"smilewanted",params:{zoneId:"d-sail.com_hb_display"}},{bidder:"onetag",params:{pubId:"7f3b16e7fd55b5a"}}]}}}}}},59886:(e,t,a)=>{a.d(t,{F7:()=>l,GG:()=>g,Hf:()=>u,Vc:()=>h,XI:()=>m,XO:()=>c,ZV:()=>p,cy:()=>d,kw:()=>v,wz:()=>o});var r=a(38096),s=a(25562),n=a(42873);const o={adServerCurrency:"EUR",conversionRateFile:`${"undefined"!=typeof window&&(null==(i=window.appData)?void 0:i.cdnUrl)?window.appData.cdnUrl:"https://yastatic.net/s3"}/games-static/static-data/prebid/currency-file@1/latest.json`,defaultRates:{EUR:{EUR:1,USD:1.1},USD:{EUR:.9,USD:1}}};var i;const l={buckets:[{increment:.01,max:3,precision:2},{increment:.1,max:10},{increment:.2,max:50}]},d={gdpr:{actionTimeout:1e4,cmpApi:"iab",defaultGdprScope:!0,rules:[{enforcePurpose:!0,enforceVendor:!0,purpose:"basicAds",vendorExceptions:["between","cpmstar","pubmatic","rtbhouse","smartadserver","yandex","pubrise"]}],timeout:5e3},usp:{timeout:100}};var c=(e=>(e.EMPTY_SLOT="Google slot event is empty",e.INSTREAM_EMPTY="Instream response is empty",e.NO_SLOT="googletag couldn't create gptSlot",e))(c||{});const h=(e,t,a)=>{let o=(0,r.getDomainConfig)().adv.bidsServiceName;const i=n.U[o][t].interstitial[e];return{mediaTypes:{banner:{sizes:(0,s.iv)(a)}},bids:i}},u={},p=5e3,m=8e3,v=1e3,g={aws:"https://statics.games-storage-aws.yandex.net/statics/prebid/prebid8.10.0.js",yastatic:"https://yastatic.net/s3/games-static/static-data/prebid/prebid8.52.2.js"}},58098:(e,t,a)=>{a.d(t,{BA:()=>y,OH:()=>S,cQ:()=>f});var r=a(46210),s=a(36529),n=a(55231),o=a(59886),i=a(34967),l=a(68199),d=a(37705),c=a(93298),h=a(13377),u=a(15771),p=a(90380),m=a(49659),v=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const g=(0,c.M$)("PrebidUtils",c.XG.Adv,{background:"#0c6c09",text:"#ccc"});function f({cdnUrl:e,flags:t,fullUrl:a,options:{isSlowCountry:s}}){const n=(0,r.xA)(a);if(n)return(0,r.Xv)(n);if((0,u.jX)(t))return o.GG.aws;let i=o.GG.yastatic;const d=(0,u.di)(t,p.Z.advPrebidScript);if(d){if(/^https:\/\//.test(d))return d;i=i.replace(/(?:\d+\.){1,2}\d+(\.js)$/,`${d}$1`)}return(0,l.R)(s)&&e&&(i=i.replace("https://yastatic.net/s3",e)),i}const y=e=>v(void 0,null,(function*(){return new Promise((t=>{window.pbjs=window.pbjs||{que:[]};const{pbjs:a}=window;a.que.push((()=>v(void 0,null,(function*(){t(yield e(a))}))))}))}));function b(){const e=new URL((0,m.e)().href);return e.hostname=e.hostname.replace(/^.+\.([a-z0-9]+(\.com)?\.[a-z]+)$/,"$1"),e.search="",e.hash="",e.href}const w=5e3;function k(){let e=!1;return Promise.race([y((t=>v(this,null,(function*(){g("Set prebid config"),e=!0,t.setConfig({consentManagement:o.cy,currency:o.wz,debug:c.HQ,deviceAccess:!0,enableTIDs:!0,enableSendAllBids:!0,fetchBids:!0,pageUrl:b(),priceGranularity:o.F7,targetingControls:{allowTargetingKeys:["BIDDER","AD_ID","PRICE_BUCKET","SIZE","DEAL","SOURCE","FORMAT","UUID","CACHE_ID","CACHE_HOST","ADOMAIN","ACAT","CRID","DSP"],allowSendAllBidsTargetingKeys:["BIDDER","AD_ID","PRICE_BUCKET","SIZE","DEAL","SOURCE","FORMAT","UUID","CACHE_ID","CACHE_HOST","ADOMAIN","ACAT","CRID","DSP"]},transmitTid:!0,userSync:n.k_}),t.setBidderConfig({bidders:["adform"],config:{schain:{validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:"adform.com",sid:"3213",hp:1},{asi:"d-sail.com",sid:"ds0683",hp:1}]}}}},!0),function(e){const t=[],a=(0,i.NR)();a&&e.installedModules.includes("yandexAnalyticsAdapter")&&t.push({provider:"yandex",options:{counters:[a]}}),t.length&&e.enableAnalytics(t)}(t),c.HQ&&function(e){e.onEvent("auctionInit",(()=>{g("Auction init")})),e.onEvent("auctionEnd",(t=>{const a=t.bidsReceived.length?"success":"empty",r="success"===a?e.getHighestCpmBids().map((e=>({ad:e.ad,adunit:e.adUnitCode,adId:e.adId,bidder:e.bidder,cpm:e.cpm,size:e.size,time:e.timeToRespond}))):void 0;g(`Auction end with status = ${a}; result = ${JSON.stringify(r,null,"\t")}`)})),e.onEvent("bidderError",(function(e){var t;const{bidderRequest:a}=e,r=null==(t=a.bids[0])?void 0:t.adUnitCode;g(`Bidder error code = ${a.bidderCode}; adUnitCode = ${r}`)})),e.onEvent("noBid",(function(e){const{adUnitCode:t}=e;g(`No bid for adUnitCode = ${t}`)})),e.onEvent("adRenderFailed",(e=>{g("adRenderFailed, bidder =",e.bid.bidder)})),e.onEvent("adRenderSucceeded",(e=>{g("adRenderSucceeded, bidder =",e.bid.bidder)}))}(t)})))),(0,s.D)(w).then((()=>{e||(g("Config was not set."),(0,d.H)({block:h.W.ADV},new Error("[prebid_tgo] Config was not set (canceled by timeout)")))}))])}let E;function S(){return E||(E=new Promise((e=>{k().finally((()=>{E=Promise.resolve(),e()}))}))),E}},78569:(e,t,a)=>{a.d(t,{H:()=>s});var r=a(37705);function s({adUnitCodes:e,advTag:t,bids:a}){for(let s of e){const e=null==a?void 0:a[s];if(e){const a=e.bids[0];(0,r.Kz)("prebid_auction","",{additional:{tag:t,bidder:a.bidder,currency:a.currency,originalCurrency:a.originalCurrency,size:a.size}})}else(0,r.Kz)("prebid_auction","",{additional:{tag:t,bidder:"none"}})}}},32054:(e,t,a)=>{a.d(t,{CU:()=>l,ZY:()=>i,pr:()=>d});var r=a(41811),s=a(26213),n=a(49659);function o(e){return"true"===new URLSearchParams(e).get("info")}function i({clid:e,flags:t,isConfirmedGuard:a,location:i}){return!t.skip_guard&&e!==r.x2&&(!(l=i.search)||"1"!==new URLSearchParams(l).get(s.U))&&(!!function(e){return e?o(e.hash.slice(1))||o(e.search):"undefined"!=typeof window&&o((0,n.e)().search)}(i)||!a);var l}function l({gameData:e,userRegionData:t}){return!(null==t?void 0:t.isForeign)&&(!!(e&&e.extraFeatures.purchases&&e.extraFeatures.hasProducts)&&!(null==e?void 0:e.askedPurchasesInfoPermission))}function d({gameData:e,userRegionData:t}){return!l({gameData:e,userRegionData:t})&&Boolean(null==e?void 0:e.guard)}},3436:(e,t,a)=>{let r;a.d(t,{R:()=>r});try{new EventTarget,r=EventTarget}catch(e){class t{constructor(){this.eventListeners={}}addEventListener(e,t){this.eventListeners[e]=this.eventListeners[e]||[],this.eventListeners[e].push(t)}removeEventListener(e,t){this.eventListeners[e]&&(this.eventListeners[e]=this.eventListeners[e].filter((e=>e!==t)))}dispatchEvent(e){const t=e.type;for(const a of this.eventListeners[t]||[]){const t="handleEvent"in a?a.handleEvent:a;try{t.apply(a,[e])}catch(e){}}return!e.defaultPrevented}}r=t}},73285:(e,t,a)=>{function r(e){if(!e)return"";const t={"&amp;":"&","&#39;":"'","&quot;":'"'};return e.replace(/&amp;|&#39;|&quot;/g,(e=>t[e]))}a.d(t,{T:()=>r})},92477:(e,t,a)=>{a.d(t,{T:()=>s});var r=a(38699);const s=e=>"kz"===e?"kz":r.u5.includes(e)?"com":"ru"},50206:(e,t,a)=>{a.d(t,{l:()=>l});var r=a(38096),s=a(17780),n=a(35090),o=a(68108),i=a(41811);function l(e){const{url:t,source:a,lang:l,location:d,context:c}=e,{hidePaymentsAndCurrency:h,isPWA:u,pfid:p,referrer:m,tld:v,baseUrl:g}=c,f=new URLSearchParams(d.search),y=a||{};h&&(y[i.o1]="1"),u&&(y[i.cB]="1"),(0,o.sD)(m)&&(y[i.Vw]=m),p&&(y[i.om]=p);const b=["exit-button"];for(let e of f.keys()){const t=f.get(e);b.includes(e)&&"string"==typeof t&&(y[e]=t)}const w=(0,n.Yk)(d.search,y);return(0,s.E)({baseUrl:g,path:w?`${t}${w}`:t,lang:l,languages:(0,r.getDomainConfig)().languages,tld:v})}},41318:(e,t,a)=>{function r(e,t,a){if(!t)return a("guard.player.permissions.description");const r=a("payments.currency.genitive").toLowerCase();return a(e?"guard.player.permissions.purchasesInfo.description.auth.withCurrencyName":"guard.player.permissions.purchasesInfo.description.notAuth.withCurrencyName",{params:{currencyName:r}})}a.d(t,{f:()=>r})},20613:(e,t,a)=>{a.d(t,{S:()=>s});var r=a(41811);const s=()=>{var e;if("undefined"!=typeof window)try{const t=(null==(e=window.appData.location)?void 0:e.entryQuery)||{};if(t[r.Uq])return JSON.parse(decodeURIComponent(t[r.Uq]))}catch(e){}return{}}},37341:(e,t,a)=>{a.d(t,{ff:()=>T,TI:()=>P,jT:()=>C});var r=a(81517),s=a(10719),n=a(87363),o=a(2203);const i=e=>({payload:e,type:o.x8L}),l=e=>({payload:e,type:o.pR1});var d=a(5825),c=a(97808),h=a(41576),u=a(93298),p=Object.defineProperty,m=Object.defineProperties,v=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,b=(e,t,a)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,w=(e,t)=>{for(var a in t||(t={}))f.call(t,a)&&b(e,a,t[a]);if(g)for(var a of g(t))y.call(t,a)&&b(e,a,t[a]);return e};const k=Date.now(),E=(0,h.r)(),S=(0,u.M$)("GameControl | Parent frame",u.XG.Dev,{background:"#355c7d",text:"#ffffff"}),A=e=>JSON.stringify(e,((e,t)=>t instanceof Set?[...t]:t),2),I=(e,t)=>{var a,r,s;const n={initiator:t,timeFromInit:Date.now()-k};return null==(s=window.clickdaemonLog)||s.call(window,e,w({app_id:E,timestamp:Date.now(),sum_time:Number(null==(r=null==(a=null==performance?void 0:performance.now)?void 0:a.call(performance))?void 0:r.toFixed(0))||n.timeFromInit},n)),n},P=e=>(0,d.C)((({gameControl:t})=>e(t))),T=({reason:e}={reason:"other"})=>{const t=(0,d.T)(),a=P((e=>e)),h=(0,n.useRef)(a);h.current=a;const u=(0,n.useCallback)(((e,a,s,n="other")=>{const o=h.current,d=o.pauseReasons;S(`[GAME SWITCH]: gameEvent {${e}}, reason {${n}}, gameplay event {${a}}`),S("state:\n",A(o));return!!s(d,n)&&(o.current.gameEvent===e?(S(`IGNORING repeated {${e}} event with the same {${n}} reason`),!1):(o.current.gameplayEvent!==a&&c.Z.postToChild((0,r.$J)(a,I(a,"parent"))),t(l({gameplayEvent:o.current.gameplayEvent})),t(i({gameEvent:e,gameplayEvent:a})),c.Z.postToChild((0,r.ru)(e)),!0))}),[t]);return(0,n.useMemo)((()=>({gamePause:(a=e)=>u(s.Wu.Pause,s.BE.Stop,((e,a)=>{const r=0===e.size;return t({payload:a,type:o.Cm6}),r&&S(`{${a}} is the first pause reason. Pausing the game and sending the events.`),r}),a),gameResume:(a=e)=>u(s.Wu.Resume,h.current.prev.gameplayEvent,((e,a)=>{const r=1===e.size&&e.has(a);return t({payload:a,type:o.nx9}),r&&S(`{${a}} is the last pause reason. Resuming the game and sending the events.`),r}),a)})),[e,t,u])},C=()=>{const e=(0,d.T)(),t=P((e=>e)),a=(0,n.useRef)(t);a.current=t;const h=(0,n.useCallback)((t=>{const n=a.current;S(`[ON EXTERNAL MESSAGE]: type {${s.Tn}}, gameplay event {${t}}`),S("state:\n",A(n));const{current:d}=n;if(d.gameEvent===s.Wu.Pause)return S(`IGNORING {${t}} due to game is on pause`),!1;if(d.gameplayEvent===t)return S(`IGNORING repeated {${t}} action`),!1;if(t!==s.BE.Start&&t!==s.BE.Stop)return S(`UNKNOWN {${t}} action`),!1;const h=I(t,"child");var u;return e(l({gameplayEvent:d.gameplayEvent})),e(i((u=w({},d),m(u,v({gameplayEvent:t}))))),e({type:o.Ycx}),c.Z.postToChild((0,r.$J)(t,h)),!0}),[e]);return(0,n.useMemo)((()=>({gameplaySwitch:h})),[h])}},61224:(e,t,a)=>{a.d(t,{$g:()=>i,GH:()=>l,VX:()=>h,kH:()=>c});var r=a(6893),s=a(41811),n=a(15771);const o=3e3;function i(e){return Date.now()-e>o}function l(e){return e.referrerClid===s.x2&&(0,r.Gg)(e.userAgent)}let d;const c=e=>{var t;return!!l(e)||(void 0===d&&(d=Date.now()),!!function(e){return!!(0,n.FV)(e.flags)&&e.referrerClid===s.Tn}(e)&&("function"==typeof(null==(t=window.PARTNERS_KIT)?void 0:t.isAdsEnabled)?!1===window.PARTNERS_KIT.isAdsEnabled():!i(d)&&void 0))},h=e=>!1!==c(e)},79409:(e,t,a)=>{function r(e,t){return Boolean(0===(null==t?void 0:t.length)||(null==t?void 0:t.some((t=>t===e))))}a.d(t,{w:()=>r})},81442:(e,t,a)=>{a.d(t,{r:()=>s});var r=a(58432);const s=()=>"object"==typeof window&&"2735850"===(0,r.KT)()},11744:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(50042),s=a(37705),n=a(13377);const o=function(){const e=(0,r.Au)(),t=(0,r.H$)(),a=(0,r.Um)(),o=(0,r.q7)();try{if(window.yandex&&window.yandex.app&&"function"==typeof PaymentRequest&&t&&(e||o&&a))return!0}catch(e){(0,s.H)({block:n.W.PAYMENT},e)}return!1}},21234:(e,t,a)=>{a.d(t,{i:()=>s});var r=a(26256);function s(){if("undefined"==typeof document||!document.body)return;const{request:{uatraits:e}}=window.appData;if((null==e?void 0:e.OSFamily)!==r.k.IOS)return;const t=document.createElement("input");t.setAttribute("type","text"),t.setAttribute("style","position: absolute; opacity: 0; height: 0; font-size: 16px;"),document.body.prepend(t),t.focus(),t.blur(),t.remove()}},51290:(e,t,a)=>{a.d(t,{U:()=>P});var r=a(98816),s=a(22823),n=a(34711),o=a(7991),i=a(20613);const l=/testing/i,d=e=>l.test(e.adv_block_id);var c=a(97553),h=a(37705),u=a(93298),p=a(13377),m=a(99725),v=Object.defineProperty,g=Object.defineProperties,f=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,k=(e,t,a)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,E=(e,t)=>{for(var a in t||(t={}))b.call(t,a)&&k(e,a,t[a]);if(y)for(var a of y(t))w.call(t,a)&&k(e,a,t[a]);return e};const S=(0,u.M$)("log-adv",u.XG.Adv),A=Date.now(),I={[r.$H.ANCHOR]:0,[r.$H.CATALOG]:0,[r.$H.FEED_GRID]:0,[r.$H.INTERSTITIAL]:0,[r.$H.REWARDED]:0,[r.$H.STICKY]:0};class P{constructor(e){this.startTime=-1,this.requestStartTime=-1,this.showStartTime=-1,this.previousEventNames=[],this.additional=Object.assign(this.getGeneralEventParams(),e)}get adReqId(){return this.additional.ad_req_id}tag(e){return this.additional.tag=e,this}bindRequest(e){this.additional.ad_req_id=e.additional.ad_req_id}copy(e={}){const t=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return t.previousEventNames=[...this.previousEventNames],t.additional=E(E({},this.additional),e),t}getGeneralEventParams(){const e={},t=(0,n.X)();t&&(e.clid=String(t));const a=(0,o.W5)();a&&(e.gclid=String(a));const r=(0,s.L)();if(r){const{key:t,value:a}=r;e[t]=a}return e}logError(e,t={}){const a=new Error(e);a.additional=t,(0,h.H)({prefix:"Adv ClickDaemon error",block:p.W.ADV,additional:t},a)}checkOrder(e,t){this.previousEventNames.includes(e)||this.logError(`No precending ${e} event call before ${t}`)}sendLog(e,t={}){var a,r,s,n;s=E(E({},this.additional),t),n={documentHidden:"hidden"===document.visibilityState},(t=g(s,f(n))).exclude_from_alerts=d(t),-1!==this.startTime&&(t.timeshift=Date.now()-this.startTime||-1),(null==(a=t.provider)?void 0:a.includes("_block"))&&(t.provider=t.provider.replace("_block","")),t.provider&&!t.advtype&&(t.advtype=t.provider),this.previousEventNames.push(e),u.HQ&&S("clickdaemon",`adv2_${e}`,t),null==(r=window.clickdaemonLog)||r.call(window,`adv_${e}`,t)}hadEvent(e){return this.previousEventNames.includes(e)}tryOpen({provider:e,reason:t}){this.additional.ad_seq_id=(0,m.w)(),this.additional.reason=t,e&&(this.additional.provider=e);const a={pageShow:++I[this.additional.tag],pageStartTime:Date.now()-A};this.sendLog(c.zL.TRY_OPEN,a),this.startTime=Date.now()}noAdv(){this.checkOrder(c.zL.TRY_OPEN,c.zL.NO_ADV),this.sendLog(c.zL.NO_ADV)}skip(e){this.checkOrder(c.zL.TRY_OPEN,c.zL.SKIP),this.sendLog(c.zL.SKIP,{reason:e})}rateLimited(e){this.checkOrder(c.zL.TRY_OPEN,c.zL.RATE_LIMITED),this.sendLog(c.zL.RATE_LIMITED,{reason:e})}demand({advBlockId:e,depth:t,provider:a,reason:r}){this.checkOrder(c.zL.TRY_OPEN,c.zL.DEMAND),this.additional.adv_block_id=e,this.additional.depth=null!=t?t:0,a&&(this.additional.provider=a),r&&(this.additional.reason=r),this.sendLog(c.zL.DEMAND)}waterfall({advBlockId:e,depth:t,provider:a,reason:r,tag:s}){this.checkOrder(c.zL.DEMAND,c.zL.WATERFALL),s&&(this.additional.tag=s),this.additional.provider=a,this.additional.adv_block_id=e,this.additional.depth=t,this.additional.reason=r,this.sendLog(c.zL.WATERFALL)}request(e){e||this.checkOrder(c.zL.DEMAND,c.zL.REQUEST),this.requestStartTime=Date.now(),e&&("advBlockId"in e&&(this.additional.adv_block_id=e.advBlockId),"reason"in e&&(this.additional.reason=e.reason),"provider"in e&&(this.additional.provider=e.provider),"retry"in e&&e.retry&&(this.additional.retry=e.retry)),this.additional.ad_req_id=e&&"adReqId"in e?e.adReqId:(0,m.w)();const t={};void 0!==this.highestCpmBidder&&(t.highestCpmBidder=this.highestCpmBidder),this.sendLog(c.zL.REQUEST,t)}response(){this.checkOrder(c.zL.REQUEST,c.zL.RESPONSE);const e={reason:"success",time_to_close:-1===this.requestStartTime?-1:Date.now()-this.requestStartTime};void 0!==this.highestCpmBidder&&(e.highestCpmBidder=this.highestCpmBidder),this.sendLog(c.zL.RESPONSE,e)}responseEmpty(){this.checkOrder(c.zL.REQUEST,c.zL.RESPONSE_EMPTY);const e={time_to_close:-1===this.requestStartTime?-1:Date.now()-this.requestStartTime};void 0!==this.highestCpmBidder&&(e.highestCpmBidder=this.highestCpmBidder),this.sendLog(c.zL.RESPONSE_EMPTY,e)}show(){this.checkOrder(c.zL.DEMAND,c.zL.SHOW),this.showStartTime=Date.now();const e=(0,i.S)(),t={},a=this.additional.rtx_reqid||e.rtx_reqid,r=this.additional.request_id||e.request_id;void 0!==a&&(t.rtx_reqid=a),void 0!==r&&(t.request_id=r),this.sendLog(c.zL.SHOW,t)}rewarded(){this.checkOrder(c.zL.SHOW,c.zL.REWARDED),this.sendLog(c.zL.REWARDED)}close(){this.checkOrder(c.zL.SHOW,c.zL.CLOSE),this.sendLog(c.zL.CLOSE,{time_to_close:-1===this.showStartTime?-1:Date.now()-this.showStartTime})}noContent(){this.checkOrder(c.zL.RESPONSE_EMPTY,c.zL.NO_CONTENT),this.sendLog(c.zL.NO_CONTENT)}fail(e){this.sendLog(c.zL.FAIL,{reason:String(e)})}error(e){this.sendLog(c.zL.ERROR,{reason:String(e)})}}},97553:(e,t,a)=>{a.d(t,{Ud:()=>s,p_:()=>r,zL:()=>n});a(98816);var r=(e=>(e.ONSPOT="onspot",e.PRELOAD="preload",e.PRELOAD_WATERFALL="preload_waterfall",e.REFRESH="refresh",e.START_FULLSCREEN="start_fullscreen",e.WATERFALL="waterfall",e))(r||{}),s=(e=>(e.EMPTY="empty",e.ERROR="error",e.NOT_IMPL="not_impl",e.SUCCESS="success",e))(s||{}),n=(e=>(e.CLOSE="close",e.DEMAND="demand",e.ERROR="error",e.FAIL="fail",e.NO_ADV="no_adv",e.NO_CONTENT="no_content",e.RATE_LIMITED="rate_limited",e.REQUEST="request",e.RERENDER="rerender",e.RESPONSE="response",e.RESPONSE_EMPTY="response_empty",e.REWARDED="rewarded",e.SHOW="show",e.SKIP="skip",e.TRY_OPEN="try_open",e.WATERFALL="waterfall",e))(n||{})},27609:(e,t,a)=>{function r(...e){return t=>{for(const a of e)"function"==typeof a?a(t):null!=a&&(a.current=t)}}a.d(t,{l:()=>r})},72538:(e,t,a)=>{a.d(t,{Z:()=>f});var r=a(93298),s=Object.defineProperty,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(e,t,a)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,d=(e,t)=>{for(var a in t||(t={}))o.call(t,a)&&l(e,a,t[a]);if(n)for(var a of n(t))i.call(t,a)&&l(e,a,t[a]);return e};a(91844);const c=["height","width"],h=["top","left","right","bottom"],u=[...c,...h],p="game",m=[".game",".play-guard-dialog",".merge-conflicts",".guard"],v=(0,r.M$)("ResizeBlockManager",r.XG.Dev,{background:"#c7aa00"}),g="ResizeBlockManager";const f=new class{constructor(){if(this.rootElements=[],this.blocks={},this.resizeBlocks={},this.resizes={},this.resizeListeners={},this.getObserverCallback=(e,t,a)=>(r,s)=>{const n=e.querySelector(t);n&&(s.disconnect(),a(n))},"undefined"==typeof window)return;let e;try{window.parent[g],e=window.parent}catch(t){e=window}if(e[g]){const t=e[g];t.rootElements.includes(window.document.body)||(t.rootElements.push(window.document.body),t.updateBlocks(),t.applyResizeBlocks("new rootElement"))}else e[g]=this,this.rootElements=[window.document.body];return e[g]}addResizeBlockListener(e,t,a=!0){var r;v("addListener",e),this.resizeListeners[e]||(this.resizeListeners[e]=[]);const s=this.resizeListeners[e];if(-1===s.indexOf(t)){if(s.push(t),a){const t=e===p?".game":e;this.resizeBlocks[t]&&this.callbackBlock(e,null!=(r=this.resizeBlocks[t])?r:{})}}else v("try to add existing listener, ",e)}removeResizeBlockListener(e,t){if(v("removeListener",e),!this.resizeListeners[e])return;const a=this.resizeListeners[e],r=a.indexOf(t);-1!==r&&a.splice(r,1)}addResizeBlock(e,t){v("addResize",e,t),this.resizes[e]=t,this.calcResizeBlocks(),this.updateBlocks(),this.applyResizeBlocks("addResizeBlock")}removeResizeBlock(e){v("removeResize",e),this.resizes[e]&&(delete this.resizes[e],this.calcResizeBlocks(),this.updateBlocks(),this.applyResizeBlocks("removeResizeBlock"))}findHTMLElement(e){let t=null;for(const a of this.rootElements)if(t=a.querySelector(e),t)break;if(t)return void(this.blocks[e]=t);v("create MutationObserver for ",e);const a=this.rootElements.map((t=>{const a=new MutationObserver(this.getObserverCallback(t,e,(t=>{this.blocks[e]=t,this.applyResizeBlocks("block found "+e)})));return a.observe(t,{childList:!0}),a}));this.blocks[e]=a}updateBlocks(){for(const e in this.blocks){if(void 0!==this.resizeBlocks[e])continue;const t=this.blocks[e];t instanceof Array?(t.forEach((e=>{e.disconnect()})),delete this.blocks[e]):(this.clearResizeBlock(e,this.blocks[e]),delete this.blocks[e])}for(const e in this.resizeBlocks)void 0===this.blocks[e]&&this.findHTMLElement(e)}calcResizeBlocks(){const e={};for(const t in this.resizes){const a=this.resizes[t];for(const t in a)if(a[t])if(t===p)for(const r of m)this.calcResizeParam(e,a[t],r);else this.calcResizeParam(e,a[t],t)}this.resizeBlocks=e}calcResizeParam(e,t,a){var r,s;let n=e[a];n||(n={},e[a]=n);for(const e of u)n[e]=(null!=(r=n[e])?r:0)+(null!=(s=t[e])?s:0)}applyResizeBlocks(e="unknown"){v(`applyResize (${e})`,this.resizeBlocks,this.blocks);for(const e in this.resizeBlocks){const t=this.blocks[e];if(!t||Array.isArray(t))continue;const a=this.resizeBlocks[e];for(const e of h)(null==a?void 0:a[e])?t.style[e]=a[e]+"px":t.style.removeProperty(e);for(const e of c)(null==a?void 0:a[e])?t.style[e]=`calc(100% + ${a[e]}px)`:t.style.removeProperty(e);this.callbackBlock(e,null!=a?a:{})}}clearResizeBlock(e,t){for(const e of u)t.style.removeProperty(e);this.callbackBlock(e,{})}callbackBlock(e,t){var a;if(".game"===e&&this.callbackBlock(p,t),null==(a=this.resizeListeners[e])?void 0:a.length)for(const a of this.resizeListeners[e])a(e,d({top:0,left:0,right:0,bottom:0,width:0,height:0},t))}removeDefaultClass(e){const t=window.document.body;Array.from(t.classList).forEach((a=>{e.forEach((e=>{a.startsWith(e)&&t.classList.remove(a)}))}))}}},909:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(97808),s=a(91521),n=a(48810),o=a(41811);function i(){(0,n.Ur)(s.Z,"true"),r.Z.post({type:"payments",action:"platform-purchase-start",data:{paymentsConfig:{},purchaseConfig:{id:o.U0.NO_ADS_ONE_DAY,developerPayload:""}}})}},48136:(e,t,a)=>{a.d(t,{V:()=>o,W:()=>n});var r=a(77901),s=a(15771);function n(e){return/^https:\/\/(.+\.){0,7}xsolla\.com$/.test(e)}function o(e,t,a,n){return a&&"RUB"!==a||n||!(0,s.SG)(e)&&!(0,r.VP)()&&"ru"!==t}},81941:(e,t,a)=>{a.d(t,{i:()=>d});var r=a(37705),s=a(41811),n=a(93298),o=a(13377),i=(e,t,a)=>new Promise(((r,s)=>{var n=e=>{try{i(a.next(e))}catch(e){s(e)}},o=e=>{try{i(a.throw(e))}catch(e){s(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);i((a=a.apply(e,t)).next())}));const l=(0,n.M$)("AppMetrica",n.XG.Dev);function d(e,t){return i(this,arguments,(function*({payCurrency:e,price:t},a){if("function"==typeof(null==a?void 0:a.reportRevenue)){const n=parseFloat(t.toFixed(2));try{yield a.reportRevenue({revenue:n,currency:e,adjustToken:s.lG}),l("sendReportRevenueOnSuccess",{revenue:n,currency:e,adjustToken:s.lG})}catch(e){(0,r.H)({block:o.W.PAYMENT,message:`reportRevenue error: ${e.message}`},e)}}}))}},3347:(e,t,a)=>{a.d(t,{T:()=>n,s:()=>o});var r=a(41811);const s={},n=(e,t="RUB",a="ru")=>{const r=`${t}-${a}`;try{return s[r]||(s[r]=new Intl.NumberFormat(a,{currency:t,maximumFractionDigits:2,minimumFractionDigits:0,style:"currency",currencyDisplay:"narrowSymbol"})),s[r].format(e)}catch(a){return`${e} ${t}`}},o=(e,t)=>e*t/r.Uo},10592:(e,t,a)=>{a.d(t,{I:()=>l,TJ:()=>n,Ur:()=>s,YC:()=>i,mv:()=>r,ob:()=>o,qY:()=>d});var r=(e=>(e.FAILURE="failure",e.SUCCESS="success",e.WAITING="waiting",e))(r||{}),s=(e=>(e[e.OPTIONS=0]="OPTIONS",e[e.PAYMENT=1]="PAYMENT",e))(s||{}),n=(e=>(e.CUSTOM="custom",e.PRODUCT="product",e))(n||{}),o=(e=>(e[e.PSP=5]="PSP",e[e.TRUST=1]="TRUST",e[e.XSOLLA=2]="XSOLLA",e))(o||{}),i=(e=>(e.PLAY="play",e.PROFILE="profile",e.PURCHASE="purchase",e))(i||{}),l=(e=>(e.BALANCE="balance",e.NOADS="no-ads",e.PLATFORM_PURCHASE="platform-purchase",e.PURCHASE="purchase",e))(l||{}),d=(e=>(e.TRUST="trust",e.XSOLLA="xsolla",e))(d||{})},65562:(e,t,a)=>{a.d(t,{G:()=>s,g:()=>n});var r=a(26256);const s=e=>Boolean((null==e?void 0:e.BrowserName)&&/Safari/i.test(e.BrowserName)),n=e=>(null==e?void 0:e.OSFamily)===r.k.IOS},56213:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});const r={label:"checkbox-desktop-critical-module__label--GXRye"}},78989:()=>{},89568:()=>{},81290:()=>{},33777:(e,t,a)=>{a.r(t)},57647:(e,t,a)=>{a.r(t)},39510:(e,t,a)=>{a.r(t)},75801:(e,t,a)=>{a.r(t)},523:(e,t,a)=>{a.r(t)},91844:(e,t,a)=>{a.r(t)}}]);
//# sourceMappingURL=https://s3.mdst.yandex.net/games/source-maps/_/build/client/game/desktop/playhop/GameBody.component.async.1c271c5ab65cc66f3812.js.map