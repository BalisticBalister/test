"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9359],{37170:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(87363),s=a.n(r),i=a(86976);const n=(0,i.Z)({resolved:{},chunkName:()=>"PlaySimilarGames.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>Promise.all([a.e(6122),a.e(6855)]).then(a.bind(a,96321)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 96321}},{}),o=n},79837:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var r=a(87363),s=a.n(r),i=a(53726),n=a(45331),o=a(78740),l=a(4230),c=a(4463),m=a(40184),u=a(15771);var p=a(37170),d=a(69977),f=a(85467),g=a(33119),y=a(5825),h=a(22355),b=a(97808),v=a(28705);var O=a(17061),_=a(47484),P=Object.defineProperty,E=Object.defineProperties,A=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,I=(e,t,a)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const N=({appId:e,inGamePage:t=!1,isBlackFadeout:a})=>{var P;const{isGamesApp:N,isWorldWide:D,lang:j,pfid:C,platform:M,playPageData:F,isSearchCrawler:k=!1,abt:{flags:L}}=(0,r.useContext)(n.Z),[Z,B]=(0,r.useState)(!1),[T,q]=(0,r.useState)(!1),V=(0,i.I0)(),H=(0,f.T)(),U=(0,d.f)(),x=(0,y.C)((e=>e.similarGames||{})),J=(0,y.C)(h.b),R=(0,y.C)((e=>e.isDev)),K=(0,y.C)((e=>e.similarGamesLoading)),W=(0,r.useMemo)((()=>k||t),[k,t]),Q=e||(null==(P=F.gameInfo)?void 0:P.appId),X=((e,t,a)=>{const s=(0,c.TH)(),[i]=(0,r.useState)((()=>({queryParams:s.search.slice(1),hash:s.hash}))),{isDistGame:n,abt:{flags:o}}=(0,m.b)(),p=(0,u.tQ)(o),d=(0,u.Fe)(o);return(0,r.useMemo)((()=>(0,l._Z)({appId:t,hasMounted:a,inGamePage:e,isDistGame:n,locationHash:i.hash,locationSearch:i.queryParams,showExceptNavigationFromPlayedGames:p,showOnRedirectFromCatalog:d})),[t,a,e,n,i,p,d])})(k||t,Q,U),$=(0,r.useMemo)((()=>!K&&void 0===x[Number(Q)]),[x,Q,K]);(0,r.useEffect)((()=>{(0,_.EE)((()=>{B(!0)}),t?3e3:void 0)}),[t]),(0,r.useEffect)((()=>{if(Z&&X&&$){let t=o.PS;if(R){const e=parseInt((0,O.V)(o.Vs)||"");e>0&&(t=e)}V((0,g.w1)((e=((e,t)=>{for(var a in t||(t={}))S.call(t,a)&&I(e,a,t[a]);if(w)for(var a of w(t))G.call(t,a)&&I(e,a,t[a]);return e})({adjustGamesCount:l.kr.bind(null,t),appId:Number(Q),int:D,lang:j},(0,u.B0)(L)?{pageType:"game"}:{}),E(e,A({pfid:C,platform:M,standalone:N,gamesCount:t})))))}var e}),[Q,V,X,L,R,N,D,j,C,M,Z,$]);const z=(0,r.useCallback)(((e,t)=>{const{action:a}=e.data;"on-show"===a?q((0,v.Ab)(L)):"on-hide"===a&&q(!1)}),[q,L]);(0,r.useEffect)((()=>(b.Z.onInternalMessage("sticky-manager",z),()=>{b.Z.offInternalMessage("sticky-manager",z)})),[z]);const Y=(0,r.useMemo)((()=>J||U&&Z&&!K),[U,J,K,Z]);return!X||t&&!W||T?((0,l.ii)(),null):k&&t&&X&&!(e=>{if(null==e)return!0;if(Array.isArray(e)||"string"==typeof e)return!e.length;for(let t in e)if(e.hasOwnProperty(t))return!1;return!0})(x)?s().createElement("section",{className:"game-page__similar"},s().createElement("span",{className:"similar__title"},H("similar.title-in-game-page")),s().createElement(p.Z,{inGamePage:t,isBlackFadeout:a,similarToAppId:Q,visible:!0})):!k&&t?s().createElement("section",{className:"game-page__similar-in-game-page"},s().createElement("span",{className:"similar__title"},H("similar.title-in-game-page")),s().createElement("div",{className:"similar__container"},s().createElement(p.Z,{inGamePage:t,isBlackFadeout:a,similarToAppId:Q,visible:Y}))):s().createElement(p.Z,{inGamePage:t,isBlackFadeout:a,similarToAppId:Q,visible:Y})}},4230:(e,t,a)=>{a.d(t,{_Z:()=>E,ii:()=>A,kr:()=>_,xG:()=>O});var r=a(67748),s=a.n(r),i=a(34711),n=a(35090),o=a(48810),l=a(78740),c=Object.defineProperty,m=Object.defineProperties,u=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,g=(e,t,a)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,y=(e,t)=>{for(var a in t||(t={}))d.call(t,a)&&g(e,a,t[a]);if(p)for(var a of p(t))f.call(t,a)&&g(e,a,t[a]);return e},h=(e,t)=>m(e,u(t));const b=e=>{let t;try{t=JSON.parse(e)}catch(e){t=[]}return Array.isArray(t)?t:[]},v=(e,t)=>{const a=Array.isArray(e)?e:b(e);t&&a.push(t),(0,o.Ur)(l.VM,JSON.stringify(a))};function O(e){const t=(0,o.dq)(l.VM);t.wasError||!t.value?(0,o.Ur)(l.VM,JSON.stringify([e])):v(t.value,e)}function _(e,t){return 0===t.length?t:t.length>e?t=t.slice(0,e):(t.length<e&&(t=[...Array(Math.ceil(e/t.length))].reduce(((e,a,r)=>e.concat(t.map(((e,a)=>h(y({},e),{appID:e.appID+r,title:e.title+` (${r*t.length+a+1})`}))))),[]).slice(0,e)),t)}const P=["played","user_profile_recent_games"];function E({appId:e,hasMounted:t,inGamePage:a,isDistGame:r,locationHash:c,locationSearch:m,showExceptNavigationFromPlayedGames:u,showOnRedirectFromCatalog:p}){if(r)return!1;const d=new URLSearchParams(m);if("distrib"===d.get("utm_source")||d.has("clid"))return!1;if(a)return!0;if(!t)return!0;if((0,i.X)())return!1;if(u){const e=s().parse(c);if(e.pos&&"string"==typeof e.pos)try{if(P.includes(JSON.parse(e.pos).listType))return!1}catch(e){}}else if(!p&&(0,n.Oo)())return!1;const f=(0,o.dq)(l.VM);if(!f.wasError&&f.value){if(b(f.value).includes(e))return!1}return!0}function A(){"undefined"!=typeof document&&document.body.classList.contains("with-similar-games")&&document.body.classList.remove("with-similar-games")}},22355:(e,t,a)=>{a.d(t,{b:()=>r,y:()=>s});const r=e=>e.ui.isFullscreenActive,s=e=>e.ui.isFullscreenEnabled}}]);
//# sourceMappingURL=https://s3.mdst.yandex.net/games/source-maps/_/build/client/game/desktop/playhop/PlaySimilarGamesManager.component.async.857e01fbe5eb31d5054c.js.map